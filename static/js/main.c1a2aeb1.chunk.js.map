{"version":3,"sources":["../../blink-mind/packages/core/lib/main.es.js","../../blink-mind/packages/plugin-simple-text-editor/lib/main.es.js","../../blink-mind/packages/renderer-react/lib/main.es.js","../../blink-mind/packages/plugin-rich-text-editor/lib/main.es.js","../../blink-mind/packages/plugin-json-serializer/lib/main.es.js","../../blink-mind/packages/plugin-theme-selector/lib/main.es.js","../../blink-mind/packages/plugin-topology-diagram/lib/main.es.js","../../blink-mind/packages/plugins/lib/main.es.js","component/toolbar/toolbar-item-open.js","component/toolbar/toolbar-item-layout.js","component/toolbar/toolbar-item-theme.js","utils/index.js","component/toolbar/toolbar-item-export.js","component/toolbar/toolbar-item-search.js","component/toolbar/toolbar.js","component/mindmap.js","App.js","serviceWorker.js","index.js","../../rich-markdown-editor/lib/lib/isModKey.js","../../rich-markdown-editor/lib/components/Toolbar/ToolbarButton.js","../../rich-markdown-editor/lib/lib/headingToSlug.js","../../rich-markdown-editor/lib/lib/getDataTransferFiles.js","../../rich-markdown-editor/lib/components/Flex.js","../../rich-markdown-editor/lib/serializer.js","../../rich-markdown-editor/lib/plugins/EditList.js","../../rich-markdown-editor/lib/components/Toolbar/index.js","../../rich-markdown-editor/lib/components/Toolbar/Separator.js","../../rich-markdown-editor/lib/components/CopyToClipboard.js","../../rich-markdown-editor/lib/components/Table/Cell.js","../../rich-markdown-editor/lib/index.js","images/default.jpg","images/theme1.jpg","images/theme2.jpg","images/theme3.jpg","images/theme4.jpg","../../rich-markdown-editor/lib/theme.js","../../rich-markdown-editor/lib/schema.js","../../rich-markdown-editor/lib/plugins.js","../../rich-markdown-editor/lib/plugins/Placeholder.js","../../rich-markdown-editor/lib/components/Placeholder.js","../../rich-markdown-editor/lib/plugins/CollapsableHeadings.js","../../rich-markdown-editor/lib/plugins/KeyboardBehavior.js","../../rich-markdown-editor/lib/plugins/KeyboardShortcuts.js","../../rich-markdown-editor/lib/plugins/MarkdownShortcuts.js","../../rich-markdown-editor/lib/plugins/MarkdownPaste.js","../../rich-markdown-editor/lib/plugins/Ellipsis.js","../../rich-markdown-editor/lib/plugins/Embeds.js","../../rich-markdown-editor/lib/plugins/Chrome.js","../../rich-markdown-editor/lib/components/Contents.js","../../rich-markdown-editor/lib/components/Toolbar/FormattingToolbar.js","../../rich-markdown-editor/lib/components/Toolbar/LinkToolbar.js","../../rich-markdown-editor/lib/components/Toolbar/LinkSearchResult.js","../../rich-markdown-editor/lib/components/BlockInsert.js","../../rich-markdown-editor/lib/plugins/Table.js","../../rich-markdown-editor/lib/nodes.js","../../rich-markdown-editor/lib/components/Code.js","../../rich-markdown-editor/lib/components/CopyButton.js","../../rich-markdown-editor/lib/components/Toolbar/BlockToolbar.js","../../rich-markdown-editor/lib/components/HorizontalRule.js","../../rich-markdown-editor/lib/components/Image.js","../../rich-markdown-editor/lib/components/Link.js","../../rich-markdown-editor/lib/components/Table/index.js","../../rich-markdown-editor/lib/components/Table/Toolbar.js","../../rich-markdown-editor/lib/components/Toolbar/TableToolbar.js","../../rich-markdown-editor/lib/components/Table/Grip.js","../../rich-markdown-editor/lib/components/Table/Scrollable.js","../../rich-markdown-editor/lib/components/Table/Row.js","../../rich-markdown-editor/lib/components/ListItem.js","../../rich-markdown-editor/lib/components/TodoItem.js","../../rich-markdown-editor/lib/components/TodoList.js","../../rich-markdown-editor/lib/components/Heading.js","../../rich-markdown-editor/lib/components/Paragraph.js","../../rich-markdown-editor/lib/marks.js","../../rich-markdown-editor/lib/components/InlineCode.js","../../rich-markdown-editor/lib/commands.js","../../rich-markdown-editor/lib/queries.js"],"names":["_extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","_assign","assign","t","s","i","n","arguments","length","call","apply","__read","o","m","Symbol","iterator","r","e","ar","next","done","push","value","error","__spread","concat","compose","middleware","e_1","_a","isArray","TypeError","middleware_1","__values","middleware_1_1","e_1_1","return","context","index","dispatch","Error","fn","bind","err","DiagramLayoutType","Controller","options","plugins","onChange","readOnly","Map","registerPlugin","controller","plugin","forEach","key","CorePlugin","run","args","_i","fns","composedFn","getValue","propKey","arg","change","model","callback","currentModel","TopicDirection","TopicVisualLevel","ROOT","PRIMARY","NORMAL","BlockType","CONTENT","DESC","FocusMode","EDITING_CONTENT","EDITING_DESC","SHOW_POPUP","DRAGGING","TopicRelationship","ANCESTOR","DESCENDANT","SIBLING","NONE","OpType","TOGGLE_COLLAPSE","COLLAPSE_ALL","EXPAND_ALL","EXPAND_TO","ADD_CHILD","ADD_SIBLING","DELETE_TOPIC","FOCUS_TOPIC","SET_FOCUS_MODE","SET_STYLE","SET_THEME","SET_TOPIC_BLOCK","DELETE_TOPIC_BLOCK","START_EDITING_CONTENT","START_EDITING_DESC","DRAG_AND_DROP","SET_EDITOR_ROOT","createKey","replace","c","Math","random","toString","_super","Block","defineProperty","get","enumerable","configurable","obj","createList","isList","map","type","data","Topic","getBlock","blocks","findIndex","block","fromJSON","parentKey","_b","subKeys","_c","collapse","content","_d","_e","relations","style","getAllSubTopicKeys","topicKey","item","getTopic","res","size","toArray","reduce","acc","getRelationship","srcKey","dstKey","srcTopic","dstTopic","pTopic","getParentTopic","log$1","focusTopic","focusMode","focusKey","set","addChild","topic","child_1","update","topics","addSibling","rootTopicKey","pItem","idx_1","indexOf","sibling_1","updateIn","insert","toggleCollapse","merge","collapseAll","topicKeys","editorRootTopicKey","withMutations","setIn","expandAll","expandTo","keys","reverse","unshift","getKeyPath","filter","setFocusMode","deleteTopic","delete","deleteKeys","dKey","setBlockData","blockType","dt","deleteBlock","index_1","setStyle","setTheme","theme","setLayoutDir","layoutDir","config","setEditorRootTopicKey","setZoomFactor","zoomFactor","defaultTheme","name","randomColor","background","highlightColor","marginH","marginV","contentStyle","lineHeight","linkStyle","lineRadius","lineType","lineWidth","rootTopic","fontSize","borderRadius","padding","subLinkStyle","lineColor","primaryTopic","borderWidth","borderStyle","normalTopic","border","defaultConfigRecord","allowUndo","LEFT_AND_RIGHT","Config","defaultModelRecord","extData","formatVersion","Model","isModel","attrs","createEmpty","object","undefined","toJS","values","getExtDataItem","getTopicVisualLevel","level","cooked","raw","templateObject_1","Content","div","props","SimpleTextEditor","_this","state","onMouseDown","stopPropagation","onMouseMove","onKeyDown","_handleClick","event","root","contains","target","onClickOutSide","rootRef","saveRef","ref","initState","setState","componentDidMount","document","addEventListener","componentWillUnmount","removeEventListener","getCustomizeProps","getContent","deserialize","render","getRefKeyFunc","placeholder","editorProps","contentProps","autoFocus","contentEditorRefKey","TopicContentEditor","nativeEvent","ctrlKey","code","save","whiteSpace","editingContentKey","opType","log$2","descEditorRefKey","TopicDescEditor","editingDescKey","getTopicTitle","maxLength","text","substr","renderTopicContentEditor","renderTopicDescEditor","isBlockEmpty","serializeBlockData","serialize","__rest","getOwnPropertySymbols","propertyIsEnumerable","__decorate","decorators","desc","getOwnPropertyDescriptor","Reflect","decorate","templateObject_2","templateObject_1$1","templateObject_2$1","templateObject_3","templateObject_4","templateObject_5","templateObject_6","templateObject_7","templateObject_8","templateObject_9","templateObject_10","templateObject_11","BaseWidget","operation","DragScrollView","DragScrollContent","DragScrollWidget","contentResizeCallback","entries","observer","oldContentRect","widgetStyle","width","clientWidth","viewBox","height","clientHeight","bigView","contentRect","contentResizeObserver","contentRef","observe","viewBoxRef","enableMouseWheel","altKey","preventDefault","passive","setViewBoxScroll","bigViewRef","setWidgetStyle","left","top","scrollLeft","scrollTop","setViewBoxScrollDelta","deltaLeft","deltaTop","mouseKey","needKeyPressed","canDragFunc","button","_lastCoordX","clientX","_lastCoordY","clientY","ele","onMouseUp","handleContextMenu","transform","transformOrigin","children","defaultProps","SaveRef","getRef","node","fireListener","deleteRef","observers","has","listeners","listeners_1","listeners_1_1","listener","registerRefListener","Flex","flexDirection","alignItems","justifyContent","Margin","margin","ShowMenuIcon","a","IconBg","Btn","StyledCheckbox","CloseIcon","Title","TopicBlockIcon","span","ZIndex","zIndex","PanelTabRoot","EventPlugin","eventListeners","handleTopicClick","handleTopicDoubleClick","handleTopicContextMenu","handleActiveModalClose","activeModalProps","once","only","origin","fireEvent","IconName","SHOW_MENU","CLOSE","COLOR_PICKER","NOTES","PLUS","MINUS","CENTER","TRASH","SEARCH","THEME","EXPORT","OPEN_FILE","iconClassName","Icon","iconName","className","contentRefKey","topicWidgetRefKey","topicRefKey","linksRefKey","linksSvgRefKey","collapseRefKey","dropAreaRefKey","dir","RefKey","DIAGRAM_ROOT_KEY","DRAG_SCROLL_WIDGET_KEY","SVG_HIGHLIGHT_KEY","FOCUS_HIGHLIGHT_KEY","DROP_EFFECT_KEY","EventKey","CENTER_ROOT_TOPIC","PropKey","DIAGRAM_CUSTOMIZE_BASE_Z_INDEX","TOPIC_CONTEXT_MENU_ENABLED","TOPIC_TITLE","cancelEvent","browserDownloadText","filename","url","link","createElement","href","download","click","browserDownloadFile","encodeURIComponent","browserOpenFile","accept","input","Promise","resolve","reject","evt","file","files","fr","FileReader","onload","txt","result","onerror","readAsText","paddingCss","right","bottom","centerY","rect","centerPointX","p1","p2","x","centerPointY","y","center","_getRelativeRect","el","rel","scale","getBoundingClientRect","relCenter","elCenter","getRelativeVector","HotKeyName","EDIT_CONTENT","EDIT_NOTES","HotKeyPlugin","customizeHotKeys","handleKeyDown","op","topicHotKeys","label","combo","globalHotKeys","log$3","OperationPlugin","OpMap","dropDir","srcParentKey","srcParentSubKeys","srcIndex","dstSubKeys_1","dstParentKey_1","dstParentSubKeys_1","dstIndex","newDstParentSubKeys_1","undoStack","redoStack","enabled","whiteListOperation","Set","isOperationEnabled","enableOperation","disableOperation","whiteList","clear","getOpMap","getAllowUndo","getUndoRedoStack","setUndoStack","setRedoStack","canUndo","canRedo","undo","newModel","peek","shift","redo","opArray","opNotInWhiteList","opMap","undoStack_1","cur","opFunc","opFuncProps","deleteRefKey","allSubKeys","allSubKeys_1","allSubKeys_1_1","beforeOperation","afterOperation","beforeOpFunction","afterOpFunction","TopicContextMenu","icon","shortcut","rootCanUse","templateObject_1$2","templateObject_1$3","log$4","DropEffectSvg","svg","TopicDropEffect","layout","targetProps","svgRect","fill","stroke","strokeDasharray","strokeWidth","log$5","DropArea","DragAndDropPlugin","dragTargetKey","dragTargetDir","renderTopicDropArea","eventHandlers","onDragEnter","ev","onDragLeave","onDragOver","onDrop","renderDragAndDropEffect","getDragTargetProps","handleTopicDragStart","canDrop","handleTopicDragEnter","handleTopicDragLeave","relatedTarget","handleTopicDrop","templateObject_1$4","templateObject_2$2","templateObject_3$1","templateObject_1$5","templateObject_2$3","templateObject_1$6","templateObject_1$7","templateObject_2$4","templateObject_1$8","templateObject_2$5","templateObject_3$2","EditorRootBreadcrumbsRoot","TooltipContent","BreadcrumbTitle","EditorRootBreadcrumbs","breadcrumbRenderer","breadProps","needTooltip","title","tooltipProps","position","BOTTOM_RIGHT","breadcrumb","show","editingRootKey","items","onClick","breadcrumbProps","NodeLayer","DIV","MindDragScrollWidget","dragScrollWidget","onWheel","deltaY","renderHotkeys","hotKeys","v","k","global","nodeLayer","rootTopicRect","nodeLayerRect","componentDidUpdate","nodeKey","rootWidgetProps","Modals","handleClose","activeModal","onClose","isOpen","enforceFocus","usePortal","DIALOG_BODY","minHeight","RootLinksSvg","log$6","RootSubLinks","curves","curve","vDir","hDir","radius","log$7","LayerPart","topicDirection","RootWidget","renderPartTopics","isRoot","subTopics","cxName","topicStyle","topicContent","partTopics","L","R","LEFT_TO_RIGHT","RIGHT_TO_LEFT","TOP_TO_BOTTOM","B","Icon$1","TopicCollapseIcon","onClickCollapse","iconfont","templateObject_1$9","templateObject_2$6","log$8","EditingRoot","EditingWrapper","cancelEvent$1","TopicContent","child","editor","wrapper_1","rect_1","editorDiv","contentResizeObserver_1","templateObject_1$a","templateObject_2$7","templateObject_1$b","log$9","TopicContent$1","TopicContentWithDropArea","TopicContentWidget","onDragStart","handleTopicClickTimeout","setTimeout","onDoubleClick","clearTimeout","needRelocation","oldCollapseIconVector","dragEnter","renderContextMenu","onContextMenuClose","newRect","newVector","vector","draggable","collapseIcon","prevDropArea","nextDropArea","dropEventHandlers","log$a","TooltipContentWrapper","TopicDesc","isEditing","descEditor","diagramRoot","maxWidth","maxHeight","dRect","classname","POPOVER_DISMISS","tabIndex","interactionKind","HOVER","hoverOpenDelay","templateObject_1$c","templateObject_1$d","templateObject_1$e","templateObject_2$8","templateObject_3$3","templateObject_1$f","templateObject_2$9","templateObject_3$4","templateObject_1$g","FocusHighlightSvg","TopicHighlight","TopicLinksSvg","log$b","TopicSubLinks","p3","z","collapseRect","subContent","abs","log$c","Node","NodeChildren","NodeTopic","TopicWidget","renderSubTopics","subLinks","layoutLinks","links","propsMore","log$d","ViewerRoot","Item_","ZoomFactorSpan","tooltip","TOP","ICON","ViewPortViewer","zoomFactorChange","onClickResetZoom","onClickAddZoom","onClickMinusZoom","onClickCollapseAll","centerRootTopic","onClickExpandAll","floor","DescEditorWrapper","hasBackdrop","backdropProps","isCloseButtonShown","descData","Theme","templateObject_1$h","log$e","RenderingPlugin","diagramProps","DiagramRoot","getDiagramProps","renderDiagram","renderDrawer","renderDiagramCustomize","nProps","renderEditorRootBreadcrumbs","renderModals","renderModal","getActiveModalProps","renderDoc","renderRootWidget","renderTopicWidget","renderTopicContent","renderTopicCollapseIcon","renderTopicContentOthers","renderTopicBlocks","blockKey","renderTopicBlock","renderTopicBlockContent","renderTopicBlockDesc","renderSubLinks","renderRootSubLinks","renderFocusItemHighlight","renderRootWidgetOtherChildren","renderViewPortViewer","templateObject_1$i","templateObject_2$a","PanelRoot","StyledTabs","RightTopPanel","selectedTabId","handleTabIdChange","expand","setExpand","id","templateObject_1$j","templateObject_2$b","templateObject_3$5","templateObject_4$1","templateObject_5$1","templateObject_6$1","templateObject_7$1","SettingTitle","SettingItem","SettingBoxContainer","SettingLabel","SettingRow","ColorBar","color","WithBorder","SettingGroup","SettingItemColorPicker","handleColorChange","onChangeComplete","hex","SettingItemButton","handleClick","SettingItemNumericInput","restProps","flexProps","SettingItemSelect","itemRenderer","onItemSelect","PxSelect","ofType","pxProps","filterable","unit","borderWidthItems","borderWidthItems$1","borderRadiusItems","borderStyleItems","BorderStyleEditor","setContentStyle","borderColor","lineTypes","modifiers","query","LinkStyleEditor","showLinkStyle","showSubLinkStyle","setLinkStyle","setSubLinkStyle","TextStyleEditor","fontSizeNumInputProps","min","max","parseInt","onValueChange","lineHeightInputProps","copiedStyle","log$f","StyleEditor","linkStyleEditorProps","contentStyleEditorPros","JSON","stringify","ClearAllCustomStyle","PaddingStyleEditor","commonProps","setPadding","topProps","rightProps","bottomProps","leftProps","templateObject_1$k","TopicThemeEditorRoot","TopicThemeEditor","setTopicStyle","tabId","ThemeEditor","handler","alertThemeError","setAlertThemeError","handleRandomColorChange","checked","rootTopicEditorProps","rootTopicEditor","primaryTopicEditorProps","primaryTopicEditor","normalTopicEditorProps","normalTopicEditor","tabsProps","topicThemes","panel","alertProps","alert","then","parse","RightTopPanelPlugin","renderRightTopPanel","renderRightTopPanelTabs","renderTopicStyleEditor","tProps","renderThemeEditor","log$g","UtilsPlugin","tempValueMap","eventListenerMap","addTempValueChangeListener","removeTempValueChangeListener","l","getTempValue","setTempValue","deleteTempValue","log$h","StylePlugin","colorMap","colorIndex","getTopicStyle","getTopicContentStyle","themeStyle","visualLevel","customStyle","getLinkStyle","presetStyle","parentSubLinkStyle","getSubLinkStyle","setTopicContentStyle","styleObj","newStyleObj","newStyleStr","getTopicThemeStyle","getRandomColor","colors","clearAllCustomStyle","keySeq","DefaultPlugin","renderTopicContextMenu","customizeTopicContextMenu","onClickItem","labelElement","getPartTopics","subTopicCount","slice","ceil","createSubTopics","tKey","topicProps","highlight","dropEffect","layoutTopic","topicWidget","subKey","getRelativeRect","element","getRelativeRectFromViewPort","getRelativeVectorFromViewPort","addZoomFactorChangeEventListener","removeZoomFactorChangeEventListener","getZoomFactor","moveTopicToCenter","dragScroll","focusTopicAndMoveToCenter","Diagram","resolveController","TheDefaultPlugin","defaultPlugin","construct","openNewModel","NodeContent","RichTextEditor","richEditorProps","editorValue","nodeContentProps","markdownSerializer","themeRandomColorSquare","theme1","theme2","boxShadow","theme3","theme4","FOCUS_MODE_EDITING_TOPOLOGY","OP_TYPE_START_EDITING_TOPOLOGY","BLOCK_TYPE_TOPOLOGY","REF_KEY_TOPOLOGY_DIAGRAM","REF_KEY_TOPOLOGY_DIAGRAM_UTIL","TopicBlockTopology","iconProps","ToolsConfig","group","paddingLeft","paddingRight","paddingTop","paddingBottom","iconFamily","iconColor","textMaxLine","image","is3D","zRotate","fillStyle","iconSize","strokeStyle","font","fontFamily","fontWeight","rectInParent","rotate","textAlign","textBaseline","Root","Canvas","Tools","ToolTitle","ToolbarButtons","TopologyDiagram","toolsConfig","canvasOptions","onMessage","diagramUtil","topology","setCanvasData","canvasRegister","on","openData","open","onDrag","dataTransfer","setData","renderTools","btn","onContextMenu","Root$1","TopologyDiagramUtils","canvasData","getTopology","scaleTo","deleteConfirm","deleteAlertProps","cancelButtonText","onConfirm","onCancel","DiagramWrapper","TopologyDrawer","utilProps","backdropClassName","canOutsideClickClose","topologyData","startEditingTopology","renderTopicBlockTopology","topoProps","FOCUS_MODE_SET_REFERENCE_TOPICS","OP_TYPE_START_SET_REFERENCE_TOPICS","OP_TYPE_SET_REFERENCE_TOPICS","EXT_DATA_KEY_TOPIC_REFERENCE","EXT_KEY_TOPIC_REFERENCE","AddReferenceTopicPanel","referenceKeys","defaultReferenceRecord","keyList","dataMap","ReferenceRecord","defaultExtDataReferenceRecord","reference","ExtDataReference","getReferenceKeys","getReferencedKeys","includes","setReferenceTopicKeys","referenceRecord","ButtonPlace","ReferenceTopicThumbnail","refKey","refType","removeHandler","setDeleteConfirm","Root$2","Group","GroupList","GroupTitle","GotoBtn","ReferenceTopicList","referenceGroup","thumbProps","referencedKeys","referencedGroup","currentTopic","TopicExtReference","refRecord","CLICK","TopicReferenceCheckbox","selectedTopicKeys","setChecked","checkboxProps","add","NavOmniBar","StyledNavOmniBar","TopicTitle","StyledPopover","Tip","TipContent","INPUT_PROPS","SearchPanel","setSearchWord","navigateToTopic","sections","getAllSections","inputProps","itemListPredicate","toLowerCase","section","sectionTitle","needTip","titleProps","titleEl","popoverProps","HOVER_TARGET_ONLY","resetOnSelect","HOT_KEY_NAME_SEARCH","FOCUS_MODE_SEARCH","ToolbarItemOpen","diagram","ToolbarItemLayout","layoutDirs","onClickSetLayout","cx","ToolbarItemTheme","onClickSetTheme","themeKey","themes","defaultThemeImg","theme1Img","theme2Img","theme3Img","theme4Img","src","alt","downloadFile","ToolbarItemExport","json","jsonStr","ToolbarItemSearch","Toolbar","onClickUndo","onClickRedo","React","PureComponent","debug","RichTextEditorPlugin","themeMap","getAllThemes","allTheme","ThemeSelectorPlugin","startSetReferenceTopics","allDeleteKeys","extData_1","reference_1","deleteKey","panelProps","checkBoxProps","checkbox","renderTopicExtReference","clearSelectedReferenceKeys","getSelectedReferenceKeys","from","deserializeExtDataItem","extDataKey","extDataItem","extDataReference","_loop_1","TopicReferencePlugin","setSearchWorld","searchPanelProps","SearchPlugin","TopologyDiagramPlugin","serializeModel","nextRes","valueSeq","deserializeModel","serializeExtData","deserializeExtData","serializeExtDataItem","serializeConfig","deserializeConfig","serializeTopic","deserializeTopic","deserializeTopics","serializeBlock","deserializeBlock","deserializeBlockData","deserializeBlocks","Mindmap","diagramRef","initModel","rootKey","generateSimpleModel","toolbarProps","renderToolbar","Component","App","Boolean","window","location","hostname","match","localStorage","join","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister","exports","default","test","platform","metaKey","_styledComponents","_styledComponents2","__esModule","withConfig","displayName","componentId","_ref","active","_escape3","_interopRequireDefault","slugified","safeSlugify","heading","nodes","indexOfType","_slugify2","lower","dataTransferItemsList","newObj","_interopRequireWildcard","Container","auto","_ref2","column","_ref3","align","_ref4","justify","_objectWithoutProperties","_slateMdSerializer","_slateMdSerializer2","_slateEditList","_slateEditList2","types","typeItem","typeDefault","Menu","_debounce3","_isEqual3","_extends","source","_createClass","defineProperties","descriptor","writable","Constructor","protoProps","staticProps","_reactPortal","_slateReact","_FormattingToolbar2","_LinkToolbar2","_possibleConstructorReturn","self","ReferenceError","_React$Component","_temp","instance","_classCallCheck","_len","_key","getPrototypeOf","mouseDown","handleMouseDown","handleMouseUp","componentWillReceiveProps","hideLinkToolbar","showLinkToolbar","getLinkInSelection","_this$props","selection","getSelection","isCollapsed","startBlock","newState","findDOMNode","rangeCount","getRangeAt","menu","scrollX","offsetWidth","round","scrollY","offsetHeight","_newState","subClass","superClass","_inherits","_this2","Portal","onBlur","onCreateLink","toolbarBackground","Separator","toolbarItem","_copyToClipboard","_copyToClipboard2","CopyToClipboard","onCopy","elem","Children","_props","rest","cloneElement","GripColumn","GripRow","GripTable","_Toolbar2","_Grip2","Cell","attributes","getPositionByKey","isFirstRow","isFirstColumn","isLastRow","isLastColumn","isSelected","isTableSelected","table","isActive","isSelectionInTable","selectedRows","selectedColumns","isRowSelected","getRowIndex","isColumnSelected","getColumnIndex","StyledTd","cell","clearSelected","Fragment","contentEditable","selectAll","blur","selectRow","selectColumn","RowContent","td","tableDivider","tableSelectedBackground","schema","_class","_regenerator2","_theme","_schema2","_getDataTransferFiles2","_isModKey2","_Flex2","_serializer2","_plugins2","_commands2","_queries2","_toConsumableArray","arr","arr2","light","defaultOptions","RichMarkdownEditor","_React$PureComponent","prevSchema","setEditorRef","handleChange","handleDrop","mark","_callee","_file","wrap","_context","prev","abrupt","uploadImage","isDefaultPrevented","startsWith","insertImageFile","stop","gen","step","info","_x","onSave","onSaveAndExit","focusAtStart","moveToStartOfDocument","focus","focusAtEnd","moveToEndOfDocument","getSchema","pretitle","onSearchLink","onClickLink","onImageUploadStart","onImageUploadStop","onShowToast","dark","defaultValue","ThemeProvider","StyledEditor","commands","queries","spellCheck","builtInPlugins","getLinkComponent","scrollToAnchor","prevProps","hash","querySelector","scrollIntoView","behavior","console","warn","Editor","quote","module","almostBlack","lightBlack","almostWhite","white","white10","black","black10","primary","greyLight","grey","greyMid","greyDark","base","fontFamilyMono","textSecondary","textLight","selected","codeComment","codePunctuation","codeNumber","codeProperty","codeTag","codeString","codeSelector","codeAttr","codeEntity","codeKeyword","codeFunction","codeStatement","codePlaceholder","codeInserted","codeImportant","toolbarInput","blockToolbarBackground","blockToolbarTrigger","blockToolbarTriggerIcon","blockToolbarItem","tableSelected","codeBackground","codeBorder","horizontalRule","imageErrorBackground","heading1","marks","heading2","heading3","heading4","heading5","heading6","isVoid","objects","_slateTrailingBlock2","_slateEditCode2","_slateEditBlockquote2","_slateEditTable2","_slateDropOrPasteImages2","_slatePasteLinkify2","_slateCollapseOnEscape2","_golerySlatePrism2","_Placeholder2","_EditList2","_CollapsableHeadings2","_KeyboardBehavior2","_KeyboardShortcuts2","_MarkdownShortcuts2","_MarkdownPaste2","_Ellipsis2","_Embeds2","_Chrome2","_Table2","_nodes2","_marks2","collapseTo","when","getBlocks","extensions","insertImage","containerType","exitBlocktype","allowMarks","typeTable","typeRow","typeCell","typeContent","onlyIn","getSyntax","getComponent","toEdge","_invariant2","_react2","decorateNode","others","first","getFirstText","decoration","anchor","offset","renderMark","Placeholder","getPathForHeadingNode","slugish","_headingToSlug2","pathname","showContentBelow","updateContentBelow","hideContentBelow","toggleContentBelow","collapsed","persistKey","removeItem","setItem","hidden","setNodeByKey","headingLevel","headingLevels","normalizeNode","shouldBeCollapsed","getItem","_headingToSlug","isExpanded","endOffset","end","splitBlock","setBlocks","moveToStartOfPreviousBlock","onEnter","onTab","removeNodeByKey","moveToStartOfNextBlock","start","unwrapBlock","getMarksAtRange","iterationOffset","startOffset","textNode","getTextAtOffset","leavesUntilCode","leaves","takeUntil","textUntilCode","codeLeaf","removeMarkByKey","onBackspace","_isModKey","toggleMark","removeMark","wrapLink","moveFocusToStartOfNode","normalize","insertBlock","moveToStart","onDash","onBacktick","chars","trim","getType","withoutNormalizing","wrapBlock","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","inlineShortcuts","inlineTags","beginningOfBlock","endOfBlock","surroundedByWhitespaces","firstText","firstCodeTagIndex","lastCodeTagIndex","removeTextByKey","moveAnchorTo","addMark","moveToEnd","onSpace","onPaste","transfer","getEventTransfer","fragment","insertFragment","_serializer","insertTextByKey","component","parent","getParent","findTopParent","replaceNodeByKey","embed","_Contents2","_BlockInsert2","renderEditor","toc","Contents","activeHeading","updateActiveHeading","elements","getHeadingElements","setImmediate","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","tagName","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","getElementsByTagName","headings","getHeadings","Wrapper","Sections","slug","ListItem","Anchor","li","ol","_outlineIcons","_ToolbarButton2","_Separator2","FormattingToolbar","hasMark","some","_err","isBlock","_this$props$editor$va","onClickMark","onClickBlock","_editor$value","handleCreateLink","wrapInline","renderMarkButton","IconClass","hiddenToolbarButtons","Tooltip","placement","renderBlockButton","BoldIcon","ItalicIcon","StrikethroughIcon","CodeIcon","Heading1Icon","Heading2Icon","BlockQuoteIcon","LinkIcon","withTheme","_reactDom","_build2","_reactKeydown2","_LinkSearchResult2","LinkToolbar","originalValue","isFetching","results","handleOutsideMouseClick","wrapper","HTMLElement","linkElement","search","term","_results","sent","t0","selectSearchResult","cancel","HTMLInputElement","firstDocument","URL","onResultKeyDown","removeLink","openLink","_this$props2","unwrapInlineByKey","deselect","setFirstResultRef","setWrapperRef","_this3","_this4","hasResults","LinkEditor","Input","OpenIcon","TrashIcon","SearchResults","mode","VERTICAL","defaultActiveChildIndex","LinkSearchResult","NextIcon","BlockInsert","closestRootNode","handleMouseMove","mouseMoveTimeout","setInactive","triggerPoint","innerWidth","previous","bounds","findClosestRootNode","setRef","Trigger","PlusIcon","_align","setColumnAlign","pos","getPosition","getCellsAtColumn","toObject","clearSelectedColumn","columnIndex","clearSelectedRow","rowIndex","getCellsAtRow","resetAlign","headCells","previouslySelectedRows","previouslySelectedColumns","withoutSaving","selectedTable","selectedColumn","selectedRow","getWidth","getHeight","_Code2","_BlockToolbar2","_HorizontalRule2","_Image2","_Link2","_Cell2","_Row2","_ListItem2","_TodoList2","_Heading","_Paragraph2","renderNode","display","Heading1","Heading2","Heading3","Heading4","Heading5","Heading6","_map3","language","_CopyButton2","getCopyText","Code","Language","languages","memo","line","none","bash","css","clike","csharp","markup","java","javascript","php","powershell","python","ruby","typescript","select","_CopyToClipboard2","CopyButton","copied","handleCopy","copiedTimeout","StyledCopyToClipboard","_dec","changes","BlockToolbar","property","initializer","decorator","_applyDecoratedDescriptor","bar","removeSelf","cursorPosition","moveToEndOfNode","insertTable","insertList","command","wrapInList","moveToEndOfNextBlock","handleClickBlock","onPickImage","onImagePicked","_x2","hasImageUpload","Bar","HiddenInput","BulletedListIcon","OrderedListIcon","TodoListIcon","TableIcon","HorizontalRuleIcon","ImageIcon","StyledHr","hr","_reactMediumImageZoom2","_reactAutosizeTextarea2","Image","hasError","moveToRangeOfNode","handleError","isLoading","caption","showCaption","CenteredImage","ErrorImg","as","ErrorMessage","HiddenImg","onError","shouldRespectMaxDimension","StyledImg","loading","Caption","disabled","async","Img","_Cell","_Scrollable2","Table","StyledTable","_TableToolbar","_TableToolbar2","_Toolbar","MENU_WIDTHS","row","MENU_ALIGN","menuWidth","TableToolbar","hasAlign","_editor","onClickAlign","_editor$value2","moveSelection","renderAlignButton","removeTable","addRowBelow","_editor$value3","insertRow","addRowAbove","_editor$value4","removeRow","addColumnRight","_editor$value5","insertColumn","addColumnLeft","_editor$value6","moveSelectionBy","removeColumn","AlignLeftIcon","AlignCenterIcon","AlignRightIcon","InsertLeftIcon","InsertRightIcon","InsertAboveIcon","InsertBelowIcon","Grip","Scrollable","shadowLeft","shadowRight","handleScroll","currentTarget","updateRightShadow","scrollWidth","Scrolling","onScroll","Shadow","StyledTr","tr","_TodoItem2","TodoItem","TodoList","ul","StyledHeading","CollapseToggle","hasPretitle","HiddenAnchor","_props$component","firstNode","showHash","startsWithPretitleAndSpace","RegExp","pathName","pathToHeading","CollapsedIcon","_react","_InlineCode","_InlineCode2","InlineCode","_slate","isLinkActive","unwrapLink","unwrapInline","_editor$props","KeyUtils","placeholderSrc","createObjectURL","catch","finally","inlines","selectedLinks","getLeafInlinesAtRange","isInNode"],"mappings":"4kBAsBIA,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiBG,OAAOC,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUL,EAAGC,GACjCD,EAAEI,UAAYH,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAIK,KAAKL,EACRA,EAAEM,eAAeD,KAAIN,EAAEM,GAAKL,EAAEK,MAIhBN,EAAGC,IAG3B,SAASO,EAAUR,EAAGC,GAGpB,SAASQ,IACPC,KAAKC,YAAcX,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEY,UAAkB,OAANX,EAAaC,OAAOW,OAAOZ,IAAMQ,EAAGG,UAAYX,EAAEW,UAAW,IAAIH,GAGjF,IAAIK,EAAU,WAaZ,OAZAA,EAAUZ,OAAOa,QAAU,SAAkBC,GAC3C,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,IAG9C,IAAK,IAAIZ,KAFTW,EAAIG,UAAUF,GAGRhB,OAAOU,UAAUL,eAAee,KAAKL,EAAGX,KAAIU,EAAEV,GAAKW,EAAEX,IAI7D,OAAOU,IAGMO,MAAMb,KAAMU,YAkB7B,SAASI,EAAOC,EAAGN,GACjB,IAAIO,EAAsB,oBAAXC,QAAyBF,EAAEE,OAAOC,UACjD,IAAKF,EAAG,OAAOD,EACf,IACII,EAEAC,EAHAZ,EAAIQ,EAAEJ,KAAKG,GAEXM,EAAK,GAGT,IACE,WAAc,IAANZ,GAAgBA,KAAM,MAAQU,EAAIX,EAAEc,QAAQC,MAClDF,EAAGG,KAAKL,EAAEM,OAEZ,MAAOC,GACPN,EAAI,CACFM,MAAOA,GAET,QACA,IACMP,IAAMA,EAAEI,OAASP,EAAIR,EAAU,SAAIQ,EAAEJ,KAAKJ,GAC9C,QACA,GAAIY,EAAG,MAAMA,EAAEM,OAInB,OAAOL,EAGT,SAASM,IACP,IAAK,IAAIN,EAAK,GAAIb,EAAI,EAAGA,EAAIE,UAAUC,OAAQH,IAC7Ca,EAAKA,EAAGO,OAAOd,EAAOJ,UAAUF,KAGlC,OAAOa,EAaC,IAAM,mBAsBhB,SAASQ,EAAQC,GACf,IAAIC,EAAKC,EAET,IAAKrC,MAAMsC,QAAQH,GAAa,MAAM,IAAII,UAAU,sCAEpD,IACE,IAAK,IAAIC,EAxFb,SAAkBpB,GAChB,IAAIC,EAAsB,oBAAXC,QAAyBF,EAAEE,OAAOC,UAC7CV,EAAI,EACR,OAAIQ,EAAUA,EAAEJ,KAAKG,GACd,CACLO,KAAM,WAEJ,OADIP,GAAKP,GAAKO,EAAEJ,SAAQI,OAAI,GACrB,CACLU,MAAOV,GAAKA,EAAEP,KACde,MAAOR,KA+EaqB,CAASN,GAAaO,EAAiBF,EAAab,QAASe,EAAed,KAAMc,EAAiBF,EAAab,OAAQ,CAE9I,GAAkB,oBADTe,EAAeZ,MACM,MAAM,IAAIS,UAAU,8CAEpD,MAAOI,GACPP,EAAM,CACJL,MAAOY,GAET,QACA,IACMD,IAAmBA,EAAed,OAASS,EAAKG,EAAaI,SAASP,EAAGpB,KAAKuB,GAClF,QACA,GAAIJ,EAAK,MAAMA,EAAIL,OAIvB,OAAO,SAAUc,EAASlB,GAExB,IAAImB,GAAS,EACb,OAEA,SAASC,EAASlC,GAChB,GAAIA,GAAKiC,EAAO,MAAM,IAAIE,MAAM,gCAChCF,EAAQjC,EACR,IAAIoC,EAAKd,EAAWtB,GAChBA,IAAMsB,EAAWnB,SAAQiC,EAAKtB,GAClC,IAAKsB,EAAI,OAAO,KAEhB,IACE,OAAOA,EAAGJ,EAASE,EAASG,KAAK,KAAMrC,EAAI,IAC3C,MAAOsC,GACP,MAAMA,GAZHJ,CAAS,IAkBpB,IAyDIK,EAzDA,EAEJ,WACE,SAASC,EAAWC,QACF,IAAZA,IACFA,EAAU,IAGZ,IAAIjB,EAAKiB,EAAQC,QACbA,OAAiB,IAAPlB,EAAgB,GAAKA,EAC/BmB,EAAWF,EAAQE,SACnBC,EAAWH,EAAQG,SACvBpD,KAAKoD,SAAWA,EAChBpD,KAAKmD,SAAWA,EAChBnD,KAAK8B,WAAa,IAAIuB,IA7E1B,SAASC,EAAeC,EAAYC,GAClC,GAAI7D,MAAMsC,QAAQuB,GAChBA,EAAOC,SAAQ,SAAU7D,GACvB,OAAO0D,EAAeC,EAAY3D,WAKtC,GAAc,MAAV4D,EAIJ,IAAK,IAAIE,KAAOF,EAAQ,CACtB,IAAIZ,EAAKY,EAAOE,GAChBH,EAAWzB,WAAW4B,GAAOH,EAAWzB,WAAW4B,IAAQ,GAC3DH,EAAWzB,WAAW4B,GAAKlC,KAAKoB,IAkEhCU,CAAetD,KA7FnB,SAAoBiD,QACF,IAAZA,IACFA,EAAU,IAGZ,IAAIjB,EAAKiB,EAAQC,QAEjB,OAAOvB,OADc,IAAPK,EAAgB,GAAKA,GAoFhB2B,CAAW,CAC1BT,QAASA,KA+Bb,OA1BAF,EAAW9C,UAAU0D,IAAM,SAAUF,GAGnC,IAFA,IAAIG,EAAO,GAEFC,EAAK,EAAGA,EAAKpD,UAAUC,OAAQmD,IACtCD,EAAKC,EAAK,GAAKpD,UAAUoD,GAG3B,IAAIhC,EAAa9B,KAAK8B,WAClBiC,EAAMjC,EAAW4B,IAAQ,GAC7B,YAAuB,IAAfK,EAAIpD,OAAc,2BAA6B+C,EAAM,kBAC7D,IAAIM,EAAa,YAAWnC,EAAX,CAAoBkC,GAErC,OAAOC,EAAWnD,WAAM,EAAQc,EAASkC,KAG3Cb,EAAW9C,UAAU+D,SAAW,SAAUC,EAASC,GACjD,OAAOnE,KAAK4D,IAAI,WAAYxD,EAAQA,EAAQ,GAAI+D,GAAM,CACpDD,QAASA,MAIblB,EAAW9C,UAAUkE,OAAS,SAAUC,EAAOC,GAC7CtE,KAAKmD,SAASkB,EAAOC,GACrBtE,KAAKuE,aAAeF,GAGfrB,EA7CT,GAgDIwB,EACI,IADJA,EAEK,IAFLA,EAII,KAKR,SAAWzB,GACTA,EAAkBA,EAAiC,cAAI,GAAK,gBAC5DA,EAAkBA,EAAiC,cAAI,GAAK,gBAC5DA,EAAkBA,EAAkC,eAAI,GAAK,iBAC7DA,EAAkBA,EAAiC,cAAI,GAAK,gBAJ9D,CAKGA,IAAsBA,EAAoB,KAE7C,IAAI0B,GAAmB,CACrBC,KAAM,EACNC,QAAS,EACTC,OAAQ,GAENC,GAAY,CACdC,QAAS,UACTC,KAAM,QAEJC,GAAY,CACdJ,OAAQ,SACRK,gBAAiB,kBACjBC,aAAc,eACdC,WAAY,aACZC,SAAU,YAERC,GAAoB,CACtBC,SAAU,WACVC,WAAY,aACZC,QAAS,UACTC,KAAM,QAEJC,GAAS,CACXC,gBAAiB,kBACjBC,aAAc,eACdC,WAAY,aACZC,UAAW,YACXC,UAAW,YACXC,YAAa,cACbC,aAAc,eACdC,YAAa,cACbC,eAAgB,iBAChBC,UAAW,YACXC,UAAW,YACXC,gBAAiB,kBACjBC,mBAAoB,qBAGpBC,sBAAuB,wBACvBC,mBAAoB,qBACpBC,cAAe,gBACfC,gBAAiB,mBAGnB,SAASC,KACP,MAAO,uCAAuCC,QAAQ,SAAS,SAAUC,GACvE,IAAI3F,EAAoB,GAAhB4F,KAAKC,SAAgB,EAE7B,OADc,MAANF,EAAY3F,EAAQ,EAAJA,EAAU,GACzB8F,SAAS,OAItB,IAMI,GAEJ,SAAUC,GAGR,SAASC,IACP,OAAkB,OAAXD,GAAmBA,EAAOrG,MAAMb,KAAMU,YAAcV,KA+B7D,OAlCAF,EAAUqH,EAAOD,GAMjB1H,OAAO4H,eAAeD,EAAMjH,UAAW,OAAQ,CAC7CmH,IAAK,WACH,OAAOrH,KAAKqH,IAAI,SAElBC,YAAY,EACZC,cAAc,IAEhB/H,OAAO4H,eAAeD,EAAMjH,UAAW,OAAQ,CAC7CmH,IAAK,WACH,OAAOrH,KAAKqH,IAAI,SAElBC,YAAY,EACZC,cAAc,IAGhBJ,EAAMhH,OAAS,SAAUqH,GACvB,OAAO,IAAIL,EAAMK,IAGnBL,EAAMM,WAAa,SAAUD,GAC3B,GAAI,OAAKE,OAAOF,IAAQ7H,MAAMsC,QAAQuF,GAEpC,OAAO,eAAKA,EAAIG,IAAIR,EAAMhH,SAG5B,MAAM,IAAIwC,MAAM,mEAAqE6E,IAGhFL,EAnCT,CAoCE,iBA5CuB,CACvBS,KAAM,KACNlE,IAAK,KACLmE,KAAM,QAqDJ,GAEJ,SAAUX,GAGR,SAASY,IACP,OAAkB,OAAXZ,GAAmBA,EAAOrG,MAAMb,KAAMU,YAAcV,KA8G7D,OAjHAF,EAAUgI,EAAOZ,GAMjB1H,OAAO4H,eAAeU,EAAM5H,UAAW,MAAO,CAC5CmH,IAAK,WACH,OAAOrH,KAAKqH,IAAI,QAElBC,YAAY,EACZC,cAAc,IAEhB/H,OAAO4H,eAAeU,EAAM5H,UAAW,YAAa,CAClDmH,IAAK,WACH,OAAOrH,KAAKqH,IAAI,cAElBC,YAAY,EACZC,cAAc,IAEhB/H,OAAO4H,eAAeU,EAAM5H,UAAW,WAAY,CACjDmH,IAAK,WACH,OAAOrH,KAAKqH,IAAI,aAElBC,YAAY,EACZC,cAAc,IAEhB/H,OAAO4H,eAAeU,EAAM5H,UAAW,UAAW,CAChDmH,IAAK,WACH,OAAOrH,KAAKqH,IAAI,YAElBC,YAAY,EACZC,cAAc,IAEhB/H,OAAO4H,eAAeU,EAAM5H,UAAW,SAAU,CAC/CmH,IAAK,WACH,OAAOrH,KAAKqH,IAAI,WAElBC,YAAY,EACZC,cAAc,IAEhB/H,OAAO4H,eAAeU,EAAM5H,UAAW,YAAa,CAClDmH,IAAK,WACH,OAAOrH,KAAKqH,IAAI,cAElBC,YAAY,EACZC,cAAc,IAEhB/H,OAAO4H,eAAeU,EAAM5H,UAAW,QAAS,CAC9CmH,IAAK,WACH,OAAOrH,KAAKqH,IAAI,UAElBC,YAAY,EACZC,cAAc,IAGhBO,EAAM5H,UAAU6H,SAAW,SAAUH,GACnC,IAAInF,EAAQzC,KAAKgI,OAAOC,WAAU,SAAU1I,GAC1C,OAAOA,EAAEqI,OAASA,KAEpB,OAAe,IAAXnF,EAAqB,CACvBA,MAAOA,EACPyF,MAAO,MAEF,CACLzF,MAAOA,EACPyF,MAAOlI,KAAKgI,OAAOX,IAAI5E,KAI3BqF,EAAMK,SAAW,SAAUX,GACzB,IAAI9D,EAAM8D,EAAI9D,IACV1B,EAAKwF,EAAIY,UACTA,OAAmB,IAAPpG,EAAgB,KAAOA,EACnCgG,EAASR,EAAIQ,OACbK,EAAKb,EAAIc,QACTA,OAAiB,IAAPD,EAAgB,GAAKA,EAC/BE,EAAKf,EAAIgB,SAEb,OAAO,IAAIV,EAAM,CACfpE,IAAKA,EACL0E,UAAWA,EACXI,cAJoB,IAAPD,GAAwBA,EAKrCD,QAAS,eAAKA,GACdN,OAAQ,GAAMP,WAAWO,MAI7BF,EAAM3H,OAAS,SAAU6B,GACvB,IAAI0B,EAAM1B,EAAG0B,IACT2E,EAAKrG,EAAGoG,UACRA,OAAmB,IAAPC,EAAgB,KAAOA,EACnCE,EAAKvG,EAAGyG,QACRA,OAAiB,IAAPF,EAAgB,GAAKA,EAC/BG,EAAK1G,EAAGsG,QACRA,OAAiB,IAAPI,EAAgB,GAAKA,EAC/BC,EAAK3G,EAAGwG,SACRA,OAAkB,IAAPG,GAAwBA,EACnCT,EAAQ,GAAM/H,OAAO,CACvByH,KAAM/C,GAAUC,QAChB+C,KAAMY,EACN/E,IAAK,OAGP,OAAO,IAAIoE,EAAM,CACfpE,IAAKA,EACL0E,UAAWA,EACXJ,OAJW,eAAK,CAACE,IAKjBI,QAAS,eAAKA,GACdE,SAAUA,KAIPV,EAlHT,CAmHE,iBA/HuB,CACvBpE,IAAK,KACL0E,UAAW,KACXI,UAAU,EACVF,QAAS,KACTN,OAAQ,KACRY,UAAW,KACXC,MAAO,QA0HT,SAASC,GAAmBzE,EAAO0E,GACjC,IAAIC,EAAO3E,EAAM4E,SAASF,GACtBG,EAAM,GAEV,GAAIF,EAAKV,QAAQa,KAAO,EAAG,CACzB,IAAIb,EAAUU,EAAKV,QAAQc,UAC3BF,EAAI1H,KAAKX,MAAMqI,EAAKvH,EAAS2G,IAC7BY,EAAMZ,EAAQe,QAAO,SAAUC,EAAK5F,GAElC,OADA4F,EAAI9H,KAAKX,MAAMyI,EAAK3H,EAASmH,GAAmBzE,EAAOX,KAChD4F,IACNJ,GAGL,OAAOA,EAmBT,SAASK,GAAgBlF,EAAOmF,EAAQC,GACtC,IAAIC,EAAWrF,EAAM4E,SAASO,GAC1BG,EAAWtF,EAAM4E,SAASQ,GAE9B,GAAIC,GAAYC,EAAU,CACxB,GAAID,EAAStB,WAAauB,EAASvB,UAAW,OAAO/C,GAAkBG,QAGvE,IAFA,IAAIoE,EAASF,EAENE,EAAOxB,WAAW,CACvB,GAAIwB,EAAOxB,YAAcuB,EAASjG,IAAK,OAAO2B,GAAkBE,WAChEqE,EAASvF,EAAMwF,eAAeD,EAAOlG,KAKvC,IAFAkG,EAASD,EAEFC,EAAOxB,WAAW,CACvB,GAAIwB,EAAOxB,YAAcsB,EAAShG,IAAK,OAAO2B,GAAkBC,SAChEsE,EAASvF,EAAMwF,eAAeD,EAAOlG,MAIzC,OAAO2B,GAAkBI,KAG3B,IAAIqE,GAAQ,IAAM,YAsElB,SAASC,GAAW/H,GAClB,IAAIqC,EAAQrC,EAAGqC,MACX0E,EAAW/G,EAAG+G,SACdiB,EAAYhI,EAAGgI,UAInB,OAHAF,GAAM,eACFf,IAAa1E,EAAM4F,WAAU5F,EAAQA,EAAM6F,IAAI,WAAYnB,IAC3DiB,IAAc3F,EAAM2F,YAAW3F,EAAQA,EAAM6F,IAAI,YAAaF,IAC3D3F,EAuNT,IAAI,GAAY,CACd8F,SA7MF,SAAkBnI,GAChB,IAAIqC,EAAQrC,EAAGqC,MACX0E,EAAW/G,EAAG+G,SAClBe,GAAM,YAAaf,GACnB,IAAIqB,EAAQ/F,EAAM4E,SAASF,GAE3B,GAAIqB,EAAO,CACT,IAAIC,EAAU,GAAMlK,OAAO,CACzBuD,IAAKkD,KACLwB,UAAWgC,EAAM1G,MAQnB,OANA0G,EAAQA,EAAMF,IAAI,YAAY,GAAOI,OAAO,WAAW,SAAUhC,GAC/D,OAAOA,EAAQ9G,KAAK6I,EAAQ3G,QAKvBqG,GAAW,CAChB1F,MAJFA,EAAQA,EAAMiG,OAAO,UAAU,SAAUC,GACvC,OAAOA,EAAOL,IAAInB,EAAUqB,GAAOF,IAAIG,EAAQ3G,IAAK2G,MAIpDtB,SAAUsB,EAAQ3G,IAClBsG,UAAWhF,GAAUC,kBAIzB,OAAOZ,GAsLPmG,WAnLF,SAAoBxI,GAClB,IAAIqC,EAAQrC,EAAGqC,MACX0E,EAAW/G,EAAG+G,SAClB,GAAIA,IAAa1E,EAAMoG,aAAc,OAAOpG,EAC5C,IAAI+F,EAAQ/F,EAAM4E,SAASF,GAE3B,GAAIqB,EAAO,CACT,IAAIM,EAAQrG,EAAM4E,SAASmB,EAAMhC,WAC7BuC,EAAQD,EAAMpC,QAAQsC,QAAQ7B,GAC9B8B,EAAY,GAAM1K,OAAO,CAC3BuD,IAAKkD,KACLwB,UAAWsC,EAAMhH,MAOnB,OAAOqG,GAAW,CAChB1F,MANFA,EAAQA,EAAMiG,OAAO,UAAU,SAAUC,GACvC,OAAOA,EAAOL,IAAIW,EAAUnH,IAAKmH,MAChCC,SAAS,CAAC,SAAUJ,EAAMhH,IAAK,YAAY,SAAU4E,GACtD,OAAOA,EAAQyC,OAAOJ,EAAQ,EAAGE,EAAUnH,QAI3CqF,SAAU8B,EAAUnH,IACpBsG,UAAWhF,GAAUC,kBAIzB,OAAOZ,GA2JP2G,eArSF,SAAwBhJ,GACtB,IAAIqC,EAAQrC,EAAGqC,MACX0E,EAAW/G,EAAG+G,SACdqB,EAAQ/F,EAAM4E,SAASF,GAgB3B,OAdIqB,GAAgC,IAAvBA,EAAM9B,QAAQa,OACzBiB,EAAQA,EAAMa,MAAM,CAClBzC,UAAW4B,EAAM5B,WAEnBnE,EAAQA,EAAMyG,SAAS,CAAC,SAAUV,EAAM1G,IAAK,aAAa,SAAU8E,GAClE,OAAQA,MAIZnE,EAAQ0F,GAAW,CACjB1F,MAAOA,EACP0E,SAAUA,EACViB,UAAWhF,GAAUJ,UAqRvBsG,YAhRF,SAAqBlJ,GACnB,IAAIqC,EAAQrC,EAAGqC,MACfyF,GAAM,eACN,IAAIqB,EAAYrC,GAAmBzE,EAAOA,EAAM+G,oBAQhD,OAPAtB,GAAMzF,GACNA,EAAQA,EAAMgH,eAAc,SAAUrK,GACpCmK,EAAU1H,SAAQ,SAAUsF,GAC1B/H,EAAEsK,MAAM,CAAC,SAAUvC,EAAU,aAAa,SAG9Ce,GAAMzF,GACCA,GAsQPkH,UAnQF,SAAmBvJ,GACjB,IAAIqC,EAAQrC,EAAGqC,MACX8G,EAAYrC,GAAmBzE,EAAOA,EAAM+G,oBAQhD,OAPAtB,GAAMzF,GACNA,EAAQA,EAAMgH,eAAc,SAAUrK,GACpCmK,EAAU1H,SAAQ,SAAUsF,GAC1B/H,EAAEsK,MAAM,CAAC,SAAUvC,EAAU,aAAa,SAG9Ce,GAAMzF,GACCA,GA0PPmH,SAvPF,SAAkBxJ,GAChB,IAAIqC,EAAQrC,EAAGqC,MACX0E,EAAW/G,EAAG+G,SACd0C,EA9FN,SAAoBpH,EAAO0E,EAAU2C,QACnB,IAAZA,IACFA,GAAU,GAMZ,IAHA,IAAIxC,EAAM,CAACH,GACPC,EAAO3E,EAAM4E,SAASF,GAEnBC,EAAKZ,WACVsD,EAAUxC,EAAI1H,KAAKwH,EAAKZ,WAAac,EAAIyC,QAAQ3C,EAAKZ,WACtDY,EAAO3E,EAAMwF,eAAeb,EAAKtF,KAGnC,OAAOwF,EAiFI0C,CAAWvH,EAAO0E,GAAU8C,QAAO,SAAUvL,GACtD,OAAOA,IAAMyI,KAYf,OAJIQ,GANJlF,EAAQA,EAAMgH,eAAc,SAAUrK,GACpCyK,EAAKhI,SAAQ,SAAUsF,GACrB/H,EAAEsK,MAAM,CAAC,SAAUvC,EAAU,aAAa,SAInBA,EAAU1E,EAAM+G,sBAAwB/F,GAAkBE,aACnFlB,EAAQA,EAAM6F,IAAI,qBAAsB7F,EAAMoG,eAGzCpG,GAwOP0F,WAAYA,GACZ+B,aA5NF,SAAsB9J,GACpB,IAAIqC,EAAQrC,EAAGqC,MACX2F,EAAYhI,EAAGgI,UAGnB,OAFAF,GAAM,gBACFE,IAAc3F,EAAM2F,YAAW3F,EAAQA,EAAM6F,IAAI,YAAaF,IAC3D3F,GAwNP0H,YA9JF,SAAqB/J,GACnB,IAAIqC,EAAQrC,EAAGqC,MACX0E,EAAW/G,EAAG+G,SAClB,GAAIA,IAAa1E,EAAM+G,mBAAoB,OAAO/G,EAClD,IAAI2E,EAAO3E,EAAM4E,SAASF,GAqB1B,OAnBIC,IACF3E,EAAQA,EAAMgH,eAAc,SAAUrK,GACpCA,EAAEsJ,OAAO,UAAU,SAAUC,GAC3BA,EAASA,EAAOyB,OAAOjD,GACvB,IAAIkD,EAAanD,GAAmBzE,EAAO0E,GAM3C,OALAwB,EAASA,EAAOc,eAAc,SAAU/K,GACtC2L,EAAWxI,SAAQ,SAAUyI,GAC3B5L,EAAE0L,OAAOE,YAKflL,EAAE8J,SAAS,CAAC,SAAU9B,EAAKZ,UAAW,YAAY,SAAUE,GAC1D,OAAOA,EAAQ0D,OAAO1D,EAAQsC,QAAQ7B,OAEpC/H,EAAEiJ,WAAalB,GAAU/H,EAAEkJ,IAAI,WAAY,MAAMA,IAAI,YAAa,UAInE7F,GAsIP8H,aA1HF,SAAsBnK,GACpB,IAAIqC,EAAQrC,EAAGqC,MACX0E,EAAW/G,EAAG+G,SACdqD,EAAYpK,EAAGoK,UACfpC,EAAYhI,EAAGgI,UACfnC,EAAO7F,EAAG6F,KACVuC,EAAQ/F,EAAM4E,SAASF,GAE3B,GAAIqB,EAAO,CACT,IAAI/B,EAAK+B,EAAMrC,SAASqE,GACpB3J,EAAQ4F,EAAG5F,MACXyF,EAAQG,EAAGH,OAEA,IAAXzF,EACF4B,EAAQA,EAAMyG,SAAS,CAAC,SAAU/B,EAAU,WAAW,SAAUf,GAC/D,OAAOA,EAAOxG,KAAK,GAAMrB,OAAO,CAC9ByH,KAAMwE,EACNvE,KAAMA,QAINK,EAAML,OAASA,IACjBxD,EAAQA,EAAMyG,SAAS,CAAC,SAAU/B,EAAU,SAAUtG,EAAO,SAAS,SAAU4J,GAC9E,OAAOxE,MAKTmC,IACF3F,EAAQ0F,GAAW,CACjB1F,MAAOA,EACP0E,SAAUA,EACViB,UAAWA,KAKjB,OAAO3F,GAsFPiI,YAnFF,SAAqBtK,GACnB,IAAIqC,EAAQrC,EAAGqC,MACX0E,EAAW/G,EAAG+G,SACdqD,EAAYpK,EAAGoK,UACfhC,EAAQ/F,EAAM4E,SAASF,GAE3B,GAAIqB,EAAO,CACT,IAAImC,EAAUnC,EAAMrC,SAASqE,GAAW3J,OAEvB,IAAb8J,IACFlI,EAAQA,EAAMyG,SAAS,CAAC,SAAU/B,EAAU,WAAW,SAAUf,GAC/D,OAAOA,EAAOgE,OAAOO,OAIzBlI,EAAQ0F,GAAW,CACjB1F,MAAOA,EACP0E,SAAU,KACViB,UAAW,OAIf,OAAO3F,GA8DPmI,SA3DF,SAAkBxK,GAChB,IAAIqC,EAAQrC,EAAGqC,MACX0E,EAAW/G,EAAG+G,SACdF,EAAQ7G,EAAG6G,MACXuB,EAAQ/F,EAAM4E,SAASF,GAU3B,OARIqB,GACEvB,IAAUuB,EAAMvB,QAClBxE,EAAQA,EAAMyG,SAAS,CAAC,SAAU/B,EAAU,UAAU,SAAUxI,GAC9D,OAAOsI,MAKNxE,GA8CPoI,SA3CF,SAAkBzK,GAChB,IAAIqC,EAAQrC,EAAGqC,MACXqI,EAAQ1K,EAAG0K,MAEf,OADArI,EAAQA,EAAMiH,MAAM,CAAC,SAAU,SAAUoB,IAyCzCC,aArCF,SAAsB3K,GACpB,IAAIqC,EAAQrC,EAAGqC,MACXuI,EAAY5K,EAAG4K,UACnB,OAAIvI,EAAMwI,OAAOD,YAAcA,EAAkBvI,EACjDA,EAAQA,EAAMiH,MAAM,CAAC,SAAU,aAAcsB,IAkC7CE,sBA9BF,SAA+B9K,GAC7B,IAAIqC,EAAQrC,EAAGqC,MACX0E,EAAW/G,EAAG+G,SAGlB,OAFI1E,EAAM+G,qBAAuBrC,IAAU1E,EAAQA,EAAM6F,IAAI,qBAAsBnB,IAC/E1E,EAAM4E,SAASF,GAAUP,WAAUnE,EAAQA,EAAMiH,MAAM,CAAC,SAAUvC,EAAU,aAAa,IACtF1E,GA0BP0I,cAvBF,SAAuB/K,GACrB,IAAIqC,EAAQrC,EAAGqC,MACX2I,EAAahL,EAAGgL,WAEpB,OADI3I,EAAM2I,aAAeA,IAAY3I,EAAQA,EAAM6F,IAAI,aAAc8C,IAC9D3I,IA0BT,IAAI4I,GAAe,CACjBC,KAAM,UACNC,aAAa,EACbC,WAAY,gBACZC,eAAgB,UAChBC,QAAS,GACTC,QAAS,GACTC,aAAc,CACZC,WAAY,OAEdC,UAAW,CACTC,WAAY,EACZC,SAAU,QACVC,UAAW,OAEbC,UAAW,CACTN,aAAc,CACZO,SAAU,OACVC,aAAc,OACdC,QAAS,uBAEXC,aAAc,CACZN,SAAU,QACVC,UAAW,MACXM,UAAW,sBAGfC,aAAc,CACZZ,aAAc,CACZa,YAAa,MACbC,YAAa,QACbN,aAAc,OACdD,SAAU,OACVE,QAAS,uBAEXC,aAAc,CACZN,SAAU,QACVC,UAAW,MACXM,UAAW,sBAGfI,YAAa,CACXf,aAAc,CACZgB,OAAQ,oBACRR,aAAc,OACdD,SAAU,OACVE,QAAS,YAEXC,aAAc,CACZN,SAAU,QACVC,UAAW,MACXM,UAAW,WAIbM,GAAsB,CACxBrL,UAAU,EACVsL,WAAW,EACX9B,UAAW7J,EAAkB4L,eAC7BjC,MAAOO,IAGL2B,GAEJ,SAAU1H,GAGR,SAAS0H,IACP,OAAkB,OAAX1H,GAAmBA,EAAOrG,MAAMb,KAAMU,YAAcV,KAoC7D,OAvCAF,EAAU8O,EAAQ1H,GAMlB1H,OAAO4H,eAAewH,EAAO1O,UAAW,YAAa,CACnDmH,IAAK,WACH,OAAOrH,KAAKqH,IAAI,cAElBC,YAAY,EACZC,cAAc,IAEhB/H,OAAO4H,eAAewH,EAAO1O,UAAW,WAAY,CAClDmH,IAAK,WACH,OAAOrH,KAAKqH,IAAI,aAElBC,YAAY,EACZC,cAAc,IAEhB/H,OAAO4H,eAAewH,EAAO1O,UAAW,YAAa,CACnDmH,IAAK,WACH,OAAOrH,KAAKqH,IAAI,cAElBC,YAAY,EACZC,cAAc,IAEhB/H,OAAO4H,eAAewH,EAAO1O,UAAW,QAAS,CAC/CmH,IAAK,WACH,OAAOrH,KAAKqH,IAAI,UAElBC,YAAY,EACZC,cAAc,IAGhBqH,EAAOzG,SAAW,SAAUX,GAC1B,OAAO,IAAIoH,EAAOpH,IAGboH,EAxCT,CAyCE,iBAAOH,KAELI,GAAqB,CACvBtE,OAAQ,gBACRuE,QAAS,gBACTjC,OAAQ,KACRpC,aAAc,KACdW,mBAAoB,KACpBnB,SAAU,KACVD,UAAW,KACX+E,cAAe,KACf/B,WAAY,GAGV,GAEJ,SAAU9F,GAGR,SAAS8H,IACP,OAAkB,OAAX9H,GAAmBA,EAAOrG,MAAMb,KAAMU,YAAcV,KAiM7D,OApMAF,EAAUkP,EAAO9H,GAMjB8H,EAAMC,QAAU,SAAUzH,GACxB,OAAOA,aAAewH,GAGxBA,EAAM7O,OAAS,SAAU+O,GAKvB,QAJc,IAAVA,IACFA,EAAQ,MAGG,MAATA,EAAe,OAAOF,EAAMG,cAChC,IAAIjG,EAUJ,GARI8F,EAAMC,QAAQC,KAChBhG,EAAMgG,GAGJ,YAAcA,KAChBhG,EAAM8F,EAAM7G,SAAS+G,IAGnBhG,EASF,OARoB,MAAhBA,EAAIe,WACNf,EAAMA,EAAIgB,IAAI,WAAYhB,EAAIuB,eAGX,MAAjBvB,EAAIc,YACNd,EAAMA,EAAIgB,IAAI,YAAalF,GAAUJ,SAGhCsE,EAGT,MAAM,IAAIvG,MAAM,qEAAuEuM,IAGzFF,EAAMG,YAAc,WAClB,IAAI9K,EAAQ,IAAI2K,EACZlB,EAAY,GAAM3N,OAAO,CAC3BuD,IAAKkD,OAEP,OAAOvC,EAAMiG,OAAO,UAAU,SAAUC,GACtC,OAAOA,EAAOL,IAAI4D,EAAUpK,IAAKoK,MAChC5D,IAAI,eAAgB4D,EAAUpK,KAAKwG,IAAI,WAAY4D,EAAUpK,KAAKwG,IAAI,YAAalF,GAAUJ,SAGlGoK,EAAM7G,SAAW,SAAUiH,GACzB,IAAI/K,EAAQ,IAAI2K,EACZhN,EAAKoN,EAAO7E,OACZA,OAAgB,IAAPvI,EAAgB,GAAKA,EAC9BqG,EAAK+G,EAAOvC,OACZA,OAAgB,IAAPxE,EAAgB,GAAKA,EAC9BoC,EAAe2E,EAAO3E,aACtBW,EAAqBgE,EAAOhE,mBAchC,YAb2BiE,IAAvBjE,IAAkCA,EAAqBX,GAK3DpG,GAJAA,EAAQA,EAAM4G,MAAM,CAClBR,aAAcA,EACdW,mBAAoBA,KAERC,eAAc,SAAUhH,GACpCkG,EAAO9G,SAAQ,SAAU2G,GACvB/F,EAAMiG,OAAO,UAAU,SAAUC,GAC/B,OAAOA,EAAOL,IAAIE,EAAM1G,IAAK,GAAMyE,SAASiC,UAGhD/F,EAAM6F,IAAI,SAAU0E,GAAOzG,SAAS0E,QAKxCmC,EAAM9O,UAAUoP,KAAO,WAQrB,MAPU,CACR7E,aAAczK,KAAKyK,aACnBF,OAAQ/K,OAAO+P,OAAOvP,KAAKuK,OAAO+E,QAClCzC,OAAQ7M,KAAK6M,OACbiC,QAAS9O,KAAK8O,QACd9B,WAAYhN,KAAKgN,aAKrBxN,OAAO4H,eAAe4H,EAAM9O,UAAW,UAAW,CAChDmH,IAAK,WACH,OAAOrH,KAAKqH,IAAI,YAElBC,YAAY,EACZC,cAAc,IAEhB/H,OAAO4H,eAAe4H,EAAM9O,UAAW,SAAU,CAC/CmH,IAAK,WACH,OAAOrH,KAAKqH,IAAI,WAElBC,YAAY,EACZC,cAAc,IAEhB/H,OAAO4H,eAAe4H,EAAM9O,UAAW,SAAU,CAC/CmH,IAAK,WACH,OAAOrH,KAAKqH,IAAI,WAElBC,YAAY,EACZC,cAAc,IAEhB/H,OAAO4H,eAAe4H,EAAM9O,UAAW,gBAAiB,CACtDmH,IAAK,WACH,OAAOrH,KAAKqH,IAAI,kBAElBC,YAAY,EACZC,cAAc,IAEhB/H,OAAO4H,eAAe4H,EAAM9O,UAAW,eAAgB,CACrDmH,IAAK,WACH,OAAOrH,KAAKqH,IAAI,iBAElBC,YAAY,EACZC,cAAc,IAEhB/H,OAAO4H,eAAe4H,EAAM9O,UAAW,qBAAsB,CAC3DmH,IAAK,WACH,OAAOrH,KAAKqH,IAAI,uBAElBC,YAAY,EACZC,cAAc,IAEhB/H,OAAO4H,eAAe4H,EAAM9O,UAAW,WAAY,CACjDmH,IAAK,WACH,OAAOrH,KAAKqH,IAAI,aAElBC,YAAY,EACZC,cAAc,IAEhB/H,OAAO4H,eAAe4H,EAAM9O,UAAW,YAAa,CAClDmH,IAAK,WACH,OAAOrH,KAAKqH,IAAI,cAElBC,YAAY,EACZC,cAAc,IAEhB/H,OAAO4H,eAAe4H,EAAM9O,UAAW,oBAAqB,CAC1DmH,IAAK,WACH,OAAOrH,KAAKgK,YAAchF,GAAUC,gBAAkBjF,KAAKiK,SAAW,MAExE3C,YAAY,EACZC,cAAc,IAEhB/H,OAAO4H,eAAe4H,EAAM9O,UAAW,iBAAkB,CACvDmH,IAAK,WACH,OAAOrH,KAAKgK,YAAchF,GAAUE,aAAelF,KAAKiK,SAAW,MAErE3C,YAAY,EACZC,cAAc,IAGhByH,EAAM9O,UAAU+I,SAAW,SAAUvF,GACnC,OAAO1D,KAAKuK,OAAOlD,IAAI3D,IAGzBsL,EAAM9O,UAAUsP,eAAiB,SAAU9L,EAAKoD,GAC9C,OAAO9G,KAAK8O,QAAQzH,IAAI3D,IAAQ,IAAIoD,GAGtCkI,EAAM9O,UAAU2J,eAAiB,SAAUnG,GACzC,IAAI0G,EAAQpK,KAAKiJ,SAASvF,GAC1B,OAAO0G,EAAMhC,UAAYpI,KAAKiJ,SAASmB,EAAMhC,WAAa,MAG5D4G,EAAM9O,UAAUuP,oBAAsB,SAAU/L,GAI9C,IAHA,IAAI0G,EAAQpK,KAAKiJ,SAASvF,GACtBgM,EAAQ,EAELtF,GAASA,EAAM1G,MAAQ1D,KAAKoL,oBACjCsE,IACAtF,EAAQpK,KAAK6J,eAAeO,EAAM1G,KAGpC,OAAOgM,GAGTlQ,OAAO4H,eAAe4H,EAAM9O,UAAW,YAAa,CAClDmH,IAAK,WACH,OAAOrH,KAAKiJ,SAASjJ,KAAKyK,eAE5BnD,YAAY,EACZC,cAAc,IAEhB/H,OAAO4H,eAAe4H,EAAM9O,UAAW,aAAc,CACnDmH,IAAK,WACH,OAAOrH,KAAKqH,IAAI,eAElBC,YAAY,EACZC,cAAc,IAETyH,EArMT,CAsME,iBAAOH,K,oCC3nCL,GAAiB,SAAuBvP,EAAGC,GAW7C,OAVA,GAAiBC,OAAOC,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUL,EAAGC,GACjCD,EAAEI,UAAYH,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAIK,KAAKL,EACRA,EAAEM,eAAeD,KAAIN,EAAEM,GAAKL,EAAEK,MAIhBN,EAAGC,IAG3B,SAAS,GAAUD,EAAGC,GAGpB,SAASQ,IACPC,KAAKC,YAAcX,EAHrB,GAAeA,EAAGC,GAMlBD,EAAEY,UAAkB,OAANX,EAAaC,OAAOW,OAAOZ,IAAMQ,EAAGG,UAAYX,EAAEW,UAAW,IAAIH,GAGjF,IAAI,GAAU,WAaZ,OAZA,GAAUP,OAAOa,QAAU,SAAkBC,GAC3C,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,IAG9C,IAAK,IAAIZ,KAFTW,EAAIG,UAAUF,GAGRhB,OAAOU,UAAUL,eAAee,KAAKL,EAAGX,KAAIU,EAAEV,GAAKW,EAAEX,IAI7D,OAAOU,IAGMO,MAAMb,KAAMU,YAe7B,IAZ8BiP,GAAQC,GAkJlCC,GAtIA,GAAM,IAAM,oBACZC,GAAU,IAAOC,IAAIF,KAbKF,GAawD,CAAC,0CAA2C,gBAAiB,2BAb7GC,GAayI,CAAC,0CAA2C,gBAAiB,2BAZtOpQ,OAAO4H,eACT5H,OAAO4H,eAAeuI,GAAQ,MAAO,CACnClO,MAAOmO,KAGTD,GAAOC,IAAMA,GAO6BC,GAJrCF,KAIiQ,SAAUK,GAClR,OAAOA,EAAM5M,SAAW,KAAO,WAC9B,SAAU4M,GACX,OAAOA,EAAM5M,SAAW,UAAY,UAGlC,GAEJ,SAAU8D,GAGR,SAAS+I,EAAiBD,GACxB,IAAIE,EAAQhJ,EAAOtG,KAAKZ,KAAMgQ,IAAUhQ,KA8BxC,OA5BAkQ,EAAMC,MAAQ,CACZ1H,QAAS,MAGXyH,EAAME,YAAc,SAAUhP,GAC5BA,EAAEiP,mBAGJH,EAAMI,YAAc,SAAUlP,KAI9B8O,EAAMK,UAAY,SAAUnP,KAE5B8O,EAAMM,aAAe,SAAUC,IACXP,EAAMQ,KAAKC,SAASF,EAAMG,SAC9BV,EAAMW,eAAeJ,IAGrCP,EAAMY,QAAU,SAAUC,GACxB,OAAO,SAAUC,GACfD,EAAQC,GACRd,EAAMQ,KAAOM,IAIjBd,EAAMe,YAECf,EAwFT,OAzHA,GAAUD,EAAkB/I,GAoC5B+I,EAAiB/P,UAAUiD,SAAW,SAAUnB,GAC9C,IAAIP,EAAQO,EAAGP,MACf,GAAI,WAAYA,GAChBzB,KAAKkR,SAAS,CACZzI,QAAShH,KAIbwO,EAAiB/P,UAAUiR,kBAAoB,WAC9BnR,KAAKgQ,MAAM5M,UAE1BgO,SAASC,iBAAiB,QAASrR,KAAKwQ,eAG1CP,EAAiB/P,UAAUoR,qBAAuB,WACjCtR,KAAKgQ,MAAM5M,UAE1BgO,SAASG,oBAAoB,QAASvR,KAAKwQ,eAG7CP,EAAiB/P,UAAU2Q,eAAiB,SAAUzP,KAEtD6O,EAAiB/P,UAAUsR,kBAAoB,WAC7C,OAAO,MAGTvB,EAAiB/P,UAAUuR,WAAa,WACtC,IACIhJ,EADQzI,KAAKwR,oBAAoBtJ,MACjBL,KACpB,OAAe,MAAXY,EAAwB,MAEL,kBAAZA,IACTA,EAAU,KAAgBiJ,YAAYjJ,IAGjCA,IAGTwH,EAAiB/P,UAAU+Q,UAAY,WACrC,IAAIxI,EAAUzI,KAAKyR,aACnBzR,KAAKmQ,MAAQ,CACX1H,QAASA,IAIbwH,EAAiB/P,UAAUyR,OAAS,WAClC,IAAI3P,EAAKhC,KAAKgQ,MACVjH,EAAW/G,EAAG+G,SACdgI,EAAU/O,EAAG+O,QAEb1I,EAAKrI,KAAKwR,oBACVpO,EAAWiF,EAAGjF,SACdwO,EAAgBvJ,EAAGuJ,cACnBC,EAAcxJ,EAAGwJ,YACjBhJ,EAAQR,EAAGQ,MAEf,GAAIzF,GACJ,IAAIM,EAAMkO,EAAc7I,GACpBN,EAAUrF,EAAWpD,KAAKyR,aAAezR,KAAKmQ,MAAM1H,QAGpD2H,EADKpQ,KACYoQ,YACjBE,EAFKtQ,KAEYsQ,YACjBC,EAHKvQ,KAGUuQ,UAEfuB,EAAc,CAChBrQ,MAAOgH,EACPrF,SAAUA,EACVD,SAAUnD,KAAKmD,SAASN,KAAK7C,MAC7B6R,YAAaA,EACbhJ,MAAOA,GAELkJ,EAAe,CACjBrO,IAAKA,EACLN,SAAUA,EACV4N,IAAKhR,KAAK8Q,QAAQC,EAAQrN,IAC1B0M,YAAaA,EACbE,YAAaA,EACbC,UAAWA,GAEb,OAAO,wBAAcT,GAAS,GAAQ,GAAIiC,GAAe,wBAAc,KAAQ,GAAQ,GAAID,EAAa,CACtGE,WAAW,OAIR/B,EA1HT,CA2HE,iBAGE,GAAQ,IAAM,6BAElB,SAASgC,GAAoBvO,GAC3B,MAAO,kBAAoBA,EAG7B,IAAI,GAEJ,SAAUwD,GAGR,SAASgL,EAAmBlC,GAC1B,IAAIE,EAAQhJ,EAAOtG,KAAKZ,KAAMgQ,IAAUhQ,KAQxC,OANAkQ,EAAMK,UAAY,SAAUnP,GACtBA,EAAE+Q,YAAYC,SAAkC,UAAvBhR,EAAE+Q,YAAYE,MACzCnC,EAAMoC,QAIHpC,EA0CT,OArDA,GAAUgC,EAAoBhL,GAc9BgL,EAAmBhS,UAAUsR,kBAAoB,WAC/C,IAAIxP,EAAKhC,KAAKgQ,MACV3L,EAAQrC,EAAGqC,MACX0E,EAAW/G,EAAG+G,SACd3F,EAAWpB,EAAGoB,SAMlB,MAAO,CACL8E,MANU7D,EAAM4E,SAASF,GAAUhB,SAASlD,GAAUC,SAASoD,MAO/D9E,SAAUA,EACVwO,cAPkBK,GAQlBJ,YAAa,MACbhJ,MARU,CACV0J,WAAY,SAWhBL,EAAmBhS,UAAU2Q,eAAiB,SAAUzP,GACtD,GAAM,kBACNpB,KAAKsS,QAGPJ,EAAmBhS,UAAUoS,KAAO,WAClC,IAAItQ,EAAKhC,KAAKgQ,MACV3L,EAAQrC,EAAGqC,MACX0E,EAAW/G,EAAG+G,SACH1E,EAAMmO,oBAAsBzJ,GAE1B/I,KAAKgQ,MAAMzM,WACjBK,IAAI,YAAa,GAAQ,GAAQ,GAAI5D,KAAKgQ,OAAQ,CAC3DyC,OAAQ/M,GAAOY,gBACf8F,UAAWvH,GAAUC,QACrB+C,KAAM7H,KAAKmQ,MAAM1H,QACjBuB,UAAWhF,GAAUJ,WAIlBsN,EAtDT,CAuDE,IAEEQ,GAAQ,IAAM,0BAElB,SAASC,GAAiBjP,GACxB,MAAO,eAAiBA,EAG1B,IAAI,GAEJ,SAAUwD,GAGR,SAAS0L,EAAgB5C,GACvB,IAAIE,EAAQhJ,EAAOtG,KAAKZ,KAAMgQ,IAAUhQ,KAGxC,OADA0S,GAAM,eACCxC,EAmDT,OAzDA,GAAU0C,EAAiB1L,GAS3B0L,EAAgB1S,UAAU+Q,UAAY,WACpC/J,EAAOhH,UAAU+Q,UAAUrQ,KAAKZ,MAEhC,IAAIgC,EAAKhC,KAAKgQ,MACVzM,EAAavB,EAAGuB,WAEhBG,EAAM,mBADK1B,EAAG+G,SAEdtH,EAAQzB,KAAKmQ,MAAM1H,QACvBlF,EAAWK,IAAI,eAAgB,CAC7BF,IAAKA,EACLjC,MAAOA,KAIXmR,EAAgB1S,UAAUsR,kBAAoB,WAC5C,IAAIxP,EAAKhC,KAAKgQ,MACV3L,EAAQrC,EAAGqC,MACX0E,EAAW/G,EAAG+G,SAIlB,MAAO,CACLb,MAJU7D,EAAM4E,SAASF,GAAUhB,SAASlD,GAAUE,MAAMmD,MAK5D9E,SAJaiB,EAAMwO,iBAAmB9J,EAKtC6I,cAJkBe,GAKlBd,YAAa,2BAIjBe,EAAgB1S,UAAUiD,SAAW,SAAUnB,GAC7C,IAAIP,EAAQO,EAAGP,MACfiR,GAAM,YACN,IAAIrK,EAAKrI,KAAKgQ,MACVzM,EAAa8E,EAAG9E,WAChBwF,EAAWV,EAAGU,SAGlB,KAFYV,EAAGhE,MACMwO,iBAAmB9J,GACxC,CACA,IAAIrF,EAAM,mBAAqBqF,EAC/BxF,EAAWK,IAAI,eAAgB,CAC7BF,IAAKA,EACLjC,MAAOA,IAETzB,KAAKkR,SAAS,CACZzI,QAAShH,MAINmR,EA1DT,CA2DE,IAiDa,OA/Cf,WACE,MAAO,CACLE,cAAe,SAAuB9C,GACpC,IAAI3L,EAAQ2L,EAAM3L,MACdd,EAAayM,EAAMzM,WACnBwF,EAAWiH,EAAMjH,SACjBgK,EAAY/C,EAAM+C,UAElB7K,EADQ7D,EAAM4E,SAASF,GACThB,SAASlD,GAAUC,SAASoD,MAC1C8K,EAAOzP,EAAWK,IAAI,qBAAsB,GAAQ,GAAQ,GAAIoM,GAAQ,CAC1E9H,MAAOA,KAOT,OAJiB,MAAb6K,IACFC,EAAOA,EAAKrS,OAASoS,EAAYC,EAAKC,OAAO,EAAGF,GAAa,MAAQC,GAGhEA,GAETE,yBAA0B,SAAkClD,GAC1D,OAAO,wBAAc,GAAoB,GAAQ,GAAIA,KAEvDmD,sBAAuB,SAA+BnD,GACpD,OAAO,wBAAc,GAAiB,GAAQ,GAAIA,KAEpDoD,aAAc,SAAsBpD,EAAO1O,GACzC,IAAI4G,EAAQ8H,EAAM9H,MACd3E,EAAayM,EAAMzM,WAEvB,OAAI2E,EAAMN,OAAS/C,GAAUC,SAAWoD,EAAMN,OAAS/C,GAAUE,KAC1C,MAAdmD,EAAML,MAAgE,KAAhDtE,EAAWK,IAAI,qBAAsBoM,GAG7D1O,KAET+R,mBAAoB,SAA4BrD,EAAO1O,GACrD,IAAI4G,EAAQ8H,EAAM9H,MAElB,OAAIA,EAAMN,OAAS/C,GAAUC,SAAWoD,EAAMN,OAAS/C,GAAUE,KAClC,kBAAfmD,EAAML,KAAoBK,EAAML,KAAO,KAAgByL,UAAUpL,EAAML,MAGhFvG,O,iDClWT,GAAiB,SAAuBhC,EAAGC,GAW7C,OAVA,GAAiBC,OAAOC,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUL,EAAGC,GACjCD,EAAEI,UAAYH,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAIK,KAAKL,EACRA,EAAEM,eAAeD,KAAIN,EAAEM,GAAKL,EAAEK,MAIhBN,EAAGC,IAG3B,SAAS,GAAUD,EAAGC,GAGpB,SAASQ,IACPC,KAAKC,YAAcX,EAHrB,GAAeA,EAAGC,GAMlBD,EAAEY,UAAkB,OAANX,EAAaC,OAAOW,OAAOZ,IAAMQ,EAAGG,UAAYX,EAAEW,UAAW,IAAIH,GAGjF,IAAI,GAAU,WAaZ,OAZA,GAAUP,OAAOa,QAAU,SAAkBC,GAC3C,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,IAG9C,IAAK,IAAIZ,KAFTW,EAAIG,UAAUF,GAGRhB,OAAOU,UAAUL,eAAee,KAAKL,EAAGX,KAAIU,EAAEV,GAAKW,EAAEX,IAI7D,OAAOU,IAGMO,MAAMb,KAAMU,YAG7B,SAAS6S,GAAOhT,EAAGa,GACjB,IAAId,EAAI,GAER,IAAK,IAAIV,KAAKW,EACRf,OAAOU,UAAUL,eAAee,KAAKL,EAAGX,IAAMwB,EAAEwJ,QAAQhL,GAAK,IAAGU,EAAEV,GAAKW,EAAEX,IAG/E,GAAS,MAALW,GAAqD,oBAAjCf,OAAOgU,sBAA2C,KAAIhT,EAAI,EAAb,IAAgBZ,EAAIJ,OAAOgU,sBAAsBjT,GAAIC,EAAIZ,EAAEe,OAAQH,IAClIY,EAAEwJ,QAAQhL,EAAEY,IAAM,GAAKhB,OAAOU,UAAUuT,qBAAqB7S,KAAKL,EAAGX,EAAEY,MAAKF,EAAEV,EAAEY,IAAMD,EAAEX,EAAEY,KAEhG,OAAOF,EAGT,SAASoT,GAAWC,EAAY/C,EAAQlN,EAAKkQ,GAC3C,IAEItU,EAFAwH,EAAIpG,UAAUC,OACdQ,EAAI2F,EAAI,EAAI8J,EAAkB,OAATgD,EAAgBA,EAAOpU,OAAOqU,yBAAyBjD,EAAQlN,GAAOkQ,EAE/F,GAAuB,kBAAZE,SAAoD,oBAArBA,QAAQC,SAAyB5S,EAAI2S,QAAQC,SAASJ,EAAY/C,EAAQlN,EAAKkQ,QAAW,IAAK,IAAIpT,EAAImT,EAAWhT,OAAS,EAAGH,GAAK,EAAGA,KAC1KlB,EAAIqU,EAAWnT,MAAIW,GAAK2F,EAAI,EAAIxH,EAAE6B,GAAK2F,EAAI,EAAIxH,EAAEsR,EAAQlN,EAAKvC,GAAK7B,EAAEsR,EAAQlN,KAASvC,GAE5F,OAAO2F,EAAI,GAAK3F,GAAK3B,OAAO4H,eAAewJ,EAAQlN,EAAKvC,GAAIA,EAG9D,SAAS,GAASJ,GAChB,IAAIC,EAAsB,oBAAXC,QAAyBF,EAAEE,OAAOC,UAC7CV,EAAI,EACR,OAAIQ,EAAUA,EAAEJ,KAAKG,GACd,CACLO,KAAM,WAEJ,OADIP,GAAKP,GAAKO,EAAEJ,SAAQI,OAAI,GACrB,CACLU,MAAOV,GAAKA,EAAEP,KACde,MAAOR,KAMf,SAAS,GAAOA,EAAGN,GACjB,IAAIO,EAAsB,oBAAXC,QAAyBF,EAAEE,OAAOC,UACjD,IAAKF,EAAG,OAAOD,EACf,IACII,EAEAC,EAHAZ,EAAIQ,EAAEJ,KAAKG,GAEXM,EAAK,GAGT,IACE,WAAc,IAANZ,GAAgBA,KAAM,MAAQU,EAAIX,EAAEc,QAAQC,MAClDF,EAAGG,KAAKL,EAAEM,OAEZ,MAAOC,GACPN,EAAI,CACFM,MAAOA,GAET,QACA,IACMP,IAAMA,EAAEI,OAASP,EAAIR,EAAU,SAAIQ,EAAEJ,KAAKJ,GAC9C,QACA,GAAIY,EAAG,MAAMA,EAAEM,OAInB,OAAOL,EAGT,SAAS,KACP,IAAK,IAAIA,EAAK,GAAIb,EAAI,EAAGA,EAAIE,UAAUC,OAAQH,IAC7Ca,EAAKA,EAAGO,OAAO,GAAOlB,UAAUF,KAGlC,OAAOa,EAGT,SAAS,GAAqBsO,EAAQC,GASpC,OARIpQ,OAAO4H,eACT5H,OAAO4H,eAAeuI,EAAQ,MAAO,CACnClO,MAAOmO,IAGTD,EAAOC,IAAMA,EAGRD,EAGT,IA4MI,GAAkBqE,GAiGlBC,GAAoBC,GAAoBC,GAAkBC,GAAkBC,GAAkBC,GAAkBC,GAAkBC,GAAkBC,GAAkBC,GAAmBC,GA7SzLC,GAEJ,SAAU1N,GAGR,SAAS0N,EAAW5E,GAClB,OAAO9I,EAAOtG,KAAKZ,KAAMgQ,IAAUhQ,KAoBrC,OAvBA,GAAU4U,EAAY1N,GAMtB0N,EAAW1U,UAAU2U,UAAY,SAAUpC,EAAQtO,GACjDnE,KAAKgQ,MAAMzM,WAAWK,IAAI,YAAa,GAAQ,CAC7C6O,OAAQA,GACPtO,KAGLyQ,EAAW1U,UAAU0D,IAAM,SAAUsJ,EAAM/I,GACzCnE,KAAKgQ,MAAMzM,WAAWK,IAAIsJ,EAAM/I,IAGlC3E,OAAO4H,eAAewN,EAAW1U,UAAW,QAAS,CACnDmH,IAAK,WACH,OAAOrH,KAAKgQ,MAAM3L,MAAM4E,SAASjJ,KAAKgQ,MAAMjH,WAE9CzB,YAAY,EACZC,cAAc,IAETqN,EAxBT,CAyBE,iBAEE,GAAM,IAAM,2BACZE,GAAiB,IAAO/E,IAAI,KAAqB,GAAmB,GAAqB,CAAC,mFAAoF,CAAC,sFAC/KgF,GAAoB,IAAOhF,IAAIiE,KAAqBA,GAAmB,GAAqB,CAAC,oDAAqD,CAAC,uDAEnJ,GAEJ,SAAU9M,GAGR,SAAS8N,EAAiBhF,GACxB,IAAIE,EAAQhJ,EAAOtG,KAAKZ,KAAMgQ,IAAUhQ,KA2HxC,OAzHAkQ,EAAM+E,sBAAwB,SAAUC,EAASC,GAC/C,GAAIjF,EAAMkF,eAAgB,CACxB,IAAIC,EAAc,CAChBC,MAAOpF,EAAMzH,QAAQ8M,YAA0C,EAA5BrF,EAAMsF,QAAQD,YACjDE,OAAQvF,EAAMzH,QAAQiN,aAA4C,EAA7BxF,EAAMsF,QAAQE,cAErDxF,EAAMyF,QAAQ9M,MAAMyM,MAAQD,EAAYC,MAAQ,KAChDpF,EAAMyF,QAAQ9M,MAAM4M,OAASJ,EAAYI,OAAS,KAGpDvF,EAAMkF,eAAiBF,EAAQ,GAAGU,aAGpC1F,EAAM2F,sBAAwB,IAAI,IAAe3F,EAAM+E,uBAEvD/E,EAAM4F,WAAa,SAAU9E,GACvBA,IACFd,EAAMzH,QAAUuI,EAEhBd,EAAM2F,sBAAsBE,QAAQ7F,EAAMzH,WAI9CyH,EAAM8F,WAAa,SAAUhF,GACvBA,IACFd,EAAMsF,QAAUxE,EAEXd,EAAMF,MAAMiG,mBACf,GAAI,4BAEJ/F,EAAMsF,QAAQnE,iBAAiB,SAAS,SAAUjQ,GAChD,GAAI,YACHA,EAAEgR,SAAWhR,EAAE8U,SAAW9U,EAAE+U,mBAC5B,CACDC,SAAS,KAIblG,EAAMmG,iBAAiBnG,EAAMsF,QAAQD,YAAarF,EAAMsF,QAAQE,gBAIpExF,EAAMoG,WAAa,SAAUtF,GACvBA,IACFd,EAAMyF,QAAU3E,IAIpBd,EAAMqG,eAAiB,WACjBrG,EAAMzH,SAAWyH,EAAMsF,SAAWtF,EAAMyF,UAC1CzF,EAAMyF,QAAQ9M,MAAMyM,MAAkE,GAAzDpF,EAAMzH,QAAQ8M,YAAcrF,EAAMsF,QAAQD,aAAmB,KAC1FrF,EAAMyF,QAAQ9M,MAAM4M,OAAqE,GAA3DvF,EAAMzH,QAAQiN,aAAexF,EAAMsF,QAAQE,cAAoB,KAC7FxF,EAAMzH,QAAQI,MAAM2N,KAAOtG,EAAMsF,QAAQD,YAAc,KACvDrF,EAAMzH,QAAQI,MAAM4N,IAAMvG,EAAMsF,QAAQE,aAAe,OAI3DxF,EAAMmG,iBAAmB,SAAUG,EAAMC,GACvC,GAAI,oBAAsBD,EAAO,IAAMC,GAEnCvG,EAAMsF,UACRtF,EAAMsF,QAAQkB,WAAaF,EAC3BtG,EAAMsF,QAAQmB,UAAYF,IAI9BvG,EAAM0G,sBAAwB,SAAUC,EAAWC,GACjD,GAAI,yBAA2BD,EAAY,IAAMC,GAE7C5G,EAAMsF,UACRtF,EAAMsF,QAAQkB,YAAcG,EAC5B3G,EAAMsF,QAAQmB,WAAaG,IAI/B5G,EAAME,YAAc,SAAUhP,GAM5B,IAAIY,EAAKkO,EAAMF,MACX+G,EAAW/U,EAAG+U,SACdC,EAAiBhV,EAAGgV,eACpBC,EAAcjV,EAAGiV,YACrB,KAAIA,GAAgBA,OAEH,IAAb7V,EAAE8V,QAA6B,SAAbH,GAAoC,IAAb3V,EAAE8V,QAA6B,UAAbH,GAAsB,CACnF,GAAIC,IACG5V,EAAEgR,QAAS,OAGlBlC,EAAMiH,YAAcjH,EAAMsF,QAAQkB,WAAatV,EAAE+Q,YAAYiF,QAC7DlH,EAAMmH,YAAcnH,EAAMsF,QAAQmB,UAAYvV,EAAE+Q,YAAYmF,QAC5D,IAAIC,EAAMrH,EAAMsF,QAChB+B,EAAIlG,iBAAiB,YAAanB,EAAMI,aACxCiH,EAAIlG,iBAAiB,UAAWnB,EAAMsH,aAI1CtH,EAAMsH,UAAY,SAAUpW,GAC1B,IAAImW,EAAMrH,EAAMsF,QAChB+B,EAAIhG,oBAAoB,YAAarB,EAAMI,aAC3CiH,EAAIhG,oBAAoB,UAAWrB,EAAMsH,YAG3CtH,EAAMI,YAAc,SAAUlP,GAC5B8O,EAAMsF,QAAQkB,WAAaxG,EAAMiH,YAAc/V,EAAEgW,QACjDlH,EAAMsF,QAAQmB,UAAYzG,EAAMmH,YAAcjW,EAAEkW,SAGlDpH,EAAMuH,kBAAoB,SAAUrW,GAClCA,EAAE+U,kBAGJjG,EAAMC,MAAQ,CACZkF,YAAa,CACXC,MAAO,UACPG,OAAQ,YAGLvF,EAuCT,OArKA,GAAU8E,EAAkB9N,GAiI5B8N,EAAiB9U,UAAUiR,kBAAoB,WAC7CnR,KAAKuW,iBACLnF,SAASC,iBAAiB,cAAerR,KAAKyX,oBAGhDzC,EAAiB9U,UAAUoR,qBAAuB,WAChDF,SAASG,oBAAoB,cAAevR,KAAKyX,oBAGnDzC,EAAiB9U,UAAU6M,cAAgB,SAAUC,GACnDhN,KAAK2V,QAAQ9M,MAAM6O,UAAY,SAAW1K,EAAa,IACvDhN,KAAK2V,QAAQ9M,MAAM8O,gBAAkB,WAGvC3C,EAAiB9U,UAAUyR,OAAS,WAClC,IAAI9I,EAAQ,GAAQ,GAAI7I,KAAKmQ,MAAMkF,aAKnC,OAAO,wBAAcP,GAAgB,CACnC9D,IAAKhR,KAAKgW,WACV5F,YAAapQ,KAAKoQ,aACjB,wBAAc,MAAO,CACtBvH,MAAOA,EACPmI,IAAKhR,KAAKsW,YACT,wBAAcvB,GAAmB,CAClC/D,IAAKhR,KAAK8V,WACVjN,MAAO7I,KAAKmQ,MAAM3C,cACjBxN,KAAKgQ,MAAM4H,SAAS5X,KAAKqW,iBAAkBrW,KAAK4W,2BAGrD5B,EAAiB6C,aAAe,CAC9Bd,SAAU,OACVC,gBAAgB,GAEXhC,EAtKT,CAuKE,aAGE,GAAQ,IAAM,iBAEd8C,GAEJ,SAAU5Q,GAGR,SAAS4Q,IACP,IAAI5H,EAAmB,OAAXhJ,GAAmBA,EAAOrG,MAAMb,KAAMU,YAAcV,KAyDhE,OAvDAkQ,EAAM6H,OAAS,SAAU7K,GAEvB,OADA,GAAMgD,GACCA,EAAMhD,IAGfgD,EAAMa,QAAU,SAAU7D,GACxB,OAAO,SAAU8K,GACXA,IACF9H,EAAMhD,GAAQ8K,EAEd9H,EAAM+H,aAAa/K,EAAM8K,MAK/B9H,EAAMgI,UAAY,SAAUhL,GAC1B,GAAM,aAAcA,UACbgD,EAAMhD,IAGfgD,EAAMiI,UAAY,IAAI9U,IAEtB6M,EAAM+H,aAAe,SAAU/K,EAAM8D,GACnC,IAAIjP,EAAKC,EAET,GAAIkO,EAAMiI,UAAUC,IAAIlL,GAAO,CAC7B,IAAImL,EAAYnI,EAAMiI,UAAU9Q,IAAI6F,GAEpC,IACE,IAAK,IAAIoL,EAAc,GAASD,GAAYE,EAAgBD,EAAYhX,QAASiX,EAAchX,KAAMgX,EAAgBD,EAAYhX,OAAQ,EAEvIkX,EADeD,EAAc9W,OACpByL,EAAM8D,IAEjB,MAAO1O,GACPP,EAAM,CACJL,MAAOY,GAET,QACA,IACMiW,IAAkBA,EAAchX,OAASS,EAAKsW,EAAY/V,SAASP,EAAGpB,KAAK0X,GAC/E,QACA,GAAIvW,EAAK,MAAMA,EAAIL,UAM3BwO,EAAMuI,oBAAsB,SAAUvL,EAAMsL,GACrCtI,EAAMiI,UAAUC,IAAIlL,GAGvBgD,EAAMiI,UAAU9Q,IAAI6F,GAAM1L,KAAKgX,GAF/BtI,EAAMiI,UAAUjO,IAAIgD,EAAM,CAACsL,KAMxBtI,EAOT,OAnEA,GAAU4H,EAAS5Q,GA+DnB4Q,EAAQ5X,UAAUyR,OAAS,WACzB,OAAO3R,KAAKgQ,MAAM4H,SAAS5X,KAAK+Q,QAAS/Q,KAAK+X,OAAQ/X,KAAKkY,UAAWlY,KAAKyY,oBAAoB5V,KAAK7C,QAG/F8X,EApET,CAqEE,aAEEY,GAAO,IAAO3I,IAAIkE,KAAuBA,GAAqB,GAAqB,CAAC,yCAA0C,qBAAsB,yBAA0B,OAAQ,CAAC,yCAA0C,qBAAsB,yBAA0B,UAAU,SAAUjE,GACvS,OAAOA,EAAM2I,cAAgB3I,EAAM2I,cAAgB,SAClD,SAAU3I,GACX,OAAOA,EAAM4I,cACZ,SAAU5I,GACX,OAAOA,EAAM6I,kBAEXC,GAAS,IAAO/I,IAAImE,KAAuBA,GAAqB,GAAqB,CAAC,eAAgB,OAAQ,CAAC,eAAgB,UAAU,SAAUlE,GACrJ,OAAOA,EAAM+I,UAEXC,GAAe,IAAOC,EAAE9E,KAAqBA,GAAmB,GAAqB,CAAC,qCAAsC,CAAC,wCAC7H+E,GAAS,IAAOnJ,IAAIqE,KAAqBA,GAAmB,GAAqB,CAAC,2CAA4C,CAAC,8CAC/H+E,GAAM,IAAOpJ,IAAIsE,KAAqBA,GAAmB,GAAqB,CAAC,iEAAkE,CAAC,oEAClJ+E,GAAiB,YAAO,IAAP,CAAiB9E,KAAqBA,GAAmB,GAAqB,CAAC,wCAAyC,CAAC,2CAC1I+E,GAAY,YAAOF,GAAP,CAAY5E,KAAqBA,GAAmB,GAAqB,CAAC,4EAA6E,CAAC,+EACpK+E,GAAQ,IAAOvJ,IAAIyE,KAAqBA,GAAmB,GAAqB,CAAC,uBAAwB,CAAC,0BAC1G+E,GAAiB,IAAOC,KAAK/E,KAAqBA,GAAmB,GAAqB,CAAC,wEAAyE,CAAC,2EACrKgF,GAAS,IAAO1J,IAAI2E,KAAsBA,GAAoB,GAAqB,CAAC,gBAAiB,OAAQ,CAAC,gBAAiB,UAAU,SAAU1E,GACrJ,OAAOA,EAAM0J,UAEXC,GAAe,IAAO5J,IAAI4E,KAAsBA,GAAoB,GAAqB,CAAC,oEAAqE,CAAC,uEAEhK,GAAQ,IAAM,gBAElB,SAASiF,KACP,IAAIC,EAAiB,GACrB,MAAO,CACLC,iBAAkB,SAA0B9J,GAC1C,GAAM,oBACN,IAAIzM,EAAayM,EAAMzM,WACnBc,EAAQ2L,EAAM3L,MACd0E,EAAWiH,EAAMjH,SACrB,GAAM1E,EAAM2I,YAEiB,OAAzB3I,EAAMwO,gBACNxO,EAAMmO,oBAAsBzJ,IAC5B1E,EAAM4F,WAAalB,GAAY1E,EAAM2F,YAAchF,GAAUC,iBACjE1B,EAAWK,IAAI,YAAa,GAAQ,GAAQ,GAAIoM,GAAQ,CACtDyC,OAAQ/M,GAAOQ,YACf8D,UAAWhF,GAAUJ,YAGzBmV,uBAAwB,SAAgC/J,GACtD,IAAIzM,EAAayM,EAAMzM,WAEM,OADjByM,EAAM3L,MACRwO,gBACVtP,EAAWK,IAAI,YAAa,GAAQ,GAAQ,GAAIoM,GAAQ,CACtDyC,OAAQ/M,GAAOQ,YACf8D,UAAWhF,GAAUC,oBAGzB+U,uBAAwB,SAAgChK,GACrCA,EAAMzM,WACZK,IAAI,YAAa,GAAQ,GAAQ,GAAIoM,GAAQ,CACtDyC,OAAQ/M,GAAOQ,YACf8D,UAAWhF,GAAUG,eAGzB8U,uBAAwB,SAAgCjK,GACtD,IAAIzM,EAAayM,EAAMzM,WACnB2W,EAAmB3W,EAAWK,IAAI,sBAAuBoM,GAC7D,OAAwB,MAApBkK,EAAiC,KAEP,cAA1BA,EAAiBhN,KACZ,WACL3J,EAAWK,IAAI,YAAa,GAAQ,GAAQ,GAAIoM,GAAQ,CACtDhG,UAAWhF,GAAUJ,OACrB6N,OAAQ/M,GAAOQ,qBAJrB,GASFmL,iBAAkB,SAA0BrB,GAC1C,IAAItM,EAAMsM,EAAMtM,IACZ8U,EAAWxI,EAAMwI,SACjB2B,EAAOnK,EAAMmK,KACb5W,EAAayM,EAAMzM,WAUvB,SAAS6W,IACP5B,IACAjV,EAAWK,IAAI,sBAAuB,CACpCF,IAAKA,EACL8U,SAAUA,IAbTqB,EAAenW,KAAMmW,EAAenW,GAAO,IAE5CyW,GACFC,EAAKC,OAAS7B,EACdqB,EAAenW,GAAKlC,KAAK4Y,IAEzBP,EAAenW,GAAKlC,KAAKgX,IAW7BjH,oBAAqB,SAA6BvB,GAChD,IAAItM,EAAMsM,EAAMtM,IACZ8U,EAAWxI,EAAMwI,SAEjBqB,EAAenW,KACjBmW,EAAenW,GAAOmW,EAAenW,GAAKmI,QAAO,SAAUjJ,GACzD,OAAOA,IAAO4V,GAAY5V,EAAGyX,SAAW7B,OAI9C8B,UAAW,SAAmBtK,GAC5B,IAAItM,EAAMsM,EAAMtM,IAEZmW,EAAenW,IACjBmW,EAAenW,GAAKD,SAAQ,SAAUb,GACpC,OAAOA,SAOjB,IAAI2X,GAAW,CACbC,UAAW,YACXC,MAAO,QACPC,aAAc,eACdC,MAAO,QACPC,KAAM,OACNC,MAAO,QACPjV,aAAc,WACdC,WAAY,SACZiV,OAAQ,SACRC,MAAO,QACPC,OAAQ,SACRC,MAAO,QACPC,OAAQ,SACRC,UAAW,YAGb,SAASC,GAAclO,GACrB,MAAO,oBAAsBA,EAG/B,SAASmO,GAAKC,GACZ,OAAO,wBAAc,OAAQ,CAC3BC,UAAWH,GAAcE,KAI7B,SAASE,GAAc9X,GACrB,MAAO,WAAaA,EAGtB,SAAS,GAAoBA,GAC3B,MAAO,kBAAoBA,EAG7B,SAAS,GAAiBA,GACxB,MAAO,eAAiBA,EAG1B,SAAS+X,GAAkB/X,GACzB,MAAO,gBAAkBA,EAG3B,SAASgY,GAAYhY,GACnB,MAAO,SAAWA,EAGpB,SAASiY,GAAYjY,GACnB,MAAO,SAAWA,EAGpB,SAASkY,GAAelY,GACtB,MAAO,aAAeA,EAGxB,SAASmY,GAAenY,GACtB,MAAO,YAAcA,EAGvB,SAASoY,GAAepY,EAAKqY,GAC3B,MAAO,YAAcA,EAAM,IAAMrY,EAGnC,IAAIsY,GAAS,CACXC,iBAAkB,eAClBC,uBAAwB,mBACxBC,kBAAmB,gBACnBC,oBAAqB,kBACrBC,gBAAiB,eAEfC,GAAW,CACbC,kBAAmB,qBAEjBC,GAAU,CACZC,+BAAgC,iCAChCC,2BAA4B,6BAC5BC,YAAa,eAGXC,GAAc,SAAqBxb,GACrCA,EAAEiP,mBAUJ,SAASwM,GAAoB7J,EAAM8J,IAPnC,SAA6BC,EAAKD,GAChC,IAAIE,EAAO5L,SAAS6L,cAAc,KAClCD,EAAKE,KAAOH,EACZC,EAAKG,SAAWL,EAChBE,EAAKI,QAKLC,CADU,mBAAqBC,mBAAmBtK,GACzB8J,GAG3B,SAASS,GAAgBC,GACvB,IAAIC,EAAQrM,SAAS6L,cAAc,SAGnC,OAFAQ,EAAM7V,KAAO,OACb6V,EAAMD,OAASA,EACR,IAAIE,SAAQ,SAAUC,EAASC,GACpCH,EAAMpM,iBAAiB,UAAU,SAAUwM,GAEzC,IAAIC,EAAOD,EAAIjN,OAAOmN,MAAM,GACxBC,EAAK,IAAIC,WAEbD,EAAGE,OAAS,SAAUL,GACpB,IAAIM,EAAMN,EAAIjN,OAAOwN,OAErBT,EAAQQ,IAGVH,EAAGK,QAAU,SAAUR,GACrBD,EAAOC,EAAIjN,OAAOlP,QAGpBsc,EAAGM,WAAWR,MAEhBL,EAAML,WAIV,SAASmB,GAAWpa,GAClB,IAAInC,EAAKmC,EAAIsS,IACTA,OAAa,IAAPzU,EAAgB,EAAIA,EAC1BqG,EAAKlE,EAAIqa,MACTA,OAAe,IAAPnW,EAAgB,EAAIA,EAC5BE,EAAKpE,EAAIsa,OACTA,OAAgB,IAAPlW,EAAgB,EAAIA,EAC7BG,EAAKvE,EAAIqS,KAEb,OAAOC,EAAM,MAAQ+H,EAAQ,MAAQC,EAAS,YAD5B,IAAP/V,EAAgB,EAAIA,GAC8B,KAO/D,SAASgW,GAAQC,GACf,OAAQA,EAAKlI,IAAMkI,EAAKF,QAAU,EAOpC,SAASG,GAAaC,EAAIC,GACxB,OAAQD,EAAGE,EAAID,EAAGC,GAAK,EAGzB,SAASC,GAAaH,EAAIC,GACxB,OAAQD,EAAGI,EAAIH,EAAGG,GAAK,EAGzB,SAASC,GAAOP,GACd,MAAO,EAAEA,EAAKnI,KAAOmI,EAAKH,OAAS,GAAIG,EAAKlI,IAAMkI,EAAKF,QAAU,GAGnE,SAASU,GAAiBC,EAAIC,EAAKC,QACnB,IAAVA,IACFA,EAAQ,GAGV,IAAIX,EAAOS,EAAGG,wBAEVC,EAAYN,GADFG,EAAIE,yBAEdE,EAAWP,GAAOP,GACtBc,EAAS,IAAMA,EAAS,GAAKD,EAAU,IAAMF,EAC7CG,EAAS,IAAMA,EAAS,GAAKD,EAAU,IAAMF,EAC7C,IAAIhK,EAAQqJ,EAAKrJ,MAAQgK,EACrB7J,EAASkJ,EAAKlJ,OAAS6J,EAC3B,MAAO,CACL9I,KAAMiJ,EAAS,GAAKnK,EAAQ,EAC5BkJ,MAAOiB,EAAS,GAAKnK,EAAQ,EAC7BmB,IAAKgJ,EAAS,GAAKhK,EAAS,EAC5BgJ,OAAQgB,EAAS,GAAKhK,EAAS,EAC/BH,MAAOA,EACPG,OAAQA,GAIZ,SAASiK,GAAkBN,EAAIC,GAC7B,IAAIV,EAAOS,EAAGG,wBAEVC,EAAYN,GADFG,EAAIE,yBAEdE,EAAWP,GAAOP,GACtB,MAAO,CAACc,EAAS,GAAKD,EAAU,GAAIC,EAAS,GAAKD,EAAU,IAyB9D,IAAIG,GAAa,CACf5Z,UAAW,YACXC,YAAa,cACbC,aAAc,eACd2Z,aAAc,eACdC,WAAY,aACZlZ,gBAAiB,mBAmBnB,SAASmZ,KACP,MAAO,CACLC,iBAAkB,SAA0B/P,GAC1C,IAAIgQ,EAAgB,SAAuBvN,GACzC,OAAO,SAAUrR,IApBzB,SAAYqR,EAAQzC,GAClB,IAAIjH,EAAWiH,EAAMjH,SACjB1E,EAAQ2L,EAAM3L,MACdd,EAAayM,EAAMzM,gBAEN8L,IAAbtG,IACFiH,EAAQ,GAAQ,GAAQ,GAAIA,GAAQ,CAClCjH,SAAU1E,EAAM4F,YAIpB1G,EAAWK,IAAI,YAAa,GAAQ,GAAQ,GAAIoM,GAAQ,CACtDyC,OAAQA,KAUFwN,CAAGxN,EAAQzC,KA8Bf,MAAO,CACLkQ,aA3BiB,IAAI7c,IAAI,CAAC,CAACsc,GAAW5Z,UAAW,CACjDoa,MAAO,YACPC,MAAO,MACP7P,UAAWyP,EAActa,GAAOK,aAC9B,CAAC4Z,GAAW3Z,YAAa,CAC3Bma,MAAO,cACPC,MAAO,QACP7P,UAAWyP,EAActa,GAAOM,eAC9B,CAAC2Z,GAAW1Z,aAAc,CAC5Bka,MAAO,eACPC,MAAO,MACP7P,UAAWyP,EAActa,GAAOO,gBAC9B,CAAC0Z,GAAWC,aAAc,CAC5BO,MAAO,eACPC,MAAO,QACP7P,UAAWyP,EAActa,GAAOc,yBAC9B,CAACmZ,GAAWE,WAAY,CAC1BM,MAAO,aACPC,MAAO,UACP7P,UAAWyP,EAActa,GAAOe,sBAC9B,CAACkZ,GAAWhZ,gBAAiB,CAC/BwZ,MAAO,kBACPC,MAAO,kBACP7P,UAAWyP,EAActa,GAAOiB,qBAKhC0Z,cAHkB,IAAIhd,OA6M9B,IAAIid,GAAQ,IAAM,oBAElB,SAASC,KA6FP,IAAIC,EAAQ,IAAInd,IAAI,CAAC,CAACqC,GAAOC,gBAAiB,GAAcqF,gBAAiB,CAACtF,GAAOE,aAAc,GAAcsF,aAAc,CAACxF,GAAOG,WAAY,GAAc0F,WAAY,CAAC7F,GAAOI,UAAW,GAAc0F,UAAW,CAAC9F,GAAOK,UAAW,GAAcoE,UAAW,CAACzE,GAAOM,YAAa,GAAcwE,YAAa,CAAC9E,GAAOO,aAAc,GAAc8F,aAAc,CAACrG,GAAOQ,YAAa,GAAc6D,YAAa,CAACrE,GAAOS,eAAgB,GAAc2F,cAAe,CAACpG,GAAOU,UAAW,GAAcoG,UAAW,CAAC9G,GAAOW,UAAW,GAAcoG,UAAW,CAAC/G,GAAOY,gBAAiB,GAAc6F,cAAe,CAACzG,GAAOa,mBAAoB,GAAc+F,aAAc,CAAC5G,GAAOc,sBA5FhoB,SAA6BxE,GACrD,IAAIqC,EAAQrC,EAAGqC,MACX0E,EAAW/G,EAAG+G,SAClB,OAAO,GAAcgB,WAAW,CAC9B1F,MAAOA,EACP0E,SAAUA,EACViB,UAAWhF,GAAUC,oBAsF8qB,CAACS,GAAOe,mBAlFxrB,SAA0BzE,GAC/C,IAAIqC,EAAQrC,EAAGqC,MACX0E,EAAW/G,EAAG+G,SAEd6K,EADQvP,EAAM4E,SAASF,GACVhB,SAASlD,GAAUE,MAgBpC,OAdkB,MAAd6O,EAAK1L,OAAoC,MAAnB0L,EAAK1L,MAAML,OACnCxD,EAAQ,GAAc8H,aAAa,CACjC9H,MAAOA,EACP0E,SAAUA,EACVqD,UAAWvH,GAAUE,KACrB8C,KAAM,MAIVxD,EAAQ,GAAc0F,WAAW,CAC/B1F,MAAOA,EACP0E,SAAUA,EACViB,UAAWhF,GAAUE,iBAgE6tB,CAACQ,GAAOgB,cA3D9vB,SAAqBsJ,GACnB,IAAIxG,EAASwG,EAAMxG,OACfC,EAASuG,EAAMvG,OACfgX,EAAUzQ,EAAMyQ,QAChBpc,EAAQ2L,EAAM3L,MACdqF,EAAWrF,EAAM4E,SAASO,GAC1BG,EAAWtF,EAAM4E,SAASQ,GAC1BiX,EAAehX,EAAStB,UAExBuY,EADiBtc,EAAM4E,SAASyX,GACEpY,QAClCsY,EAAWD,EAAiB/V,QAAQpB,GAGxC,GAFAmX,EAAmBA,EAAiB3U,OAAO4U,GAE3B,OAAZH,EAAkB,CACpB,IAAII,EAAelX,EAASrB,QAC5BuY,EAAeA,EAAarf,KAAKgI,GACjCnF,EAAQA,EAAMgH,eAAc,SAAUrK,GACpCA,EAAEsK,MAAM,CAAC,SAAUoV,EAAc,WAAYC,GAAkBrV,MAAM,CAAC,SAAU9B,EAAQ,aAAcC,GAAQ6B,MAAM,CAAC,SAAU7B,EAAQ,WAAYoX,GAAcvV,MAAM,CAAC,SAAU7B,EAAQ,aAAa,UAEpM,CACL,IAAIqX,EAAiBnX,EAASvB,UAE1B2Y,EADgB1c,EAAM4E,SAAS6X,GACIxY,QACnC0Y,EAAWD,EAAmBnW,QAAQnB,GAE1C,GAAIiX,IAAiBI,EAAgB,CACnC,IAAIG,EAAwB,iBAC5BF,EAAmBtd,SAAQ,SAAUC,GAC/BA,IAAQ8F,IAGNyX,EAFAvd,IAAQ+F,EACM,SAAZgX,EACsBQ,EAAsBzf,KAAKgI,GAAQhI,KAAKkC,GAExCud,EAAsBzf,KAAKkC,GAAKlC,KAAKgI,GAGvCyX,EAAsBzf,KAAKkC,OAIzDW,EAAQA,EAAMgH,eAAc,SAAUrK,GACpCA,EAAEsK,MAAM,CAAC,SAAUwV,EAAgB,WAAYG,UAGjC,SAAZR,EACFM,EAAqBA,EAAmBhW,OAAOiW,EAAUxX,GACpC,SAAZiX,IACTM,EAAqBA,EAAmBhW,OAAOiW,EAAW,EAAGxX,IAG/DnF,EAAQA,EAAMgH,eAAc,SAAUrK,GACpCA,EAAEsK,MAAM,CAAC,SAAUoV,EAAc,WAAYC,GAAkBrV,MAAM,CAAC,SAAU9B,EAAQ,aAAcsX,GAAgBxV,MAAM,CAAC,SAAUwV,EAAgB,WAAYC,GAAoBzV,MAAM,CAAC,SAAUwV,EAAgB,aAAa,MAK3O,OAAOzc,IAGkxB,CAACqB,GAAOiB,gBAAiB,GAAcmG,yBAC9zBoU,EAAY,kBACZC,EAAY,kBACZC,GAAU,EACVC,EAAqB,IAAIC,IAC7B,MAAO,CACLC,mBAAoB,SAA4BvR,GAC9C,OAAOoR,GAETI,gBAAiB,WACfJ,GAAU,GAEZK,iBAAkB,SAA0Bzf,GAC1C,IAAI0f,EAAY1f,EAAG0f,UACnBN,GAAU,EACNM,EAAWL,EAAqB,IAAIC,IAAII,GAAgBL,EAAmBM,SAYjFC,SAAU,SAAkB5R,GAC1B,OAAOwQ,GAETqB,aAAc,SAAsB7R,GAClC,IAAI3L,EAAQ2L,EAAM3L,MACdoO,EAASzC,EAAMyC,OAEnB,GAAIA,EACF,OAAQA,GACN,KAAK/M,GAAOQ,YACZ,KAAKR,GAAOc,sBACZ,KAAKd,GAAOe,mBACV,OAAO,EAIb,OAAQpC,EAAM2F,WACZ,IAAK,eACL,IAAK,kBACH,OAAO,EAGX,OAAO3F,EAAMwI,OAAO6B,WAEtBoT,iBAAkB,WAChB,MAAO,CACLZ,UAAWA,EACXC,UAAWA,IAGfY,aAAc,SAAsB/R,GAClCsQ,GAAM,eAAgBtQ,EAAMkR,WAC5BA,EAAYlR,EAAMkR,WAEpBc,aAAc,SAAsBhS,GAClCsQ,GAAM,eAAgBtQ,EAAMmR,WAC5BA,EAAYnR,EAAMmR,WAEpBc,QAAS,SAAiBjS,GACxB,IAAIzM,EAAayM,EAAMzM,WACnB2d,EAAY3d,EAAWK,IAAI,mBAAoBoM,GAAOkR,UACtDxS,EAAYnL,EAAWK,IAAI,eAAgBoM,GAC/C,OAAOkR,EAAU/X,KAAO,GAAKuF,GAE/BwT,QAAS,SAAiBlS,GACxB,IAAIzM,EAAayM,EAAMzM,WACnB4d,EAAY5d,EAAWK,IAAI,mBAAoBoM,GAAOmR,UACtDzS,EAAYnL,EAAWK,IAAI,eAAgBoM,GAC/C,OAAOmR,EAAUhY,KAAO,GAAKuF,GAE/ByT,KAAM,SAAcnS,GAClB,IAAIzM,EAAayM,EAAMzM,WACnBc,EAAQ2L,EAAM3L,MAElB,GAAKd,EAAWK,IAAI,eAAgBoM,GAApC,CAIA,IAAIhO,EAAKuB,EAAWK,IAAI,mBAAoBoM,GACxCkR,EAAYlf,EAAGkf,UACfC,EAAYnf,EAAGmf,UAEfiB,EAAWlB,EAAUmB,OACpBD,IACL7e,EAAWK,IAAI,eAAgB,GAAQ,GAAQ,GAAIoM,GAAQ,CACzDkR,UAAWA,EAAUoB,WAEvB/e,EAAWK,IAAI,eAAgB,GAAQ,GAAQ,GAAIoM,GAAQ,CACzDmR,UAAWA,EAAU3f,KAAK6C,MAE5Bic,GAAM8B,GACN7e,EAAWa,OAAOge,MAEpBG,KAAM,SAAcvS,GAClB,IAAIzM,EAAayM,EAAMzM,WACnBc,EAAQ2L,EAAM3L,MAElB,GAAKd,EAAWK,IAAI,eAAgBoM,GAApC,CAIA,IAAIhO,EAAKuB,EAAWK,IAAI,mBAAoBoM,GACxCkR,EAAYlf,EAAGkf,UACfC,EAAYnf,EAAGmf,UAEfiB,EAAWjB,EAAUkB,OACpBD,IACL7e,EAAWK,IAAI,eAAgB,GAAQ,GAAQ,GAAIoM,GAAQ,CACzDkR,UAAWA,EAAU1f,KAAK6C,MAE5Bd,EAAWK,IAAI,eAAgB,GAAQ,GAAQ,GAAIoM,GAAQ,CACzDmR,UAAWA,EAAUmB,WAEvB/e,EAAWa,OAAOge,MAGpBvN,UAAW,SAAmB7E,GAC5B,IAAIzM,EAAayM,EAAMzM,WACnBkP,EAASzC,EAAMyC,OACfpO,EAAQ2L,EAAM3L,MACdme,EAAUxS,EAAMwS,QAChBle,EAAW0L,EAAM1L,SAErB,GAAe,MAAXke,IAAoB7iB,MAAMsC,QAAQugB,GACpC,MAAM,IAAI7f,MAAM,iDAGlB,GAAc,MAAV8P,GAA6B,MAAX+P,EACpB,MAAM,IAAI7f,MAAM,2CAKlB,IAFyBY,EAAWK,IAAI,qBAAsBoM,GAErC,CAKvB,GAAgC,IAA5BqR,EAAmBlY,KAAY,OAEnC,GAAe,MAAXqZ,EAAiB,CACnB,IAAIC,EAAmBD,EAAQ3W,QAAO,SAAUoU,GAC9C,OAAQoB,EAAmBjJ,IAAI6H,EAAGxN,WAGpC,GAAIgQ,GAAoBA,EAAiB9hB,OAAS,EAChD,YAEG,IAAK0gB,EAAmBjJ,IAAI3F,GACjC,OAIJ6N,GAAM,aAAc7N,GACpB6N,GAAM,aAAcjc,GACpBic,GAAM,aAActQ,GACpB,IAUIoS,EAVAM,EAAQnf,EAAWK,IAAI,WAAYoM,GAGvC,GAFAzM,EAAWK,IAAI,kBAAmBoM,GAE9BzM,EAAWK,IAAI,eAAgBoM,GAAQ,CACzC,IAAI2S,EAAcpf,EAAWK,IAAI,mBAAoBoM,GAAOkR,UAC5D3d,EAAWK,IAAI,eAAgB,GAAQ,GAAQ,GAAIoM,GAAQ,CACzDkR,UAAWyB,EAAYnhB,KAAK6C,MAMhC,GAAe,MAAXme,EACFJ,EAAWI,EAAQnZ,QAAO,SAAUC,EAAKsZ,GACvC,IAAInQ,EAASmQ,EAAInQ,OACjB,IAAKiQ,EAAMtK,IAAI3F,GAAS,MAAM,IAAI9P,MAAM,UAAY8P,EAAS,eAC7D,IAAIoQ,EAASH,EAAMrb,IAAIoL,GAEnBqQ,EAAc,GAAQ,GAAQ,CAChCvf,WAAYA,GACXqf,GAAM,CACPve,MAAOiF,IAGLJ,EAAM3F,EAAWK,IAAI,mBAAoBkf,GAO7C,OANA5Z,EAAM2Z,EAAO,GAAQ,GAAQ,GAAIC,GAAc,CAC7Cze,MAAO6E,KAETA,EAAM3F,EAAWK,IAAI,kBAAmB,GAAQ,GAAQ,GAAIkf,GAAc,CACxEze,MAAO6E,OAGR7E,OACE,CACL,IAAKqe,EAAMtK,IAAI3F,GAAS,MAAM,IAAI9P,MAAM,UAAY8P,EAAS,eAC7D,IAAIoQ,EAASH,EAAMrb,IAAIoL,GACvB2P,EAAW7e,EAAWK,IAAI,mBAAoBoM,GAC9CoS,EAAWS,EAAO,GAAQ,GAAQ,GAAI7S,GAAQ,CAC5C3L,MAAO+d,KAETA,EAAW7e,EAAWK,IAAI,kBAAmB,GAAQ,GAAQ,GAAIoM,GAAQ,CACvE3L,MAAO+d,KAIX9B,GAAM,YAAa8B,GACnB7e,EAAWa,OAAOge,EAAU9d,GAC5Bf,EAAWK,IAAI,iBAAkBoM,IAEnC+S,aAAc,SAAsB/S,GAClC,IAAIjO,EAAKC,EAELqC,EAAQ2L,EAAM3L,MACd0E,EAAWiH,EAAMjH,SACjBmP,EAAYlI,EAAMkI,UAClB8K,EAAala,GAAmBzE,EAAO0E,GAC3Cia,EAAWxhB,KAAKuH,GAEhB,IACE,IAAK,IAAIka,EAAe,GAASD,GAAaE,EAAiBD,EAAa3hB,QAAS4hB,EAAe3hB,KAAM2hB,EAAiBD,EAAa3hB,OAAQ,CAC9I,IAAIoC,EAAMwf,EAAezhB,MACzByW,EAAUyD,GAAYjY,IACtBwU,EAAU0D,GAAelY,IACzBwU,EAAUsD,GAAc9X,IACxBwU,EAAU,GAAoBxU,IAC9BwU,EAAU,GAAiBxU,IAC3BwU,EAAUuD,GAAkB/X,IAC5BwU,EAAUwD,GAAYhY,IACtBwU,EAAU2D,GAAenY,IACzBwU,EAAU4D,GAAepY,EAAK,SAC9BwU,EAAU4D,GAAepY,EAAK,UAEhC,MAAOpB,GACPP,EAAM,CACJL,MAAOY,GAET,QACA,IACM4gB,IAAmBA,EAAe3hB,OAASS,EAAKihB,EAAa1gB,SAASP,EAAGpB,KAAKqiB,GAClF,QACA,GAAIlhB,EAAK,MAAMA,EAAIL,SAKzByhB,gBAAiB,SAAyBnT,KAC1CoT,eAAgB,SAAwBpT,KAExCqT,iBAAkB,SAA0BrT,GAC1C,IAAIzM,EAAayM,EAAMzM,WACnBkP,EAASzC,EAAMyC,OACfpO,EAAQ2L,EAAM3L,MACd0E,EAAWiH,EAAMjH,SAMrB,OAJI0J,IAAW/M,GAAOO,cAAgB8C,IAAa1E,EAAM+G,oBACvD7H,EAAWK,IAAI,eAAgBoM,GAG1B3L,GAETif,gBAAiB,SAAyBtT,GACxC,OAAOA,EAAM3L,QAKnB,IAAI,GAEJ,SAAU6C,GAGR,SAASqc,IACP,OAAkB,OAAXrc,GAAmBA,EAAOrG,MAAMb,KAAMU,YAAcV,KAQ7D,OAXA,GAAUujB,EAAkBrc,GAM5Bqc,EAAiBrjB,UAAUyR,OAAS,WAClC,IAAIpO,EAAavD,KAAKgQ,MAAMzM,WAC5B,OAAO,wBAAc,IAAM,KAAMA,EAAWK,IAAI,4BAA6B5D,KAAKgQ,SAG7EuT,EAZT,CAaE3O,IAEE,GAAQ,CAAC,CACX4O,KAAM,OACNrD,MAAO,OACPsD,SAAU,QACVC,YAAY,EACZjR,OAAQ/M,GAAOc,uBACd,CACDgd,KAAM,cACNrD,MAAO,cACPsD,SAAU,QACVhR,OAAQ/M,GAAOM,aACd,CACDwd,KAAM,YACNrD,MAAO,YACPsD,SAAU,MACVC,YAAY,EACZjR,OAAQ/M,GAAOK,WACd,CACDyd,KAAM,QACNrD,MAAO,aACPsD,SAAU,UACVC,YAAY,EACZjR,OAAQ/M,GAAOe,oBACd,CACD+c,KAAM,cACNrD,MAAO,cACPsD,SAAU,MACVhR,OAAQ/M,GAAOO,cACd,CACDud,KAAM,OACNrD,MAAO,qBACPsD,SAAU,kBACVhR,OAAQ/M,GAAOiB,kBAmCjB,IAiFIgd,GAkJAC,GAnOAC,GAAQ,IAAM,0BACdC,GAAgB,IAAOC,IAAIJ,KAAuBA,GAAqB,GAAqB,CAAC,6HAA8H,CAAC,gIAE5N,GAEJ,SAAUzc,GAGR,SAAS8c,IACP,IAAI9T,EAAmB,OAAXhJ,GAAmBA,EAAOrG,MAAMb,KAAMU,YAAcV,KAKhE,OAHAkQ,EAAMC,MAAQ,CACZ1H,QAAS,MAEJyH,EAgET,OAxEA,GAAU8T,EAAiB9c,GAW3B8c,EAAgB9jB,UAAU+jB,OAAS,WACjC,IAAIjU,EAAQhQ,KAAKgQ,MACbhO,EAAKhC,KAAKgQ,MACV+H,EAAS/V,EAAG+V,OACZ1T,EAAQrC,EAAGqC,MACX2I,EAAahL,EAAGgL,WAEhBkX,EADaliB,EAAGuB,WACSK,IAAI,qBAAsBoM,GACnDtM,EAAMwgB,EAAYxgB,IAClB+c,EAAUyD,EAAYzD,QAG1B,GAFAoD,GAAM,SAAUpD,GAEJ,OAAR/c,EAAJ,CAOA,IAQI+E,EAAUsP,EANE,OAAZ0I,EACOjF,GAAc9X,GAEdoY,GAAepY,EAAK+c,IAI3BsD,EAAMhM,EAAO,mBACbpC,EAAUoC,EAAOiE,GAAOE,wBAAwBvG,QAEhDC,EAAcuJ,GAAiB1W,EAASkN,EAAS3I,GAEjDmX,EAAUhF,GAAiB4E,EAAKpO,EAAS3I,GAGzC+R,EAAInJ,EAAYY,KAAO2N,EAAQ3N,KADrB,EAEVyI,EAAIrJ,EAAYa,IAAM0N,EAAQ1N,IAFpB,EAGVnB,EAAQM,EAAYN,MAAQ,EAC5BG,EAASG,EAAYH,OAAS,EAClCzV,KAAKkR,SAAS,CACZzI,QAAS,wBAAc,IAAK,KAAM,wBAAc,OAAQ,CACtDsW,EAAGA,EACHE,EAAGA,EACH3J,MAAOA,EACPG,OAAQA,EACR2O,KAAM,OACNC,OAAQhgB,EAAMwI,OAAOH,MAAMW,eAC3BiX,gBAAiB,MACjBC,YAAa,YApCfvkB,KAAKkR,SAAS,CACZzI,QAAS,QAwCfub,EAAgB9jB,UAAUyR,OAAS,WACjC,IAAIZ,EAAU/Q,KAAKgQ,MAAMe,QACzB,OAAO,wBAAc+S,GAAe,CAClC9S,IAAKD,EAAQ,oBACZ/Q,KAAKmQ,MAAM1H,UAGTub,EAzET,CA0EEpP,IAGE4P,GAAQ,IAAM,wBACdC,GAAW,IAAO1U,IAAI6T,KAAuBA,GAAqB,GAAqB,CAAC,eAAgB,2CAA4C,CAAC,eAAgB,8CAA8C,SAAU5T,GAC/N,OAAOA,EAAMyF,OAAS,QAGxB,SAASiP,KACP,IAAIC,EAAgB,KAChBC,EAAgB,KACpB,MAAO,CACLC,oBAAqB,SAA6B7U,GAChD,IAAIjH,EAAWiH,EAAMjH,SACjB0X,EAAUzQ,EAAMyQ,QAChB1P,EAAUf,EAAMe,QAChBxN,EAAayM,EAAMzM,WACnBc,EAAQ2L,EAAM3L,MA8BdygB,EAAgB,CAClBC,YA7BgB,SAAqBC,GACrCR,GAAM,cAAezb,EAAU0X,GAC/Bld,EAAWK,IAAI,uBAAwB,GAAQ,GAAQ,GAAIoM,GAAQ,CACjEgV,GAAIA,EACJvE,QAASA,MA0BXwE,YAtBgB,SAAqBD,GACrCR,GAAM,cAAezb,EAAU0X,GAC/Bld,EAAWK,IAAI,uBAAwB,GAAQ,GAAQ,GAAIoM,GAAQ,CACjEgV,GAAIA,EACJvE,QAASA,MAmBXyE,WAfe,SAAoBF,GACnCA,EAAG7O,kBAeHgP,OAZW,SAAgBH,GAC3BR,GAAM,SAAUzb,EAAU0X,GAC1Bld,EAAWK,IAAI,kBAAmB,GAAQ,GAAQ,GAAIoM,GAAQ,CAC5DgV,GAAIA,EACJvE,QAASA,OAUb,OAAO,wBAAcgE,GAAU,GAAQ,CACrChP,OAAQpR,EAAMwI,OAAOH,MAAMa,QAAU,EACrCyD,IAAKD,EAAQ+K,GAAe/S,EAAU0X,KACrCqE,KAELM,wBAAyB,SAAiCpV,GACxDwU,GAAM,2BACN,IAAIzT,EAAUf,EAAMe,QACpB,OAAO,wBAAc,GAAiB,GAAQ,CAC5CC,IAAKD,EAAQiL,GAAOK,kBACnBrM,KAELqV,mBAAoB,SAA4BrV,GAC9C,MAAO,CACLtM,IAAKihB,EACLlE,QAASmE,IAGbU,qBAAsB,SAA8BtV,GAClD,IAAIzM,EAAayM,EAAMzM,WACdyM,EAAMgV,GACZ3U,kBACH9M,EAAWK,IAAI,YAAa,GAAQ,GAAQ,GAAIoM,GAAQ,CACtDyC,OAAQ/M,GAAOQ,YACf8D,UAAWhF,GAAUI,aAGzBmgB,QAAS,SAAiBvV,GACxB,IAAIxG,EAASwG,EAAMxG,OACfC,EAASuG,EAAMvG,OACfpF,EAAQ2L,EAAM3L,MACdoc,EAAUzQ,EAAMyQ,QACpB,OAAIjX,IAAWnF,EAAM+G,oBAAsB5B,IAAWC,GAAUF,GAAgBlF,EAAOmF,EAAQC,KAAYpE,GAAkBC,YACzHmE,IAAWpF,EAAM+G,oBAAkC,OAAZqV,KAC5Bpc,EAAM4E,SAASO,GACjBpB,YAAcqB,GAAsB,OAAZgX,KAGvC+E,qBAAsB,SAA8BxV,GAClD,IAAIyQ,EAAUzQ,EAAMyQ,QAChB1X,EAAWiH,EAAMjH,SACjBxF,EAAayM,EAAMzM,WACnBc,EAAQ2L,EAAM3L,MAClBmgB,GAAM,wBAAyBzb,EAAU0X,GAC3Bld,EAAWK,IAAI,UAAW,GAAQ,GAAQ,GAAIoM,GAAQ,CAClExG,OAAQnF,EAAM4F,SACdR,OAAQV,OAIR4b,EAAgB5b,EAChB6b,EAAgBnE,EAChBld,EAAWa,OAAOC,KAGtBohB,qBAAsB,SAA8BzV,GAClD,IAAIzM,EAAayM,EAAMzM,WACnBc,EAAQ2L,EAAM3L,MACd0E,EAAWiH,EAAMjH,SACjB0X,EAAUzQ,EAAMyQ,QAChB1I,EAAS/H,EAAM+H,OAEf2N,EADK1V,EAAMgV,GACQ7S,YAAYuT,cACnClB,GAAM,wBAAyBzb,EAAU0X,GACzC,IAAIhY,EAAUsP,EAAOyD,GAAczS,IAE/BN,GAAWid,GAAiBjd,EAAQkI,SAAS+U,KAIjDf,EAAgB,KAChBC,EAAgB,KAChBrhB,EAAWa,OAAOC,KAEpBshB,gBAAiB,SAAyB3V,GACxCwU,GAAM,mBACN,IAAIjhB,EAAayM,EAAMzM,WACnBwF,EAAWiH,EAAMjH,SACjB1E,EAAQ2L,EAAM3L,MAClB2L,EAAQ,GAAQ,GAAQ,GAAIA,GAAQ,CAClCxG,OAAQnF,EAAM4F,SACdR,OAAQV,IAEV4b,EAAgB,KAChBC,EAAgB,KAEZrhB,EAAWK,IAAI,UAAWoM,IAC5BzM,EAAWK,IAAI,YAAa,GAAQ,GAAQ,GAAIoM,GAAQ,CACtDyC,OAAQ/M,GAAOgB,mBAQzB,IAsFIkf,GAAoBC,GAAoBC,GAgJxCC,GAAoBC,GA2JpBC,GAmFAC,GAAoBC,GA+BpBC,GAAoBC,GAAoBC,GAnfxCC,GAA4B,YAAO9M,GAAP,CAAemM,KAAuBA,GAAqB,GAAqB,CAAC,yIAA0I,CAAC,4IACxPY,GAAiB,IAAOzW,IAAI8V,KAAuBA,GAAqB,GAAqB,CAAC,2BAA4B,CAAC,8BAC3HY,GAAkB,IAAOjN,KAAKsM,KAAuBA,GAAqB,GAAqB,CAAC,IAAK,CAAC,OAEtG,GAEJ,SAAU5e,GAGR,SAASwf,EAAsB1W,GAC7B,IAAIE,EAAQhJ,EAAOtG,KAAKZ,KAAMgQ,IAAUhQ,KAwCxC,OAtCAkQ,EAAMpD,sBAAwB,SAAU/D,GACtC,OAAO,WACL,IAAI/G,EAAKkO,EAAMF,MACX3L,EAAQrC,EAAGqC,MACXd,EAAavB,EAAGuB,WAEhBc,EAAM+G,qBAAuBrC,GAC/BxF,EAAWa,OAAO,GAAc0I,sBAAsB,CACpDzI,MAAOA,EACP0E,SAAUA,OAMlBmH,EAAMyW,mBAAqB,SAAU3W,GACnC,IAAIgD,EAAOhD,EAAMgD,KACb4T,EAAarT,GAAOvD,EAAO,CAAC,SAE5B6W,EAAc7T,EAAKrS,OAAS,EAC5BmmB,EAAQD,EAAc7T,EAAKC,OAAO,EAAG,GAAK,MAAQD,EAGlD+T,EAAe,CACjBte,QAFY,wBAAc+d,GAAgB,KAAMxT,GAGhDgU,SAAU,IAAgBC,cAExBC,EAAa,wBAAc,IAAY,GAAQ,GAAIN,GAAa,wBAAcH,GAAiB,KAAMK,IACzG,OAAOD,EAAc,wBAAc,IAAS,GAAQ,GAAIE,GAAeG,GAAcA,GAOvFhX,EAAMC,MAAQ,CACZgX,MAAM,GAEDjX,EAiCT,OA5EA,GAAUwW,EAAuBxf,GA8CjCwf,EAAsBxmB,UAAUyR,OAAS,WACvC,IAAI3B,EAAQhQ,KAAKgQ,MACb3L,EAAQ2L,EAAM3L,MACdd,EAAayM,EAAMzM,WACnBmW,EAAS1J,EAAM0J,OACf0N,EAAiB/iB,EAAM+G,mBAC3B,GAAIgc,IAAmB/iB,EAAMoG,aAAc,OAAO,KAIlD,IAHA,IAAI4c,EAAQ,GACRjd,EAAQ/F,EAAM4E,SAASme,GAEX,MAAThd,GAAe,CACpB,IAAI0c,EAAQvjB,EAAWU,SAASuY,GAAQG,YAAa,GAAQ,GAAQ,GAAI3M,GAAQ,CAC/EjH,SAAUqB,EAAM1G,OAElB2jB,EAAM1b,QAAQ,CACZqH,KAAM8T,EACNQ,QAAStnB,KAAK8M,sBAAsB1C,EAAM1G,OAE5C0G,EAAQ/F,EAAM4E,SAASmB,EAAMhC,WAG/B,IAAImf,EAAkB,CACpBF,MAAOA,EACPV,mBAAoB3mB,KAAK2mB,oBAE3B,OAAO,wBAAcJ,GAA2B,CAC9C7M,OAAQA,GACP,wBAAc,IAAa,GAAQ,GAAI6N,MAGrCb,EA7ET,CA8EE9R,IAGE4S,GAAY,IAAOzX,IAAIgW,KAAuBA,GAAqB,GAAqB,CAAC,wFAAyF,CAAC,2FACnL0B,GAAM,IAAO1X,IAAIiW,KAAuBA,GAAqB,GAAqB,CAAC,oDAAqD,OAAQ,CAAC,oDAAqD,UAAU,SAAUhW,GAC5N,OAAOA,EAAMtD,MAAMU,cAGjB,GAEJ,SAAUlG,GAGR,SAASwgB,EAAqB1X,GAC5B,IAAIE,EAAQhJ,EAAOtG,KAAKZ,KAAMgQ,IAAUhQ,KAoBxC,OAlBAkQ,EAAMnD,cAAgB,SAAUC,GAC9BkD,EAAMyX,iBAAiB5a,cAAcC,IAGvCkD,EAAM0X,QAAU,SAAUxmB,GACxB,GAAIA,EAAE8U,QAAU9U,EAAEgR,QAAS,CACzB,IAAI7O,EAAa2M,EAAMF,MAAMzM,WACzByJ,EAAazJ,EAAWK,IAAI,gBAAiBsM,EAAMF,QACvDhD,GAA2B5L,EAAE+Q,YAAY0V,OAAS,EAAI,IAAO,IAC5C,KAAK7a,EAAa,IAC/BA,EAAa,IAAGA,EAAa,GAEjCzJ,EAAWK,IAAI,gBAAiB,GAAQ,GAAQ,GAAIsM,EAAMF,OAAQ,CAChEhD,WAAYA,OAKXkD,EA6GT,OApIA,GAAUwX,EAAsBxgB,GA0BhCwgB,EAAqBxnB,UAAU4nB,cAAgB,WAC7C,IAAI9X,EAAQhQ,KAAKgQ,MACbzM,EAAayM,EAAMzM,WACnBc,EAAQ2L,EAAM3L,MACd0jB,EAAUxkB,EAAWK,IAAI,mBAAoBoM,GACjD,GAAgB,OAAZ+X,EAAkB,OAAO,KAE7B,KAAMA,EAAQ7H,wBAAwB7c,KAAO0kB,EAAQ1H,yBAAyBhd,KAC5E,MAAM,IAAInB,UAAU,gDAGtB,IAAI0V,EAAW,GAmBf,OAjBIvT,EAAM2F,YAAchF,GAAUJ,QAAUP,EAAM2F,YAAchF,GAAUG,YACxE4iB,EAAQ7H,aAAazc,SAAQ,SAAUukB,EAAGC,GACxCrQ,EAASpW,KAAK,wBAAc,IAAQ,GAAQ,CAC1CkC,IAAKukB,GACJD,EAAG,CACJE,QAAQ,SAKdH,EAAQ1H,cAAc5c,SAAQ,SAAUukB,EAAGC,GACzCrQ,EAASpW,KAAK,wBAAc,IAAQ,GAAQ,CAC1CkC,IAAKukB,GACJD,EAAG,CACJE,QAAQ,SAGL,wBAAc,IAAS,KAAMtQ,IAGtC8P,EAAqBxnB,UAAUiR,kBAAoB,WACjD,IAAInP,EAAKhC,KAAKgQ,MACV+H,EAAS/V,EAAG+V,OACZ1T,EAAQrC,EAAGqC,MACErC,EAAGuB,WACTK,IAAI,mCAAoC,GAAQ,GAAQ,GAAI5D,KAAKgQ,OAAQ,CAClFwI,SAAUxY,KAAK+M,iBAEjB,IAAIe,EAAYiK,EAAO2D,GAAYrX,EAAM+G,qBAErC+c,EAAYpQ,EAAO,cACnBqQ,EAAgBta,EAAUyR,wBAC1B8I,EAAgBF,EAAU5I,wBAC9Bvf,KAAK2nB,iBAAiB/Q,sBAAsB,EAAGwR,EAAc3R,IAAM4R,EAAc5R,IAAMzW,KAAK2nB,iBAAiBnS,QAAQ+J,wBAAwB9J,OAAS,EAAI2S,EAAc3S,QACxKzV,KAAKikB,UAGPyD,EAAqBxnB,UAAUoR,qBAAuB,WACnCtR,KAAKgQ,MAAMzM,WACjBK,IAAI,sCAAuC,GAAQ,GAAQ,GAAI5D,KAAKgQ,OAAQ,CACrFwI,SAAUxY,KAAK+M,kBAInBvN,OAAO4H,eAAesgB,EAAqBxnB,UAAW,mBAAoB,CACxEmH,IAAK,WACH,OAAOrH,KAAKgQ,MAAM+H,OAAOiE,GAAOE,yBAElC5U,YAAY,EACZC,cAAc,IAGhBmgB,EAAqBxnB,UAAUooB,mBAAqB,WACjCtoB,KAAKgQ,MAAMzM,WACjBK,IAAI,YAAa,GAAQ,GAAQ,GAAI5D,KAAKgQ,OAAQ,CAC3DtM,IAAK4Y,GAASC,qBAEhBvc,KAAKikB,UAGPyD,EAAqBxnB,UAAU+jB,OAAS,WACrBjkB,KAAKgQ,MAAMzM,WACjBK,IAAI,SAAU5D,KAAKgQ,QAGhC0X,EAAqBxnB,UAAUyR,OAAS,WACtC,IAAIzB,EAAQlQ,KAERgC,EAAKhC,KAAKgQ,MACVe,EAAU/O,EAAG+O,QACb1M,EAAQrC,EAAGqC,MACXd,EAAavB,EAAGuB,WAChBglB,EAAUlkB,EAAM+G,mBACpB,OAAO,wBAAcqc,GAAK,CACxBG,QAAS5nB,KAAK4nB,SACb,wBAAc,GAAkB,GAAQ,GAAI5nB,KAAKmQ,MAAO,CACzD8F,kBAAkB,EAClBjJ,WAAY3I,EAAM2I,WAClBgE,IAAKD,EAAQiL,GAAOE,2BAClB,SAAU7F,EAAkBO,GAC9B,IAAI4R,EAAkB,GAAQ,GAAQ,GAAItY,EAAMF,OAAQ,CACtDjH,SAAUwf,EACVlS,iBAAkBA,EAClBO,sBAAuBA,IAGzB,OAAO,wBAAc4Q,GAAW,CAC9BxW,IAAKD,EAAQ,eACZxN,EAAWK,IAAI,mBAAoB4kB,SAI1Cd,EAAuBhU,GAAW,CAAC,KAAgBgU,GApIrD,CAsIE,aAIE,GAEJ,SAAUxgB,GAGR,SAASuhB,IACP,IAAIvY,EAAmB,OAAXhJ,GAAmBA,EAAOrG,MAAMb,KAAMU,YAAcV,KAQhE,OANAkQ,EAAMwY,YAAc,WAClB,IACIzO,EADa/J,EAAMF,MAAMzM,WACWK,IAAI,yBAA0BsM,EAAMF,OAC5EiK,GAA0BA,KAGrB/J,EAuBT,OAlCA,GAAUuY,EAAQvhB,GAclBuhB,EAAOvoB,UAAUyR,OAAS,WACxB,IAAIpO,EAAavD,KAAKgQ,MAAMzM,WACxBolB,EAAcplB,EAAWK,IAAI,cAAe5D,KAAKgQ,OACjDkK,EAAmB3W,EAAWK,IAAI,sBAAuB5D,KAAKgQ,OAClE,OAAO,wBAAc,IAAQ,CAC3B4Y,QAAS5oB,KAAK0oB,YACdG,OAAwB,OAAhBF,EACR3W,WAAW,EACX8W,cAAc,EACdC,WAAW,EACXjC,MAAO5M,GAAoBA,EAAiB4M,MAC5Cje,MAAOqR,GAAoBA,EAAiBrR,OAC3C,wBAAc,MAAO,CACtB0S,UAAW,IAAQyN,YACnBngB,MAAO,CACLogB,UAAW,IAEZN,KAGEF,EAnCT,CAoCE7T,IAEEsU,GAAe,IAAOnF,IAAIkC,KAAuBA,GAAqB,GAAqB,CAAC,6HAA8H,CAAC,gIAC3NkD,GAAQ,IAAM,uBAEd,GAEJ,SAAUjiB,GAGR,SAASkiB,IACP,IAAIlZ,EAAmB,OAAXhJ,GAAmBA,EAAOrG,MAAMb,KAAMU,YAAcV,KAKhE,OAHAkQ,EAAMC,MAAQ,CACZkZ,OAAQ,IAEHnZ,EAgGT,OAxGA,GAAUkZ,EAAcliB,GAWxBkiB,EAAalpB,UAAU+jB,OAAS,WAC9B,IAeIpF,EAAIC,EAnyCKH,EAoxCT3O,EAAQhQ,KAAKgQ,MACb3L,EAAQ2L,EAAM3L,MACd0T,EAAS/H,EAAM+H,OACfhP,EAAWiH,EAAMjH,SACjBiE,EAAagD,EAAMhD,WACnBzJ,EAAayM,EAAMzM,WACnB6G,EAAQ/F,EAAM4E,SAASF,GACvBN,EAAUsP,EAAOyD,GAAczS,IAC/Bgb,EAAMhM,EAAO6D,GAAe7S,IAC5B4M,EAAUoC,EAAOiE,GAAOE,wBAAwBvG,QAEhDC,EAAcuJ,GAAiB1W,EAASkN,EAAS3I,GAEjDmX,EAAUhF,GAAiB4E,EAAKpO,EAAS3I,GAG7C6R,EAAK,CACHE,GAryCWJ,EAqyCA/I,GApyCP+I,EAAKnI,KAAOmI,EAAKH,OAAS,EAoyCJ2F,EAAQ3N,MAClCyI,EAAGP,GAAQ9I,GAAeuO,EAAQ1N,KAEpC,IAAI4S,EAAS,GACbjf,EAAM9B,QAAQ7E,SAAQ,SAAUC,GAC9B,IAwBI4lB,EAxBA5b,EAAYnK,EAAWK,IAAI,eAAgB,GAAQ,GAAQ,GAAIoM,GAAQ,CACzEjH,SAAUrF,KAERkK,EAAWF,EAAUE,SAGrB+Q,EAAOQ,GAFWpH,EAAOyD,GAAc9X,IAEEiS,EAAS3I,GAoBtD,GANA8R,EAAK,CACHC,GAZAD,EADEH,EAAKnI,KAAOZ,EAAY4I,MACrB,CACHO,EAAGJ,EAAKnI,KACRyI,EAAGP,GAAQC,IAGR,CACHI,EAAGJ,EAAKH,MACRS,EAAGP,GAAQC,KAKPI,EAAIoF,EAAQ3N,KAClByI,EAAGH,EAAGG,EAAIkF,EAAQ1N,KAIH,UAAb7I,EACF0b,EAAQ,KAAOzK,EAAGE,EAAI,IAAMF,EAAGI,EAAI,MAAQJ,EAAGE,EAAI,IAAMC,GAAaH,EAAIC,GAAM,IAAMF,GAAaC,EAAIC,GAAM,IAAMA,EAAGG,EAAI,IAAMH,EAAGC,EAAI,IAAMD,EAAGG,OAC1I,GAAiB,SAAbrR,EACT0b,EAAQ,KAAOzK,EAAGE,EAAI,IAAMF,EAAGI,EAAI,MAAQH,EAAGC,EAAI,IAAMD,EAAGG,OACtD,GAAiB,UAAbrR,EAAsB,CAC/B,IAAI2b,EAAOzK,EAAGG,EAAIJ,EAAGI,EAAI,GAAK,EAC1BuK,EAAO1K,EAAGC,EAAIF,EAAGE,EAAI,GAAK,EAC1B0K,EAAS/b,EAAUC,WAEvB,GAAc,MAAV8b,EACF,MAAM,IAAI9mB,MAAM,4DAIhB2mB,EADExK,EAAGG,IAAMJ,EAAGI,EACN,KAAOJ,EAAGE,EAAI,IAAMF,EAAGI,EAAI,MAAQH,EAAGC,EAGtC,KAAOF,EAAGE,EAAI,IAAMF,EAAGI,EAAI,QAAUH,EAAGG,EAAIsK,EAAOE,GAAU,MAAQA,EAAS,IAAMA,EAAS,SAAWF,EAAOC,IAAS,EAAI,EAAI,GAAK,KAAO3K,EAAGE,EAAI0K,EAASD,GAAQ,IAAM1K,EAAGG,EAAI,MAAQH,EAAGC,EAIxMsK,EAAO7nB,KAAK,wBAAc,OAAQ,CAChCkC,IAAK,QAAUA,EACfpE,EAAGgqB,EACH/E,YAAa7W,EAAUG,UACvBwW,OAAQ3W,EAAUS,UAClBiW,KAAM,aAGVpkB,KAAKkR,SAAS,CACZmY,OAAQA,KAIZD,EAAalpB,UAAUyR,OAAS,WAC9BwX,GAAM,UACN,IAAInnB,EAAKhC,KAAKgQ,MACVjH,EAAW/G,EAAG+G,SACdgI,EAAU/O,EAAG+O,QACjB,OAAO,wBAAcmY,GAAc,CACjClY,IAAKD,EAAQ6K,GAAe7S,KAC3B,wBAAc,IAAK,KAAM/I,KAAKmQ,MAAMkZ,UAGlCD,EAzGT,CA0GExU,IAGE8U,GAAQ,IAAM,YACdC,GAAY,IAAO5Z,IAAImW,KAAuBA,GAAqB,GAAqB,CAAC,+DAAgE,8CAA+C,OAAQ,CAAC,+DAAgE,8CAA+C,UAAU,SAAUlW,GAEtV,OAAOA,EAAM4Z,iBAAmBplB,EAAsB,WAAa,gBAClE,SAAUwL,GAEX,OAAOA,EAAM4Z,iBAAmBplB,EAAsB,qBAAuB,wBAE3E,GAAQ,IAAOuL,IAAIoW,KAAuBA,GAAqB,GAAqB,CAAC,sFAAuF,CAAC,yFAE7K,GAEJ,SAAUjf,GAGR,SAAS2iB,IACP,OAAkB,OAAX3iB,GAAmBA,EAAOrG,MAAMb,KAAMU,YAAcV,KA+D7D,OAlEA,GAAU6pB,EAAY3iB,GAMtB2iB,EAAW3pB,UAAU4pB,iBAAmB,SAAUvf,EAAQwR,GACxD,IAAI/Z,EAAKhC,KAAKgQ,MACVzM,EAAavB,EAAGuB,WAChBwN,EAAU/O,EAAG+O,QACb7H,EAAM3F,EAAWK,IAAI,kBAAmB,GAAQ,GAAQ,GAAI5D,KAAKgQ,OAAQ,CAC3E+L,IAAKA,EACLgO,QAAQ,EACRxf,OAAQA,KAEV,IAAKrB,EAAK,OAAO,KACjB,IAAI8gB,EAAY9gB,EAAI8gB,UAChBC,EAAS,aAAelO,IAAQvX,EAAsB,OAAS,SACnE,OACE,uBADK,CACSmlB,GAAW,CACvBC,eAAgB7N,EAChB/K,IAAKD,EAAQkZ,IACZD,IAIPH,EAAW3pB,UAAUyR,OAAS,WAC5B+X,GAAM,UACN,IAAI1Z,EAAQhQ,KAAKgQ,MACb3L,EAAQ2L,EAAM3L,MACd0E,EAAWiH,EAAMjH,SACjBgI,EAAUf,EAAMe,QAChBxN,EAAayM,EAAMzM,WACnB2mB,EAAa3mB,EAAWK,IAAI,uBAAwBoM,GACpDnD,EAASxI,EAAMwI,OACfsd,EAAe5mB,EAAWK,IAAI,qBAAsB,GAAQ,GAAQ,GAAIoM,GAAQ,CAClFka,WAAYA,EACZnO,IAAKvX,KAEH4lB,EAAa7mB,EAAWK,IAAI,gBAAiB,CAC/CqgB,OAAQpX,EAAOD,UACfvI,MAAOA,EACP0E,SAAUA,IAER+E,EAAY,wBAAc,GAAO,CACnCkD,IAAKD,EAAQ2K,GAAY3S,KACxBohB,GACCvS,EAAWrU,EAAWK,IAAI,gCAAiCoM,GAE/D,OAAQnD,EAAOD,WACb,KAAK7J,EAAkB4L,eACrB,OAAO,wBAAc,WAAU,KAAM3O,KAAK8pB,iBAAiBM,EAAWC,EAAG,KAAMvc,EAAW9N,KAAK8pB,iBAAiBM,EAAWE,EAAG,KAAM1S,GAEtI,KAAK7U,EAAkBwnB,cACrB,OAAO,wBAAc,WAAU,KAAMzc,EAAW9N,KAAK8pB,iBAAiBM,EAAWE,EAAG,KAAM1S,GAE5F,KAAK7U,EAAkBynB,cACrB,OAAO,wBAAc,WAAU,KAAMxqB,KAAK8pB,iBAAiBM,EAAWC,EAAG,KAAMvc,EAAW8J,GAE5F,KAAK7U,EAAkB0nB,cACrB,OAAO,wBAAc,WAAU,KAAM3c,EAAW9N,KAAK8pB,iBAAiBM,EAAWM,EAAG,KAAM9S,GAG9F,OAAO,MAGFiS,EAnET,CAoEE,aAGEc,GAAS,IAAO5a,IAAIuW,KAAuBA,GAAqB,GAAqB,CAAC,wDAAyD,mHAAoH,iHAAkH,CAAC,wDAAyD,mHAAoH,oHAAoH,SAAUtkB,GACnqB,IAAI+Z,EAAM/Z,EAAG+Z,IACb,OAAIA,IAAQvX,EAA6B,YAAI4hB,KAAuBA,GAAqB,GAAqB,CAAC,mCAAoC,CAAC,sCAChJrK,IAAQvX,EAA4B,YAAI6hB,KAAuBA,GAAqB,GAAqB,CAAC,kCAAmC,CAAC,0CAAlJ,KACC,SAAUrW,GACX,OAAOA,EAAM5C,cAGf,SAASwd,GAAkB5a,GACzB,IAAIhO,EAEAqC,EAAQ2L,EAAM3L,MACd0E,EAAWiH,EAAMjH,SACjBmhB,EAAala,EAAMka,WACnBnO,EAAM/L,EAAM+L,IACZhL,EAAUf,EAAMe,QAChB8Z,EAAkB7a,EAAM6a,gBACxBzgB,EAAQ/F,EAAM4E,SAASF,GAC3B,OAAOqB,EAAM9B,QAAQa,KAAO,EAAI,wBAAcwhB,GAAQ,CACpD3Z,IAAKD,EAAQ8K,GAAe9S,IAC5Bue,QAASuD,EACTzd,WAAY8c,EAAW9c,WACvB2O,IAAKA,EACLR,UAAW,MAAIvZ,EAAK,CAClBwhB,MAAM,EACNsH,UAAU,GACT9oB,EAAG,OAASoI,EAAM5B,SAAW,OAAS,WAAY,EAAMxG,MACxD,KAIP,IAgEI+oB,GAAoBC,GAhEpBC,GAAQ,IAAM,uBACdC,GAAc,IAAOnb,IAAIgb,KAAuBA,GAAqB,GAAqB,CAAC,6BAA8B,CAAC,gCAC1HI,GAAiB,IAAOpb,IAAIib,KAAuBA,GAAqB,GAAqB,CAAC,qGAAsG,CAAC,wGAErMI,GAAgB,SAAuBhqB,GACzC6pB,GAAM,eACN7pB,EAAE+U,iBACF/U,EAAEiP,mBAGJ,SAASgb,GAAarb,GACpB,IAQIsb,EARA/nB,EAAayM,EAAMzM,WACnBc,EAAQ2L,EAAM3L,MACd0E,EAAWiH,EAAMjH,SACjBgP,EAAS/H,EAAM+H,OACf3U,EAAWiB,EAAMmO,oBAAsBzJ,EACvCwiB,EAAShoB,EAAWK,IAAI,2BAA4B,GAAQ,GAAQ,GAAIoM,GAAQ,CAClF5M,SAAUA,KAIZ,GAAIA,EACFkoB,EAAQC,MACH,CACL,IAAIC,EASAC,EAAS,CACXnW,MAAO,GACPG,OAAQ,IAENiW,EAAY3T,EAAO,kBAAoBhP,GACvC2iB,IAAWD,EAASC,EAAUnM,yBAElC,IAMIoM,EAA0B,IAAI,KANN,SAA+BzW,EAASC,GAClE,IAAIhU,EAAI+T,EAAQ,GAAGU,YACnB4V,EAAU3iB,MAAM2N,MAAQiV,EAAOnW,MAAQnU,EAAEmU,OAAS,EAAI,KACtDkW,EAAU3iB,MAAM4N,KAAOgV,EAAOhW,OAAStU,EAAEsU,QAAU,EAAI,QAIzDwV,GAAMQ,GACNH,EAAQ,wBAAc,WAAU,KAAM,wBAAc,MAAO,CACzDziB,MAAO,CACLyM,MAAOmW,EAAOnW,MACdG,OAAQgW,EAAOhW,UAEf,wBAAc0V,GAAgB,CAChCna,IA5Be,SAAoBA,GAC/BA,IACFwa,EAAYxa,EACZ2a,EAAwB5V,QAAQyV,MA0BjCD,IAGL,OAAO,wBAAcL,GAAa,CAChCnG,YAAaqG,GACblG,WAAYkG,IACXE,GAIL,IA+KIM,GAAoBC,GAyDpBC,GAxOAC,GAAQ,IAAM,6BACdC,GAAiB,IAAOjc,IAAI6b,KAAuBA,GAAqB,GAAqB,CAAC,kHAAmH,CAAC,qHAClNK,GAA2B,IAAOlc,IAAI8b,KAAuBA,GAAqB,GAAqB,CAAC,6BAA8B,CAAC,gCAEvI,GAEJ,SAAU3kB,GAGR,SAASglB,EAAmBlc,GAC1B,IAAIE,EAAQhJ,EAAOtG,KAAKZ,KAAMgQ,IAAUhQ,KAmFxC,OAjFAkQ,EAAMic,YAAc,SAAUnH,GAC5B9U,EAAMtM,IAAI,uBAAwB,GAAQ,GAAQ,GAAIsM,EAAMF,OAAQ,CAClEgV,GAAIA,MAIR9U,EAAMgV,WAAa,SAAUF,GAE3BA,EAAG7O,kBAGLjG,EAAM6U,YAAc,SAAUC,GAC5B+G,GAAM,cAAe7b,EAAMF,MAAMjH,UAEjCmH,EAAMtM,IAAI,uBAAwB,GAAQ,GAAQ,GAAIsM,EAAMF,OAAQ,CAClEgV,GAAIA,EACJvE,QAAS,SAIbvQ,EAAM+U,YAAc,SAAUD,GAC5B9U,EAAMtM,IAAI,uBAAwB,GAAQ,GAAQ,GAAIsM,EAAMF,OAAQ,CAClEgV,GAAIA,EACJvE,QAAS,SAIbvQ,EAAMiV,OAAS,SAAUH,GACvB+G,GAAM,UAEN7b,EAAMtM,IAAI,kBAAmB,GAAQ,GAAQ,GAAIsM,EAAMF,OAAQ,CAC7DgV,GAAIA,EACJvE,QAAS,SAIbvQ,EAAMoX,QAAU,SAAUtC,GACxB,IACIzhB,EADQ2M,EAAMF,MACKzM,WAEvB2M,EAAMkc,wBAA0BC,YAAW,WAIzC9oB,EAAWK,IAAI,mBAAoB,GAAQ,GAAQ,GAAIsM,EAAMF,OAAQ,CACnEgV,GAAIA,OAEL,MAGL9U,EAAMoc,cAAgB,SAAUtH,GAC9BuH,aAAarc,EAAMkc,yBACFlc,EAAMF,MAAMzM,WAClBK,IAAI,yBAA0B,GAAQ,GAAQ,GAAIsM,EAAMF,OAAQ,CACzEgV,GAAIA,MAIR9U,EAAMsc,gBAAiB,EAEvBtc,EAAM2a,gBAAkB,SAAUzpB,GAChCA,EAAEiP,kBACF,IAAIrO,EAAKkO,EAAMF,MACXjH,EAAW/G,EAAG+G,SACdgP,EAAS/V,EAAG+V,OAChB7H,EAAMsc,gBAAiB,EACvB,IACI7N,EADe5G,EAAO8D,GAAe9S,IACjBwW,wBACxBwM,GAAM,UAAWpN,GACjBzO,EAAMuc,sBAAwB,CAAC9N,EAAKnI,KAAOmI,EAAKrJ,MAAQ,EAAGqJ,EAAKlI,IAAMkI,EAAKlJ,OAAS,GACpFsW,GAAM,wBAAyB7b,EAAMuc,uBAKrCvc,EAAM2E,UAAUnP,GAAOC,gBAAiBuK,EAAMF,QAGhDE,EAAMC,MAAQ,CACZuc,WAAW,GAENxc,EA+ET,OArKA,GAAUgc,EAAoBhlB,GAyF9BglB,EAAmBhsB,UAAUysB,kBAAoB,WAC/C,IAAIppB,EAAavD,KAAKgQ,MAAMzM,WAE5B,GAAKA,EAAWU,SAASuY,GAAQE,2BAA4B,GAAQ,GAAI1c,KAAKgQ,QAO9E,OAHAhQ,KAAK6U,UAAUnP,GAAOQ,YAAa,GAAQ,GAAQ,GAAIlG,KAAKgQ,OAAQ,CAClEhG,UAAWhF,GAAUG,cAEhB5B,EAAWK,IAAI,yBAA0B5D,KAAKgQ,QAGvDkc,EAAmBhsB,UAAU0sB,mBAAqB,aAGlDV,EAAmBhsB,UAAUooB,mBAAqB,WAChD,GAAItoB,KAAKwsB,eAAgB,CACvB,IAAIxqB,EAAKhC,KAAKgQ,MACV+H,EAAS/V,EAAG+V,OACZhP,EAAW/G,EAAG+G,SACd6N,EAAwB5U,EAAG4U,sBAE3BiW,EADU9U,EAAO8D,GAAe9S,IACdwW,wBAKlBuN,EAAY,CAACD,EAAQrW,KAAOqW,EAAQvX,MAAQ,EAAGuX,EAAQpW,IAAMoW,EAAQpX,OAAS,GAClFsW,GAAM,aAAce,GACpBf,GAAM,aAAc/rB,KAAKysB,uBAEzB,IAAIM,EAAS,CAACD,EAAU,GAAK9sB,KAAKysB,sBAAsB,GAAIK,EAAU,GAAK9sB,KAAKysB,sBAAsB,IACtGV,GAAM,SAAUgB,GAChBnW,EAAsBmW,EAAO,GAAIA,EAAO,IACxC/sB,KAAKwsB,gBAAiB,IAI1BN,EAAmBhsB,UAAUyR,OAAS,WACpC,IAAI3B,EAAQhQ,KAAKgQ,MACbe,EAAUf,EAAMe,QAChBhI,EAAWiH,EAAMjH,SACjB1E,EAAQ2L,EAAM3L,MACdd,EAAayM,EAAMzM,WACnB2mB,EAAala,EAAMka,WACnBnO,EAAM/L,EAAM+L,IAChBgQ,GAAM,SAAUhjB,EAAU1E,EAAM2F,WAChC,IAAIgjB,EAAYzpB,EAAWK,IAAI,qBAAsBoM,IAAU3L,EAAMmO,oBAAsBzJ,EACvFkkB,EAAe1pB,EAAWK,IAAI,0BAA2B,GAAQ,GAAQ,GAAIoM,GAAQ,CACvF6a,gBAAiB7qB,KAAK6qB,gBAAgBhoB,KAAK7C,SAEzCktB,EAAe3pB,EAAWK,IAAI,sBAAuB,GAAQ,GAAQ,GAAIoM,GAAQ,CACnFyQ,QAAS,UAEP0M,EAAe5pB,EAAWK,IAAI,sBAAuB,GAAQ,GAAQ,GAAIoM,GAAQ,CACnFyQ,QAAS,UAEP2M,EAAoB,CACtBrI,YAAa/kB,KAAK+kB,YAClBE,YAAajlB,KAAKilB,YAClBC,WAAYllB,KAAKklB,WACjBC,OAAQnlB,KAAKmlB,QAGf,OAAO,wBAAc8G,GAA0B,KAAMiB,EAAc,wBAAclB,GAAgB,GAAQ,CACvGnjB,MAAOqhB,EACP8C,UAAWA,EACXhc,IAAKD,EAAQyK,GAAczS,IAC3BojB,YAAansB,KAAKmsB,YAClB7E,QAAStnB,KAAKsnB,QACdgF,cAAetsB,KAAKssB,eACnBc,GAAoB7pB,EAAWK,IAAI,oBAAqBoM,GAAQzM,EAAWK,IAAI,2BAA4BoM,IAASmd,EAAcpR,IAAQvX,GAAuByoB,IAGtKf,EAAqBxY,GAAW,CAAC,KAAoBwY,GArKvD,CAuKEtX,IAGEyY,GAAQ,IAAM,mBACdC,GAAwB,IAAOvd,IAAI+b,KAAuBA,GAAqB,GAAqB,CAAC,yBAA0B,CAAC,4BAEpI,SAASyB,GAAUvd,GACjB,IAAIzM,EAAayM,EAAMzM,WACnBc,EAAQ2L,EAAM3L,MACd0E,EAAWiH,EAAMjH,SACjBgP,EAAS/H,EAAM+H,OACfyV,EAAYnpB,EAAMwO,iBAAmB9J,EACzCskB,GAAM,YAAaG,GAEnB,IAOI5Z,EAAOvP,EAAM4E,SAASF,GAAUhB,SAASlD,GAAUE,MACvD,IAAKyoB,GAAajqB,EAAWK,IAAI,eAAgB,GAAQ,GAAQ,GAAIoM,GAAQ,CAC3E9H,MAAO0L,EAAK1L,SACT,OAAO,KACZ,IAAIulB,EAAalqB,EAAWK,IAAI,wBAAyBoM,GACrD0d,EAAc3V,EAAOiE,GAAOC,kBAC5BpT,EAAQ,CACV8kB,SAAU,QACVC,UAAW,SAGb,GAAIF,EAAa,CACf,IAAIG,EAAQH,EAAYnO,wBACxB1W,EAAM8kB,SAAyB,GAAdE,EAAMvY,MAAc,KACrCzM,EAAM+kB,UAA2B,GAAfC,EAAMpY,OAAe,KAGzC,IAUIsR,EAAe,CACjB/U,WAAW,EACXvJ,QAZmB,wBAAc6kB,GAAuB,CACxDhG,QAAS1K,GACTkR,UAAW,IAAQC,gBACnBllB,MAAOA,GACN4kB,GASD7c,OARS,wBAAc2I,GAAgB,CACvC+N,QA9BY,SAAiBlmB,GAC7BA,EAAEiP,kBACF9M,EAAWK,IAAI,YAAa,GAAQ,GAAQ,GAAIoM,GAAQ,CACtDyC,OAAQ/M,GAAOe,uBA4BjB8U,UAAWH,GAAcb,GAASI,OAClCqT,UAAW,IAMXC,gBAAiB,IAAuBC,MACxCC,eAAgB,KAGlB,OADeva,EAAK1L,OAAS,wBAAc,IAAS,GAAQ,GAAI6e,IAKlE,IAmEIqH,GAsIAC,GAqFAC,GAAoBC,GAAoBC,GAiJxCC,GAAoBC,GAAoBC,GAyCxCC,GAxdAC,GAAoB,IAAO9K,IAAIqK,KAAuBA,GAAqB,GAAqB,CAAC,6HAA8H,CAAC,gIAEhO,GAEJ,SAAUlnB,GAGR,SAAS4nB,IACP,IAAI5e,EAAmB,OAAXhJ,GAAmBA,EAAOrG,MAAMb,KAAMU,YAAcV,KAKhE,OAHAkQ,EAAMC,MAAQ,CACZ1H,QAAS,MAEJyH,EAmDT,OA3DA,GAAU4e,EAAgB5nB,GAW1B4nB,EAAe5uB,UAAU+jB,OAAS,WAChC,IAAIjiB,EAAKhC,KAAKgQ,MACV+H,EAAS/V,EAAG+V,OACZ1T,EAAQrC,EAAGqC,MACX2I,EAAahL,EAAGgL,WAChB/C,EAAW5F,EAAM4F,SACjBD,EAAY3F,EAAM2F,UAEtB,GAAKC,GAAYD,IAAchF,GAAUC,gBAAzC,CAOA,IAAIwD,EAAUsP,EAAOyD,GAAcvR,IAC/B0L,EAAUoC,EAAOiE,GAAOE,wBAAwBvG,QAChDoO,EAAMhM,EAAOiE,GAAOG,mBAEpBvG,EAAcuJ,GAAiB1W,EAASkN,EAAS3I,GAEjDmX,EAAUhF,GAAiB4E,EAAKpO,EAAS3I,GAGzC+R,EAAInJ,EAAYY,KAAO2N,EAAQ3N,KADrB,EAEVyI,EAAIrJ,EAAYa,IAAM0N,EAAQ1N,IAFpB,EAGVnB,EAAQM,EAAYN,MAAQ,EAC5BG,EAASG,EAAYH,OAAS,EAClCzV,KAAKkR,SAAS,CACZzI,QAAS,wBAAc,OAAQ,CAC7BsW,EAAGA,EACHE,EAAGA,EACH3J,MAAOA,EACPG,OAAQA,EACR2O,KAAM,OACNC,OAAQhgB,EAAMwI,OAAOH,MAAMW,eAC3BkX,YAAa,WA3BfvkB,KAAKkR,SAAS,CACZzI,QAAS,QA+BfqmB,EAAe5uB,UAAUyR,OAAS,WAChC,IAAIZ,EAAU/Q,KAAKgQ,MAAMe,QACzB,OAAO,wBAAc8d,GAAmB,CACtC7d,IAAKD,EAAQiL,GAAOG,oBACnBnc,KAAKmQ,MAAM1H,UAGTqmB,EA5DT,CA6DEla,IAGEma,GAAgB,IAAOhL,IAAIsK,KAAuBA,GAAqB,GAAqB,CAAC,6HAA8H,CAAC,gIAC5NW,GAAQ,IAAM,wBAEd,GAEJ,SAAU9nB,GAGR,SAAS+nB,IACP,IAAI/e,EAAmB,OAAXhJ,GAAmBA,EAAOrG,MAAMb,KAAMU,YAAcV,KAKhE,OAHAkQ,EAAMC,MAAQ,CACZkZ,OAAQ,IAEHnZ,EAoHT,OA5HA,GAAU+e,EAAe/nB,GAWzB+nB,EAAc/uB,UAAU+jB,OAAS,WAC/B,IAuBIpF,EAAIC,EAAIoQ,EAvBRlf,EAAQhQ,KAAKgQ,MACb3L,EAAQ2L,EAAM3L,MACd0T,EAAS/H,EAAM+H,OACfhP,EAAWiH,EAAMjH,SACjBgT,EAAM/L,EAAM+L,IACZxY,EAAayM,EAAMzM,WACnB4rB,EAAI5rB,EAAWK,IAAI,gBAAiBoM,GACpC5F,EAAQ/F,EAAM4E,SAASF,GACvBN,EAAUsP,EAAOyD,GAAczS,IAC/Bgb,EAAMhM,EAAO6D,GAAe7S,IAC5BkkB,EAAelV,EAAO8D,GAAe9S,IACrC4M,EAAUoC,EAAOiE,GAAOE,wBAAwBvG,QAEhDwO,EAAUhF,GAAiB4E,EAAKpO,EAASwZ,GAEzCC,EAAejQ,GAAiB8N,EAActX,EAASwZ,GAEvDvZ,EAAcuJ,GAAiB1W,EAASkN,EAASwZ,GAErDH,GAAMjmB,GACNimB,GAAM,UAAW7K,GACjB6K,GAAM,eAAgBI,GACtBJ,GAAM,cAAepZ,GAGjBmG,IAAQvX,GACVqa,EAAK,CACHE,EAAG,EACHE,EAAGP,GAAQ9I,GAAeuO,EAAQ1N,KAEpCqI,EAAK,CACHC,EAAGqQ,EAAa5Q,MAAQ2F,EAAQ3N,KAAO,GACvCyI,EAAGJ,EAAGI,IAEClD,IAAQvX,IACjBqa,EAAK,CACHE,EAAGoF,EAAQ3F,MAAQ2F,EAAQ3N,KAC3ByI,EAAGP,GAAQ9I,GAAeuO,EAAQ1N,KAEpCqI,EAAK,CACHC,EAAGqQ,EAAa5Y,KAAO2N,EAAQ3N,KAAO,GACtCyI,EAAGJ,EAAGI,IAIV,IAAIoK,EAAS,GACbjf,EAAM9B,QAAQ7E,SAAQ,SAAUC,GAC9B,IAAI4lB,EACA5b,EAAYnK,EAAWK,IAAI,eAAgB,GAAQ,GAAQ,GAAIoM,GAAQ,CACzEjH,SAAUrF,KAGR2rB,EAAatX,EAAOyD,GAAc9X,IACtC,GAAK2rB,EAAL,CAEA,IAAI1Q,EAAOQ,GAAiBkQ,EAAY1Z,EAASwZ,GAE7CpT,IAAQvX,IACV0qB,EAAK,CACHnQ,EAAGJ,EAAKnI,KAAO2N,EAAQ3N,KACvByI,EAAGP,GAAQC,GAAQwF,EAAQ1N,MAI3BsF,IAAQvX,IACV0qB,EAAK,CACHnQ,EAAGJ,EAAKH,MAAQ2F,EAAQ3N,KACxByI,EAAGP,GAAQC,GAAQwF,EAAQ1N,MAI/B,IAAI7I,EAAWF,EAAUE,SAEzB,GAAiB,UAAbA,EACF0b,EAAQ,KAAOzK,EAAGE,EAAI,IAAMF,EAAGI,EAAI,MAAQH,EAAGC,EAAI,IAAMD,EAAGG,EAAI,MAAQH,EAAGC,EAAI,IAAMC,GAAaF,EAAIoQ,GAAM,IAAMtQ,GAAaE,EAAIoQ,GAAM,IAAMA,EAAGjQ,EAAI,IAAMiQ,EAAGnQ,EAAI,IAAMmQ,EAAGjQ,OACtK,GAAiB,UAAbrR,EAAsB,CAC/B,IAAI2b,EAAO2F,EAAGjQ,EAAIJ,EAAGI,EAAI,GAAK,EAC1BuK,EAAO0F,EAAGnQ,EAAIF,EAAGE,EAAI,GAAK,EAC1B0K,EAAS/b,EAAUC,WAGrB2b,EADyB,IAAvBlf,EAAM9B,QAAQa,MAAcpC,KAAKuoB,IAAIJ,EAAGjQ,EAAIJ,EAAGI,IAAM,EAC/C,KAAOJ,EAAGE,EAAI,IAAMF,EAAGI,EAAI,MAAQiQ,EAAGnQ,EAAI,IAAMmQ,EAAGjQ,EAGnD,KAAOJ,EAAGE,EAAI,IAAMF,EAAGI,EAAI,MAAQH,EAAGC,EAAI,OAASmQ,EAAGjQ,EAAIsK,EAAOE,GAAU,MAAQA,EAAS,IAAMA,EAAS,SAAWF,EAAOC,IAAS,EAAI,EAAI,GAAK,KAAO1K,EAAGC,EAAI0K,EAASD,GAAQ,IAAM0F,EAAGjQ,EAAI,MAAQiQ,EAAGnQ,MAE9L,SAAbnR,IACT0b,EAAQ,KAAOzK,EAAGE,EAAI,IAAMF,EAAGI,EAAI,MAAQH,EAAGC,EAAI,MAAQmQ,EAAGnQ,EAAI,IAAMmQ,EAAGjQ,GAG5EoK,EAAO7nB,KAAK,wBAAc,OAAQ,CAChCkC,IAAK,QAAUA,EACfpE,EAAGgqB,EACH/E,YAAa7W,EAAUG,UACvBwW,OAAQ3W,EAAUS,UAClBiW,KAAM,cAGVpkB,KAAKkR,SAAS,CACZmY,OAAQA,KAIZ4F,EAAc/uB,UAAUyR,OAAS,WAC/B,IAAI3P,EAAKhC,KAAKgQ,MACVjH,EAAW/G,EAAG+G,SACdgI,EAAU/O,EAAG+O,QACjB,OAAO,wBAAcge,GAAe,CAClC/d,IAAKD,EAAQ6K,GAAe7S,KAC3B,wBAAc,IAAK,KAAM/I,KAAKmQ,MAAMkZ,UAGlC4F,EA7HT,CA8HEra,IAGE2a,GAAQ,IAAM,qBACdC,GAAO,IAAOzf,IAAIue,KAAuBA,GAAqB,GAAqB,CAAC,iEAAkE,OAAQ,CAAC,iEAAkE,UAAU,SAAUte,GACvP,OAAOA,EAAM4Z,iBAAmBplB,EAAuB,MAAQ,iBAG7DirB,GAAe,IAAO1f,IAAIwe,KAAuBA,GAAqB,GAAqB,CAAC,uCAAwC,OAAQ,CAAC,uCAAwC,UAAU,SAAUve,GAC3M,OAAOA,EAAM+L,MAAQvX,EAAuB,SAAWwL,EAAM1C,QAAU,KAAO,KAAO0C,EAAM1C,QAAU,YAEnGoiB,GAAY,IAAO3f,IAAIye,KAAuBA,GAAqB,GAAqB,CAAC,0FAA2F,OAAQ,CAAC,0FAA2F,UAAU,SAAUxe,GAC9S,OAAOA,EAAM4Z,iBAAmBplB,EAAuB,MAAQ,iBAG7D,GAEJ,SAAU0C,GAGR,SAASyoB,IACP,OAAkB,OAAXzoB,GAAmBA,EAAOrG,MAAMb,KAAMU,YAAcV,KA+D7D,OAlEA,GAAU2vB,EAAazoB,GAMvByoB,EAAYzvB,UAAU0vB,gBAAkB,WACtC,IAAI5f,EAAQhQ,KAAKgQ,MACbzM,EAAayM,EAAMzM,WACnBc,EAAQ2L,EAAM3L,MACd0E,EAAWiH,EAAMjH,SACjBgT,EAAM/L,EAAM+L,IACZxR,EAASlG,EAAM4E,SAASF,GAAUT,QAAQc,UAC1CF,EAAM3F,EAAWK,IAAI,kBAAmB,GAAQ,GAAQ,GAAIoM,GAAQ,CACtEzF,OAAQA,KAEV,IAAKrB,EAAK,OAAO,KACjB,IAAI8gB,EAAY9gB,EAAI8gB,UAChB6F,EAAWtsB,EAAWK,IAAI,iBAAkBoM,GAChD,OAAO,wBAAcyf,GAAc,CACjC1T,IAAKA,EACLzO,QAASjJ,EAAMwI,OAAOH,MAAMY,SAC3B0c,EAAW,IAAK6F,IAUrBF,EAAYzvB,UAAU4vB,YAAc,WAClC,IAAI9tB,EAAKhC,KAAKgQ,MACV+H,EAAS/V,EAAG+V,OACZhP,EAAW/G,EAAG+G,SAEdqB,EADQpI,EAAGqC,MACG4E,SAASF,GAC3B,GAA2B,IAAvBqB,EAAM9B,QAAQa,OAAciB,EAAM5B,SAAtC,CACA+mB,GAAM,cAAexmB,GACrB,IAAIgnB,EAAQhY,EAAO4D,GAAY5S,IAC/BgnB,GAASA,EAAM9L,WAGjB0L,EAAYzvB,UAAUyR,OAAS,WAC7B,IAAI3B,EAAQhQ,KAAKgQ,MACbzM,EAAayM,EAAMzM,WACnBwF,EAAWiH,EAAMjH,SACjBgT,EAAM/L,EAAM+L,IACZhL,EAAUf,EAAMe,QACpBwe,GAAM,SAAUxmB,GAChB,IAAImhB,EAAa3mB,EAAWK,IAAI,uBAAwBoM,GAEpDggB,EAAY,GAAQ,GAAQ,GAAIhgB,GAAQ,CAC1Cka,WAAYA,IAGVC,EAAe5mB,EAAWK,IAAI,qBAAsBosB,GACxD,OAAO,wBAAcR,GAAM,CACzB5F,eAAgB7N,GACf,wBAAc2T,GAAW,CAC1B9F,eAAgB7N,EAChB/K,IAAKD,EAAQ2K,GAAY3S,KACxBohB,GAAenqB,KAAK4vB,oBAGlBD,EAnET,CAoEE,aAGEM,GAAQ,IAAM,yBACdC,GAAa,YAAOzW,GAAP,CAAegV,KAAuBA,GAAqB,GAAqB,CAAC,2KAA4K,CAAC,8KAC3Q0B,GAAQ,YAAOhX,GAAP,CAAYuV,KAAuBA,GAAqB,GAAqB,CAAC,uBAAwB,CAAC,0BAC/G0B,GAAiB,IAAO5W,KAAKmV,KAAuBA,GAAqB,GAAqB,CAAC,iEAAkE,CAAC,oEAElK,GAAO,SAAc3e,GACvB,OAAO,wBAAc,IAAS,CAC5BvH,QAASuH,EAAMqgB,QACfrJ,SAAU,IAASsJ,IACnB/U,UAAW,IAAQgV,MAClB,wBAAcJ,GAAO,CACtB7I,QAAStX,EAAMsX,QACf0G,UAAW,GACVhe,EAAM4H,YAGP,GAEJ,SAAU1Q,GAGR,SAASspB,EAAexgB,GACtB,IAAIE,EAAQhJ,EAAOtG,KAAKZ,KAAMgQ,IAAUhQ,KAuExC,OArEAkQ,EAAMugB,iBAAmB,SAAUzjB,GACjCijB,GAAM,mBAAoBjjB,GAE1BkD,EAAMgB,SAAS,CACblE,WAAYA,KAIhBkD,EAAMwgB,iBAAmB,SAAUtvB,GACjC,IAAI4O,EAAQE,EAAMF,MACDA,EAAMzM,WACZK,IAAI,gBAAiB,GAAQ,GAAQ,GAAIoM,GAAQ,CAC1DhD,WAAY,MAIhBkD,EAAMygB,eAAiB,SAAUvvB,GAC/B,IAAI4O,EAAQE,EAAMF,MACdzM,EAAayM,EAAMzM,WACnByJ,EAAazJ,EAAWK,IAAI,gBAAiBoM,GACjDzM,EAAWK,IAAI,gBAAiB,GAAQ,GAAQ,GAAIoM,GAAQ,CAC1DhD,WAAYA,EAAa,OAI7BkD,EAAM0gB,iBAAmB,SAAUxvB,GACjC,IAAI4O,EAAQE,EAAMF,MACdzM,EAAayM,EAAMzM,WACnByJ,EAAazJ,EAAWK,IAAI,gBAAiBoM,GACjDzM,EAAWK,IAAI,gBAAiB,GAAQ,GAAQ,GAAIoM,GAAQ,CAC1DhD,WAAYA,EAAa,OAI7BkD,EAAM2gB,mBAAqB,SAAUzvB,GACnC,IAAI4O,EAAQE,EAAMF,MACdzM,EAAayM,EAAMzM,WACvBA,EAAWK,IAAI,mBAAoB,GAAQ,GAAQ,GAAIoM,GAAQ,CAC7DtM,IAAK4Y,GAASC,kBACd/D,SAAUtI,EAAM4gB,gBAChB3W,MAAM,KAER5W,EAAWK,IAAI,YAAa,GAAQ,GAAQ,GAAIoM,GAAQ,CACtDyC,OAAQ/M,GAAOE,iBAInBsK,EAAM6gB,iBAAmB,SAAU3vB,GACjC,IAAI4O,EAAQE,EAAMF,MACdzM,EAAayM,EAAMzM,WACvBA,EAAWK,IAAI,mBAAoB,GAAQ,GAAQ,GAAIoM,GAAQ,CAC7DtM,IAAK4Y,GAASC,kBACd/D,SAAUtI,EAAM4gB,gBAChB3W,MAAM,KAER5W,EAAWK,IAAI,YAAa,GAAQ,GAAQ,GAAIoM,GAAQ,CACtDyC,OAAQ/M,GAAOG,eAInBqK,EAAM4gB,gBAAkB,WACtB,IAAI9uB,EAAKkO,EAAMF,MACX3L,EAAQrC,EAAGqC,MACErC,EAAGuB,WACTK,IAAI,oBAAqB,GAAQ,GAAQ,GAAIsM,EAAMF,OAAQ,CACpEjH,SAAU1E,EAAM+G,uBAIb8E,EAgDT,OA1HA,GAAUsgB,EAAgBtpB,GA6E1BspB,EAAetwB,UAAUiR,kBAAoB,WAC3C,IAAInB,EAAQhQ,KAAKgQ,MACAA,EAAMzM,WACZK,IAAI,mCAAoC,GAAQ,GAAQ,GAAIoM,GAAQ,CAC7EwI,SAAUxY,KAAKywB,qBAInBD,EAAetwB,UAAUoR,qBAAuB,WAC9C,IAAItB,EAAQhQ,KAAKgQ,MACAA,EAAMzM,WACZK,IAAI,sCAAuC,GAAQ,GAAQ,GAAIoM,GAAQ,CAChFwI,SAAUxY,KAAKywB,qBAInBD,EAAetwB,UAAUyR,OAAS,WAChCse,GAAM,UACN,IAAIjgB,EAAQhQ,KAAKgQ,MACbzM,EAAayM,EAAMzM,WACnBmW,EAAS1J,EAAM0J,OACf1M,EAAazJ,EAAWK,IAAI,gBAAiBoM,GACjD,OAAO,wBAAckgB,GAAY,CAC/BxW,OAAQA,GACP,wBAAc,GAAM,CACrB4N,QAAStnB,KAAK6wB,mBACdR,QAAS,gBACRhV,GAAKd,GAAS3U,eAAgB,wBAAc,GAAM,CACnD0hB,QAAStnB,KAAK+wB,iBACdV,QAAS,cACRhV,GAAKd,GAAS1U,aAAc,wBAAc,GAAM,CACjDyhB,QAAStnB,KAAK8wB,gBACdT,QAAS,qBACRhV,GAAKd,GAASO,SAAU,wBAAc,GAAM,CAC7CwM,QAAStnB,KAAK4wB,iBACdP,QAAS,WACRhV,GAAKd,GAASM,QAAS,wBAAc,GAAM,CAC5CyM,QAAStnB,KAAK0wB,iBACdL,QAAS,cACR,wBAAcD,GAAgB,KAAM,QAAUrpB,KAAKiqB,MAAmB,IAAbhkB,GAAoB,MAAO,wBAAc,GAAM,CACzGsa,QAAStnB,KAAK2wB,eACdN,QAAS,YACRhV,GAAKd,GAASK,SAGZ4V,EA3HT,CA4HE5b,IAGEqc,GAAoB,IAAOlhB,IAAI6e,KAAuBA,GAAqB,GAAqB,CAAC,iFAAkF,CAAC,oFAExL,SAAS,GAAa5e,GACpB,IAAIzM,EAAayM,EAAMzM,WACnBc,EAAQ2L,EAAM3L,MACd0E,EAAWiH,EAAMjH,SAErB,GAAI1E,EAAM2F,YAAchF,GAAUE,aAAc,CAC9C,IAeIuoB,EAAalqB,EAAWK,IAAI,wBAAyBoM,GACzD,OAAO,wBAAc,IAAQ,CAC3BtM,IAAK,SACLojB,MAAO,aACPtD,KAAMnI,GAAK,QACXwN,QAAQ,EACRqI,aAAa,EACbC,cAAe,CACb/gB,YAAawM,IAEfwU,oBAAoB,EACpBxI,QA1BsB,SAA2BxnB,GACjDA,EAAEiP,kBACF,IAAI3M,EAAM,mBAAqBqF,EAC3BsoB,EAAW9tB,EAAWK,IAAI,kBAAmB,CAC/CF,IAAKA,IAEPH,EAAWK,IAAI,YAAa,GAAQ,GAAQ,GAAIoM,GAAQ,CACtDyC,OAAQ/M,GAAOY,gBACfyC,SAAUA,EACVqD,UAAWvH,GAAUE,KACrB8C,KAAMwpB,EACNrnB,UAAWhF,GAAUJ,WAgBvBuE,KAAM,OACL,wBAAc8nB,GAAmB,KAAMxD,KAM9C,SAAS6D,GAAMtvB,GACb,IAAI0K,EAAQ1K,EAAG0K,MACXkL,EAAW5V,EAAG4V,SAClB,OACE,uBADK,CACS,IAAe,CAC3BlL,MAAOA,GACN,wBAAc,WAAU,KAAMkL,IAIrC,IA4KI2Z,GA5KAC,GAAQ,IAAM,oBAElB,SAASC,KACP,IAGIC,EAHAC,EAAc,IAAO5hB,IAAIwhB,KAAuBA,GAAqB,GAAqB,CAAC,0DAA2D,kCAAmC,CAAC,0DAA2D,qCAAqC,SAAUvhB,GACtS,OAAOA,EAAMtD,MAAMU,cAGrB,MAAO,CACLwkB,gBAAiB,WACf,OAAOF,GAETG,cAAe,SAAuB7hB,GACpC,IAAI3L,EAAQ2L,EAAM3L,MACdd,EAAayM,EAAMzM,WACvB,OAAO,wBAAcuU,GAAS,MAAM,SAAU/G,EAASgH,EAAQG,GAO7D,OANAwZ,EAAe,GAAQ,GAAQ,GAAI1hB,GAAQ,CACzCe,QAASA,EACTgH,OAAQA,EACRG,UAAWA,IAEbsZ,GAAM,gBAAiBntB,GAChB,wBAAcitB,GAAO,CAC1B5kB,MAAOrI,EAAMwI,OAAOH,OACnB,wBAAcilB,EAAa,CAC5B3gB,IAAKD,EAAQiL,GAAOC,mBACnB,wBAAc,GAAsB,GAAQ,GAAIyV,IAAgBnuB,EAAWK,IAAI,yBAA0B8tB,SAGhHI,aAAc,GACdC,uBAAwB,SAAgC/hB,GACtD,IAAIzM,EAAayM,EAAMzM,WACnBc,EAAQ2L,EAAM3L,MACdqV,EAASnW,EAAWU,SAASuY,GAAQC,gCAErCuV,EAAS,GAAQ,GAAQ,GAAIhiB,GAAQ,CACvC0J,OAAQA,EACR3Q,SAAU1E,EAAM4F,WAalB,MAAO,CAVW1G,EAAWK,IAAI,8BAA+BouB,GAE5CzuB,EAAWK,IAAI,sBAAuBouB,GAC7CzuB,EAAWK,IAAI,eAAgB,GAAQ,GAAQ,GAAIouB,GAAS,CACvEtY,OAAQA,EAAS,KAENnW,EAAWK,IAAI,eAAgB,GAAQ,GAAQ,GAAIouB,GAAS,CACvEtY,OAAQA,EAAS,KAEEnW,EAAWK,IAAI,uBAAwBouB,KAG9DC,4BAA6B,SAAqCjiB,GAChE,OAAO,wBAAc,GAAuB,GAAQ,CAClDtM,IAAK,yBACJsM,KAELkiB,aAAc,SAAsBliB,GAClC,OAAO,wBAAc,GAAQ,GAAQ,CACnCtM,IAAK,UACJsM,KAELmiB,YAAa,SAAqBniB,GAChC,OAAO,MAEToiB,oBAAqB,SAA6BpiB,GAChD,OAAO,MAETqiB,UAAW,SAAmBrwB,GAE5B,OADeA,EAAG4V,UAGpB0a,iBAAkB,SAA0BtiB,GAC1C,OAAO,wBAAc,GAAY,GAAQ,GAAIA,KAE/CuiB,kBAAmB,SAA2BviB,GAC5C,OAAO,wBAAc,GAAa,GAAQ,GAAIA,KAEhDwiB,mBAAoB,SAA4BxiB,GAC9C,OAAO,wBAAc,GAAoB,GAAQ,GAAIA,KAEvDyiB,wBAAyB,SAAiCziB,GACxD,OAAO,wBAAc4a,GAAmB,GAAQ,GAAI5a,KAEtD0iB,yBAA0B,SAAkC1iB,GAC1D,MAAO,IAET2iB,kBAAmB,SAA2B3iB,GAC5C,IAAI3L,EAAQ2L,EAAM3L,MACd0E,EAAWiH,EAAMjH,SACjBxF,EAAayM,EAAMzM,WAEnByE,EADQ3D,EAAM4E,SAASF,GACRf,OACfkB,EAAM,GACN1I,EAAI,EAcR,OAbAwH,EAAOvE,SAAQ,SAAUyE,GACvB,IAAI3I,EAAIgE,EAAWK,IAAI,mBAAoB,GAAQ,GAAQ,GAAIoM,GAAQ,CACrE9H,MAAOA,EACP0qB,SAAU,SAAWpyB,KAGnBjB,IACF2J,EAAI1H,KAAK,wBAAc,WAAU,CAC/BkC,IAAK,SAAWlD,GACfjB,IACHiB,QAGG0I,GAET2pB,iBAAkB,SAA0B7iB,GAC1C,IAAIzM,EAAayM,EAAMzM,WAGvB,OAFYyM,EAAM9H,MAEJN,MACZ,KAAK/C,GAAUC,QACb,OAAOvB,EAAWK,IAAI,0BAA2BoM,GAEnD,KAAKnL,GAAUE,KACb,OAAOxB,EAAWK,IAAI,uBAAwBoM,GAGlD,OAAO,MAET8iB,wBAAyB,SAAiC9iB,GACxD,OAAO,wBAAcqb,GAAc,GAAQ,GAAIrb,KAEjD+iB,qBAAsB,SAA8B/iB,GAClD,OAAO,wBAAcud,GAAW,GAAQ,GAAIvd,KAE9CgjB,eAAgB,SAAwBhjB,GACtC,IAAIe,EAAUf,EAAMe,QAChBhI,EAAWiH,EAAMjH,SAEjBqB,EADQ4F,EAAM3L,MACA4E,SAASF,GAC3B,OAA2B,IAAvBqB,EAAM9B,QAAQa,MAAciB,EAAM5B,SAAiB,KAChD,wBAAc,GAAe,GAAQ,CAC1CwI,IAAKD,EAAQ4K,GAAY5S,KACxBiH,KAELijB,mBAAoB,SAA4BjjB,GAE9C,IAAIe,EAAUf,EAAMe,QAChBhI,EAAWiH,EAAMjH,SAIrB,OAAO,wBAAc,GAAc,GAAQ,CACzCiI,IAAKD,EAAQ4K,GAAY5S,KACxBiH,KAELkjB,yBAA0B,SAAkCljB,GAC1D,IAAIe,EAAUf,EAAMe,QACpB,OAAO,wBAAc,GAAgB,GAAQ,CAC3CC,IAAKD,EAAQiL,GAAOI,sBACnBpM,KAELmjB,8BAA+B,SAAuCnjB,GACpE,IAAIzM,EAAayM,EAAMzM,WACnByJ,EAAazJ,EAAWK,IAAI,gBAAiBoM,GAIjD,OAHAA,EAAQ,GAAQ,GAAQ,GAAIA,GAAQ,CAClChD,WAAYA,IAEP,wBAAc,WAAU,KAAMzJ,EAAWK,IAAI,qBAAsBoM,GAAQzM,EAAWK,IAAI,2BAA4BoM,GAAQzM,EAAWK,IAAI,0BAA2BoM,KAEjLojB,qBAAsB,SAA8BpjB,GAClD,OAAO,wBAAc,GAAgB,GAAQ,CAC3CtM,IAAK,oBACJsM,MAMT,IAsCIqjB,GAAoBC,GAtCpBC,GAAY,YAAO9Z,GAAP,CAAe4Z,KAAuBA,GAAqB,GAAqB,CAAC,8HAA+H,CAAC,iIAC7NG,GAAa,YAAO,IAAP,CAAaF,KAAuBA,GAAqB,GAAqB,CAAC,4BAA6B,CAAC,+BAE9H,SAASG,GAAczjB,GACrB,IAAIzM,EAAayM,EAAMzM,WACnBmW,EAAS1J,EAAM0J,OACfga,EAAgB1jB,EAAM0jB,cACtBC,EAAoB3jB,EAAM2jB,kBAE1B3xB,EAAK,GAAO,oBAAS,GAAQ,GAC7B4xB,EAAS5xB,EAAG,GACZ6xB,EAAY7xB,EAAG,GAEnB,OAAK4xB,EAYE,wBAAcL,GAAW,CAC9B7Z,OAAQA,GACP,wBAAcJ,GAAO,KAAM,wBAAcD,GAAW,CACrDkC,UAAWH,GAAcb,GAASE,OAClC6M,QAAS,WACP,OAAOuM,GAAU,OAEhB,wBAAcL,GAAY,CAC7BM,GAAIJ,EACJvwB,SAAUwwB,GACTpwB,EAAWK,IAAI,0BAA2BoM,KArBpC,wBAAcujB,GAAW,CAC9B7Z,OAAQA,GACP,wBAAcR,GAAQ,CACvBoO,QAAS,WACP,OAAOuM,GAAU,KAElB,wBAAc7a,GAAc,CAC7BuC,UAAWH,GAAcb,GAASC,eAkBxC,IASIuZ,GAAoBC,GAAoBC,GAAoBC,GAAoBC,GAAoBC,GAAoBC,GATxHC,GAAe,IAAOvkB,IAAIgkB,KAAuBA,GAAqB,GAAqB,CAAC,wEAAyE,CAAC,2EACtKQ,GAAc,IAAO/a,KAAKwa,KAAuBA,GAAqB,GAAqB,CAAC,mCAAoC,CAAC,sCACjIQ,GAAsB,IAAOzkB,IAAIkkB,KAAuBA,GAAqB,GAAqB,CAAC,mHAAoH,CAAC,sHACxNQ,GAAe,YAAOF,GAAP,CAAoBL,KAAuBA,GAAqB,GAAqB,CAAC,IAAK,CAAC,OAC3GQ,GAAa,IAAO3kB,IAAIokB,KAAuBA,GAAqB,GAAqB,CAAC,gGAAiG,CAAC,mGAC5LQ,GAAW,IAAO5kB,IAAIqkB,KAAuBA,GAAqB,GAAqB,CAAC,oHAAqH,OAAQ,CAAC,oHAAqH,UAAU,SAAUpkB,GACjW,OAAOA,EAAM4kB,SAEXC,GAAa,IAAO9kB,IAAIskB,KAAuBA,GAAqB,GAAqB,CAAC,2EAA4E,CAAC,8EAG3K,SAASS,GAAa9kB,GACpB,OAAO,wBAAc,MAAO,KAAMA,EAAM4H,SAAU,wBAAc,IAAS,CACvE/O,MAAO,CACLkQ,OAAQ,aAKd,SAASgc,GAAuB/kB,GAC9B,IAAI4kB,EAAQ5kB,EAAM4kB,MACdI,EAAoBhlB,EAAMglB,kBAC9B,OAAO,wBAAcT,GAAa,KAAM,wBAAc,IAAS,KAAM,wBAAcM,GAAY,KAAM,wBAAc,MAAO,CACxHtZ,UAAWH,GAAcb,GAASG,gBAChC,wBAAcia,GAAU,CAC1BC,MAAOA,KACJ,wBAAc,MAAO,KAAM,wBAAc,gBAAc,CAC1DA,MAAOA,EACPK,iBAAkB,SAA0BL,GAC1C,OAAOI,EAAkBJ,EAAMM,WAKrC,SAASC,GAAkBnlB,GACzB,IAAI8W,EAAQ9W,EAAM8W,MACdsO,EAAcplB,EAAMolB,YACxB,OAAO,wBAAcb,GAAa,KAAM,wBAAc,IAAQ,CAC5DjN,QAAS8N,GACRtO,IAGL,SAASuO,GAAwBrlB,GAC/B,IAAIhO,EAAKgO,EAAMiU,OACXA,OAAgB,IAAPjiB,EAAgB,IAAMA,EAC/B8kB,EAAQ9W,EAAM8W,MACdwO,EAAY/hB,GAAOvD,EAAO,CAAC,SAAU,UAErCulB,EAAY,CACd5c,cAA0B,MAAXsL,EAAiB,MAAQ,SACxCrL,WAAY,UAEd,OAAO,wBAAc2b,GAAa,KAAM,wBAAc7b,GAAM,GAAQ,GAAI6c,GAAY,wBAAczc,GAAQ,CACxGC,OAAQ,aACP+N,GAAQ,wBAAc,IAAc,GAAQ,GAAIwO,MAGrD,SAASE,GAAkBxlB,GACzB,IAAIgD,EAAOhD,EAAMgD,KACbqU,EAAQrX,EAAMqX,MACdoO,EAAezlB,EAAMylB,aACrBC,EAAe1lB,EAAM0lB,aACrBC,EAAW,KAAOC,SAClBC,EAAU,CACZxO,MAAOA,EACPoO,aAAcA,EACdC,aAAcA,EACdI,YAAY,GAEd,OAAO,wBAAcvB,GAAa,KAAM,wBAAcoB,EAAU,GAAQ,GAAIE,GAAU,wBAAc,IAAQ,CAC1G7iB,KAAMA,MAIV,IAAI,GAAa,SAAoB+iB,GACnC,OAAO,SAAUzgB,EAAOtT,GACtB,IAAIozB,EAAcpzB,EAAGozB,YACrB,OAAO,wBAAc,IAAU,CAC7BpiB,KAAM,GAAKsC,EAAQygB,EACnBryB,IAAK4R,EACLgS,QAAS8N,MAOXY,IAFW,KAAOJ,SAEC,GAASj2B,MAAM,GAAG8L,SAErCwqB,GAAqB,GAASt2B,MAAM,GAAG8L,QAEvCyqB,GAAoB,CAAC,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,IAC/CC,GAAmB,CAAC,OAAQ,QAAS,SAAU,SAAU,UAE7D,SAASC,GAAkBpmB,GACzB,IAAIxC,EAAewC,EAAMxC,aACrB6oB,EAAkBrmB,EAAMqmB,gBA4B5B,OAAO,wBAAcvB,GAAc,KAAM,wBAAcR,GAAc,KAAM,UAAW,wBAAc,MAAO,KAAM,wBAAckB,GAAmB,CAChJxiB,KAAM,WAAaxF,EAAaa,YAAcb,EAAaa,YAAc,OACzEgZ,MAAO4O,GACPR,aAAc,GAAW,MACzBC,aA9B4B,SAAiCj0B,GAE7D40B,EAAgB,CACdhoB,YAAa5M,EAAQ,UA4BrB,wBAAc+zB,GAAmB,CACnCxiB,KAAM,WAAaxF,EAAac,YAAcd,EAAac,YAAc,QACzE+Y,MAAO8O,GACPV,aAAc,GAAW,IACzBC,aA5B4B,SAAiCj0B,GAC7D40B,EAAgB,CACd/nB,YAAa7M,OA2Bb,wBAAc+zB,GAAmB,CACnCxiB,KAAM,WAAaxF,EAAaQ,aAChCqZ,MAAO6O,GACPT,aAAc,GAAW,MACzBC,aA3B6B,SAAkCj0B,GAE/D40B,EAAgB,CACdroB,aAAcvM,EAAQ,UAyBtB,wBAAcszB,GAAwB,CACxCH,MAAOpnB,EAAa8oB,YACpBtB,kBAvB4B,SAAiCJ,GAC7DyB,EAAgB,CACdC,YAAa1B,SAqCnB,IAAI2B,GAAY,CAAC,QAAS,QAAS,QAE/B,GAAqB,SAA4B3oB,EAAU5L,GAC7D,IAAIozB,EAAcpzB,EAAGozB,YACLpzB,EAAGw0B,UACPx0B,EAAGy0B,MACf,OAAO,wBAAc,IAAU,CAC7BzjB,KAAM,GAAKpF,EACXlK,IAAKkK,EACL0Z,QAAS8N,KAIb,SAASsB,GAAgB1mB,GACvB,IAAIhO,EAAKgO,EAAM2mB,cACXA,OAAuB,IAAP30B,GAAuBA,EACvCqG,EAAK2H,EAAM4mB,iBACXA,OAA0B,IAAPvuB,GAAuBA,EAC1CE,EAAKyH,EAAMtC,UACXA,OAAmB,IAAPnF,EAAgB,GAAKA,EACjCG,EAAKsH,EAAM9B,aACXA,OAAsB,IAAPxF,EAAgB,GAAKA,EACpCmuB,EAAe7mB,EAAM6mB,aACrBC,EAAkB9mB,EAAM8mB,gBAsC5B,OAAO,wBAAchC,GAAc,KAAM,wBAAcR,GAAc,KAAM,QAASqC,GAAiB,wBAAcjC,GAAY,CAC7H9b,WAAY,UACX,wBAAcE,GAAQ,CACvBC,OAAQ,aACP,kBAAmB,wBAAcyc,GAAmB,CACrDxiB,KAAM,WAAatF,EAAYA,EAAUG,UAAY,OACrDwZ,MAAO2O,GACPP,aAAc,GAAW,MACzBC,aA5C0B,SAA+Bj0B,GACzDo1B,EAAa,CACXhpB,UAAWpM,EAAQ,UA2CnB,wBAAc+zB,GAAmB,CACnCxiB,KAAM,aAAetF,EAAUE,SAC/ByZ,MAAOkP,GACPd,aAAc,GACdC,aA3CyB,SAA8Bj0B,GACvDo1B,EAAa,CACXjpB,SAAUnM,OA0CV,wBAAcszB,GAAwB,CACxCH,MAAOlnB,EAAUS,UACjB6mB,kBAxC0B,SAA+BJ,GACzDiC,EAAa,CACX1oB,UAAWymB,QAuCVgC,GAAoB,wBAAclC,GAAY,CACjD9b,WAAY,UACX,wBAAcE,GAAQ,CACvBC,OAAQ,aACP,cAAe,wBAAcyc,GAAmB,CACjDxiB,KAAM,WAAa9E,EAAeA,EAAaL,UAAY,OAC3DwZ,MAAO2O,GACPP,aAAc,GAAW,MACzBC,aA3C6B,SAAkCj0B,GAC/Dq1B,EAAgB,CACdjpB,UAAWpM,EAAQ,UA0CnB,wBAAc+zB,GAAmB,CACnCxiB,KAAM,aAAe9E,EAAaN,SAClCyZ,MAAOkP,GACPd,aAAc,GACdC,aA1C4B,SAAiCj0B,GAC7Dq1B,EAAgB,CACdlpB,SAAUnM,OAyCV,wBAAcszB,GAAwB,CACxCH,MAAO1mB,EAAaC,UACpB6mB,kBAvC6B,SAAkCJ,GAC/DkC,EAAgB,CACd3oB,UAAWymB,SAyCjB,SAASmC,GAAgB/mB,GACvB,IAAIxC,EAAewC,EAAMxC,aACrB6oB,EAAkBrmB,EAAMqmB,gBAsBxBW,EAAwB,CAC1BlQ,MAAO,YACPmQ,IAAK,GACLC,IAAK,IACLz1B,MAAO01B,SAAS3pB,EAAaO,UAC7BlF,MAAO,CACLyM,MAAO,IAET8hB,cA5ByB,SAA8B31B,GAEvD40B,EAAgB,CACdtoB,SAAUtM,MA2BV41B,EAAuB,CACzBxuB,MAAO,CACLyM,MAAO,IAET7T,MAAO+L,EAAaC,YAAc,GAClCtK,SA5B2B,SAAgC/B,GAE3Di1B,EAAgB,CACd5oB,WAAYrM,EAAEwP,OAAOnP,UA2BzB,OAAO,wBAAcqzB,GAAc,KAAM,wBAAcR,GAAc,KAAM,eAAgB,wBAAc5b,GAAM,KAAM,wBAAc2c,GAAyB,GAAQ,GAAI2B,IAAyB,wBAAczC,GAAa,KAAM,wBAAc7b,GAAM,CACpPE,WAAY,UACX,wBAAcE,GAAQ,CACvBC,OAAQ,aACP,gBAAiB,wBAAc,IAAY,GAAQ,GAAIse,MAA0B,wBAActC,GAAwB,CACxHH,MAAOpnB,EAAaonB,MACpBI,kBA7BsB,SAA2BJ,GACjDyB,EAAgB,CACdzB,MAAOA,SA+Bb,IACI0C,GADAC,GAAQ,IAAM,qBAGlB,SAASC,GAAYxnB,GACnB,IAAIzM,EAAayM,EAAMzM,WACnBc,EAAQ2L,EAAM3L,MACd0E,EAAWiH,EAAMjH,SACjBqB,EAAQ/F,EAAM4E,SAASF,GAEvBstB,EAAkB,SAAyBxtB,GAC7CtF,EAAWK,IAAI,uBAAwB,GAAQ,GAAQ,GAAIoM,GAAQ,CACjEnH,MAAOA,MAiCX,IAAKxE,EAAM4F,SAAU,OAAO,KAC5B,IAAIuD,EAAejK,EAAWK,IAAI,uBAAwBoM,GAgBtDynB,EAAuB,CACzB/pB,UAhBcnK,EAAWK,IAAI,eAAgBoM,GAiB7C9B,aAhBiB3K,EAAWK,IAAI,kBAAmBoM,GAiBnD6mB,aAfiB,SAAsBnpB,GACvCnK,EAAWK,IAAI,eAAgB,GAAQ,GAAQ,GAAIoM,GAAQ,CACzDtC,UAAWA,MAcbopB,gBAVoB,SAAyB5oB,GAC7C3K,EAAWK,IAAI,kBAAmB,GAAQ,GAAQ,GAAIoM,GAAQ,CAC5D9B,aAAcA,OAUdwpB,EAAyB,CAC3BlqB,aAAcA,EACd6oB,gBAAiBA,GAEnB,OAAO,wBAAc1c,GAAc,KAAM,wBAAcyc,GAAmB,GAAQ,GAAIsB,IAA0B,wBAAcX,GAAiB,GAAQ,GAAIW,IAA0B,wBAAc5C,GAAc,KAAM,wBAAcR,GAAc,KAAM,cAAe,wBAAcS,GAAwB,CAC5SH,MAAOpnB,EAAaJ,WACpB4nB,kBA1DgC,SAAqCJ,GACrEyB,EAAgB,CACdjpB,WAAYwnB,QAyDX,wBAAc8B,GAAiB,GAAQ,GAAIe,IAAwB,wBAAc3C,GAAc,KAAM,wBAAcK,GAAmB,CACzIrO,MAAO,oBACPsO,YAvDqB,WACjBhrB,EAAMvB,OACRtF,EAAWK,IAAI,YAAa,GAAQ,GAAQ,GAAIoM,GAAQ,CACtDyC,OAAQ/M,GAAOU,UACfyC,MAAO,WAoDT,wBAAcssB,GAAmB,CACnCrO,MAAO,aACPsO,YAjDoB,WACpBkC,GAAc/zB,EAAWK,IAAI,gBAAiBoM,GAC9CunB,GAAMD,OAgDJ,wBAAcnC,GAAmB,CACnCrO,MAAO,cACPsO,YA/CqB,WACjBkC,IACF/zB,EAAWK,IAAI,YAAa,GAAQ,GAAQ,GAAIoM,GAAQ,CACtDyC,OAAQ/M,GAAOU,UACfyC,MAAO8uB,KAAKC,UAAUN,WAxM9B,SAA6BtnB,GAC3B,IAAIzM,EAAayM,EAAMzM,WAMvB,OAAO,wBAAcuxB,GAAc,KAAM,wBAAcP,GAAa,KAAM,wBAAc,IAAQ,CAC9FjN,QAL8B,SAAmClmB,GACjEmC,EAAWK,IAAI,sBAAuBoM,KAKrC,6BA2OE6nB,CAAoB7nB,IAW3B,IAAI,GAAS,EAAQ,KAErB,SAAS8nB,GAAmB9nB,GAC1B,IAAIxC,EAAewC,EAAMxC,aACrB6oB,EAAkBrmB,EAAMqmB,gBACxBpoB,EAAU,GAAO,UAAWT,EAAaS,SAAW,KACpD8pB,EAAc,CAChB9T,OAAQ,IACRgT,IAAK,EACLC,IAAK,GACLruB,MAAO,CACLyM,MAAO,KAGPmB,EAAM0gB,SAASlpB,EAAQ,gBACvBuQ,EAAQ2Y,SAASlpB,EAAQ,kBACzBwQ,EAAS0Y,SAASlpB,EAAQ,mBAC1BuI,EAAO2gB,SAASlpB,EAAQ,iBACxBrO,EAAI,CACN6W,IAAKA,EACL+H,MAAOA,EACPC,OAAQA,EACRjI,KAAMA,GAGJwhB,EAAa,SAAoBjc,GACnC,OAAO,SAAUiM,GACf,IAAIhmB,EAEJq0B,EAAgB,CACdpoB,QAASsQ,GAAW,GAAQ,GAAQ,GAAI3e,IAAKoC,EAAK,GAAIA,EAAG+Z,GAAOiM,EAAGhmB,SAKrEi2B,EAAW,GAAQ,GAAQ,GAAIF,GAAc,CAC/CjR,MAAO,MACPrlB,MAAOgV,EACP2gB,cAAeY,EAAW,SAGxBE,EAAa,GAAQ,GAAQ,GAAIH,GAAc,CACjDjR,MAAO,QACPrlB,MAAO+c,EACP4Y,cAAeY,EAAW,WAGxBG,EAAc,GAAQ,GAAQ,GAAIJ,GAAc,CAClDjR,MAAO,SACPrlB,MAAOgd,EACP2Y,cAAeY,EAAW,YAGxBI,EAAY,GAAQ,GAAQ,GAAIL,GAAc,CAChDjR,MAAO,OACPrlB,MAAO+U,EACP4gB,cAAeY,EAAW,UAG5B,OAAO,wBAAclD,GAAc,KAAM,wBAAcR,GAAc,KAAM,WAAY,wBAAcI,GAAY,KAAM,wBAAcW,GAAyB,GAAQ,GAAI4C,IAAY,wBAAc5C,GAAyB,GAAQ,GAAI6C,IAAc,wBAAc7C,GAAyB,GAAQ,GAAI8C,IAAe,wBAAc9C,GAAyB,GAAQ,GAAI+C,MAG9W,IAoDIC,GApDAC,GAAuB,IAAOvoB,IAAIsoB,KAAuBA,GAAqB,GAAqB,CAAC,2CAA4C,CAAC,8CAErJ,SAASE,GAAiBvoB,GACxB,IAAIka,EAAala,EAAMka,WACnBsO,EAAgBxoB,EAAMwoB,cACtBx2B,EAAKkoB,EAAW1c,aAChBA,OAAsB,IAAPxL,EAAgB,GAAKA,EACpCqG,EAAK6hB,EAAWxc,UAChBA,OAAmB,IAAPrF,EAAgB,GAAKA,EACjCE,EAAK2hB,EAAWhc,aAGhBmoB,EAAkB,SAAyB7oB,GAC7CgrB,EAAc,CACZhrB,aAAcA,KAIdwkB,EAAS,CACXxkB,aAAcA,EACd6oB,gBAAiBA,GAefoB,EAAuB,CACzBd,eAAe,EACfjpB,UAAWA,EACXQ,kBA5BwB,IAAP3F,EAAgB,GAAKA,EA6BtCsuB,aAhBiB,SAAsBnpB,GACvC8qB,EAAc,CACZ9qB,UAAWA,KAebopB,gBAXoB,SAAyB5oB,GAC7CsqB,EAAc,CACZtqB,aAAcA,MAWlB,OAAO,wBAAcoqB,GAAsB,KAAM,wBAAclC,GAAmB,GAAQ,GAAIpE,IAAU,wBAAc8F,GAAoB,GAAQ,GAAI9F,IAAU,wBAAc+E,GAAiB,GAAQ,GAAI/E,IAAU,wBAAc8C,GAAc,KAAM,wBAAcR,GAAc,KAAM,cAAe,wBAAcS,GAAwB,CAC5UH,MAAOpnB,EAAaJ,WACpB4nB,kBAAmB,SAA2BJ,GAC5CyB,EAAgB,CACdjpB,WAAYwnB,QAGb,wBAAc8B,GAAiB,GAAQ,GAAIe,KAIlD,IAAIgB,GAAQ,SAEZ,SAASC,GAAY1oB,GACnB,IA5H2B2oB,EA4HvB32B,EAAK,GAAO,oBAAS,GAAQ,GAI7BqG,GAHmBrG,EAAG,GACAA,EAAG,GAEpB,GAAO,oBAAS,GAAQ,IAC7B42B,EAAkBvwB,EAAG,GACrBwwB,EAAqBxwB,EAAG,GAExBhE,EAAQ2L,EAAM3L,MACdd,EAAayM,EAAMzM,WACnBmJ,EAAQrI,EAAMwI,OAAOH,MACrBoB,EAAYpB,EAAMoB,UAClBM,EAAe1B,EAAM0B,aACrBG,EAAc7B,EAAM6B,YAEpB9B,EAAW,SAAkBC,GAC/BnJ,EAAWK,IAAI,YAAa,GAAQ,GAAQ,GAAIoM,GAAQ,CACtDyC,OAAQ/M,GAAOW,UACfqG,MAAO,iBAAMA,OAgBbosB,GA9JuBH,EA8JuB,SAAUxrB,GAC1DV,EAAS,iBAAMC,EAAO,CACpBS,YAAaA,MA/JV,SAAUsD,GACf,OAAOkoB,EAAQloB,EAAMG,OAAOmoB,WAoL1BC,EAAuB,CACzB9O,WAAYpc,EACZ0qB,cApBsB,SAA2B3vB,GACjD4D,EAAS,iBAAMC,EAAO,CACpBoB,UAAWjF,OAoBXowB,EAAkB,wBAAcV,GAAkB,GAAQ,GAAIS,IAC9DE,EAA0B,CAC5BhP,WAAY9b,EACZoqB,cAnByB,SAA8B3vB,GACvD4D,EAAS,iBAAMC,EAAO,CACpB0B,aAAcvF,OAmBdswB,EAAqB,wBAAcZ,GAAkB,GAAQ,GAAIW,IACjEE,EAAyB,CAC3BlP,WAAY3b,EACZiqB,cAlBwB,SAA6B3vB,GACrD4D,EAAS,iBAAMC,EAAO,CACpB6B,YAAa1F,OAkBbwwB,EAAoB,wBAAcd,GAAkB,GAAQ,GAAIa,IAChEE,EAAY,CACdxF,GAAI2E,GACJ9E,kBAAmB,SAA2BG,GAC5C2E,GAAQ3E,IAGRyF,EAAc,wBAAc/E,GAAqB,KAAM,wBAAc,IAAM,GAAQ,GAAI8E,GAAY,wBAAc,IAAK,CACxHxF,GAAI,SACJhN,MAAO,cACP0S,MAAOH,IACL,wBAAc,IAAK,CACrBvF,GAAI,UACJhN,MAAO,eACP0S,MAAOL,IACL,wBAAc,IAAK,CACrBrF,GAAI,OACJhN,MAAO,YACP0S,MAAOP,MAsBLQ,EAAa,CACf5Q,OAAQ+P,EACRhQ,QAAS,SAAiBxnB,GACxBy3B,GAAmB,KAGnBa,EAAQ,wBAAc,IAAO,GAAQ,GAAID,GAAa,wBAAc,IAAK,KAAM,sBACnF,OAAO,wBAAc9f,GAAc,KAAM,wBAAcmb,GAAc,KAAM,wBAAcR,GAAc,KAAM,UAAW,wBAAcI,GAAY,KAAM,wBAAcD,GAAc,KAAM,eAAgB,wBAAcM,GAAwB,CAC9OH,MAAOloB,EAAMU,WACb4nB,kBAnGgC,SAAqC5nB,GACrEX,EAAS,iBAAMC,EAAO,CACpBU,WAAYA,QAkGZ,wBAAcqnB,GAAc,KAAM,cAAe,wBAAcM,GAAwB,CACzFH,MAAOloB,EAAMW,eACb2nB,kBAhG+B,SAAoC3nB,GACnEZ,EAAS,iBAAMC,EAAO,CACpBW,eAAgBA,QA+FhB,wBAAconB,GAAc,KAAM,iBAAkB,wBAAcrb,GAAgB,CACpF2f,QAASrsB,EAAMS,YACfhK,SAAU21B,MACNS,EAAa,wBAAczE,GAAc,KAAM,wBAAcK,GAAmB,CACpFrO,MAAO,eACPsO,YArCsB,SAA2Bh0B,GAGjDyb,GADW8a,KAAKC,UAAUlrB,GACA,4BAmCxB,wBAAcyoB,GAAmB,CACnCrO,MAAO,eACPsO,YAlCsB,SAA2Bh0B,GACjDmc,GAAgB,cAAcoc,MAAK,SAAUxb,GAC3C,IF15Fe3W,EE05FXlH,EAAIq3B,KAAKiC,MAAMzb,GFz5FJ,OADA3W,EE45FElH,GF35FV4M,MAAkC,MAAlB1F,EAAI4F,YAA4C,MAAtB5F,EAAI6F,eEg6FrDZ,EAASnM,GAJPu4B,GAAmB,UA8BpBa,GAGP,SAASG,KACP,IAAInG,EAAgB,cAEhBC,EAAoB,SAA2B8E,GACjD/E,EAAgB+E,GAGlB,MAAO,CACLqB,oBAAqB,SAA6B9pB,GAChD,IAAIgiB,EAAS,GAAQ,GAAQ,GAAIhiB,GAAQ,CACvCtM,IAAK,kBACLgwB,cAAeA,EACfC,kBAAmBA,IAGrB,OAAO,wBAAcF,GAAe,GAAQ,GAAIzB,KAElD+H,wBAAyB,SAAiC/pB,GACxD,IAAIzM,EAAayM,EAAMzM,WAGvB,MAAO,CAFcA,EAAWK,IAAI,yBAA0BoM,GACzCzM,EAAWK,IAAI,oBAAqBoM,KAG3DgqB,uBAAwB,SAAgChqB,GACtD,IAAIiqB,EAAS,CACXnG,GAAI,cACJpwB,IAAK,cACLojB,MAAO,aACP0S,MAAO,wBAAchC,GAAa,GAAQ,GAAIxnB,KAEhD,OAAO,wBAAc,IAAK,GAAQ,GAAIiqB,KAExCC,kBAAmB,SAA2BlqB,GAC5C,IAAIiqB,EAAS,CACXnG,GAAI,eACJpwB,IAAK,eACLojB,MAAO,QACP0S,MAAO,wBAAcd,GAAa,GAAQ,GAAI1oB,KAEhD,OAAO,wBAAc,IAAK,GAAQ,GAAIiqB,MAK5C,IAAIE,GAAQ,IAAM,gBAElB,SAASC,KACP,IAAIC,EAAe,IAAIh3B,IACnBi3B,EAAmB,IAAIj3B,IAC3B,MAAO,CACLk3B,2BAA4B,SAAoCvqB,GAC9D,IAAItM,EAAMsM,EAAMtM,IACZ8U,EAAWxI,EAAMwI,SAEhB8hB,EAAiBliB,IAAI1U,IACxB42B,EAAiBpwB,IAAIxG,EAAK,IAG5B42B,EAAiBjzB,IAAI3D,GAAKlC,KAAKgX,IAEjCgiB,8BAA+B,SAAuCxqB,GACpE,IAAItM,EAAMsM,EAAMtM,IACZ8U,EAAWxI,EAAMwI,SAEjB8hB,EAAiBliB,IAAI1U,KACvB42B,EAAiB52B,GAAO42B,EAAiBjzB,IAAI3D,GAAKmI,QAAO,SAAU4uB,GACjE,OAAOA,IAAMjiB,OAInBkiB,aAAc,SAAsB1qB,GAClC,IAAItM,EAAMsM,EAAMtM,IAEhB,OADAy2B,GAAM,eAAgBz2B,GACf22B,EAAahzB,IAAI3D,IAE1Bi3B,aAAc,SAAsB3qB,GAClC,IAAIjO,EAAKC,EAEL0B,EAAMsM,EAAMtM,IACZjC,EAAQuO,EAAMvO,MAIlB,GAHA04B,GAAM,eAAgBz2B,GACtB22B,EAAanwB,IAAIxG,EAAKjC,GAElB64B,EAAiBliB,IAAI1U,GAAM,CAC7B,IAAI2U,EAAYiiB,EAAiBjzB,IAAI3D,GAErC,IACE,IAAK,IAAI4U,EAAc,GAASD,GAAYE,EAAgBD,EAAYhX,QAASiX,EAAchX,KAAMgX,EAAgBD,EAAYhX,OAAQ,EAEvIkX,EADeD,EAAc9W,OACpBA,IAEX,MAAOa,GACPP,EAAM,CACJL,MAAOY,GAET,QACA,IACMiW,IAAkBA,EAAchX,OAASS,EAAKsW,EAAY/V,SAASP,EAAGpB,KAAK0X,GAC/E,QACA,GAAIvW,EAAK,MAAMA,EAAIL,UAK3Bk5B,gBAAiB,SAAyB5qB,GACxC,IAAItM,EAAMsM,EAAMtM,IAChBy2B,GAAM,kBAAmBz2B,GACzB,IAAIjC,EAAQ44B,EAAahzB,IAAI3D,GAE7B,OADA22B,EAAaruB,OAAOtI,GACbjC,IASb,IAAIo5B,GAAQ,IAAM,sBAElB,SAASC,KACP,IAAIC,EAAW,IAAI13B,IACf23B,EAAa,EACjB,MAAO,CACLC,cAAe,SAAuBjrB,GACpC,IAAIzM,EAAayM,EAAMzM,WACvB,MAAO,CACLiK,aAAcjK,EAAWK,IAAI,uBAAwBoM,GACrDtC,UAAWnK,EAAWK,IAAI,eAAgBoM,GAC1C9B,aAAc3K,EAAWK,IAAI,kBAAmBoM,KAGpDkrB,qBAAsB,SAA8BlrB,GAClD,IAAIjH,EAAWiH,EAAMjH,SACjB1E,EAAQ2L,EAAM3L,MACdd,EAAayM,EAAMzM,WACvBs3B,GAAM,wBAAyB9xB,EAAU1E,GACzC,IAEI82B,EAFAC,EAAc/2B,EAAMoL,oBAAoB1G,GACxC2D,EAAQrI,EAAMwI,OAAOH,MAKzB,GAH2CyuB,EAAvCC,IAAgB32B,GAAiBC,KAAmBgI,EAAMoB,UAAmBstB,IAAgB32B,GAAiBE,QAAsB+H,EAAM0B,aAA+B1B,EAAM6B,YACnL4sB,EAAa,GAAQ,GAAQ,GAAIzuB,EAAMc,cAAe2tB,EAAW3tB,cAE7Dd,EAAMS,YAAa,CACrB,IAAIA,EAAc5J,EAAWK,IAAI,iBAAkBoM,GACnDmrB,EAAa,GAAQ,GAAQ,GAAIA,GAAa,CAC5C/tB,WAAYD,EACZmpB,YAAanpB,EACbe,aAAc,GAAQ,GAAQ,GAAIitB,EAAWjtB,cAAe,CAC1DC,UAAWhB,MAKjB,IAAI/C,EAAQ/F,EAAM4E,SAASF,GAE3B,IAAKqB,EAAMvB,MACT,OAAOsyB,EAGT,IAAIE,EAAc1D,KAAKiC,MAAMxvB,EAAMvB,OACnC,OAAO,GAAQ,GAAQ,GAAIsyB,GAAaE,EAAY7tB,eAEtD8tB,aAAc,SAAsBtrB,GAClC,IAAIjH,EAAWiH,EAAMjH,SACjB1E,EAAQ2L,EAAM3L,MACdd,EAAayM,EAAMzM,WACvBs3B,GAAM,eAAgB9xB,GACtB,IAGIwyB,EAHAH,EAAc/2B,EAAMoL,oBAAoB1G,GACxC2D,EAAQrI,EAAMwI,OAAOH,MACrBgB,EAAYhB,EAAMgB,UAEqB6tB,EAAvCH,IAAgB32B,GAAiBC,KAAoBgI,EAAMoB,UAAUJ,UAAmB0tB,IAAgB32B,GAAiBE,QAAuB+H,EAAM0B,aAAaV,UAA6BhB,EAAM6B,YAAYb,UACtNA,EAAY,GAAQ,GAAQ,GAAIA,GAAY6tB,GAC5C,IAAInxB,EAAQ/F,EAAM4E,SAASF,GAE3B,GAAuB,MAAnBqB,EAAMhC,UAAmB,CAC3B,IAAIozB,EAAqBj4B,EAAWK,IAAI,kBAAmB,GAAQ,GAAQ,GAAIoM,GAAQ,CACrFjH,SAAUqB,EAAMhC,aAElBsF,EAAY,GAAQ,GAAQ,GAAIA,GAAY8tB,GAG9C,IAAKpxB,EAAMvB,MACT,OAAO6E,EAGT,IAAI2tB,EAAc1D,KAAKiC,MAAMxvB,EAAMvB,OACnC,OAAO,GAAQ,GAAQ,GAAI6E,GAAY2tB,EAAY3tB,YAErD+tB,gBAAiB,SAAyBzrB,GACxC,IAAIjH,EAAWiH,EAAMjH,SACjB1E,EAAQ2L,EAAM3L,MACdd,EAAayM,EAAMzM,WACvBs3B,GAAM,eAAgB9xB,GACtB,IAGIwyB,EAHAH,EAAc/2B,EAAMoL,oBAAoB1G,GACxC2D,EAAQrI,EAAMwI,OAAOH,MACrBwB,EAAexB,EAAMgB,UAEkB6tB,EAAvCH,IAAgB32B,GAAiBC,KAAoBgI,EAAMoB,UAAUI,aAAsBktB,IAAgB32B,GAAiBE,QAAuB+H,EAAM0B,aAAaF,aAAgCxB,EAAM6B,YAAYL,aAC5NA,EAAe,GAAQ,GAAQ,GAAIA,GAAeqtB,GAClD,IAAInxB,EAAQ/F,EAAM4E,SAASF,GAE3B,GAAI2D,EAAMS,YAAa,CACrB,IAAIA,EAAc5J,EAAWK,IAAI,iBAAkBoM,GACnD6qB,GAAM1tB,GACNe,EAAe,GAAQ,GAAQ,GAAIA,GAAe,CAChDC,UAAWhB,IAIf,IAAK/C,EAAMvB,MACT,OAAOqF,EAGT,IAAImtB,EAAc1D,KAAKiC,MAAMxvB,EAAMvB,OAKnC,OAHU,GAAQ,GAAQ,GAAIqF,GAAemtB,EAAYntB,eAK3DwtB,qBAAsB,SAA8B1rB,GAClD,IAAIjH,EAAWiH,EAAMjH,SACjBxF,EAAayM,EAAMzM,WACnBsF,EAAQmH,EAAMnH,MAGdqhB,EAFQla,EAAM3L,MACA4E,SAASF,GACJF,MACnB8yB,EAAWzR,EAAayN,KAAKiC,MAAM1P,GAAc,GAEjD0R,EAAc,GAAQ,GAAQ,GAAID,GAAW,CAC/CnuB,aAAc,GAAQ,GAAQ,GAAImuB,EAASnuB,cAAe3E,KAG5D,IAAK,mBAAQ8yB,EAAUC,GAAc,CACnC,IAAIC,EAAclE,KAAKC,UAAUgE,GACjCr4B,EAAWK,IAAI,YAAa,GAAQ,GAAQ,GAAIoM,GAAQ,CACtDyC,OAAQ/M,GAAOU,UACfyC,MAAOgzB,OAIbhF,aAAc,SAAsB7mB,GAClC,IAAIjH,EAAWiH,EAAMjH,SACjBxF,EAAayM,EAAMzM,WACnBmK,EAAYsC,EAAMtC,UAGlB7E,EAFQmH,EAAM3L,MACA4E,SAASF,GACTF,MACd8yB,EAAW9yB,EAAQ8uB,KAAKiC,MAAM/wB,GAAS,GAEvC+yB,EAAc,GAAQ,GAAQ,GAAID,GAAW,CAC/CjuB,UAAW,GAAQ,GAAQ,GAAIiuB,EAASjuB,WAAYA,KAGtD,IAAK,mBAAQiuB,EAAUC,GAAc,CACnC,IAAIC,EAAclE,KAAKC,UAAUgE,GACjCr4B,EAAWK,IAAI,YAAa,GAAQ,GAAQ,GAAIoM,GAAQ,CACtDyC,OAAQ/M,GAAOU,UACfyC,MAAOgzB,OAIb/E,gBAAiB,SAAyB9mB,GACxC,IAAIjH,EAAWiH,EAAMjH,SACjBxF,EAAayM,EAAMzM,WACnB2K,EAAe8B,EAAM9B,aAGrBrF,EAFQmH,EAAM3L,MACA4E,SAASF,GACTF,MACd8yB,EAAW9yB,EAAQ8uB,KAAKiC,MAAM/wB,GAAS,GAEvC+yB,EAAc,GAAQ,GAAQ,GAAID,GAAW,CAC/CztB,aAAc,GAAQ,GAAQ,GAAIytB,EAASztB,cAAeA,KAG5D,IAAK,mBAAQytB,EAAUC,GAAc,CACnC,IAAIC,EAAclE,KAAKC,UAAUgE,GACjCr4B,EAAWK,IAAI,YAAa,GAAQ,GAAQ,GAAIoM,GAAQ,CACtDyC,OAAQ/M,GAAOU,UACfyC,MAAOgzB,OAIbC,mBAAoB,SAA4B9rB,GAC9C,IAAIjH,EAAWiH,EAAMjH,SACjB1E,EAAQ2L,EAAM3L,MACd+2B,EAAc/2B,EAAMoL,oBAAoB1G,GACxC2D,EAAQrI,EAAMwI,OAAOH,MACzB,OAAI0uB,IAAgB32B,GAAiBC,KAAagI,EAAMoB,UACpDstB,IAAgB32B,GAAiBE,QAAgB+H,EAAM0B,aACpD1B,EAAM6B,aAEfwtB,eAAgB,SAAwB/rB,GACtC,IAAIjH,EAAWiH,EAAMjH,SACrB,GAAIgyB,EAAS3iB,IAAIrP,GAAW,OAAOgyB,EAAS1zB,IAAI0B,GAChD,IAAIizB,EAAS,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,WAC9IpH,EAAQoH,IAAShB,EAAagB,EAAOr7B,QAGzC,OAFAo6B,EAAS7wB,IAAInB,EAAU6rB,GACvBiG,GAAM,iBAAkB9xB,EAAU6rB,GAC3BA,GAETqH,oBAAqB,SAA6BjsB,GAChD,IAAI3L,EAAQ2L,EAAM3L,MACdd,EAAayM,EAAMzM,WACnB6e,EAAW/d,EAAMgH,eAAc,SAAUhH,GAC3CA,EAAMkG,OAAO2xB,SAASz4B,SAAQ,SAAUC,GACtCW,EAAMiH,MAAM,CAAC,SAAU5H,EAAK,SAAU,YAG1CH,EAAWa,OAAOge,KAKxB,SAAS+Z,KACP,MAAO,CA1MA,CAAC1K,KAAmB2I,KA39EpB,CACLgC,uBAAwB,SAAgCpsB,GACtD,OAAO,wBAAc,GAAkB,GAAQ,GAAIA,KAErDqsB,0BAA2B,SAAmCrsB,GAC5D,IAAIjH,EAAWiH,EAAMjH,SACjB1E,EAAQ2L,EAAM3L,MACdd,EAAayM,EAAMzM,WACnBwmB,EAAShhB,IAAa1E,EAAM+G,mBAEhC,SAASkxB,EAAYtzB,GACnB,OAAO,SAAU5H,GACf4H,EAAKyJ,QAAUlP,EAAWK,IAAI,YAAa,GAAQ,GAAQ,GAAIoM,GAAQ,CACrEyC,OAAQzJ,EAAKyJ,WAKnB,OAAO,GAAM9K,KAAI,SAAUqB,GACzB,OAAO+gB,IAAW/gB,EAAK0a,WAAa,KAAO,wBAAc,IAAU,CACjEhgB,IAAKsF,EAAKmX,MACVqD,KAAMnI,GAAKrS,EAAKwa,MAChBxQ,KAAMhK,EAAKmX,MACXoc,aAAc,wBAAc,MAAO,KAAMvzB,EAAKya,UAC9C6D,QAASgV,EAAYtzB,UAm8EkC6wB,KAAuBnV,MA9jG/E,CACL8X,cAAe,SAAuBx6B,GACpC,IAAIiiB,EAASjiB,EAAGiiB,OACZ5f,EAAQrC,EAAGqC,MACX0E,EAAW/G,EAAG+G,SACdqB,EAAQ/F,EAAM4E,SAASF,GACvB0zB,EAAgBryB,EAAM9B,QAAQa,KAC9BoB,EAASH,EAAM9B,QAAQc,UAE3B,OAAQ6a,GACN,KAAKlhB,EAAkBwnB,cACrB,MAAO,CACLD,EAAG/f,GAGP,KAAKxH,EAAkBynB,cACrB,MAAO,CACLH,EAAG9f,GAGP,KAAKxH,EAAkB4L,eACrB,MAAO,CACL0b,EAAG9f,EAAOmyB,MAAM31B,KAAK41B,KAAKF,EAAgB,GAAIA,GAC9CnS,EAAG/f,EAAOmyB,MAAM,EAAG31B,KAAK41B,KAAKF,EAAgB,KAGjD,KAAK15B,EAAkB0nB,cACrB,MAAO,CACLC,EAAGngB,KAIXqyB,gBAAiB,SAAyB5sB,GACxC,IAAI3L,EAAQ2L,EAAM3L,MACd0E,EAAWiH,EAAMjH,SACjBxF,EAAayM,EAAMzM,WACnBgH,EAASyF,EAAMzF,OACfwG,EAAUf,EAAMe,QAChB3G,EAAQ/F,EAAM4E,SAASF,GAC3B,GAAoB,IAAhBwB,EAAOpB,MAAciB,EAAM5B,SAAU,OAAO,KAChD,IAAIwhB,EAAY,GAUhB,OATAzf,EAAO9G,SAAQ,SAAUo5B,GACvB,IAAIC,EAAa,GAAQ,GAAQ,GAAI9sB,GAAQ,CAC3CjH,SAAU8zB,EACVn5B,IAAKm5B,EACL7rB,IAAKD,EAAQ0K,GAAkBohB,MAGjC7S,EAAUxoB,KAAK+B,EAAWK,IAAI,oBAAqBk5B,OAE9C,CACL9S,UAAWA,IAGf/F,OAAQ,SAAgBjU,GACtB,IAAI+H,EAAS/H,EAAM+H,OACf1T,EAAQ2L,EAAM3L,MACd0rB,EAAQhY,EAAO4D,GAAYtX,EAAM+G,qBACjC2xB,EAAYhlB,EAAOiE,GAAOI,qBAC1B4gB,EAAajlB,EAAOiE,GAAOK,iBAC/B0T,GAASA,EAAM9L,SACf8Y,GAAaA,EAAU9Y,SACvB+Y,GAAcA,EAAW/Y,SAIzB,SAASgZ,EAAY7yB,GACnB,IAAIrI,EAAKC,EAET,GAAIoI,EAAM1G,MAAQW,EAAM+G,mBAAoB,CAC1C,IAAI8xB,EAAcnlB,EAAO0D,GAAkBrR,EAAM1G,MACjDw5B,GAAeA,EAAYpN,cAG7B,IAAK1lB,EAAM5B,SACT,IACE,IAAK,IAAIH,EAAK,GAAS+B,EAAM9B,SAAUC,EAAKF,EAAG/G,QAASiH,EAAGhH,KAAMgH,EAAKF,EAAG/G,OAAQ,CAC/E,IAAI67B,EAAS50B,EAAG9G,MAChBw7B,EAAY54B,EAAM4E,SAASk0B,KAE7B,MAAO76B,GACPP,EAAM,CACJL,MAAOY,GAET,QACA,IACMiG,IAAOA,EAAGhH,OAASS,EAAKqG,EAAG9F,SAASP,EAAGpB,KAAKyH,GAChD,QACA,GAAItG,EAAK,MAAMA,EAAIL,QAxB3Bu7B,CADsB54B,EAAM4E,SAAS5E,EAAM+G,sBA+B7CuB,aAAc,SAAsBqD,GAClC,IAAIpD,EAAYoD,EAAMpD,UAClBvI,EAAQ2L,EAAM3L,MACD2L,EAAMzM,WACZa,OAAO,GAAcuI,aAAa,CAC3CtI,MAAOA,EACPuI,UAAWA,MAGfwwB,gBAAiB,SAAyBptB,GACxC,IAAIqtB,EAAUrtB,EAAMqtB,QAChB95B,EAAayM,EAAMzM,WACnBwU,EAAS/H,EAAM+H,OACf/K,EAAazJ,EAAWK,IAAI,gBAAiBoM,GAEjD,OAAOmP,GAAiBke,EADVtlB,EAAOiE,GAAOE,wBAAwBvG,QACV3I,IAE5CswB,4BAA6B,SAAqCttB,GAChE,IAAIqtB,EAAUrtB,EAAMqtB,QAChB95B,EAAayM,EAAMzM,WACnBwU,EAAS/H,EAAM+H,OACf/K,EAAazJ,EAAWK,IAAI,gBAAiBoM,GAEjD,OAAOmP,GAAiBke,EADVtlB,EAAOiE,GAAOE,wBAAwB1G,QACVxI,IAE5CuwB,8BAA+B,SAAuCvtB,GAIpE,OAAO0P,GAHO1P,EAAMqtB,SAENtlB,EADD/H,EAAM+H,QACEiE,GAAOE,wBAAwB1G,UAGtDgoB,iCAAkC,SAA0CxtB,GACzDA,EAAMzM,WACZK,IAAI,6BAA8B,GAAQ,CACnDF,IAAK,cACJsM,KAELytB,oCAAqC,SAA6CztB,GAC/DA,EAAMzM,WACZK,IAAI,gCAAiC,GAAQ,CACtDF,IAAK,cACJsM,KAELjD,cAAe,SAAuBiD,GACpC,IAAIzM,EAAayM,EAAMzM,WACnByJ,EAAagD,EAAMhD,WACvB,OAAOzJ,EAAWK,IAAI,eAAgB,CACpCF,IAAK,aACLjC,MAAOuL,KAGX0wB,cAAe,SAAuB1tB,GAEpC,OADiBA,EAAMzM,WACLK,IAAI,eAAgB,CACpCF,IAAK,gBArJO,GAwJhBi6B,kBAAmB,SAA2B3tB,GAC5C,IAAI+H,EAAS/H,EAAM+H,OACfhP,EAAWiH,EAAMjH,SACjB1E,EAAQ2L,EAAM3L,MAElB,GAAIA,EAAM+G,qBAAuBrC,GAAYQ,GAAgBlF,EAAO0E,EAAU1E,EAAM+G,sBAAwB/F,GAAkBE,WAC5H,MAAM,IAAI5C,MAAM,qCAAuCoG,EAAW,+CAGpE,IAAIqB,EAAQ2N,EAAO2D,GAAY3S,IAC3B60B,EAAa7lB,EAAOiE,GAAOE,wBAC3B1G,EAAUooB,EAAWpoB,QAEzB,IAAKpL,IAAUoL,EACb,MAAM,IAAI7S,MAAM,qDAGlB,IAAIoqB,EAASrN,GAAkBtV,EAAOoL,GAEtCooB,EAAWhnB,sBAAsBmW,EAAO,GAAIA,EAAO,KAErD8Q,0BAA2B,SAAmC7tB,GAC5D,IAAIzM,EAAayM,EAAMzM,WACnBwF,EAAWiH,EAAMjH,SACrBxF,EAAWK,IAAI,YAAa,GAAQ,GAAQ,GAAIoM,GAAQ,CACtDwS,QAAS,CAAC,CACR/P,OAAQ/M,GAAOQ,YACf6C,SAAUA,EACViB,UAAWhF,GAAUJ,QACpB,CACD6N,OAAQ/M,GAAOI,UACfiD,SAAUA,IAEZzE,SAAU,WACRf,EAAWK,IAAI,oBAAqB,GAAQ,GAAQ,GAAIoM,GAAQ,CAC9DjH,SAAUA,WA8kGmBwX,KAAmBua,KAAelhB,KAAekG,KAp2GjF,CACL7b,SAAU,SAAkB+L,EAAO1O,GACjC,IAAI4C,EAAU8L,EAAM9L,QAChBX,EAAayM,EAAMzM,WAEvB,OAAQW,GACN,KAAKsY,GAAQC,+BACX,OAAO,EAET,KAAKD,GAAQE,2BACX,OAAOnZ,EAAWK,IAAI,qBAAsBoM,GAE9C,KAAKwM,GAAQG,YACX,OAAOpZ,EAAWK,IAAI,gBAAiBoM,GAG3C,OAAO1O,MAo1G+G,MAGhH,IAAM,gBAAlB,IAEI,GAEJ,SAAU4F,GAGR,SAAS42B,IACP,IAAI5tB,EAAmB,OAAXhJ,GAAmBA,EAAOrG,MAAMb,KAAMU,YAAcV,KAchE,OAZAkQ,EAAM6tB,kBAAoB,aAAW,SAAU76B,EAAS86B,QACtC,IAAZ96B,IACFA,EAAU,IAGZ,IAAI+6B,EAAgBD,IACpB9tB,EAAM3M,WAAa,IAAI,EAAW,CAChCL,QAAS,CAACA,EAAS+6B,GACnBC,WAAW,EACX/6B,SAAU+M,EAAMF,MAAM7M,cAGnB+M,EAwCT,OAzDA,GAAU4tB,EAAS52B,GAoBnB42B,EAAQ59B,UAAU0xB,gBAAkB,WAClC,OAAO5xB,KAAKuD,WAAWK,IAAI,oBAG7Bk6B,EAAQ59B,UAAUi+B,aAAe,SAAU/b,GACzC,IAAIlS,EAAQlQ,KAERgQ,EAAQhQ,KAAK4xB,kBACbvtB,EAAQ2L,EAAM3L,MACdd,EAAayM,EAAMzM,WACvBA,EAAWK,IAAI,eAAgB,GAAQ,GAAQ,GAAIoM,GAAQ,CACzDjH,SAAU1E,EAAMoG,gBAElBlH,EAAWK,IAAI,YAAa,GAAQ,GAAQ,GAAIoM,GAAQ,CACtDyC,OAAQ/M,GAAOI,UACfiD,SAAUqZ,EAASnY,SACnB5F,MAAO+d,EACP9d,SAAU,WACR,IAAI0L,EAAQE,EAAM0hB,kBAEdvtB,EAAQ2L,EAAM3L,MAClBd,EAAWK,IAAI,oBAAqB,GAAQ,GAAQ,GAAIoM,GAAQ,CAC9DjH,SAAU1E,EAAM4F,iBAMxB6zB,EAAQ59B,UAAUyR,OAAS,WACzB,IAAIzO,EAAUlD,KAAKgQ,MAAM9M,QAKzB,OAJAlD,KAAK+9B,kBAAkB76B,EAASi5B,IAChCn8B,KAAK0xB,aAAe,GAAQ,GAAQ,GAAI1xB,KAAKgQ,OAAQ,CACnDzM,WAAYvD,KAAKuD,aAEZvD,KAAKuD,WAAWK,IAAI,gBAAiB5D,KAAK0xB,eAG5CoM,EA1DT,CA2DE,a,0CCpnIE,GAAiB,SAAuBx+B,EAAGC,GAW7C,OAVA,GAAiBC,OAAOC,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUL,EAAGC,GACjCD,EAAEI,UAAYH,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAIK,KAAKL,EACRA,EAAEM,eAAeD,KAAIN,EAAEM,GAAKL,EAAEK,MAIhBN,EAAGC,IAG3B,SAAS,GAAUD,EAAGC,GAGpB,SAASQ,IACPC,KAAKC,YAAcX,EAHrB,GAAeA,EAAGC,GAMlBD,EAAEY,UAAkB,OAANX,EAAaC,OAAOW,OAAOZ,IAAMQ,EAAGG,UAAYX,EAAEW,UAAW,IAAIH,GAGjF,IAAI,GAAU,WAaZ,OAZA,GAAUP,OAAOa,QAAU,SAAkBC,GAC3C,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,IAG9C,IAAK,IAAIZ,KAFTW,EAAIG,UAAUF,GAGRhB,OAAOU,UAAUL,eAAee,KAAKL,EAAGX,KAAIU,EAAEV,GAAKW,EAAEX,IAI7D,OAAOU,IAGMO,MAAMb,KAAMU,YAe7B,IA2GI,GA3GA,GAAM,IAAM,6BACZ09B,GAAc,IAAOruB,IAAI,KAAqB,GAblD,SAA8BJ,EAAQC,GASpC,OARIpQ,OAAO4H,eACT5H,OAAO4H,eAAeuI,EAAQ,MAAO,CACnClO,MAAOmO,IAGTD,EAAOC,IAAMA,EAGRD,EAI4D,CAAqB,CAAC,OAAQ,OAAQ,CAAC,OAAQ,UAAU,SAAUK,GACtI,OAAQA,EAAM5M,UAAY,mFA2GxB,GAEJ,SAAU8D,GAGR,SAAS0L,IACP,OAAkB,OAAX1L,GAAmBA,EAAOrG,MAAMb,KAAMU,YAAcV,KA+C7D,OAlDA,GAAU4S,EAAiB1L,GAM3B0L,EAAgB1S,UAAU+Q,UAAY,WACpC/J,EAAOhH,UAAU+Q,UAAUrQ,KAAKZ,MAEhC,IAAIgC,EAAKhC,KAAKgQ,MACVzM,EAAavB,EAAGuB,WAEhBG,EAAM,mBADK1B,EAAG+G,SAEdtH,EAAQzB,KAAKmQ,MAAM1H,QACvBlF,EAAWK,IAAI,eAAgB,CAC7BF,IAAKA,EACLjC,MAAOA,KAIXmR,EAAgB1S,UAAUsR,kBAAoB,WAC5C,IAAIxP,EAAKhC,KAAKgQ,MACV3L,EAAQrC,EAAGqC,MACX0E,EAAW/G,EAAG+G,SAKlB,MAAO,CACLb,MALU7D,EAAM4E,SAASF,GAAUhB,SAASlD,GAAUE,MAAMmD,MAM5D9E,SALaiB,EAAMwO,iBAAmB9J,EAMtC6I,cAJkB,GAKlBC,YAAa,2BAIjBe,EAAgB1S,UAAUiD,SAAW,SAAU1B,GAC7C,IAAIO,EAAKhC,KAAKgQ,MACVzM,EAAavB,EAAGuB,WAEhBG,EAAM,mBADK1B,EAAG+G,SAElBxF,EAAWK,IAAI,eAAgB,CAC7BF,IAAKA,EACLjC,MAAOA,IAETzB,KAAKkR,SAAS,CACZzI,QAAShH,KAINmR,EAnDT,CAxGA,SAAU1L,GAGR,SAASm3B,EAAeruB,GACtB,IAAIE,EAAQhJ,EAAOtG,KAAKZ,KAAMgQ,IAAUhQ,KAwBxC,OAtBAkQ,EAAME,YAAc,SAAUhP,GAC5BA,EAAEiP,mBAGJH,EAAMI,YAAc,SAAUlP,GAC5BA,EAAEiP,mBAGJH,EAAMY,QAAU,SAAUC,GACxB,OAAO,SAAUC,GACfD,EAAQC,GACRd,EAAMQ,KAAOM,IAIjBd,EAAMM,aAAe,SAAUC,IACXP,EAAMQ,KAAKC,SAASF,EAAMG,SAC9BV,EAAMW,eAAeJ,IAGrCP,EAAMe,YAECf,EAqET,OAhGA,GAAUmuB,EAAgBn3B,GA8B1Bm3B,EAAen+B,UAAU+Q,UAAY,WACnCjR,KAAKmQ,MAAQ,CACX1H,QAASzI,KAAKyR,eAIlB4sB,EAAen+B,UAAUuR,WAAa,WAEpC,OADYzR,KAAKwR,oBAAoBtJ,MACxBL,MAGfw2B,EAAen+B,UAAUiD,SAAW,SAAU1B,GAC5CzB,KAAKkR,SAAS,CACZzI,QAAShH,KAIb48B,EAAen+B,UAAUsR,kBAAoB,WAC3C,OAAO,MAGT6sB,EAAen+B,UAAUiR,kBAAoB,WAC3CC,SAASC,iBAAiB,QAASrR,KAAKwQ,eAG1C6tB,EAAen+B,UAAUoR,qBAAuB,WAC9CF,SAASG,oBAAoB,QAASvR,KAAKwQ,eAG7C6tB,EAAen+B,UAAU2Q,eAAiB,SAAUzP,KAEpDi9B,EAAen+B,UAAUyR,OAAS,WAChC,IAAI3P,EAAKhC,KAAKgQ,MACVjH,EAAW/G,EAAG+G,SACdgI,EAAU/O,EAAG+O,QAEb1I,EAAKrI,KAAKwR,oBACVpO,EAAWiF,EAAGjF,SACdwO,EAAgBvJ,EAAGuJ,cACnBC,EAAcxJ,EAAGwJ,YAErB,GAAI,YAAazO,GACjB,IAAIqF,EAAUrF,EAAWpD,KAAKyR,aAAezR,KAAKmQ,MAAM1H,QACxD,GAAe,MAAXA,EAAiB,OAAO,KAC5B,IAAI/E,EAAMkO,EAAc7I,GAGpBqH,EADKpQ,KACYoQ,YACjBE,EAFKtQ,KAEYsQ,YAEjBguB,EAAkB,CACpBC,YAAa91B,EACbrF,SAAUA,EACVD,SAAUnD,KAAKmD,SAASN,KAAK7C,MAC7B6R,YAAaA,GAEX2sB,EAAmB,CACrB96B,IAAKA,EACLsN,IAAKhR,KAAK8Q,QAAQC,EAAQrN,IAC1BN,SAAUA,EACVgN,YAAaA,EACbE,YAAaA,GAEf,OAAO,wBAAc8tB,GAAa,GAAQ,GAAII,GAAmB,wBAAc,KAAoB,GAAQ,GAAIF,MAG1GD,EAjGT,CAkGEzpB,KA4DE6pB,GAAqB,IAAI,KA6Bd,OA3Bf,WACE,MAAO,CACLtrB,sBAAuB,SAA+BnD,GACpD,OAAO,wBAAc,GAAiB,GAAQ,GAAIA,KAEpDoD,aAAc,SAAsBpD,EAAO1O,GACzC,IAAI4G,EAAQ8H,EAAM9H,MACd3E,EAAayM,EAAMzM,WAEvB,OAAI2E,EAAMN,OAAS/C,GAAUC,SAAWoD,EAAMN,OAAS/C,GAAUE,KAC1C,MAAdmD,EAAML,MAAgE,KAAhDtE,EAAWK,IAAI,qBAAsBoM,GAG7D1O,KAET+R,mBAAoB,SAA4BrD,EAAO1O,GACrD,IAAI4G,EAAQ8H,EAAM9H,MAElB,OAAIA,EAAMN,OAAS/C,GAAUE,KACE,kBAAfmD,EAAML,KAAoBK,EAAML,KAAO42B,GAAmBnrB,UAAUpL,EAAML,MAGnFvG,OCvPT,GAAU,WAaZ,OAZA,GAAU9B,OAAOa,QAAU,SAAkBC,GAC3C,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,IAG9C,IAAK,IAAIZ,KAFTW,EAAIG,UAAUF,GAGRhB,OAAOU,UAAUL,eAAee,KAAKL,EAAGX,KAAIU,EAAEV,GAAKW,EAAEX,IAI7D,OAAOU,IAGMO,MAAMb,KAAMU,YAGzB,GAAM,IAAM,0BCjChB,IAAIg+B,GAAyB,CAC3BxxB,KAAM,UACNC,aAAa,EACbC,WAAY,gBACZC,eAAgB,UAChBC,QAAS,GACTC,QAAS,GACTC,aAAc,CACZC,WAAY,MACZM,SAAU,QAEZL,UAAW,CACTC,WAAY,EACZC,SAAU,QACVC,UAAW,OAEbC,UAAW,CACTN,aAAc,CACZO,SAAU,QAEZG,aAAc,CACZN,SAAU,QACVC,UAAW,QAGfO,aAAc,CACZZ,aAAc,CACZO,SAAU,QAEZG,aAAc,CACZN,SAAU,QACVC,UAAW,QAGfU,YAAa,CACXL,aAAc,CACZN,SAAU,QACVC,UAAW,SAIb8wB,GAAS,CACXzxB,KAAM,SACNC,aAAa,EACbC,WAAY,mBACZC,eAAgB,UAChBC,QAAS,GACTC,QAAS,GACTC,aAAc,CACZC,WAAY,OAEdC,UAAW,CACTC,WAAY,GAEdG,UAAW,CACTN,aAAc,CACZJ,WAAY,oBACZwnB,MAAO,OACP7mB,SAAU,OACVC,aAAc,MACdC,QAAS,uBAEXC,aAAc,CACZN,SAAU,QACVC,UAAW,MACXM,UAAW,sBAGfC,aAAc,CACZZ,aAAc,CACZJ,WAAY,UACZiB,YAAa,MACbC,YAAa,QACbgoB,YAAa,oBACbtoB,aAAc,MACdD,SAAU,OACVE,QAAS,uBAEXC,aAAc,CACZN,SAAU,QACVC,UAAW,MACXM,UAAW,sBAGfI,YAAa,CACXf,aAAc,CACZJ,WAAY,OACZoB,OAAQ,oBACRR,aAAc,OACd4mB,MAAO,oBACP7mB,SAAU,OACVE,QAAS,YAEXC,aAAc,CACZN,SAAU,QACVD,WAAY,EACZE,UAAW,MACXM,UAAW,uBAIbywB,GAAS,CACX1xB,KAAM,SACNC,aAAa,EACbC,WAAY,UACZC,eAAgB,UAChBC,QAAS,GACTC,QAAS,GACTC,aAAc,CACZC,WAAY,OAEdC,UAAW,CACTC,WAAY,GAEdG,UAAW,CACTN,aAAc,CACZJ,WAAY,UACZwnB,MAAO,OACP7mB,SAAU,OACVC,aAAc,MACdC,QAAS,uBAEXC,aAAc,CACZN,SAAU,QACVC,UAAW,MACXM,UAAW,YAGfC,aAAc,CACZZ,aAAc,CACZJ,WAAY,UACZiB,YAAa,MACbC,YAAa,QACbgoB,YAAa,oBACbtoB,aAAc,MACd4mB,MAAO,mBACP7mB,SAAU,OACVE,QAAS,qBAEXC,aAAc,CACZN,SAAU,QACVD,WAAY,EACZE,UAAW,MACXM,UAAW,YAGfI,YAAa,CACXf,aAAc,CACZJ,WAAY,OACZY,aAAc,MACd4mB,MAAO,mBACP7mB,SAAU,OACVE,QAAS,cACT4wB,UAAW,oBAEb3wB,aAAc,CACZN,SAAU,QACVD,WAAY,EACZE,UAAW,MACXM,UAAW,aAIb2wB,GAAS,CACX5xB,KAAM,SACNC,aAAa,EACbC,WAAY,UACZC,eAAgB,UAChBC,QAAS,GACTC,QAAS,GACTC,aAAc,CACZC,WAAY,OAEdC,UAAW,CACTC,WAAY,GAEdG,UAAW,CACTN,aAAc,CACZJ,WAAY,UACZwnB,MAAO,OACP7mB,SAAU,OACVC,aAAc,MACdC,QAAS,uBAEXC,aAAc,CACZN,SAAU,QACVC,UAAW,MACXM,UAAW,YAGfC,aAAc,CACZZ,aAAc,CACZJ,WAAY,UACZiB,YAAa,MACbC,YAAa,QACbgoB,YAAa,UACbtoB,aAAc,MACd4mB,MAAO,mBACP7mB,SAAU,OACVE,QAAS,qBAEXC,aAAc,CACZN,SAAU,QACVC,UAAW,MACXM,UAAW,YAGfI,YAAa,CACXf,aAAc,CACZJ,WAAY,UACZY,aAAc,MACd4mB,MAAO,mBACP7mB,SAAU,OACVE,QAAS,cACT4wB,UAAW,oBAEb3wB,aAAc,CACZN,SAAU,QACVD,WAAY,EACZE,UAAW,MACXM,UAAW,aAIb4wB,GAAS,CACX7xB,KAAM,SACNC,aAAa,EACbC,WAAY,UACZC,eAAgB,UAChBC,QAAS,GACTC,QAAS,GACTC,aAAc,CACZC,WAAY,OAEdC,UAAW,CACTC,WAAY,GAEdG,UAAW,CACTN,aAAc,CACZJ,WAAY,UACZwnB,MAAO,OACP7mB,SAAU,OACVC,aAAc,MACdC,QAAS,uBAEXC,aAAc,CACZN,SAAU,QACVC,UAAW,MACXM,UAAW,YAGfC,aAAc,CACZZ,aAAc,CACZJ,WAAY,UACZiB,YAAa,MACbC,YAAa,QACbgoB,YAAa,UACbtoB,aAAc,MACd4mB,MAAO,mBACP7mB,SAAU,OACVE,QAAS,qBAEXC,aAAc,CACZN,SAAU,OACVC,UAAW,MACXM,UAAW,YAGfI,YAAa,CACXf,aAAc,CACZJ,WAAY,UACZY,aAAc,MACd4mB,MAAO,mBACP7mB,SAAU,OACVE,QAAS,cACT4wB,UAAW,oBAEb3wB,aAAc,CACZN,SAAU,OACVD,WAAY,EACZE,UAAW,MACXM,UAAW,a,gFC7Pb,GAAiB,SAAuB7O,EAAGC,GAW7C,OAVA,GAAiBC,OAAOC,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUL,EAAGC,GACjCD,EAAEI,UAAYH,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAIK,KAAKL,EACRA,EAAEM,eAAeD,KAAIN,EAAEM,GAAKL,EAAEK,MAIhBN,EAAGC,IAG3B,SAAS,GAAUD,EAAGC,GAGpB,SAASQ,IACPC,KAAKC,YAAcX,EAHrB,GAAeA,EAAGC,GAMlBD,EAAEY,UAAkB,OAANX,EAAaC,OAAOW,OAAOZ,IAAMQ,EAAGG,UAAYX,EAAEW,UAAW,IAAIH,GAGjF,IAAI,GAAU,WAaZ,OAZA,GAAUP,OAAOa,QAAU,SAAkBC,GAC3C,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,IAG9C,IAAK,IAAIZ,KAFTW,EAAIG,UAAUF,GAGRhB,OAAOU,UAAUL,eAAee,KAAKL,EAAGX,KAAIU,EAAEV,GAAKW,EAAEX,IAI7D,OAAOU,IAGMO,MAAMb,KAAMU,YAG7B,SAAS,GAAqBiP,EAAQC,GASpC,OARIpQ,OAAO4H,eACT5H,OAAO4H,eAAeuI,EAAQ,MAAO,CACnClO,MAAOmO,IAGTD,EAAOC,IAAMA,EAGRD,EAGT,IAAIqvB,GAA8B,8BAC9BC,GAAiC,iCACjCC,GAAsB,WACtBC,GAA2B,mBAC3BC,GAAgC,wBAEpC,SAASC,GAAmBrvB,GAC1B,IAAIzM,EAAayM,EAAMzM,WACnBc,EAAQ2L,EAAM3L,MACd0E,EAAWiH,EAAMjH,SASjBykB,EAAYnpB,EAAM4F,WAAalB,GAAY1E,EAAM2F,YAAcg1B,GAC/D92B,EAAQ7D,EAAM4E,SAASF,GAAUhB,SAASm3B,IAAqBh3B,MACnE,IAAKslB,IAActlB,EAAO,OAAO,KACjC,IAAIo3B,EAAY,CACd/jB,UAAWH,GAAc,YACzBkM,QAZY,SAAiBlmB,GAC7BA,EAAEiP,kBACF9M,EAAWK,IAAI,YAAa,GAAQ,GAAQ,GAAIoM,GAAQ,CACtDyC,OAAQwsB,OAUVjR,UAAW,GAEb,OAAO,wBAAczU,GAAgB,GAAQ,GAAI+lB,IAGnD,IAqxBI,GAAkB,GAAkB,GAAkB,GAAkB,GA8FxE,GAAoB,GAAoB,GAoDxC,GAAoB,GAv6BpBC,GAAc,CAAC,CACjBC,MAAO,QACP5nB,SAAU,CAAC,CACT1K,KAAM,YACNsW,KAAM,YACN3b,KAAM,CACJmL,KAAM,WACN2L,KAAM,CACJrJ,MAAO,IACPG,OAAQ,KAEVgqB,YAAa,GACbC,aAAc,GACdC,WAAY,GACZC,cAAe,GACf1yB,KAAM,YACNsW,KAAM,SACNqc,WAAY,WACZC,UAAW,YAEZ,CACD5yB,KAAM,YACNsW,KAAM,iBACN3b,KAAM,CACJmL,KAAM,YACN2L,KAAM,CACJrJ,MAAO,IACPG,OAAQ,IAEVgqB,YAAa,GACbC,aAAc,GACdC,WAAY,GACZC,cAAe,GACf5xB,aAAc,GACdd,KAAM,cAEP,CACDA,KAAM,SACNsW,KAAM,cACN3b,KAAM,CACJmL,KAAM,SACN2L,KAAM,CACJrJ,MAAO,IACPG,OAAQ,KAEVvI,KAAM,SACN6yB,YAAa,IAEd,CACD7yB,KAAM,WACNsW,KAAM,gBACN3b,KAAM,CACJmL,KAAM,WACN2L,KAAM,CACJrJ,MAAO,IACPG,OAAQ,KAEVvI,KAAM,aAEP,CACDA,KAAM,UACNsW,KAAM,eACN3b,KAAM,CACJmL,KAAM,UACN2L,KAAM,CACJrJ,MAAO,IACPG,OAAQ,KAEVvI,KAAM,YAEP,CACDA,KAAM,WACNsW,KAAM,gBACN3b,KAAM,CACJmL,KAAM,WACN2L,KAAM,CACJrJ,MAAO,IACPG,OAAQ,KAEVvI,KAAM,aAEP,CACDA,KAAM,UACNsW,KAAM,eACN3b,KAAM,CACJmL,KAAM,UACN2L,KAAM,CACJrJ,MAAO,IACPG,OAAQ,KAEVkqB,WAAY,GACZC,cAAe,GACf1yB,KAAM,YAEP,CACDA,KAAM,YACNsW,KAAM,iBACN3b,KAAM,CACJmL,KAAM,YACN2L,KAAM,CACJrJ,MAAO,IACPG,OAAQ,KAEVvI,KAAM,cAEP,CACDA,KAAM,aACNsW,KAAM,kBACN3b,KAAM,CACJmL,KAAM,GACN2L,KAAM,CACJrJ,MAAO,IACPG,OAAQ,KAEVvI,KAAM,cAEP,CACDA,KAAM,cACNsW,KAAM,mBACN3b,KAAM,CACJmL,KAAM,GACN2L,KAAM,CACJrJ,MAAO,IACPG,OAAQ,KAEVvI,KAAM,eAEP,CACDA,KAAM,sBACNsW,KAAM,oBACN3b,KAAM,CACJmL,KAAM,GACN2L,KAAM,CACJrJ,MAAO,IACPG,OAAQ,KAEVvI,KAAM,gBAEP,CACDA,KAAM,OACNsW,KAAM,YACN3b,KAAM,CACJmL,KAAM,OACN2L,KAAM,CACJrJ,MAAO,IACPG,OAAQ,KAEVvI,KAAM,SAEP,CACDA,KAAM,QACNsW,KAAM,aACN3b,KAAM,CACJmL,KAAM,QACN2L,KAAM,CACJrJ,MAAO,IACPG,OAAQ,KAEVvI,KAAM,UAEP,CACDA,KAAM,UACNsW,KAAM,WACN3b,KAAM,CACJmL,KAAM,UACN2L,KAAM,CACJrJ,MAAO,IACPG,OAAQ,KAEVgqB,YAAa,GACbC,aAAc,GACdC,WAAY,GACZC,cAAe,GACf1yB,KAAM,YAEP,CACDA,KAAM,OACNsW,KAAM,YACN3b,KAAM,CACJmL,KAAM,OACN2L,KAAM,CACJrJ,MAAO,GACPG,OAAQ,KAEVgqB,YAAa,GACbC,aAAc,GACdC,WAAY,GACZC,cAAe,GACf1yB,KAAM,SAEP,CACDA,KAAM,OACNsW,KAAM,YACN3b,KAAM,CACJmL,KAAM,OACN2L,KAAM,CACJrJ,MAAO,IACPG,OAAQ,IAEVvI,KAAM,SAEP,CACDA,KAAM,QACNsW,KAAM,aACN3b,KAAM,CACJmL,KAAM,GACN2L,KAAM,CACJrJ,MAAO,IACPG,OAAQ,KAEVvI,KAAM,QACN8yB,MAAO,yBAER,CACD9yB,KAAM,OACNsW,KAAM,YACN3b,KAAM,CACJ8W,KAAM,CACJrJ,MAAO,GACPG,OAAQ,IAEVwqB,MAAM,EACN9Q,EAAG,GACH+Q,QAAS,GACTC,UAAW,OACXjzB,KAAM,OACNsW,KAAM,SACNqc,WAAY,WACZC,UAAW,OACXM,SAAU,KAEX,CACDlzB,KAAM,SACNsW,KAAM,cACN3b,KAAM,CACJ8W,KAAM,CACJrJ,MAAO,GACPG,OAAQ,KAEVvI,KAAM,WAEP,CACDA,KAAM,cACNsW,KAAM,UACN3b,KAAM,CACJmL,KAAM,cACN2L,KAAM,CACJrJ,MAAO,IACPG,OAAQ,KAEVgqB,YAAa,GACbC,aAAc,GACdC,WAAY,GACZC,cAAe,GAEf1yB,KAAM,UAGT,CACDsyB,MAAO,aACP5nB,SAAU,CAAC,CACT1K,KAAM,YACNsW,KAAM,kBACN3b,KAAM,CACJmL,KAAM,QACN2L,KAAM,CACJrJ,MAAO,IACPG,OAAQ,IAEVzH,aAAc,GACdd,KAAM,cAEP,CACDA,KAAM,OACNsW,KAAM,iBACN3b,KAAM,CACJmL,KAAM,OACN2L,KAAM,CACJrJ,MAAO,IACPG,OAAQ,IAEVvI,KAAM,cAEP,CACDA,KAAM,YACNsW,KAAM,eACN3b,KAAM,CACJmL,KAAM,YACN2L,KAAM,CACJrJ,MAAO,IACPG,OAAQ,IAEVvI,KAAM,YAEP,CACDA,KAAM,OACNsW,KAAM,iBACN3b,KAAM,CACJmL,KAAM,OACN2L,KAAM,CACJrJ,MAAO,IACPG,OAAQ,IAEVvI,KAAM,aAEP,CACDA,KAAM,UACNsW,KAAM,kBACN3b,KAAM,CACJmL,KAAM,UACN2L,KAAM,CACJrJ,MAAO,IACPG,OAAQ,IAEVvI,KAAM,YAEP,CACDA,KAAM,WACNsW,KAAM,uBACN3b,KAAM,CACJmL,KAAM,WACN2L,KAAM,CACJrJ,MAAO,IACPG,OAAQ,IAEVvI,KAAM,mBAEP,CACDA,KAAM,WACNsW,KAAM,UACN3b,KAAM,CACJmL,KAAM,WACN2L,KAAM,CACJrJ,MAAO,GACPG,OAAQ,KAEVvI,KAAM,WAEP,CACDA,KAAM,WACNsW,KAAM,qBACN3b,KAAM,CACJmL,KAAM,WACN2L,KAAM,CACJrJ,MAAO,IACPG,OAAQ,KAEVvI,KAAM,iBAEP,CACDA,KAAM,mBACNsW,KAAM,wBACN3b,KAAM,CACJmL,KAAM,mBACN2L,KAAM,CACJrJ,MAAO,IACPG,OAAQ,IAEVvI,KAAM,wBAEP,CACDA,KAAM,mBACNsW,KAAM,sBACN3b,KAAM,CACJmL,KAAM,mBACN2L,KAAM,CACJrJ,MAAO,IACPG,OAAQ,IAEVvI,KAAM,sBAEP,CACDA,KAAM,QACNsW,KAAM,kBACN3b,KAAM,CACJmL,KAAM,QACN2L,KAAM,CACJrJ,MAAO,IACPG,OAAQ,KAEVvI,KAAM,cAEP,CACDA,KAAM,iBACNsW,KAAM,qBACN3b,KAAM,CACJmL,KAAM,iBACN2L,KAAM,CACJrJ,MAAO,IACPG,OAAQ,IAEVvI,KAAM,iBAEP,CACDA,KAAM,UACNsW,KAAM,oBACN3b,KAAM,CACJmL,KAAM,UACN2L,KAAM,CACJrJ,MAAO,IACPG,OAAQ,IAEVvI,KAAM,gBAEP,CACDA,KAAM,WACNsW,KAAM,qBACN3b,KAAM,CACJmL,KAAM,WACN2L,KAAM,CACJrJ,MAAO,IACPG,OAAQ,IAEVvI,KAAM,iBAEP,CACDA,KAAM,UACNsW,KAAM,oBACN3b,KAAM,CACJmL,KAAM,UACN2L,KAAM,CACJrJ,MAAO,IACPG,OAAQ,KAEVvI,KAAM,kBAGT,CACDsyB,MAAO,mBACP5nB,SAAU,CAAC,CACT1K,KAAM,QACNsW,KAAM,cACN3b,KAAM,CACJmL,KAAM,GACN2L,KAAM,CACJrJ,MAAO,GACPG,OAAQ,IAEVvI,KAAM,SACNizB,UAAW,OACXE,YAAa,gBAEd,CACDnzB,KAAM,MACNsW,KAAM,aACN3b,KAAM,CACJmL,KAAM,GACN2L,KAAM,CACJrJ,MAAO,GACPG,OAAQ,IAEVvI,KAAM,kBAEP,CACDA,KAAM,SACNsW,KAAM,cACN3b,KAAM,CACJmL,KAAM,SACN2L,KAAM,CACJrJ,MAAO,IACPG,OAAQ,IAEVzH,aAAc,IACdd,KAAM,cAEP,CACDA,KAAM,iBACNsW,KAAM,eACN3b,KAAM,CACJmL,KAAM,eACN2L,KAAM,CACJrJ,MAAO,IACPG,OAAQ,IAEVvI,KAAM,YAEP,CACDA,KAAM,yBACNsW,KAAM,kBACN3b,KAAM,CACJmL,KAAM,yBACN2L,KAAM,CACJrJ,MAAO,IACPG,OAAQ,KAEVvI,KAAM,cAEP,CACDA,KAAM,2BACNsW,KAAM,kBACN3b,KAAM,CACJmL,KAAM,2BACN2L,KAAM,CACJrJ,MAAO,IACPG,OAAQ,KAEVvI,KAAM,cAEP,CACDA,KAAM,sBACNsW,KAAM,cACN3b,KAAM,CACJmL,KAAM,GACN2L,KAAM,CACJrJ,MAAO,GACPG,OAAQ,KAEVvI,KAAM,QACNizB,UAAW,OACXE,YAAa,gBAEd,CACDnzB,KAAM,wBACNsW,KAAM,YACN3b,KAAM,CACJmL,KAAM,GACN2L,KAAM,CACJrJ,MAAO,IACPG,OAAQ,IAEVvI,KAAM,QACNizB,UAAW,OACXE,YAAa,kBAGhB,CACDb,MAAO,oCACP5nB,SAAU,CAAC,CACT1K,KAAM,WACNsW,KAAM,gBACN3b,KAAM,CACJmL,KAAM,WACN2L,KAAM,CACJrJ,MAAO,IACPG,OAAQ,KAEVvI,KAAM,aAEP,CACDA,KAAM,aACNsW,KAAM,aACN3b,KAAM,CACJmL,KAAM,GACN2L,KAAM,CACJrJ,MAAO,GACPG,OAAQ,KAEVvI,KAAM,kBAEP,CACDA,KAAM,eACNsW,KAAM,oBACN3b,KAAM,CACJmL,KAAM,WACN2L,KAAM,CACJrJ,MAAO,IACPG,OAAQ,KAEVkqB,WAAY,GACZW,KAAM,CACJC,WAAY,QACZ3L,MAAO,OACP4L,WAAY,QAEdL,UAAW,UACXE,YAAa,UACbnzB,KAAM,cACN0K,SAAU,CAAC,CACT5E,KAAM,gDACN9F,KAAM,OACNuyB,YAAa,GACbC,aAAc,GACdC,WAAY,GACZC,cAAe,GACfa,aAAc,CACZ1hB,EAAG,EACHE,EAAG,EACH3J,MAAO,OACPG,OAAQ,OACRirB,OAAQ,GAEVJ,KAAM,CACJC,WAAY,QACZ3L,MAAO,OACP+L,UAAW,OACXC,aAAc,WAInB,CACD1zB,KAAM,QACNsW,KAAM,aACN3b,KAAM,CACJmL,KAAM,WACN2L,KAAM,CACJrJ,MAAO,IACPG,OAAQ,KAEVkqB,WAAY,GACZW,KAAM,CACJC,WAAY,QACZ3L,MAAO,OACP4L,WAAY,QAEdL,UAAW,UACXE,YAAa,UACbnzB,KAAM,iBACN0K,SAAU,CAAC,CACT5E,KAAM,iBACN9F,KAAM,OACNuyB,YAAa,GACbC,aAAc,GACdC,WAAY,GACZC,cAAe,GACfa,aAAc,CACZ1hB,EAAG,EACHE,EAAG,EACH3J,MAAO,OACPG,OAAQ,MACRirB,OAAQ,GAEVJ,KAAM,CACJC,WAAY,QACZ3L,MAAO,OACP+L,UAAW,OACXC,aAAc,QAEf,CACD5tB,KAAM,gCACN9F,KAAM,OACNuyB,YAAa,GACbC,aAAc,GACdC,WAAY,GACZC,cAAe,GACfa,aAAc,CACZ1hB,EAAG,EACHE,EAAG,MACH3J,MAAO,OACPG,OAAQ,MACRirB,OAAQ,GAEVJ,KAAM,CACJC,WAAY,QACZ3L,MAAO,OACP+L,UAAW,OACXC,aAAc,cAMpBC,GAAO,IAAO9wB,IAAI,KAAqB,GAAmB,GAAqB,CAAC,gFAAiF,CAAC,mFAClK+wB,GAAS,IAAO/wB,IAAI,KAAqB,GAAmB,GAAqB,CAAC,oGAAqG,CAAC,uGACxLgxB,GAAQ,IAAOhxB,IAAI,KAAqB,GAAmB,GAAqB,CAAC,mIAAoI,CAAC,sIACtNixB,GAAY,IAAOjxB,IAAI,KAAqB,GAAmB,GAAqB,CAAC,4MAA6M,CAAC,+MACnSkxB,GAAiB,IAAOlxB,IAAI,KAAqB,GAAmB,GAAqB,CAAC,gRAAiR,CAAC,mRAE5W,GAEJ,SAAU7I,GAGR,SAASg6B,IACP,IAAIhxB,EAAmB,OAAXhJ,GAAmBA,EAAOrG,MAAMb,KAAMU,YAAcV,KAiChE,OA/BAkQ,EAAMC,MAAQ,CACZ2jB,GAAI,GACJjsB,KAAM,KACNs5B,YAAa5B,GACbzU,SAAU,CACR/c,SAAU,YAGdmC,EAAMkxB,cAAgB,GAEtBlxB,EAAMuH,kBAAoB,SAAUrW,GAClCA,EAAE+U,iBACF/U,EAAEiP,mBAGJH,EAAMmxB,UAAY,SAAU5wB,EAAO5I,GACjC,IACIy5B,GAAcvpB,EADL7H,EAAMF,MAAM+H,QACAqnB,IAEzB,OAAQ3uB,GACN,IAAK,SACL,IAAK,QACL,IAAK,SACCP,EAAMqxB,UAAYD,GACpBA,EAAYE,cAActxB,EAAMqxB,SAAS15B,QAO1CqI,EA0FT,OA9HA,GAAUgxB,EAAiBh6B,GAuC3Bg6B,EAAgBhhC,UAAUuhC,eAAiB,WACzC,wBAAa,WAAY,YAAU,mBAAiB,oBAAkB,qBACtE,wBAAa,iBAAkB,kBAAgB,KAAM,0BAAwB,2BAC7E,wBAAa,SAAU,UAAQ,KAAM,kBAAgB,mBACrD,wBAAa,eAAgB,gBAAc,uBAAqB,wBAAsB,yBACtF,wBAAa,sBAAuB,uBAAqB,KAAM,+BAA6B,gCAC5F,wBAAa,oBAAqB,qBAAmB,4BAA0B,6BAA2B,8BAC1G,wBAAa,YAAa,aAAW,KAAM,qBAAmB,sBAC9D,wBAAa,eAAgB,gBAAc,uBAAqB,wBAAsB,yBACtF,wBAAa,cAAe,eAAa,sBAAoB,uBAAqB,wBAClF,wBAAa,eAAgB,gBAAc,uBAAqB,KAAM,MACtE,wBAAa,cAAe,eAAa,sBAAoB,KAAM,MAEnE,wBAAa,gBAAiB,iBAAe,KAAM,yBAAuB,0BAC1E,wBAAa,YAAa,aAAW,KAAM,qBAAmB,sBAC9D,wBAAa,YAAa,aAAW,KAAM,qBAAmB,sBAC9D,wBAAa,QAAS,QAAM,gBAAc,gBAAc,iBACxD,wBAAa,QAAS,QAAM,gBAAc,gBAAc,iBAExD,wBAAa,cAAe,eAAa,KAAM,uBAAqB,wBACpE,wBAAa,iBAAkB,kBAAgB,KAAM,0BAAwB,2BAE7E,wBAAa,WAAY,YAAU,mBAAiB,oBAAkB,qBACtE,wBAAa,gBAAiB,iBAAe,wBAAsB,yBAAuB,2BAG5FP,EAAgBhhC,UAAUiR,kBAAoB,WAC5CnR,KAAKyhC,iBACLzhC,KAAKohC,cAAcM,GAAK1hC,KAAKqhC,UAC7BrhC,KAAKuhC,SAAW,IAAI,YAAS,kBAAmBvhC,KAAKohC,eACrDphC,KAAK2hC,YAGPT,EAAgBhhC,UAAUooB,mBAAqB,WAC7CtoB,KAAK2hC,YAGPT,EAAgBhhC,UAAUyhC,SAAW,WACnC,IAAI3/B,EAAKhC,KAAKgQ,MACV3L,EAAQrC,EAAGqC,MACX0E,EAAW/G,EAAG+G,SAEdb,EADQ7D,EAAM4E,SAASF,GACThB,SAASm3B,IAAqBh3B,MAE5CA,GAASA,EAAML,MAAuB,KAAfK,EAAML,OAC/B7H,KAAKkR,SAAS,CACZrJ,KAAMK,EAAML,OAEd7H,KAAKuhC,SAASK,KAAK15B,EAAML,QAI7Bq5B,EAAgBhhC,UAAU2hC,OAAS,SAAUpxB,EAAOuH,GAClDvH,EAAMqxB,aAAaC,QAAQ,OAAQpK,KAAKC,UAAU5f,EAAKnQ,QAGzDq5B,EAAgBhhC,UAAU8hC,YAAc,WACtC,IAAI9xB,EAAQlQ,KAEZ,OAAO,wBAAc+gC,GAAO,KAAM/gC,KAAKmQ,MAAMgxB,YAAYx5B,KAAI,SAAUqB,EAAMvG,GAC3E,OAAO,wBAAc,MAAO,CAC1BiB,IAAKjB,GACJ,wBAAcu+B,GAAW,KAAMh4B,EAAKw2B,OAAQ,wBAAcyB,GAAgB,KAE7Ej4B,EAAK4O,SAASjQ,KAAI,SAAUs6B,EAAKzhC,GAC/B,OAAO,wBAAc,IAAK,CACxBkD,IAAKlD,EACLsmB,MAAOmb,EAAI/0B,KACX8f,WAAW,EACXb,YAAa,SAAqBnH,GAChC9U,EAAM2xB,OAAO7c,EAAIid,KAElB,wBAAc,IAAK,CACpB1mB,UAAW,YAAc0mB,EAAIze,KAC7B3a,MAAOqH,EAAMC,MAAM2a,sBAM3BoW,EAAgBhhC,UAAUyR,OAAS,WACjC,OAAO,wBAAckvB,GAAM,KAAM7gC,KAAKgiC,cAAe,wBAAclB,GAAQ,CACzEhN,GAAI,kBACJoO,cAAeliC,KAAKyX,sBAIjBypB,EA/HT,CAgIEtsB,IAGEutB,GAAS,IAAOpyB,IAAI,KAAuB,GAAqB,GAAqB,CAAC,0LAA2L,CAAC,6LAClR,GAAQ,YAAOoJ,GAAP,CAAY,KAAuB,GAAqB,GAAqB,CAAC,uBAAwB,CAAC,0BAE/G,GAAO,SAAcnJ,GACvB,OAAO,wBAAc,IAAS,CAC5BvH,QAASuH,EAAMqgB,QACfrJ,SAAU,IAASsJ,IACnB/U,UAAW,IAAQgV,MAClB,wBAAc,GAAO,CACtBjJ,QAAStX,EAAMsX,SACdtX,EAAM4H,YAGP,GAAiB,IAAO4B,KAAK,KAAuB,GAAqB,GAAqB,CAAC,iEAAkE,CAAC,oEAElK,GAEJ,SAAUtS,GAGR,SAASk7B,EAAqBpyB,GAC5B,IAAIE,EAAQhJ,EAAOtG,KAAKZ,KAAMgQ,IAAUhQ,KAkBxC,OAhBAkQ,EAAMsxB,cAAgB,SAAUa,GAC9BnyB,EAAMgB,SAAS,CACbmxB,WAAYA,KAIhBnyB,EAAMwgB,iBAAmB,SAAUtvB,GAClB8O,EAAMoyB,cAEZC,QAAQ,IAGnBryB,EAAMC,MAAQ,CACZqyB,eAAe,EACfH,WAAY,MAEPnyB,EAmDT,OAxEA,GAAUkyB,EAAsBl7B,GAwBhCk7B,EAAqBliC,UAAUoiC,YAAc,WAE3C,OAAOvqB,EADM/X,KAAKgQ,MAAM+H,QACVonB,IAA0BoC,UAG1Ca,EAAqBliC,UAAUyR,OAAS,WACtC,IAAIzB,EAAQlQ,KAERgQ,EAAQhQ,KAAKgQ,MACbzM,EAAayM,EAAMzM,WAQnBk/B,EAAmB,CACrB5Z,OAAQ7oB,KAAKmQ,MAAMqyB,cACnBE,iBAAkB,SAClBC,UAAW,SAAmBvhC,GAC5BmC,EAAWK,IAAI,YAAa,GAAQ,GAAQ,GAAIoM,GAAQ,CACtDyC,OAAQ/M,GAAOa,mBACf6F,UAAW8yB,OAGf0D,SAAU,SAAkBxhC,GAC1B8O,EAAMgB,SAAS,CACbsxB,eAAe,KAGnB5Z,QAAS,SAAiBxnB,GACxB8O,EAAMgB,SAAS,CACbsxB,eAAe,MAIjBH,EAAariC,KAAKmQ,MAAMkyB,WACxB/iB,EAAQ+iB,EAAaA,EAAW/iB,MAAQ,EAC5C,OAAO,wBAAc6iB,GAAQ,KAAM,wBAAc,GAAM,CACrD7a,QAAStnB,KAAK0wB,iBACdL,QAAS,cACR,wBAAc,GAAgB,KAAM,QAAUtpB,KAAKiqB,MAAc,IAAR1R,GAAe,MAAO,wBAAc,GAAM,CACpGgI,QAhCkB,SAAuBlmB,GACzC8O,EAAMgB,SAAS,CACbsxB,eAAe,KA+BjBnS,QAAS,uBACRhV,GAAKd,GAASQ,QAAS,wBAAc,IAAO,GAAQ,GAAI0nB,GAAmB,wBAAc,IAAK,KAAM,uDAGlGL,EAzET,CA0EE,aAGES,GAAiB,IAAO9yB,IAAI,KAAuB,GAAqB,GAAqB,CAAC,wHAAyH,CAAC,2HACxN,GAAQ,IAAOyJ,KAAK,KAAuB,GAAqB,GAAqB,CAAC,4BAA6B,CAAC,+BAExH,SAASspB,GAAe9yB,GACtB,IAAIzM,EAAayM,EAAMzM,WACnBwF,EAAWiH,EAAMjH,SACjBgP,EAAS/H,EAAM+H,OACfhH,EAAUf,EAAMe,QAiBhB2gB,EAAe,GAAQ,GAAQ,GAAI1hB,GAAQ,CAC7CgB,IAAKD,EAAQouB,MAGX4D,EAAY,GAAQ,GAAQ,GAAI/yB,GAAQ,CAC1CgB,IAAKD,EAAQquB,MAGf,OAAO,wBAAc,IAAQ,CAC3BtY,MAAO,wBAAc,GAAO,KAAM,2BAClCtD,KAAMnI,GAAK,YACXwN,QAAQ,EACRqI,aAAa,EACb8R,kBAAmB,WACnB7R,cAAe,CACb/gB,YAAawM,IAEfqmB,sBAAsB,EACtB7R,oBAAoB,EACpBxI,QAlCmB,SAAwBxnB,GAC3CA,EAAEiP,kBAGF,IACI6yB,EADUnrB,EAAOonB,IACMoC,SAAS15B,KACpCtE,EAAWK,IAAI,YAAa,GAAQ,GAAQ,GAAIoM,GAAQ,CACtDyC,OAAQ/M,GAAOY,gBACfyC,SAAUA,EACVqD,UAAW8yB,GACXr3B,KAAMq7B,EACNl5B,UAAWhF,GAAUJ,WAwBvBuE,KAAM,QACL,wBAAc05B,GAAgB,CAC/Bvb,QAAS1K,GACT0P,cAAe1P,IACd,wBAAc,GAAiB,GAAQ,GAAI8U,IAAgB,wBAAc,GAAsB,GAAQ,GAAIqR,MAKhH,SAASI,GAAqBnhC,GAC5B,IAAIqC,EAAQrC,EAAGqC,MACX0E,EAAW/G,EAAG+G,SAEdb,EADQ7D,EAAM4E,SAASF,GACThB,SAASm3B,IAAqBh3B,MAgBhD,OAda,MAATA,GAA+B,MAAdA,EAAML,OACzBxD,EAAQ,GAAc8H,aAAa,CACjC9H,MAAOA,EACP0E,SAAUA,EACVqD,UAAW8yB,GACXr3B,KAAM,MAIVxD,EAAQ,GAAc0F,WAAW,CAC/B1F,MAAOA,EACP0E,SAAUA,EACViB,UAAWg1B,KAyDA,OApDf,WACE,MAAO,CACLnM,iBAAkB,SAA0B7iB,EAAO1O,GACjD,IAAIiC,EAAayM,EAAMzM,WAGvB,OAFYyM,EAAM9H,MAERN,OAASs3B,GACV37B,EAAWK,IAAI,2BAA4BoM,GAG7C1O,KAET8hC,yBAA0B,SAAkCpzB,GAC1D,OAAO,wBAAcqvB,GAAoB,GAAQ,GAAIrvB,KAEvD8hB,aAAc,SAAsB9hB,EAAO1O,GACzC,IAAI+C,EAAQ2L,EAAM3L,MAElB,GAAIA,EAAM2F,YAAcg1B,GAA6B,CACnD,IAAIqE,EAAY,GAAQ,GAAQ,GAAIrzB,GAAQ,CAC1CjH,SAAU1E,EAAM4F,SAChBvG,IAAK,oBAGP,OAAO,wBAAco/B,GAAgB,GAAQ,GAAIO,IAGnD,OAAO/hC,KAET+6B,0BAA2B,SAAmCrsB,EAAO1O,GACnE,IAAIiC,EAAayM,EAAMzM,WAQvB,OAAO,wBAAc,WAAU,KAAMjC,IAAQ,wBAAc,KAAa,MAAO,wBAAc,IAAU,CACrGkiB,KAAMnI,GAAK,YACXrI,KAAM,wBACNsU,QATF,SAAsBlmB,GACpBmC,EAAWK,IAAI,YAAa,GAAQ,GAAQ,GAAIoM,GAAQ,CACtDyC,OAAQwsB,WAUdrd,SAAU,SAAkB5R,EAAO1O,GACjC,IAAIohB,EAAQphB,IAEZ,OADAohB,EAAMxY,IAAI+0B,GAAgCkE,IACnCzgB,K,WCrkCT,GAAiB,SAAuBpjB,EAAGC,GAW7C,OAVA,GAAiBC,OAAOC,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUL,EAAGC,GACjCD,EAAEI,UAAYH,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAIK,KAAKL,EACRA,EAAEM,eAAeD,KAAIN,EAAEM,GAAKL,EAAEK,MAIhBN,EAAGC,IAG3B,SAAS,GAAUD,EAAGC,GAGpB,SAASQ,IACPC,KAAKC,YAAcX,EAHrB,GAAeA,EAAGC,GAMlBD,EAAEY,UAAkB,OAANX,EAAaC,OAAOW,OAAOZ,IAAMQ,EAAGG,UAAYX,EAAEW,UAAW,IAAIH,GAGjF,IAAI,GAAU,WAaZ,OAZA,GAAUP,OAAOa,QAAU,SAAkBC,GAC3C,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,IAG9C,IAAK,IAAIZ,KAFTW,EAAIG,UAAUF,GAGRhB,OAAOU,UAAUL,eAAee,KAAKL,EAAGX,KAAIU,EAAEV,GAAKW,EAAEX,IAI7D,OAAOU,IAGMO,MAAMb,KAAMU,YAG7B,SAAS,GAAOK,EAAGN,GACjB,IAAIO,EAAsB,oBAAXC,QAAyBF,EAAEE,OAAOC,UACjD,IAAKF,EAAG,OAAOD,EACf,IACII,EAEAC,EAHAZ,EAAIQ,EAAEJ,KAAKG,GAEXM,EAAK,GAGT,IACE,WAAc,IAANZ,GAAgBA,KAAM,MAAQU,EAAIX,EAAEc,QAAQC,MAClDF,EAAGG,KAAKL,EAAEM,OAEZ,MAAOC,GACPN,EAAI,CACFM,MAAOA,GAET,QACA,IACMP,IAAMA,EAAEI,OAASP,EAAIR,EAAU,SAAIQ,EAAEJ,KAAKJ,GAC9C,QACA,GAAIY,EAAG,MAAMA,EAAEM,OAInB,OAAOL,EAGT,SAAS,GAAqBsO,EAAQC,GASpC,OARIpQ,OAAO4H,eACT5H,OAAO4H,eAAeuI,EAAQ,MAAO,CACnClO,MAAOmO,IAGTD,EAAOC,IAAMA,EAGRD,EAGT,IAmDI,GAAkB,GAnDlB2zB,GAAkC,kCAElCC,GAAqC,qCACrCC,GAA+B,+BAC/BC,GAA+B,kBAC/BC,GAA0B,0BAC1B,GAAO,YAAOjqB,GAAP,CAAe,KAAqB,GAAmB,GAAqB,CAAC,sJAAuJ,CAAC,yJAC5O,GAAQ,IAAO1J,IAAI,KAAqB,GAAmB,GAAqB,CAAC,8BAA+B,CAAC,iCAErH,SAAS4zB,GAAuB3zB,GAC9B,IAAI0J,EAAS1J,EAAM0J,OACfnW,EAAayM,EAAMzM,WACnBwF,EAAWiH,EAAMjH,SA4BrB,OAAO,wBAAc,GAAM,CACzB2Q,OAAQA,GACP,wBAAc,GAAO,KAAM,8FAA+F,wBAAchB,GAAM,CAC/IG,eAAgB,gBACf,wBAAc,IAAQ,CACvByO,QAtBmB,SAAwBlmB,GAC3C,IAAIwiC,EAAgBrgC,EAAWK,IAAI,2BAA4BoM,GAC/DzM,EAAWK,IAAI,kBAAmBoM,GAClCzM,EAAWK,IAAI,YAAa,GAAQ,GAAQ,GAAIoM,GAAQ,CACtDwS,QAAS,CAAC,CACR/P,OAAQ+wB,GACRz6B,SAAUA,EACV66B,cAAeA,GACd,CACDnxB,OAAQ/M,GAAOQ,YACf6C,SAAUA,EACViB,UAAWhF,GAAUJ,YAGzBrB,EAAWK,IAAI,6BAA8BoM,KAS5C,WAAY,wBAAc,IAAQ,CACnCsX,QAjCkB,SAAuBlmB,GACzCmC,EAAWK,IAAI,6BAA8BoM,GAC7CzM,EAAWK,IAAI,kBAAmBoM,GAClCzM,EAAWK,IAAI,YAAa,GAAQ,GAAQ,GAAIoM,GAAQ,CACtDyC,OAAQ/M,GAAOS,eACf6D,UAAWhF,GAAUJ,YA6BtB,YAIL,IAAIi/B,GAAyB,CAC3BC,QAAS,iBACTC,QAAS,iBAGPC,GAEJ,SAAU98B,GAGR,SAAS88B,IACP,OAAkB,OAAX98B,GAAmBA,EAAOrG,MAAMb,KAAMU,YAAcV,KAiB7D,OApBA,GAAUgkC,EAAiB98B,GAM3B1H,OAAO4H,eAAe48B,EAAgB9jC,UAAW,UAAW,CAC1DmH,IAAK,WACH,OAAOrH,KAAKqH,IAAI,YAElBC,YAAY,EACZC,cAAc,IAEhB/H,OAAO4H,eAAe48B,EAAgB9jC,UAAW,UAAW,CAC1DmH,IAAK,WACH,OAAOrH,KAAKqH,IAAI,YAElBC,YAAY,EACZC,cAAc,IAETy8B,EArBT,CAsBE,iBAAOH,KAELI,GAAgC,CAClCC,UAAW,iBAGTC,GAEJ,SAAUj9B,GAGR,SAASi9B,IACP,OAAkB,OAAXj9B,GAAmBA,EAAOrG,MAAMb,KAAMU,YAAcV,KA6B7D,OAhCA,GAAUmkC,EAAkBj9B,GAM5B1H,OAAO4H,eAAe+8B,EAAiBjkC,UAAW,YAAa,CAC7DmH,IAAK,WACH,OAAOrH,KAAKqH,IAAI,cAElBC,YAAY,EACZC,cAAc,IAGhB48B,EAAiBjkC,UAAUkkC,iBAAmB,SAAUr7B,GACtD,OAAI/I,KAAKkkC,UAAU9rB,IAAIrP,GACd/I,KAAKkkC,UAAU78B,IAAI0B,GAAU+6B,QAAQ16B,UAGvC,IAGT+6B,EAAiBjkC,UAAUmkC,kBAAoB,SAAUt7B,GACvD,IAAIG,EAAM,GAMV,OALAlJ,KAAKkkC,UAAUzgC,SAAQ,SAAUukB,EAAGC,GAC9BD,EAAE8b,QAAQQ,SAASv7B,IACrBG,EAAI1H,KAAKymB,MAGN/e,GAGFi7B,EAjCT,CAkCE,iBAAOF,KAGT,SAASM,GAAsBviC,GAC7B,IAAIqC,EAAQrC,EAAGqC,MACX0E,EAAW/G,EAAG+G,SACd66B,EAAgB5hC,EAAG4hC,cACnB90B,EAAUzK,EAAMmL,eAAei0B,GAA8BU,IAC7DK,EAAkB11B,EAAQo1B,UAAU78B,IAAI0B,IAAa,IAAIi7B,GAI7D,OAHAQ,EAAkBA,EAAgBt6B,IAAI,UAAW,eAAK05B,IACtD90B,EAAUA,EAAQxD,MAAM,CAAC,YAAavC,GAAWy7B,GACjDngC,EAAQA,EAAMiH,MAAM,CAAC,UAAWm4B,IAA+B30B,GAIjE,IAiDI,GAAoB,GAAoB,GAjDxC,GAAS,IAAOiB,IAAI,KAAuB,GAAqB,GAAqB,CAAC,8GAA+G,CAAC,iHACtM,GAAU,IAAOA,IAAI,KAAuB,GAAqB,GAAqB,CAAC,0EAA2E,CAAC,6EACnK00B,GAAc,IAAO10B,IAAI,KAAqB,GAAmB,GAAqB,CAAC,sBAAuB,CAAC,yBAEnH,SAAS20B,GAAwB10B,GAC/B,IAAIzM,EAAayM,EAAMzM,WACnBohC,EAAS30B,EAAM20B,OACfC,EAAU50B,EAAM40B,QAChBC,EAAgB70B,EAAM60B,cAEtB7iC,EAAK,GAAO,oBAAS,GAAQ,GAC7BwgC,EAAgBxgC,EAAG,GACnB8iC,EAAmB9iC,EAAG,GAatByG,EAAUlF,EAAWU,SAASuY,GAAQG,YAAa,GAAQ,GAAQ,GAAI3M,GAAQ,CACjFjH,SAAU47B,EACV5xB,UAAW,OAET0vB,EAAmB,CACrB5Z,OAAQ2Z,EACRE,iBAAkB,SAClBC,UAAW,SAAmBvhC,GAC5ByjC,EAAczjC,IAEhBwhC,SAAU,SAAkBxhC,GAC1B0jC,GAAiB,IAEnBlc,QAAS,SAAiBxnB,GACxB0jC,GAAiB,KAGrB,OAAO,wBAAc,GAAQ,KAAM,wBAAc,GAAS,CACxDxd,QA7BY,SAAiBlmB,GAC7BA,EAAEiP,kBACF9M,EAAWK,IAAI,4BAA6B,GAAQ,GAAQ,GAAIoM,GAAQ,CACtEjH,SAAU47B,OA2BXl8B,GAAU,wBAAcg8B,GAAa,KAAkB,cAAZG,GAA2B,wBAAc,WAAU,KAAM,wBAAc,IAAQ,CAC3Htd,QAxBkB,SAAuBlmB,GACzC0jC,GAAiB,KAwBhB,UAAW,wBAAc,IAAO,GAAQ,GAAIrC,GAAmB,wBAAc,IAAK,KAAM,iDAI7F,IAgEI,GAAoB,GAAoB,GAAoB,GAAkB,GAhE9EsC,GAAS,IAAOh1B,IAAI,KAAuB,GAAqB,GAAqB,CAAC,IAAK,CAAC,OAC5Fi1B,GAAQ,IAAOj1B,IAAI,KAAuB,GAAqB,GAAqB,CAAC,wBAAyB,CAAC,2BAC/Gk1B,GAAY,IAAOl1B,IAAI,KAAuB,GAAqB,GAAqB,CAAC,+CAAgD,CAAC,kDAC1Im1B,GAAa,IAAOn1B,IAAI,KAAqB,GAAmB,GAAqB,CAAC,6CAA8C,CAAC,gDACrIo1B,GAAU,IAAOp1B,IAAI,KAAqB,GAAmB,GAAqB,CAAC,4EAA6E,CAAC,+EAErK,SAASq1B,GAAmBp1B,GAC1B,IAAIjH,EAAWiH,EAAMjH,SACjBxF,EAAayM,EAAMzM,WACnBc,EAAQ2L,EAAM3L,MACdyK,EAAUzK,EAAMyK,QAAQzH,IAAIo8B,IAiB5BG,EAAgB90B,EAAQs1B,iBAAiBr7B,GACzCs8B,EAA0C,IAAzBzB,EAAcjjC,OAAe,KAAO,wBAAcqkC,GAAO,KAAM,wBAAcE,GAAY,KAAM,qBAAsB,wBAAcD,GAAW,KAAMrB,EAAcj8B,KAAI,SAAUjE,GACnM,IAjB6CihC,EAiBzCW,EAAa,GAAQ,GAAQ,GAAIt1B,GAAQ,CAC3CtM,IAAKA,EACLihC,OAAQjhC,EACRkhC,QAAS,YACTC,eArB2CF,EAqBZjhC,EApB1B,SAAUtC,GACfA,EAAEiP,kBACF,IAAIyzB,EAAUh1B,EAAQo1B,UAAU78B,IAAI0B,GAAU+6B,QAC9CvgC,EAAWK,IAAI,YAAa,GAAQ,GAAQ,GAAIoM,GAAQ,CACtDwS,QAAS,CAAC,CACR/P,OAAQ+wB,GACRz6B,SAAUA,EACViB,UAAWhF,GAAUJ,OACrBg/B,cAAeE,EAAQ93B,OAAO83B,EAAQl5B,QAAQ+5B,IAASv7B,mBAgB7D,OAAO,wBAAcs7B,GAAyB,GAAQ,GAAIY,SAExDC,EAAiBz2B,EAAQu1B,kBAAkBt7B,GAC3Cy8B,EAA4C,IAA1BD,EAAe5kC,OAAe,KAAO,wBAAcqkC,GAAO,KAAM,wBAAcE,GAAY,KAAM,sBAAuB,wBAAcD,GAAW,KAAMM,EAAe59B,KAAI,SAAUjE,GACvM,IAAI4hC,EAAa,GAAQ,GAAQ,GAAIt1B,GAAQ,CAC3CtM,IAAKA,EACLihC,OAAQjhC,EACRkhC,QAAS,eAIX,OAAO,wBAAcF,GAAyB,GAAQ,GAAIY,SAQxDG,EAAephC,EAAM4F,WAAalB,GAAY,wBAAci8B,GAAO,KAAM,wBAAcG,GAAS,CAClG7d,QAN2B,SAAgClmB,GAC3DA,EAAEiP,kBACF9M,EAAWK,IAAI,4BAA6BoM,KAK3C,sBACH,OAAO,wBAAc+0B,GAAQ,CAC3B30B,YAAawM,IACZyoB,EAAgBG,EAAiBC,GAKtC,SAASC,GAAkB11B,GACzB,IAAI3L,EAAQ2L,EAAM3L,MACd0E,EAAWiH,EAAMjH,SACjB+F,EAAUzK,EAAMyK,QAAQzH,IAAIo8B,KAAiC,IAAIU,GACjEwB,EAAY72B,EAAQo1B,UAAU78B,IAAI0B,GAClCw8B,EAAiB,GAIrB,GAHAz2B,EAAQo1B,UAAUzgC,SAAQ,SAAUukB,EAAGC,GACjCD,EAAE8b,QAAQQ,SAASv7B,IAAWw8B,EAAe/jC,KAAKymB,OAEtC,MAAb0d,GAAgD,IAA3BA,EAAU7B,QAAQ36B,OAAyC,IAA1Bo8B,EAAe5kC,OAAc,OAAO,KAC/F,IAAI2+B,EAAY,CACd/jB,UAAWH,GAAc,aACzB4S,UAAW,GAETxK,EAAO,wBAAcjK,GAAgB,GAAQ,GAAI+lB,IAEjDvY,EAAe,CACjB/U,WAAW,EACXvJ,QAHmB,wBAAc28B,GAAoB,GAAQ,GAAIp1B,IAIjEY,OAAQ4S,EACRyK,gBAAiB,IAAuB2X,MACxCzX,eAAgB,KAElB,OAAO,wBAAc,IAAS,GAAQ,GAAIpH,IAG5C,SAAS8e,GAAuB71B,GAC9B,IAAIjH,EAAWiH,EAAMjH,SACjB+8B,EAAoB91B,EAAM81B,kBAC1B7sB,EAAI6sB,EAAkB1tB,IAAIrP,GAE1B/G,EAAK,GAAO,mBAASiX,GAAI,GACzB8f,EAAU/2B,EAAG,GACb+jC,EAAa/jC,EAAG,GAEhBgkC,EAAgB,CAClBjN,QAASA,EACT51B,SAAU,WACJ2iC,EAAkB1tB,IAAIrP,GACxB+8B,EAAkB95B,OAAOjD,GAEzB+8B,EAAkBG,IAAIl9B,GAGxBg9B,GAAYhN,KAGhB,OAAO,wBAAc3f,GAAgB,GAAQ,GAAI4sB,IA4JnD,IA4FI,GAAoB,GAAoB,GAAoB,GAAoB,GA5FhFE,GAAa,KAAQtQ,SACrBuQ,GAAmB,YAAOD,GAAP,CAAmB,KAAuB,GAAqB,GAAqB,CAAC,sEAAuE,CAAC,yEAChLE,GAAa,IAAOr2B,IAAI,KAAuB,GAAqB,GAAqB,CAAC,kJAAmJ,CAAC,qJAC9Os2B,GAAgB,YAAO,IAAP,CAAgB,KAAuB,GAAqB,GAAqB,CAAC,yBAA0B,CAAC,4BAC7HC,GAAM,IAAOv2B,IAAI,KAAuB,GAAqB,GAAqB,CAAC,8GAA+G,CAAC,iHACnMw2B,GAAa,IAAOx2B,IAAI,KAAuB,GAAqB,GAAqB,CAAC,oCAAqC,CAAC,uCAChIy2B,GAAc,CAChB30B,YAAa,UAGf,SAAS40B,GAAYz2B,GACnB,IAAI3L,EAAQ2L,EAAM3L,MAEdd,GADgByM,EAAM02B,cACT12B,EAAMzM,YAsBnBojC,EAAkB,SAAyB59B,GAC7C,OAAO,SAAU3H,GACfmC,EAAWK,IAAI,4BAA6B,GAAQ,GAAQ,GAAIoM,GAAQ,CACtEjH,SAAUA,OAyCZ69B,EAzDiB,WACnB,IAAI19B,EAAM,GASV,OARA7E,EAAMkG,OAAO9G,SAAQ,SAAU2G,EAAOrB,GACpCG,EAAI1H,KAAK,CACPkC,IAAKqF,EACL+d,MAAOvjB,EAAWK,IAAI,gBAAiB,GAAQ,GAAQ,GAAIoM,GAAQ,CACjEjH,SAAUA,UAITG,EA+CM29B,GACf,OAAO,wBAAcV,GAAkB,CACrCW,WAAYN,GACZO,kBATkB,SAAuBtQ,EAAOpP,GAChD,OAAOA,EAAMxb,QAAO,SAAU7C,GAC5B,OAAOA,EAAK8d,MAAMkgB,cAAc1C,SAAS7N,EAAMuQ,mBAQjDne,QAAQ,EACRxB,MAAOuf,EACPnR,aA1Ce,SAAoBwR,EAASj3B,GAQ5C,IAAItM,EAAMujC,EAAQvjC,IACdwjC,EAAeD,EAAQngB,MAEvBqgB,EAAUD,EAAavmC,OADX,IAEZmmB,EAAQqgB,EAAUD,EAAaj0B,OAAO,EAF1B,KAE0C,MAAQi0B,EAC9DE,EAAa,CACf1jC,IAAKA,EACL4jB,QAASqf,EAAgBjjC,IAEvB2jC,EAAU,wBAAcjB,GAAY,GAAQ,GAAIgB,GAAatgB,GAE7DwgB,EAAe,CACjB5jC,IAAKA,EACLkN,OAAQy2B,EACR5+B,QAJQ,wBAAc69B,GAAK,KAAM,wBAAcC,GAAY,KAAMW,IAKjE9iB,MAAM,EACN6J,gBAAiB,IAAuBsZ,kBACxCpZ,eAAgB,KAElB,OAAOgZ,EAAU,wBAAcd,GAAe,GAAQ,GAAIiB,IAAiBD,GAiB3Eze,QAxEY,WACZrlB,EAAWK,IAAI,YAAa,GAAQ,GAAQ,GAAIoM,GAAQ,CACtDyC,OAAQ/M,GAAOS,eACf6D,UAAWhF,GAAUJ,WAsEvB4iC,eAAe,IAKnB,IAAIC,GAAsB,iBACtBC,GAAoB,oB,gCC3oBjB,SAASC,GAAgB33B,GAW9B,OACE,yBACEuL,UAAS,0BAAqBH,GAAc,aAC5CkM,QAboB,SAAAlmB,GAAM,IACpBwmC,EAAY53B,EAAZ43B,QAEArkC,EADaqkC,EAAQhW,kBACrBruB,WACRga,GAAgB,wBAAwBoc,MAAK,SAAAxb,GAC3C,IAAI3W,EAAMmwB,KAAKiC,MAAMzb,GACjB9Z,EAAQd,EAAWK,IAAI,mBAAoB,CAAEL,aAAYiE,QAC7DogC,EAAQzJ,aAAa95B,S,0QCLpB,SAASwjC,GAAkB73B,GAChC,IAAM83B,EAAa,CACjB,CACE/kC,EAAkB4L,eAClB,iBACA,yBAEF,CAAC5L,EAAkBwnB,cAAe,aAAc,gBAChD,CAACxnB,EAAkBynB,cAAe,YAAa,gBAG3Cud,EAAmB,SAAAn7B,GAAS,OAAI,SAAAxL,GAAM,IAEpCswB,EADc1hB,EAAZ43B,QACqBhW,kBACNF,EAAfnuB,WACGK,IAAI,e,4VAAf,IAAoC8tB,EAApC,CAAkD9kB,iBAGpD,OACE,yBACE2O,UAAWysB,KAAG,kBAAmB5sB,GAAc,2BAE/C,kBAAC,KAAD,CAAS0N,cAAc,GACrB,yBAAKvN,UAAU,8BACf,kBAAC,KAAD,KACGusB,EAAWngC,KAAI,SAAAoU,GAAG,OACjB,kBAAC,KAAD,CACErY,IAAKqY,EAAI,GACTyH,KAAMnI,GAAKU,EAAI,IACf/I,KAAM+I,EAAI,GACVuL,QAASygB,EAAiBhsB,EAAI,Y,4UC1BrC,SAASksB,GAAiBj4B,GAC/B,IAAMk4B,EAAkB,SAAAC,GAAQ,OAAI,SAAA/mC,GAAM,IAElCswB,EADc1hB,EAAZ43B,QACqBhW,kBACNF,EAAfnuB,WACGK,IAAI,W,4VAAf,IAAgC8tB,EAAhC,CAA8CyW,gBAE1CC,EAAS,CACb,CAAC,UAAWC,MACZ,CAAC,SAAUC,MACX,CAAC,SAAUC,MACX,CAAC,SAAUC,MACX,CAAC,SAAUC,OAGb,OACE,yBAAKltB,UAAWysB,KAAG,kBAAmB5sB,GAAc,WAClD,kBAAC,KAAD,CAAS0N,cAAc,GACrB,yBAAKvN,UAAU,8BACf,yBAAKA,UAAU,oBACZ6sB,EAAOzgC,KAAI,SAAA+E,GAAK,OACf,yBACEhJ,IAAKgJ,EAAM,GACX6O,UAAU,gBACV+L,QAAS4gB,EAAgBx7B,EAAM,KAE/B,yBAAK6O,UAAU,eAAemtB,IAAKh8B,EAAM,GAAIi8B,IAAKj8B,EAAM,Y,cClCzDk8B,GAAe,SAAC7rB,EAAKD,GAChC,IAAME,EAAO5L,SAAS6L,cAAc,KACpCD,EAAKE,KAAOH,EACZC,EAAKG,SAAWL,EAChBE,EAAKI,S,+NCAA,SAASyrB,GAAkB74B,GAgBhC,OACE,yBAAKuL,UAAWysB,KAAG,kBAAmB5sB,GAAc,YAClD,kBAAC,KAAD,CAAS0N,cAAc,GACrB,yBAAKvN,UAAU,8BACf,kBAAC,KAAD,KACE,kBAAC,KAAD,CAAUvI,KAAK,cAAcsU,QApBX,SAAAlmB,GAAM,IAExBswB,EADc1hB,EAAZ43B,QACqBhW,kBACrBruB,EAAsBmuB,EAAtBnuB,WAAYc,EAAUqtB,EAAVrtB,MAEdykC,EAAOvlC,EAAWK,IAAI,iBAAkB8tB,GACxCqX,EAAUpR,KAAKC,UAAUkR,GACzB/rB,EAAG,0BAAsBO,mBAAmByrB,IAC5CjiB,EAAQvjB,EAAWK,IAAI,gB,4VAAf,IACT8tB,EADS,CAEZ3oB,SAAU1E,EAAMoG,gBAElBm+B,GAAa7rB,EAAD,UAAS+J,EAAT,kBASN,kBAAC,KAAD,S,+NCvBH,SAASkiB,GAAkBh5B,GAYhC,OACE,yBACEuL,UAAS,0BAAqBH,GAAcb,GAASS,SACrDsM,QAdkB,SAAAlmB,GAAM,IAEpBswB,EADc1hB,EAAZ43B,QACqBhW,kBACNF,EAAfnuB,WAEGK,IAAI,Y,4VAAf,IACK8tB,EADL,CAEEjf,OAAQ/M,GAAOS,eACf6D,UAAW09B,SCDV,IAAMuB,GAAb,iLAEI,IAAMj5B,EAAQhQ,KAAKgQ,MAEXk5B,EAA+Cl5B,EAA/Ck5B,YAAaC,EAAkCn5B,EAAlCm5B,YAAalnB,EAAqBjS,EAArBiS,QAASC,EAAYlS,EAAZkS,QAE3C,OACE,yBAAK3G,UAAU,cACb,kBAACosB,GAAoB33B,GACrB,kBAAC64B,GAAsB74B,GACvB,kBAACi4B,GAAqBj4B,GACtB,kBAAC63B,GAAsB73B,GACvB,kBAACg5B,GAAsBh5B,GAEvB,yBACEuL,UAAWysB,KAAG,kBAAmB5sB,GAAc,QAAS,CACtD,4BAA6B6G,IAE/BqF,QAAS4hB,IAGX,yBACE3tB,UAAWysB,KAAG,kBAAmB5sB,GAAc,QAAS,CACtD,4BAA6B8G,IAE/BoF,QAAS6hB,SAzBnB,GAA6BC,IAAMC,e,oBCC7BnmC,I,OAFMomC,GAAM,OAEF,CACdC,KVgRF,WACE,IAAIC,EAAW,IAAInmC,IAAI,CAAC,CAAC,UAAW4J,IAAe,CAAC,sBAAuByxB,IAAyB,CAAC,SAAUC,IAAS,CAAC,SAAUC,IAAS,CAAC,SAAUE,IAAS,CAAC,SAAUC,MAC3K,MAAO,CACL0K,aAAc,SAAsBz5B,GAClC,OAAOw5B,GAET/8B,SAAU,SAAkBuD,GAC1B,IAAI3L,EAAQ2L,EAAM3L,MACdd,EAAayM,EAAMzM,WACnB4kC,EAAWn4B,EAAMm4B,SACjBuB,EAAWnmC,EAAWK,IAAI,eAAgBoM,GAE9C,IAAK05B,EAAStxB,IAAI+vB,GAChB,MAAM,IAAIxlC,MAAM,2CAGlB,IAAI+J,EAAQg9B,EAASriC,IAAI8gC,GACrB/lB,EAAW,GAAc3V,SAAS,CACpCpI,MAAOA,EACPqI,MAAOA,IAETnJ,EAAWa,OAAOge,KUpStBunB,GRuYF,WACE,IAAI7D,EAAoB,IAAIxkB,IAE5B,SAASsoB,EAAwB5nC,GAC/B,IAAIqC,EAAQrC,EAAGqC,MACX0E,EAAW/G,EAAG+G,SACd+F,EAAUzK,EAAMmL,eAAei0B,GAA8BU,IAOjE,OANA2B,EAAoB,IAAIxkB,IAAIxS,EAAQs1B,iBAAiBr7B,IACrD1E,EAAQ,GAAc0F,WAAW,CAC/B1F,MAAOA,EACP0E,SAAUA,EACViB,UAAWs5B,KAKf,MAAO,CACLjH,0BAA2B,SAAmCrsB,EAAO1O,GACnE,IAAIiC,EAAayM,EAAMzM,WAWvB,OAAO,wBAAc,WAAU,KAAMjC,IAAQ,wBAAc,KAAa,MAAO,wBAAc,IAAU,CACrGoC,IAAKggC,GACLlgB,KAAMnI,GAAK,aACXrI,KAAM,uBACNsU,QAbF,SAAmClmB,GACjCmC,EAAWK,IAAI,YAAa,GAAQ,GAAQ,GAAIoM,GAAQ,CACtDyC,OAAQ8wB,MAEVhgC,EAAWK,IAAI,mBAAoB,GAAQ,GAAQ,GAAIoM,GAAQ,CAC7D0R,UAAW,CAAChc,GAAOC,yBAWzBic,SAAU,SAAkB5R,EAAO1O,GACjC,IAAIohB,EAAQphB,IAGZ,OAFAohB,EAAMxY,IAAIq5B,GAAoCqG,GAC9ClnB,EAAMxY,IAAIs5B,GAA8Be,IACjC7hB,GAETW,iBAAkB,SAA0BrT,EAAO1O,GACjD,IAAI+C,EAAQ/C,IACRmR,EAASzC,EAAMyC,OACf1J,EAAWiH,EAAMjH,SAErB,GAAI0J,IAAW/M,GAAOO,cAAgB8C,IAAa1E,EAAM+G,mBAAoB,CAC3E,IAAIy+B,EAAgB/gC,GAAmBzE,EAAO0E,GAC9C8gC,EAAcroC,KAAKuH,GACnB,IAAI+gC,EAAYzlC,EAAMmL,eAAei0B,GAA8BU,IAC/D4F,EAAcD,EAAU5F,UAE5B2F,EAAcpmC,SAAQ,SAAUumC,GAC9B,IAAIzE,EAAiBuE,EAAUzF,kBAAkB2F,IAEjDD,EAAcA,EAAY1+B,eAAc,SAAU64B,GAChDqB,EAAe9hC,SAAQ,SAAUukB,GAC/Bkc,EAAUp5B,SAAS,CAACkd,EAAG,YAAY,SAAU8b,GAC3C,OAAOA,EAAQ93B,OAAO83B,EAAQl5B,QAAQo/B,cAK5B5xB,IAAI4xB,KAClBD,EAAcA,EAAY/9B,OAAOg+B,OAGrCF,EAAYA,EAAU5/B,IAAI,YAAa6/B,GACvC1lC,EAAQA,EAAMiH,MAAM,CAAC,UAAWm4B,IAA+BqG,GAGjE,OAAOzlC,GAET0tB,uBAAwB,SAAgC/hB,EAAO1O,GAC7D,IAAI+C,EAAQ2L,EAAM3L,MAEdqV,EADa1J,EAAMzM,WACCU,SAASuY,GAAQC,gCAAkC,EACvEvT,EAAM5H,IAEV,GAAI+C,EAAM2F,YAAcs5B,GAAiC,CACvD,IAAI2G,EAAa,GAAQ,GAAQ,GAAIj6B,GAAQ,CAC3C0J,OAAQA,EACR3Q,SAAU1E,EAAM4F,SAChBvG,IAAK,2BAGPwF,EAAI1H,KAAK,wBAAcmiC,GAAwB,GAAQ,GAAIsG,KAG7D,OAAO/gC,GAETwpB,yBAA0B,SAAkC1iB,EAAO1O,GACjE,IAAI+C,EAAQ2L,EAAM3L,MACd0E,EAAWiH,EAAMjH,SACjBxF,EAAayM,EAAMzM,WACnB2F,EAAM5H,IAKV,GAJA4H,EAAI1H,KAAK+B,EAAWK,IAAI,0BAA2B,GAAQ,GAAQ,GAAIoM,GAAQ,CAC7EtM,IAAKggC,GAA0B,YAG7Br/B,EAAM2F,YAAcs5B,IAAmCj/B,EAAM4F,WAAalB,EAAU,CACtF,IAAImhC,EAAgB,GAAQ,GAAQ,GAAIl6B,GAAQ,CAC9CtM,IAAK,WACLoiC,kBAAmBA,IAGjBqE,EAAW,wBAActE,GAAwB,GAAQ,GAAIqE,IACjEhhC,EAAI1H,KAAK2oC,GAGX,OAAOjhC,GAETkhC,wBAAyB,SAAiCp6B,EAAO1O,GAC/D,OAAO,wBAAcokC,GAAmB,GAAQ,GAAI11B,KAEtDq6B,2BAA4B,WAC1BvE,EAAkBnkB,SAEpB2oB,yBAA0B,WACxB,OAAO3qC,MAAM4qC,KAAKzE,IAGpB0E,uBAAwB,SAAgCx6B,EAAO1O,GAC7D,IAAImpC,EAAaz6B,EAAMy6B,WACnBC,EAAc16B,EAAM06B,YAExB,GAAID,IAAehH,GAA8B,CAC/C,IAAIkH,EAAmB,IAAIxG,GAEvByG,EAAU,SAAiBlnC,GAC7B,IAAIsF,EAAO0hC,EAAYxG,UAAUxgC,GAC7B8gC,EAAkB,IAAIR,GAAgB,CACxCF,QAAS,eAAK96B,EAAK86B,SACnBC,QAAS,cAAI/6B,EAAK+6B,WAEpB4G,EAAmBA,EAAiBrgC,OAAO,aAAa,SAAU45B,GAChE,OAAOA,EAAUh6B,IAAIxG,EAAK8gC,OAI9B,IAAK,IAAI9gC,KAAOgnC,EAAYxG,UAC1B0G,EAAQlnC,GAGV,OAAOinC,EAGT,OAAOrpC,MQ1hBXupC,GR+nBF,WACE,IAAIC,EAAiB,SAAwBvqC,KAE7C,MAAO,CACLwf,iBAAkB,SAA0B/P,EAAO1O,GACjD,IAAIiC,EAAayM,EAAMzM,WACnBc,EAAQ2L,EAAM3L,MACd0jB,EAAUzmB,IAYd,OAXAymB,EAAQ1H,cAAcnW,IAAIu9B,GAAqB,CAC7CtnB,MAAO,SACPC,MAAO,WACP7P,UAAW,WACThN,EAAWK,IAAI,YAAa,GAAQ,GAAQ,GAAIoM,GAAQ,CACtDyC,OAAQ/M,GAAOQ,YACf6C,SAAU1E,EAAM4F,SAChBD,UAAW09B,SAIV3f,GAETgK,uBAAwB,SAAgC/hB,EAAO1O,GAC7D,IAAI4H,EAAM5H,IAGV,GAFY0O,EAAM3L,MAER2F,YAAc09B,GAAmB,CACzC,IAAIqD,EAAmB,GAAQ,GAAQ,CACrCrnC,IAAK,gBACJsM,GAAQ,CACT86B,eAAgBA,IAGlB5hC,EAAI1H,KAAK,wBAAcilC,GAAa,GAAQ,GAAIsE,KAGlD,OAAO7hC,IQjqBX8hC,GACAC,KXkBO,CACLC,eAAgB,SAAwBl7B,EAAO1O,GAC7C,IAAI6pC,EAAU7pC,IACd,GAAe,MAAX6pC,EAAiB,OAAOA,EAC5B,IAAI9mC,EAAQ2L,EAAM3L,MACdd,EAAayM,EAAMzM,WAkBvB,MAjBU,CACRkH,aAAcpG,EAAMoG,aACpBW,mBAAoB/G,EAAM+G,mBAC1BnB,SAAU5F,EAAM4F,SAChB6E,QAASvL,EAAWK,IAAI,mBAAoB,GAAQ,GAAQ,GAAIoM,GAAQ,CACtElB,QAASzK,EAAMyK,WAEjBvE,OAAQlG,EAAMkG,OAAO6gC,WAAWhiC,UAAUzB,KAAI,SAAUyC,GACtD,OAAO7G,EAAWK,IAAI,iBAAkB,GAAQ,GAAQ,GAAIoM,GAAQ,CAClE5F,MAAOA,QAGXyC,OAAQtJ,EAAWK,IAAI,kBAAmB,GAAQ,GAAQ,GAAIoM,GAAQ,CACpEnD,OAAQxI,EAAMwI,UAEhBkC,cAAe1K,EAAM0K,gBAIzBs8B,iBAAkB,SAA0Br7B,EAAO1O,GACjD,IAAI6pC,EAAU7pC,IACd,GAAe,MAAX6pC,EAAiB,OAAOA,EAC5B,IAAI3jC,EAAMwI,EAAMxI,IACZjE,EAAayM,EAAMzM,WAEE,MAArBiE,EAAIuH,gBACNvH,EAAIuH,cAAgB,OAGtB,IAAItE,EAAejD,EAAIiD,aACnBW,EAAqB5D,EAAI4D,mBACzBnB,EAAWzC,EAAIyC,SACfM,EAAS/C,EAAI+C,OACbsC,EAASrF,EAAIqF,OACbiC,EAAUtH,EAAIsH,QACdC,EAAgBvH,EAAIuH,cACpB7F,EAAM,IAAI,GA6Bd,OAToB,OAnBpBA,EAAMA,EAAI+B,MAAM,CACdR,aAAcA,EACdW,mBAA0C,MAAtBA,EAA6BX,EAAeW,EAChEnB,SAAUA,EACV6E,QAASvL,EAAWK,IAAI,qBAAsB,GAAQ,GAAQ,GAAIoM,GAAQ,CACxElB,QAASA,EACTC,cAAeA,KAEjBlC,OAAQtJ,EAAWK,IAAI,oBAAqB,GAAQ,GAAQ,GAAIoM,GAAQ,CACtEnD,OAAQA,EACRkC,cAAeA,KAEjBxE,OAAQhH,EAAWK,IAAI,oBAAqB,GAAQ,GAAQ,GAAIoM,GAAQ,CACtEzF,OAAQA,EACRwE,cAAeA,KAEjBA,cAAevH,EAAIuH,iBAGb9E,WACNf,EAAMA,EAAIgB,IAAI,WAAYhB,EAAIuB,eAGX,MAAjBvB,EAAIc,YACNd,EAAMA,EAAIgB,IAAI,YAAalF,GAAUJ,SAGvC,GAAI,mBAAoBsE,GACjBA,GAEToiC,iBAAkB,SAA0Bt7B,EAAO1O,GACjD,IAAI6pC,EAAU7pC,IACd,GAAe,MAAX6pC,EAAiB,OAAOA,EAC5B,IAAIr8B,EAAUkB,EAAMlB,QAChBvL,EAAayM,EAAMzM,WACnB2F,EAAM,GAQV,OAPA4F,EAAQrL,SAAQ,SAAUukB,EAAGC,GAC3B/e,EAAI+e,GAAK1kB,EAAWK,IAAI,uBAAwB,CAC9CoM,MAAOA,EACPy6B,WAAYxiB,EACZyiB,YAAa1iB,OAGV9e,GAETqiC,mBAAoB,SAA4Bv7B,EAAO1O,GACrD,IAAI6pC,EAAU7pC,IACd,GAAe,MAAX6pC,EAAiB,OAAOA,EAC5B,IAAIr8B,EAAUkB,EAAMlB,QAChBvL,EAAayM,EAAMzM,WACnB2F,EAAM,gBAEV,IAAK,IAAIuhC,KAAc37B,EACrB5F,EAAMA,EAAIgB,IAAIugC,EAAYlnC,EAAWK,IAAI,yBAA0B,GAAQ,GAAQ,GAAIoM,GAAQ,CAC7Fy6B,WAAYA,EACZC,YAAa57B,EAAQ27B,OAIzB,OAAOvhC,GAETsiC,qBAAsB,SAA8Bx7B,EAAO1O,GACzD,IAAI6pC,EAAU7pC,IACd,GAAe,MAAX6pC,EAAiB,OAAOA,EAC5B,IAAIT,EAAc16B,EAAM06B,YAExB,OAAI,sBAAYA,GACPA,EAAYp7B,OAGdo7B,GAETF,uBAAwB,SAAgCx6B,EAAO1O,GAC7D,IAAI6pC,EAAU7pC,IACd,OAAe,MAAX6pC,EAAwBA,EACVn7B,EAAM06B,aAG1Be,gBAAiB,SAAyBz7B,EAAO1O,GAC/C,IAAI6pC,EAAU7pC,IACd,OAAe,MAAX6pC,EAAwBA,EACfn7B,EAAMnD,OACLyC,QAEhBo8B,kBAAmB,SAA2B17B,EAAO1O,GACnD,IAAI6pC,EAAU7pC,IACd,GAAe,MAAX6pC,EAAiB,OAAOA,EAC5B,IAAIt+B,EAASmD,EAAMnD,OACnB,OAAO,IAAI+B,GAAO/B,IAEpB8+B,eAAgB,SAAwB37B,EAAO1O,GAC7C,IAAI6pC,EAAU7pC,IACd,GAAe,MAAX6pC,EAAiB,OAAOA,EAC5B,IAAI/gC,EAAQ4F,EAAM5F,MACd7G,EAAayM,EAAMzM,WACvB,MAAO,CACLG,IAAK0G,EAAM1G,IACX0E,UAAWgC,EAAMhC,UACjBE,QAAS8B,EAAM9B,QAAQc,UACvBZ,SAAU4B,EAAM5B,SAChBK,MAAOuB,EAAMvB,MACbb,OAAQoC,EAAMpC,OAAOL,KAAI,SAAUO,GACjC,OAAO3E,EAAWK,IAAI,iBAAkB,GAAQ,GAAQ,GAAIoM,GAAQ,CAClE9H,MAAOA,UAKf0jC,iBAAkB,SAA0B57B,EAAO1O,GACjD,IAAI6pC,EAAU7pC,IACd,GAAe,MAAX6pC,EAAiB,OAAOA,EAC5B,IAAI/gC,EAAQ4F,EAAM5F,MACd7G,EAAayM,EAAMzM,WACnBG,EAAM0G,EAAM1G,IACZ0E,EAAYgC,EAAMhC,UAClBE,EAAU8B,EAAM9B,QAChBN,EAASoC,EAAMpC,OACfa,EAAQuB,EAAMvB,MACdL,EAAW4B,EAAM5B,SACjBU,EAAM,IAAI,GAWd,OAVAA,EAAMA,EAAI+B,MAAM,CACdvH,IAAKA,EACL0E,UAAWA,EACXE,QAAS,eAAKA,GACdO,MAAOA,EACPL,SAAUA,EACVR,OAAQzE,EAAWK,IAAI,oBAAqB,GAAQ,GAAQ,GAAIoM,GAAQ,CACtEhI,OAAQA,QAKd6jC,kBAAmB,SAA2B77B,EAAO1O,GACnD,IAAI6pC,EAAU7pC,IACd,GAAe,MAAX6pC,EAAiB,OAAOA,EAC5B,IAAI5gC,EAASyF,EAAMzF,OACfhH,EAAayM,EAAMzM,WACnB2F,EAAM,gBAQV,OAPAA,EAAMA,EAAImC,eAAc,SAAUlK,GAChCoJ,EAAO9G,SAAQ,SAAU2G,GACvB,OAAOjJ,EAAE+I,IAAIE,EAAM1G,IAAKH,EAAWK,IAAI,mBAAoB,GAAQ,GAAQ,GAAIoM,GAAQ,CACrF5F,MAAOA,aAMf0hC,eAAgB,SAAwB97B,EAAO1O,GAC7C,IAAI6pC,EAAU7pC,IACd,GAAe,MAAX6pC,EAAiB,OAAOA,EAC5B,IAAIjjC,EAAQ8H,EAAM9H,MACd3E,EAAayM,EAAMzM,WAKvB,MAJU,CACRqE,KAAMM,EAAMN,KACZC,KAAMtE,EAAWK,IAAI,qBAAsB,GAAQ,GAAIoM,MAI3DqD,mBAAoB,SAA4BrD,EAAO1O,GACrD,IAAI6pC,EAAU7pC,IACd,OAAe,MAAX6pC,EAAwBA,EAChBn7B,EAAM9H,MACLL,MAEfkkC,iBAAkB,SAA0B/7B,EAAO1O,GACjD,IAAI6pC,EAAU7pC,IACd,GAAe,MAAX6pC,EAAiB,OAAOA,EAC5B,IAAIjjC,EAAQ8H,EAAM9H,MACd3E,EAAayM,EAAMzM,WACnBqE,EAAOM,EAAMN,KACjB,OAAO,IAAI,GAAM,CACfA,KAAMA,EACNC,KAAMtE,EAAWK,IAAI,uBAAwB,GAAQ,GAAQ,GAAIoM,GAAQ,CACvE9H,MAAOA,QAIb8jC,qBAAsB,SAA8Bh8B,EAAO1O,GACzD,IAAI6pC,EAAU7pC,IACd,OAAe,MAAX6pC,EAAwBA,EAChBn7B,EAAM9H,MACLL,MAEfokC,kBAAmB,SAA2Bj8B,EAAO1O,GACnD,IAAI6pC,EAAU7pC,IACd,GAAe,MAAX6pC,EAAiB,OAAOA,EAC5B,IAAInjC,EAASgI,EAAMhI,OACfzE,EAAayM,EAAMzM,WACnB2F,EAAM,iBAQV,OAPAA,EAAMA,EAAImC,eAAc,SAAUnC,GAChClB,EAAOvE,SAAQ,SAAUyE,GACvB,OAAOgB,EAAI1H,KAAK+B,EAAWK,IAAI,mBAAoB,GAAQ,GAAQ,GAAIoM,GAAQ,CAC7E9H,MAAOA,gBW/KJgkC,GA1Ef,YACE,WAAYl8B,GAAQ,IAAD,8BACjB,4CAAMA,KAKRm8B,WAAa,SAAAn7B,GACX,EAAK42B,QAAU52B,EACf,EAAKE,SAAS,KARG,EAgBnBg4B,YAAc,SAAA9nC,GACZ,IAAM4O,EAAQ,EAAK43B,QAAQhW,kBACJ5hB,EAAfzM,WACGK,IAAI,OAAQoM,IAnBN,EAsBnBm5B,YAAc,SAAA/nC,GACZ,IAAM4O,EAAQ,EAAK43B,QAAQhW,kBACJ5hB,EAAfzM,WACGK,IAAI,OAAQoM,IAzBN,EAsDnB7M,SAAW,SAACkB,EAAOC,GACjB,EAAK4M,SACH,CACE7M,SAEFC,IAzDF,EAAK8nC,YAFY,EADrB,yEAaI,IAAM/nC,EJ3BH,WACL,IAAMgoC,EAAUzlC,KAEhB,OAAOoI,GAAM7O,OAAO,CAClBsK,aAAc4hC,EACd9hC,OAAQ,CACN,CACE7G,IAAK2oC,EACLrkC,OAAQ,CAAC,CAAEJ,KAAM,UAAWC,KAAM,kBImBxBykC,GACdtsC,KAAKmQ,MAAQ,CAAE9L,WAdnB,sCA8BI,OACE,kBAAC,GAAD,CACE2M,IAAKhR,KAAKmsC,WACV9nC,MAAOrE,KAAKmQ,MAAM9L,MAClBlB,SAAUnD,KAAKmD,SACfD,QAASA,OAnCjB,sCAyCI,IAAM8M,EAAQhQ,KAAK4nC,QAAQhW,kBACnBruB,EAAeyM,EAAfzM,WACF0e,EAAU1e,EAAWK,IAAI,UAAWoM,GACpCkS,EAAU3e,EAAWK,IAAI,UAAWoM,GACpCu8B,EAAe,CACnB3E,QAAS5nC,KAAK4nC,QACdsB,YAAalpC,KAAKkpC,YAClBC,YAAanpC,KAAKmpC,YAClBlnB,UACAC,WAEF,OAAO,kBAAC,GAAYqqB,KApDxB,+BAiEI,OACE,yBAAKhxB,UAAU,WACZvb,KAAK4nC,SAAW5nC,KAAKwsC,gBACrBxsC,KAAK6xB,qBApEd,GAA6BuX,IAAMqD,W,QCfpBC,OAJf,WACE,OAAO,kBAAC,GAAD,OCOWC,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2DCNNC,aAAa1D,MANS,CACpB,MAEA,iBAGmC2D,KAAK,KAE1CC,IAASv7B,OAAO,kBAAC,GAAD,MAASP,SAAS+7B,eAAe,SDmH3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAM3T,MAAK,SAAA4T,GACjCA,EAAaC,iB,iCEjInBhuC,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAETgsC,EAAQC,QAKR,SAAkBj9B,GAEhB,MAD8B,qBAAXm8B,QAA0B,uBAAuBe,KAAKf,OAAOQ,UAAUQ,UAC3En9B,EAAMo9B,QAAUp9B,EAAM2B,U,iCCVvC5S,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAGT,IAIgC+F,EAJ5BsmC,EAAoB,EAAQ,IAE5BC,GAE4BvmC,EAFgBsmC,IAGhCtmC,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,GAIbimC,EAAQC,QAAUK,EAAmBL,QAAQx2B,OAAO+2B,WAAW,CAC7DC,YAAa,gBACbC,YAAa,YAFGJ,CAGf,CAAC,6NAA8N,MAAM,SAAUK,GAEhP,OADaA,EAAKC,QACD,kB,iCCnBnB7uC,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAGT,IAEI6sC,EAAWC,EAFA,EAAQ,MAIvBd,EAAQC,QAmCR,SAAuBt8B,EAAU4G,GAC/B,IAAIw2B,EAAYC,EAAYz2B,EAAKhF,MAC7BvQ,EAbN,SAAqB2O,EAAUs9B,GAC7B,IAAIF,EAAYC,EAAYC,EAAQ17B,MAKpC,OAJe5B,EAASu9B,MAAM9iC,QAAO,SAAUmM,GAC7C,QAAKA,EAAKhF,OACHgF,EAAKpQ,KAAKmlC,MAAM,aAAeyB,IAAcC,EAAYz2B,EAAKhF,UAEvDpI,QAAQ8jC,GAOZE,CAAYx9B,EAAU4G,GAClC,OAAc,IAAVvV,EAAoB+rC,EACjBA,EAAY,IAAM/rC,GArCd,EAAQ,GAArB,IAIIosC,EAAYN,EAFD,EAAQ,MAIvB,SAASA,EAAuB/mC,GAC9B,OAAOA,GAAOA,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,GAMb,SAASinC,EAAYz7B,GACnB,MAAO,MAAO,EAAIs7B,EAASZ,UAAS,EAAImB,EAAUnB,SAAS16B,EAAM,CAC/D87B,OAAO,IACNjoC,QAAQ,IAAK,Q,iCC3BlBrH,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAETgsC,EAAQC,QAER,SAA8Bj9B,GAC5B,IAAIs+B,EAAwB,GAE5B,GAAIt+B,EAAMqxB,aAAc,CACtB,IAAIz1B,EAAKoE,EAAMqxB,aAEXz1B,EAAG0R,OAAS1R,EAAG0R,MAAMpd,OACvBouC,EAAwB1iC,EAAG0R,MAClB1R,EAAGgb,OAAShb,EAAGgb,MAAM1mB,SAG9BouC,EAAwB1iC,EAAGgb,YAEpB5W,EAAMG,QAAUH,EAAMG,OAAOmN,QACtCgxB,EAAwBt+B,EAAMG,OAAOmN,OAIvC,OAAOpe,MAAMO,UAAUw8B,MAAM97B,KAAKmuC,K,iCCvBpCvvC,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAGT,IAQgC+F,EAN5B4hC,EAYJ,SAAiC5hC,GAC/B,GAAIA,GAAOA,EAAIwmC,WACb,OAAOxmC,EAEP,IAAIwnC,EAAS,GAEb,GAAW,MAAPxnC,EACF,IAAK,IAAI9D,KAAO8D,EACVhI,OAAOU,UAAUL,eAAee,KAAK4G,EAAK9D,KAAMsrC,EAAOtrC,GAAO8D,EAAI9D,IAK1E,OADAsrC,EAAOtB,QAAUlmC,EACVwnC,EAzBCC,CAFC,EAAQ,IAIjBnB,EAAoB,EAAQ,IAuChC,IAOIoB,IA1C4B1nC,EAFgBsmC,IAGhCtmC,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,IAwCsBkmC,QAAQ39B,IAAIk+B,WAAW,CACxDC,YAAa,kBACbC,YAAa,YAFCJ,CAGb,CAAC,qBAAsB,mBAAoB,gBAAiB,oBAAqB,MAAM,SAAUK,GAElG,OADWA,EAAKe,KACF,WAAa,aAC1B,SAAUC,GAEX,OADaA,EAAMC,OACH,SAAW,SAC1B,SAAUC,GAEX,OADYA,EAAMC,SAEjB,SAAUC,GAEX,OADcA,EAAMC,WAItBhC,EAAQC,QAxBG,SAAc19B,GACvB,IAAI4H,EAAW5H,EAAM4H,SACjB0d,EAdN,SAAkC9tB,EAAKiE,GACrC,IAAImF,EAAS,GAEb,IAAK,IAAIpQ,KAAKgH,EACRiE,EAAKb,QAAQpK,IAAM,GAClBhB,OAAOU,UAAUL,eAAee,KAAK4G,EAAKhH,KAC/CoQ,EAAOpQ,GAAKgH,EAAIhH,IAGlB,OAAOoQ,EAKS8+B,CAAyB1/B,EAAO,CAAC,aAEjD,OAAOo5B,EAAMnsB,cAAciyB,EAAW5Z,EAAW1d,K,iCCnDnDpY,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAGT,IAIgC+F,EAJ5BmoC,EAAqB,EAAQ,KAE7BC,GAE4BpoC,EAFiBmoC,IAGjCnoC,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,GAIbimC,EAAQC,QAAU,IAAIkC,EAAoBlC,S,iCCd1CluC,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAGT,IAIgC+F,EAJ5BqoC,EAAiB,EAAQ,KAEzBC,GAE4BtoC,EAFaqoC,IAG7BroC,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,GAIbimC,EAAQC,SAAU,EAAIoC,EAAgBpC,SAAS,CAC7CqC,MAAO,CAAC,eAAgB,gBAAiB,aACzCC,SAAU,YACVC,YAAa,e,iCCjBfzwC,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAETgsC,EAAQyC,KAAOzC,EAAQC,aAAUr+B,EAEjC,IAEI8gC,EAAa5B,EAFA,EAAQ,MAMrB6B,EAAY7B,EAFA,EAAQ,MAIpB8B,EAAW7wC,OAAOa,QAAU,SAAUuQ,GACxC,IAAK,IAAIpQ,EAAI,EAAGA,EAAIE,UAAUC,OAAQH,IAAK,CACzC,IAAI8vC,EAAS5vC,UAAUF,GAEvB,IAAK,IAAIkD,KAAO4sC,EACV9wC,OAAOU,UAAUL,eAAee,KAAK0vC,EAAQ5sC,KAC/CkN,EAAOlN,GAAO4sC,EAAO5sC,IAK3B,OAAOkN,GAGL2/B,EAAe,WACjB,SAASC,EAAiB5/B,EAAQZ,GAChC,IAAK,IAAIxP,EAAI,EAAGA,EAAIwP,EAAMrP,OAAQH,IAAK,CACrC,IAAIiwC,EAAazgC,EAAMxP,GACvBiwC,EAAWnpC,WAAampC,EAAWnpC,aAAc,EACjDmpC,EAAWlpC,cAAe,EACtB,UAAWkpC,IAAYA,EAAWC,UAAW,GACjDlxC,OAAO4H,eAAewJ,EAAQ6/B,EAAW/sC,IAAK+sC,IAIlD,OAAO,SAAUE,EAAaC,EAAYC,GAGxC,OAFID,GAAYJ,EAAiBG,EAAYzwC,UAAW0wC,GACpDC,GAAaL,EAAiBG,EAAaE,GACxCF,GAdQ,GAoBfvH,EAoBJ,SAAiC5hC,GAC/B,GAAIA,GAAOA,EAAIwmC,WACb,OAAOxmC,EAEP,IAAIwnC,EAAS,GAEb,GAAW,MAAPxnC,EACF,IAAK,IAAI9D,KAAO8D,EACVhI,OAAOU,UAAUL,eAAee,KAAK4G,EAAK9D,KAAMsrC,EAAOtrC,GAAO8D,EAAI9D,IAK1E,OADAsrC,EAAOtB,QAAUlmC,EACVwnC,EAjCCC,CAFC,EAAQ,IAIjB6B,EAAe,EAAQ,KAEvBC,EAAc,EAAQ,IAMtBhD,GAJS,EAAQ,GAIIQ,EAFD,EAAQ,MAM5ByC,EAAsBzC,EAFD,EAAQ,MAM7B0C,EAAgB1C,EAFD,EAAQ,MAqB3B,SAASA,EAAuB/mC,GAC9B,OAAOA,GAAOA,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,GAUb,SAAS0pC,EAA2BC,EAAMvwC,GACxC,IAAKuwC,EACH,MAAM,IAAIC,eAAe,6DAG3B,OAAOxwC,GAAyB,kBAATA,GAAqC,oBAATA,EAA8BuwC,EAAPvwC,EAmB5E,IAAIqoC,EAAU,SAAUoI,GAGtB,SAASpI,IACP,IAAImF,EAEAkD,EAAOphC,GApCf,SAAyBqhC,EAAUZ,GACjC,KAAMY,aAAoBZ,GACxB,MAAM,IAAIzuC,UAAU,qCAoCpBsvC,CAAgBxxC,KAAMipC,GAEtB,IAAK,IAAIwI,EAAO/wC,UAAUC,OAAQkD,EAAOlE,MAAM8xC,GAAOC,EAAO,EAAGA,EAAOD,EAAMC,IAC3E7tC,EAAK6tC,GAAQhxC,UAAUgxC,GAGzB,OAAeJ,EAASphC,EAAQghC,EAA2BlxC,MAAOouC,EAAOnF,EAAQvpC,WAAaF,OAAOmyC,eAAe1I,IAAUroC,KAAKC,MAAMutC,EAAM,CAACpuC,MAAM4B,OAAOiC,KAAiBqM,EAAMC,MAAQ,CAC1Lk+B,QAAQ,EACRuD,WAAW,EACX50B,UAAM3N,EACNoH,IAAK,GACLD,KAAM,IACLtG,EAAMiB,kBAAoB,WAC3BjB,EAAM5F,SAEgB,qBAAXsiC,SACTA,OAAOv7B,iBAAiB,YAAanB,EAAM2hC,iBAC3CjF,OAAOv7B,iBAAiB,UAAWnB,EAAM4hC,iBAE1C5hC,EAAMoB,qBAAuB,WACR,qBAAXs7B,SACTA,OAAOr7B,oBAAoB,YAAarB,EAAM2hC,iBAC9CjF,OAAOr7B,oBAAoB,UAAWrB,EAAM4hC,iBAE7C5hC,EAAM6hC,2BAA4B,EAAI5B,EAAWzC,UAAS,WAC3Dx9B,EAAM5F,WACL,KAAM4F,EAAM8hC,gBAAkB,WAC/B9hC,EAAMgB,SAAS,CACb8L,UAAM3N,IAGRa,EAAM5F,UACL4F,EAAM2hC,gBAAkB,WACzB3hC,EAAMgB,SAAS,CACb0gC,WAAW,IAGb1hC,EAAM5F,UACL4F,EAAM4hC,cAAgB,WACvB5hC,EAAMgB,SAAS,CACb0gC,WAAW,IAGb1hC,EAAM5F,UACL4F,EAAM+hC,gBAAkB,SAAUjtB,GACnCA,EAAG7O,iBACH6O,EAAG3U,kBAEH,IAAI2M,EAAO9M,EAAMF,MAAMub,OAAO2mB,qBAE9BhiC,EAAMgB,SAAS,CACb8L,KAAMA,KAEP9M,EAAM5F,OAAS,WAChB,IAAI6nC,EAAcjiC,EAAMF,MACpBvO,EAAQ0wC,EAAY1wC,MAEpBub,EADSm1B,EAAY5mB,OACP2mB,qBACdE,EAAYxF,OAAOyF,eAKvB,KAFkB5wC,EAAM2wC,UAAUE,aAAeF,EAAUE,cAEvCt1B,EAApB,CAkBA,IAAIqxB,GAAS,EACb,GAAK5sC,EAAM8wC,WAAX,CAE8B,aAA1B9wC,EAAM8wC,WAAW3qC,OAAqBymC,GAAS,GAE/C5sC,EAAM8wC,WAAW3qC,KAAKmlC,MAAM,UAASsB,GAAS,GAE9Cn+B,EAAMC,MAAMyhC,YAAc50B,IAAMqxB,GAAS,GAC7C,IAAImE,EAAW,CACbnE,OAAQA,EACRuD,UAAW1hC,EAAMC,MAAMyhC,UACvB50B,KAAM9M,EAAMC,MAAM6M,MAAQA,EAC1BvG,SAAKpH,EACLmH,UAAMnH,GAGJsP,OAAO,EAEX,GAAI3B,EACF,IACE2B,GAAO,EAAIoyB,EAAY0B,aAAaz1B,GAAMuC,wBAC1C,MAAOzc,SAEJ,GAAIsvC,EAAUM,WAAa,EAAG,CAEnC/zB,EADYyzB,EAAUO,WAAW,GACpBpzB,wBAGf,GAAKZ,GAASzO,EAAM0iC,OAAqB,IAAbj0B,EAAKlI,KAA2B,IAAdkI,EAAKnI,MAAnD,CAIA,IAAIA,EAAOmI,EAAKnI,KAAOo2B,OAAOiG,QAAU3iC,EAAM0iC,KAAKE,YAAc,EAAIn0B,EAAKrJ,MAAQ,EAClFk9B,EAAS/7B,IAAM1P,KAAKgsC,MAAMp0B,EAAKlI,IAAMm2B,OAAOoG,QAAU9iC,EAAM0iC,KAAKK,cAAgB,KACjFT,EAASh8B,KAAOzP,KAAKgsC,MAAMhsC,KAAKmwB,IAnBlB,GAmB+B1gB,IAAS,MAEjD,EAAI45B,EAAU1C,SAASx9B,EAAMC,MAAOqiC,IACvCtiC,EAAMgB,SAASshC,UAtDf,GAAItiC,EAAMC,MAAMk+B,OAAQ,CACtB,IAAI6E,EAAY,CACdtB,UAAW1hC,EAAMC,MAAMyhC,UACvBvD,QAAQ,EACRrxB,UAAM3N,EACNoH,IAAK,GACLD,KAAM,KAGH,EAAI45B,EAAU1C,SAASx9B,EAAMC,MAAO+iC,IACvChjC,EAAMgB,SAASgiC,KA8CZhC,EAA2BhhC,EAAnCohC,GA2BL,OA3KF,SAAmB6B,EAAUC,GAC3B,GAA0B,oBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAIlxC,UAAU,kEAAoEkxC,GAG1FD,EAASjzC,UAAYV,OAAOW,OAAOizC,GAAcA,EAAWlzC,UAAW,CACrED,YAAa,CACXwB,MAAO0xC,EACP7rC,YAAY,EACZopC,UAAU,EACVnpC,cAAc,KAGd6rC,IAAY5zC,OAAOC,eAAiBD,OAAOC,eAAe0zC,EAAUC,GAAcD,EAASzzC,UAAY0zC,GAI3GC,CAAUpK,EAASoI,GAkInBd,EAAatH,EAAS,CAAC,CACrBvlC,IAAK,SACLjC,MAAO,WACL,IAAI6xC,EAAStzC,KAET6I,EAAQ,CACV4N,IAAKzW,KAAKmQ,MAAMsG,IAChBD,KAAMxW,KAAKmQ,MAAMqG,MAEnB,OAAO4yB,EAAMnsB,cAAc6zB,EAAayC,OAAQ,KAAMnK,EAAMnsB,cAAcizB,EAAM,CAC9E7B,OAAQruC,KAAKmQ,MAAMk+B,OACnBr9B,IAAK,SAAao+B,GAChB,OAAOkE,EAAOV,KAAOxD,GAEvBvmC,MAAOA,GACN7I,KAAKmQ,MAAM6M,KAAOosB,EAAMnsB,cAAcg0B,EAAcvD,QAAS2C,EAAS,GAAIrwC,KAAKgQ,MAAO,CACvFgN,KAAMhd,KAAKmQ,MAAM6M,KACjBw2B,OAAQxzC,KAAKgyC,mBACT5I,EAAMnsB,cAAc+zB,EAAoBtD,QAAS2C,EAAS,CAC9DoD,aAAczzC,KAAKiyC,iBAClBjyC,KAAKgQ,cAILi5B,EA3JK,CA4JZG,EAAMqD,WAERgB,EAAQC,QAAUzE,EAElB,IAAIiH,EAAOzC,EAAQyC,KAAOnC,EAAmBL,QAAQ39B,IAAIk+B,WAAW,CAClEC,YAAa,gBACbC,YAAa,gBAFWJ,CAGvB,CAAC,8CAA+C,0DAA2D,2XAA8X,kGAAmG,iCAAiC,SAAU/9B,GACxnB,OAAOA,EAAMtD,MAAMgN,OAAS,OAC3B,SAAU1J,GACX,OAAOA,EAAMtD,MAAMgnC,qBAClB,SAAU1jC,GACX,OAAOA,EAAMtD,MAAMgnC,qBAClB,SAAUpE,GAEX,OADaA,EAAMjB,QACF,iG,iCCnSnB7uC,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAGT,IAIgC+F,EAJ5BsmC,EAAoB,EAAQ,IAUhC,IAAI6F,IAN4BnsC,EAFgBsmC,IAGhCtmC,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,IAIsBkmC,QAAQ39B,IAAIk+B,WAAW,CACxDC,YAAa,YACbC,YAAa,gBAFCJ,CAGb,CAAC,oCAAqC,wDAAwD,SAAU/9B,GACzG,OAAOA,EAAMtD,MAAMknC,eAGrBnG,EAAQC,QAAUiG,G,iCCrBlBn0C,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAGT,IAwCgC+F,EAxC5B6oC,EAAW7wC,OAAOa,QAAU,SAAUuQ,GACxC,IAAK,IAAIpQ,EAAI,EAAGA,EAAIE,UAAUC,OAAQH,IAAK,CACzC,IAAI8vC,EAAS5vC,UAAUF,GAEvB,IAAK,IAAIkD,KAAO4sC,EACV9wC,OAAOU,UAAUL,eAAee,KAAK0vC,EAAQ5sC,KAC/CkN,EAAOlN,GAAO4sC,EAAO5sC,IAK3B,OAAOkN,GAGL2/B,EAAe,WACjB,SAASC,EAAiB5/B,EAAQZ,GAChC,IAAK,IAAIxP,EAAI,EAAGA,EAAIwP,EAAMrP,OAAQH,IAAK,CACrC,IAAIiwC,EAAazgC,EAAMxP,GACvBiwC,EAAWnpC,WAAampC,EAAWnpC,aAAc,EACjDmpC,EAAWlpC,cAAe,EACtB,UAAWkpC,IAAYA,EAAWC,UAAW,GACjDlxC,OAAO4H,eAAewJ,EAAQ6/B,EAAW/sC,IAAK+sC,IAIlD,OAAO,SAAUE,EAAaC,EAAYC,GAGxC,OAFID,GAAYJ,EAAiBG,EAAYzwC,UAAW0wC,GACpDC,GAAaL,EAAiBG,EAAaE,GACxCF,GAdQ,GAoBfvH,EAYJ,SAAiC5hC,GAC/B,GAAIA,GAAOA,EAAIwmC,WACb,OAAOxmC,EAEP,IAAIwnC,EAAS,GAEb,GAAW,MAAPxnC,EACF,IAAK,IAAI9D,KAAO8D,EACVhI,OAAOU,UAAUL,eAAee,KAAK4G,EAAK9D,KAAMsrC,EAAOtrC,GAAO8D,EAAI9D,IAK1E,OADAsrC,EAAOtB,QAAUlmC,EACVwnC,EAzBCC,CAFC,EAAQ,IAIjB4E,EAAmB,EAAQ,KAE3BC,GAE4BtsC,EAFeqsC,IAG/BrsC,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,GAuCb,SAAS0pC,EAA2BC,EAAMvwC,GACxC,IAAKuwC,EACH,MAAM,IAAIC,eAAe,6DAG3B,OAAOxwC,GAAyB,kBAATA,GAAqC,oBAATA,EAA8BuwC,EAAPvwC,EAmB5E,IAAImzC,EAAkB,SAAU1C,GAG9B,SAAS0C,IACP,IAAI3F,EAEAkD,EAAOphC,GApCf,SAAyBqhC,EAAUZ,GACjC,KAAMY,aAAoBZ,GACxB,MAAM,IAAIzuC,UAAU,qCAoCpBsvC,CAAgBxxC,KAAM+zC,GAEtB,IAAK,IAAItC,EAAO/wC,UAAUC,OAAQkD,EAAOlE,MAAM8xC,GAAOC,EAAO,EAAGA,EAAOD,EAAMC,IAC3E7tC,EAAK6tC,GAAQhxC,UAAUgxC,GAGzB,OAAeJ,EAASphC,EAAQghC,EAA2BlxC,MAAOouC,EAAO2F,EAAgBr0C,WAAaF,OAAOmyC,eAAeoC,IAAkBnzC,KAAKC,MAAMutC,EAAM,CAACpuC,MAAM4B,OAAOiC,KAAiBqM,EAAMoX,QAAU,SAAUtC,GACtN,IAAImtB,EAAcjiC,EAAMF,MACpBgD,EAAOm/B,EAAYn/B,KACnBghC,EAAS7B,EAAY6B,OACrBp8B,EAAWu6B,EAAYv6B,SACvBq8B,EAAO7K,EAAM8K,SAAS95B,KAAKxC,IAC/B,EAAIk8B,EAAkBpG,SAAS16B,GAC3BghC,GAAQA,IAERC,GAAQA,EAAKjkC,OAAuC,oBAAvBikC,EAAKjkC,MAAMsX,SAC1C2sB,EAAKjkC,MAAMsX,QAAQtC,IAEZksB,EAA2BhhC,EAAnCohC,GAmBL,OA7DF,SAAmB6B,EAAUC,GAC3B,GAA0B,oBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAIlxC,UAAU,kEAAoEkxC,GAG1FD,EAASjzC,UAAYV,OAAOW,OAAOizC,GAAcA,EAAWlzC,UAAW,CACrED,YAAa,CACXwB,MAAO0xC,EACP7rC,YAAY,EACZopC,UAAU,EACVnpC,cAAc,KAGd6rC,IAAY5zC,OAAOC,eAAiBD,OAAOC,eAAe0zC,EAAUC,GAAcD,EAASzzC,UAAY0zC,GAI3GC,CAAUU,EAAiB1C,GA4B3Bd,EAAawD,EAAiB,CAAC,CAC7BrwC,IAAK,SACLjC,MAAO,WACL,IAAI0yC,EAASn0C,KAAKgQ,MAGd4H,GAFQu8B,EAAOnhC,KACLmhC,EAAOH,OACNG,EAAOv8B,UAClBw8B,EA9EV,SAAkC5sC,EAAKiE,GACrC,IAAImF,EAAS,GAEb,IAAK,IAAIpQ,KAAKgH,EACRiE,EAAKb,QAAQpK,IAAM,GAClBhB,OAAOU,UAAUL,eAAee,KAAK4G,EAAKhH,KAC/CoQ,EAAOpQ,GAAKgH,EAAIhH,IAGlB,OAAOoQ,EAqEQ8+B,CAAyByE,EAAQ,CAAC,OAAQ,SAAU,aAE3DF,EAAO7K,EAAM8K,SAAS95B,KAAKxC,GAC/B,OAAOwxB,EAAMiL,aAAaJ,EAAM5D,EAAS,GAAI+D,EAAM,CACjD9sB,QAAStnB,KAAKsnB,eAKbysB,EA7Ca,CA8CpB3K,EAAMqD,WAERgB,EAAQC,QAAUqG,G,iCC7JlBv0C,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAETgsC,EAAQ6G,WAAa7G,EAAQ8G,QAAU9G,EAAQ+G,eAAYnlC,EAE3D,IAAIghC,EAAW7wC,OAAOa,QAAU,SAAUuQ,GACxC,IAAK,IAAIpQ,EAAI,EAAGA,EAAIE,UAAUC,OAAQH,IAAK,CACzC,IAAI8vC,EAAS5vC,UAAUF,GAEvB,IAAK,IAAIkD,KAAO4sC,EACV9wC,OAAOU,UAAUL,eAAee,KAAK0vC,EAAQ5sC,KAC/CkN,EAAOlN,GAAO4sC,EAAO5sC,IAK3B,OAAOkN,GAGL2/B,EAAe,WACjB,SAASC,EAAiB5/B,EAAQZ,GAChC,IAAK,IAAIxP,EAAI,EAAGA,EAAIwP,EAAMrP,OAAQH,IAAK,CACrC,IAAIiwC,EAAazgC,EAAMxP,GACvBiwC,EAAWnpC,WAAampC,EAAWnpC,aAAc,EACjDmpC,EAAWlpC,cAAe,EACtB,UAAWkpC,IAAYA,EAAWC,UAAW,GACjDlxC,OAAO4H,eAAewJ,EAAQ6/B,EAAW/sC,IAAK+sC,IAIlD,OAAO,SAAUE,EAAaC,EAAYC,GAGxC,OAFID,GAAYJ,EAAiBG,EAAYzwC,UAAW0wC,GACpDC,GAAaL,EAAiBG,EAAaE,GACxCF,GAdQ,GAoBfvH,EAoBJ,SAAiC5hC,GAC/B,GAAIA,GAAOA,EAAIwmC,WACb,OAAOxmC,EAEP,IAAIwnC,EAAS,GAEb,GAAW,MAAPxnC,EACF,IAAK,IAAI9D,KAAO8D,EACVhI,OAAOU,UAAUL,eAAee,KAAK4G,EAAK9D,KAAMsrC,EAAOtrC,GAAO8D,EAAI9D,IAK1E,OADAsrC,EAAOtB,QAAUlmC,EACVwnC,EAjCCC,CAFC,EAAQ,IAMjBlB,EAAqBQ,EAFD,EAAQ,KAM5BkG,EAAYlG,EAFD,EAAQ,MAMnBmG,EAASnG,EAFD,EAAQ,MAIpB,SAASA,EAAuB/mC,GAC9B,OAAOA,GAAOA,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,GAmDb,IAAImtC,EAAO,SAAUtD,GAGnB,SAASsD,IAGP,OApCJ,SAAyBpD,EAAUZ,GACjC,KAAMY,aAAoBZ,GACxB,MAAM,IAAIzuC,UAAU,qCAgCpBsvC,CAAgBxxC,KAAM20C,GA5B1B,SAAoCxD,EAAMvwC,GACxC,IAAKuwC,EACH,MAAM,IAAIC,eAAe,6DAG3B,OAAOxwC,GAAyB,kBAATA,GAAqC,oBAATA,EAA8BuwC,EAAPvwC,EAyBjEswC,CAA2BlxC,MAAO20C,EAAKj1C,WAAaF,OAAOmyC,eAAegD,IAAO9zC,MAAMb,KAAMU,YA2FtG,OAjHF,SAAmByyC,EAAUC,GAC3B,GAA0B,oBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAIlxC,UAAU,kEAAoEkxC,GAG1FD,EAASjzC,UAAYV,OAAOW,OAAOizC,GAAcA,EAAWlzC,UAAW,CACrED,YAAa,CACXwB,MAAO0xC,EACP7rC,YAAY,EACZopC,UAAU,EACVnpC,cAAc,KAGd6rC,IAAY5zC,OAAOC,eAAiBD,OAAOC,eAAe0zC,EAAUC,GAAcD,EAASzzC,UAAY0zC,GAI3GC,CAAUsB,EAAMtD,GAQhBd,EAAaoE,EAAM,CAAC,CAClBjxC,IAAK,SACLjC,MAAO,WACL,IAAI6xC,EAAStzC,KAETm0C,EAASn0C,KAAKgQ,MACd4H,EAAWu8B,EAAOv8B,SAClB2T,EAAS4oB,EAAO5oB,OAChBnoB,EAAW+wC,EAAO/wC,SAClBwxC,EAAaT,EAAOS,WACpB58B,EAAOm8B,EAAOn8B,KACd5G,EAAWma,EAAO9pB,MAAM2P,SACxB4V,EAAWuE,EAAOspB,iBAAiBzjC,EAAU4G,EAAKtU,KAClDoxC,EAAa9tB,EAAS8tB,aACtBC,EAAgB/tB,EAAS+tB,gBACzBC,EAAYhuB,EAASguB,YACrBC,EAAejuB,EAASiuB,eACxBC,EAAal9B,EAAKnQ,KAAKR,IAAI,YAC3B8tC,EAAkBnuB,EAASouB,MAAMvtC,KAAKR,IAAI,iBAC1CguC,EAAW9pB,EAAO+pB,uBAAyBH,EAC3CI,EAAevuB,EAASouB,MAAMvtC,KAAKR,IAAI,gBACvCmuC,EAAkBxuB,EAASouB,MAAMvtC,KAAKR,IAAI,mBAC1CouC,EAAgBF,GAAgBA,EAAajR,SAAStd,EAAS0uB,eAC/DC,EAAmBH,GAAmBA,EAAgBlR,SAAStd,EAAS4uB,kBAC5E,OAAOxM,EAAMnsB,cAAc44B,EAAUxF,EAAS,CAC5Cr/B,IAAK,SAAao9B,GAChB,OAAOkF,EAAOwC,KAAO1H,GAEvB0G,WAAYA,EACZC,cAAeA,EACfG,WAAYA,EACZ5tB,QAAS,WACP,OAAOiE,EAAOwqB,cAAc/uB,EAASouB,SAEtCR,IAAcxxC,GAAYgmC,EAAMnsB,cAAcmsB,EAAM4M,SAAU,KAAMjB,GAAiBD,GAAc1L,EAAMnsB,cAAcmsB,EAAM4M,SAAU,KAAM5M,EAAMnsB,cAAcu3B,EAAW,CAC7KyB,iBAAiB,EACjBf,WAAYC,EACZ7tB,QAAS,SAAiBtC,GACxBA,EAAG7O,iBACH6O,EAAG3U,kBAEC8kC,EACF5pB,EAAOwqB,cAAc/uB,EAASouB,OAE9B7pB,EAAO2qB,YAAYC,UAGrB/M,EAAMnsB,cAAcw3B,EAAU/G,QAAS,CACzCniB,OAAQA,EACRuqB,KAAM91C,KAAK81C,KACXzH,OAAQ8G,EACRvtC,KAAM,WACHmtC,GAAiB3L,EAAMnsB,cAAcmsB,EAAM4M,SAAU,KAAM5M,EAAMnsB,cAAcs3B,EAAS,CAC3FO,WAAYA,EACZE,UAAWA,EACXE,WAAYO,EACZQ,iBAAiB,EACjB3uB,QAAS,SAAiBtC,GACxBA,EAAG7O,iBACH6O,EAAG3U,kBACHkb,EAAO6qB,WAAWlB,GAAcC,GAAiBgB,UAEjDd,GAAYjM,EAAMnsB,cAAcw3B,EAAU/G,QAAS,CACrDniB,OAAQA,EACRuqB,KAAM91C,KAAK81C,KACXzH,OAAQoH,EACR7tC,KAAM,SACHktC,GAAc1L,EAAMnsB,cAAcmsB,EAAM4M,SAAU,KAAM5M,EAAMnsB,cAAcq3B,EAAY,CAC3FS,cAAeA,EACfE,aAAcA,EACdC,WAAYS,EACZM,iBAAiB,EACjB3uB,QAAS,SAAiBtC,GACxBA,EAAG7O,iBACH6O,EAAG3U,kBACHkb,EAAO8qB,cAAcnB,GAAcC,GAAiBgB,UAEpDd,GAAYjM,EAAMnsB,cAAcw3B,EAAU/G,QAAS,CACrDniB,OAAQA,EACRuqB,KAAM91C,KAAK81C,KACXzH,OAAQsH,EACR/tC,KAAM,aACFwhC,EAAMnsB,cAAcq5B,EAAY,CACpC/G,MAAOv3B,EAAKnQ,KAAKR,IAAI,UACpBuQ,QAIA+8B,EAjGE,CAkGTvL,EAAMqD,WAEJ+H,EAAY/G,EAAQ+G,WAAY,EAAIzG,EAAmBL,SAASgH,EAAOhH,SAASO,WAAW,CAC7FC,YAAa,kBACbC,YAAa,gBAFqB,CAGjC,CAAC,8DAA+D,6CAA6C,SAAUn+B,GACxH,OAAOA,EAAMtD,MAAMU,cAEjBmnC,EAAU9G,EAAQ8G,SAAU,EAAIxG,EAAmBL,SAASgH,EAAOhH,SAASO,WAAW,CACzFC,YAAa,gBACbC,YAAa,gBAFiB,CAG7B,CAAC,oEAAqE,IAAK,IAAK,KAAK,SAAUn+B,GAChG,OAAOA,EAAMtD,MAAMU,cAClB,SAAU4C,GACX,OAAOA,EAAM8kC,YAAc,+EAC1B,SAAU9kC,GACX,OAAOA,EAAMglC,WAAa,qFAExBV,EAAa7G,EAAQ6G,YAAa,EAAIvG,EAAmBL,SAASgH,EAAOhH,SAASO,WAAW,CAC/FC,YAAa,mBACbC,YAAa,gBAFuB,CAGnC,CAAC,qEAAsE,IAAK,IAAK,KAAK,SAAUn+B,GACjG,OAAOA,EAAMtD,MAAMU,cAClB,SAAU4C,GACX,OAAOA,EAAM+kC,eAAiB,2EAC7B,SAAU/kC,GACX,OAAOA,EAAMilC,cAAgB,6EAG3BqB,EAAavI,EAAmBL,QAAQ39B,IAAIk+B,WAAW,CACzDC,YAAa,mBACbC,YAAa,gBAFEJ,CAGd,CAAC,+BAAgC,MAAM,SAAU/9B,GAClD,OAAOA,EAAMu/B,SAGXsG,EAAW9H,EAAmBL,QAAQ6I,GAAGtI,WAAW,CACtDC,YAAa,iBACbC,YAAa,gBAFAJ,CAGZ,CAAC,6CAA8C,iCAAkC,IAAK,KAAK,SAAU/9B,GACtG,OAAOA,EAAMtD,MAAM8pC,gBAClB,SAAUxmC,GACX,OAAOA,EAAMklC,WAAallC,EAAMtD,MAAM+pC,wBAA0BzmC,EAAMtD,MAAMU,cAC3E,SAAU4C,GACX,OAAOA,EAAM8kC,YAAc,+BAG7BrH,EAAQC,QAAUiH,G,iCC3PlBn1C,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAETgsC,EAAQiJ,OAASjJ,EAAQ/gC,WAAQ2C,EAEjC,IAoCIsnC,EAAQrF,EAlCRsF,EAAgBrI,EAFD,EAAQ,MAIvB8B,EAAW7wC,OAAOa,QAAU,SAAUuQ,GACxC,IAAK,IAAIpQ,EAAI,EAAGA,EAAIE,UAAUC,OAAQH,IAAK,CACzC,IAAI8vC,EAAS5vC,UAAUF,GAEvB,IAAK,IAAIkD,KAAO4sC,EACV9wC,OAAOU,UAAUL,eAAee,KAAK0vC,EAAQ5sC,KAC/CkN,EAAOlN,GAAO4sC,EAAO5sC,IAK3B,OAAOkN,GAGL2/B,EAAe,WACjB,SAASC,EAAiB5/B,EAAQZ,GAChC,IAAK,IAAIxP,EAAI,EAAGA,EAAIwP,EAAMrP,OAAQH,IAAK,CACrC,IAAIiwC,EAAazgC,EAAMxP,GACvBiwC,EAAWnpC,WAAampC,EAAWnpC,aAAc,EACjDmpC,EAAWlpC,cAAe,EACtB,UAAWkpC,IAAYA,EAAWC,UAAW,GACjDlxC,OAAO4H,eAAewJ,EAAQ6/B,EAAW/sC,IAAK+sC,IAIlD,OAAO,SAAUE,EAAaC,EAAYC,GAGxC,OAFID,GAAYJ,EAAiBG,EAAYzwC,UAAW0wC,GACpDC,GAAaL,EAAiBG,EAAaE,GACxCF,GAdQ,GAsBfvH,EA4CJ,SAAiC5hC,GAC/B,GAAIA,GAAOA,EAAIwmC,WACb,OAAOxmC,EAEP,IAAIwnC,EAAS,GAEb,GAAW,MAAPxnC,EACF,IAAK,IAAI9D,KAAO8D,EACVhI,OAAOU,UAAUL,eAAee,KAAK4G,EAAK9D,KAAMsrC,EAAOtrC,GAAO8D,EAAI9D,IAK1E,OADAsrC,EAAOtB,QAAUlmC,EACVwnC,EAzDCC,CAFC,EAAQ,IAMjB8B,GAFS,EAAQ,GAEH,EAAQ,KAEtBjD,EAAoB,EAAQ,IAE5BC,EAAqBQ,EAAuBT,GAE5C+I,EAAS,EAAQ,KAIjBC,EAAWvI,EAFD,EAAQ,MAMlBwI,EAAyBxI,EAFD,EAAQ,MAMhCyI,EAAazI,EAFD,EAAQ,MAMpB0I,EAAS1I,EAFD,EAAQ,MAMhB2I,EAAe3I,EAFD,EAAQ,MAMtB4I,EAAY5I,EAFD,EAAQ,MAMnB6I,EAAa7I,EAFD,EAAQ,MAMpB8I,EAAY9I,EAFD,EAAQ,MAqBvB,SAASA,EAAuB/mC,GAC9B,OAAOA,GAAOA,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,GAIb,SAAS8vC,EAAmBC,GAC1B,GAAI53C,MAAMsC,QAAQs1C,GAAM,CACtB,IAAK,IAAI/2C,EAAI,EAAGg3C,EAAO73C,MAAM43C,EAAI52C,QAASH,EAAI+2C,EAAI52C,OAAQH,IACxDg3C,EAAKh3C,GAAK+2C,EAAI/2C,GAGhB,OAAOg3C,EAEP,OAAO73C,MAAM4qC,KAAKgN,GA2EV9J,EAAQ/gC,MAAQmqC,EAAOY,MACtBhK,EAAQiJ,OAASI,EAASpJ,QADvC,IAEIgK,EAAiB,GACjBC,GAAsBrG,EAAQqF,EAAS,SAAUiB,GAGnD,SAASD,EAAmB3nC,GAC1B,IAAIsjC,EAAStzC,MArCjB,SAAyBuxC,EAAUZ,GACjC,KAAMY,aAAoBZ,GACxB,MAAM,IAAIzuC,UAAU,qCAqCpBsvC,CAAgBxxC,KAAM23C,GAEtB,IAAIznC,EAnCR,SAAoCihC,EAAMvwC,GACxC,IAAKuwC,EACH,MAAM,IAAIC,eAAe,6DAG3B,OAAOxwC,GAAyB,kBAATA,GAAqC,oBAATA,EAA8BuwC,EAAPvwC,EA8B5DswC,CAA2BlxC,MAAO23C,EAAmBj4C,WAAaF,OAAOmyC,eAAegG,IAAqB/2C,KAAKZ,KAAMgQ,IAEpIE,EAAM2nC,WAAa,KACnB3nC,EAAMwmC,OAAS,KAEfxmC,EAAM4nC,aAAe,SAAU9mC,GAC7Bd,EAAMqb,OAASva,GAGjBd,EAAMzO,MAAQ,WAEZ,OAAOyO,EAAMF,MAAMuuB,aAGrBruB,EAAM6nC,aAAe,SAAU3J,GAC7B,IAAI3sC,EAAQ2sC,EAAK3sC,MAEbyO,EAAMF,MAAM7M,WAAa+M,EAAMF,MAAM5M,UACvC8M,EAAMF,MAAM7M,SAAS1B,IAIzByO,EAAM8nC,WAAa,WACjB,IA7FqBp1C,EA6FjBwsC,GA7FiBxsC,EA+FrBg0C,EAAclJ,QAAQuK,MAAK,SAASC,EAAQlzB,GAC1C,IAAIjH,EAAOvd,EAAG23C,EAEd,OAAOvB,EAAclJ,QAAQ0K,MAAK,SAAkBC,GAClD,OACE,OAAQA,EAASC,KAAOD,EAAS/2C,MAC/B,KAAK,EACH,IAAK4O,EAAMF,MAAM5M,SAAU,CACzBi1C,EAAS/2C,KAAO,EAChB,MAGF,OAAO+2C,EAASE,OAAO,UAEzB,KAAK,EACH,GAAIroC,EAAMqb,OAAOvb,MAAMwoC,YAAa,CAClCH,EAAS/2C,KAAO,EAChB,MAGF,OAAO+2C,EAASE,OAAO,UAEzB,KAAK,EACH,IAAKvzB,EAAGyzB,qBAAsB,CAC5BJ,EAAS/2C,KAAO,EAChB,MAGF,OAAO+2C,EAASE,OAAO,UAEzB,KAAK,EAEHvzB,EAAG7O,iBACH6O,EAAG3U,kBACH0N,GAAQ,EAAIg5B,EAAuBrJ,SAAS1oB,GAC5CxkB,EAAI,EAEN,KAAK,GACH,KAAMA,EAAIud,EAAMpd,QAAS,CACvB03C,EAAS/2C,KAAO,GAChB,MAKF,KAFA62C,EAAQp6B,EAAMvd,IAEHoH,KAAK8wC,WAAW,UAAW,CACpCL,EAAS/2C,KAAO,GAChB,MAIF,OADA+2C,EAAS/2C,KAAO,GACT4O,EAAMyoC,gBAAgBR,GAE/B,KAAK,GACH33C,IACA63C,EAAS/2C,KAAO,GAChB,MAEF,KAAK,GACL,IAAK,MACH,OAAO+2C,EAASO,UAGrBV,EAAS5E,MA7JX,WACL,IAAIuF,EAAMj2C,EAAG/B,MAAMb,KAAMU,WACzB,OAAO,IAAIgd,SAAQ,SAAUC,EAASC,GAqBpC,OApBA,SAASk7B,EAAKp1C,EAAKS,GACjB,IACE,IAAI40C,EAAOF,EAAIn1C,GAAKS,GAChB1C,EAAQs3C,EAAKt3C,MACjB,MAAOC,GAEP,YADAkc,EAAOlc,GAIT,IAAIq3C,EAAKx3C,KAGP,OAAOmc,QAAQC,QAAQlc,GAAOk4B,MAAK,SAAUl4B,GAC3Cq3C,EAAK,OAAQr3C,MACZ,SAAUqB,GACXg2C,EAAK,QAASh2C,MALhB6a,EAAQlc,GAULq3C,CAAK,aAyIZ,OAAO,SAAUE,GACf,OAAO5J,EAAMvuC,MAAMb,KAAMU,YAtEV,GA0EnBwP,EAAMyoC,gBAAkB,SAAU76B,GAChC5N,EAAMqb,OAAOotB,gBAAgB76B,IAG/B5N,EAAM0M,YAAc,SAAUoI,GAC5BA,EAAG7O,kBAGLjG,EAAM8P,cAAgB,SAAUgF,EAAIuG,GAClC,IAAIjqB,EAAOZ,UAAUC,OAAS,QAAsB0O,IAAjB3O,UAAU,GAAmBA,UAAU,GAAK,aAC/E,GAAIwP,EAAMF,MAAM5M,SAAU,OAAO9B,IAEjC,OAAQ0jB,EAAGthB,KACT,IAAK,IACH,IAAI,EAAIszC,EAAWtJ,SAAS1oB,GAAK,OAAO9U,EAAM+oC,OAAOj0B,GACrD,MAEF,IAAK,QACH,IAAI,EAAIgyB,EAAWtJ,SAAS1oB,GAAK,OAAO9U,EAAMgpC,cAAcl0B,GAC5D,MAEF,IAAK,SACH,IAAI,EAAIgyB,EAAWtJ,SAAS1oB,GAAK,OAAO9U,EAAM0yB,SAAS5d,GAM3D,OAAO1jB,KAGT4O,EAAMipC,aAAe,WACNjpC,EAAMqb,OACZ6tB,wBAAwBC,SAGjCnpC,EAAMopC,WAAa,WACJppC,EAAMqb,OACZguB,sBAAsBF,SAG/BnpC,EAAMspC,UAAY,WAMhB,OALItpC,EAAM2nC,aAAe3nC,EAAMF,MAAM0mC,SACnCxmC,EAAMwmC,OAASrG,EAAS,GAAIyG,EAASpJ,QAASx9B,EAAMF,MAAM0mC,QAAU,IACpExmC,EAAM2nC,WAAa3nC,EAAMF,MAAM0mC,QAG1BxmC,EAAMwmC,QAGfxmC,EAAMyB,OAAS,WACb,IAAIwgC,EAAcjiC,EAAMF,MACpB5M,EAAW+uC,EAAY/uC,SACvBq2C,EAAWtH,EAAYsH,SACvB5nC,EAAcsgC,EAAYtgC,YAC1BonC,EAAS9G,EAAY8G,OAGrBT,GAFWrG,EAAYhvC,SACZgvC,EAAYvP,SACTuP,EAAYqG,aAC1BkB,EAAevH,EAAYuH,aAC3BC,EAAcxH,EAAYwH,YAC1BC,EAAqBzH,EAAYyH,mBACjCC,EAAoB1H,EAAY0H,kBAChCC,EAAc3H,EAAY2H,YAC1Bv+B,EAAY42B,EAAY52B,UACxB1S,EAAQspC,EAAYtpC,MACpBkxC,EAAO5H,EAAY4H,KAInB3F,GAHejC,EAAY6H,aACf7H,EAAYngC,UACdmgC,EAAYjvC,QAvPhC,SAAkCsE,EAAKiE,GACrC,IAAImF,EAAS,GAEb,IAAK,IAAIpQ,KAAKgH,EACRiE,EAAKb,QAAQpK,IAAM,GAClBhB,OAAOU,UAAUL,eAAee,KAAK4G,EAAKhH,KAC/CoQ,EAAOpQ,GAAKgH,EAAIhH,IAGlB,OAAOoQ,EA+OQ8+B,CAAyByC,EAAa,CAAC,WAAY,WAAY,cAAe,SAAU,WAAY,WAAY,cAAe,eAAgB,cAAe,qBAAsB,oBAAqB,cAAe,YAAa,QAAS,OAAQ,eAAgB,YAAa,aAE1RzlC,EAAQwD,EAAMF,MAAMtD,QAAUqtC,EAAOlD,EAAOkD,KAAOlD,EAAOY,OAC1DlZ,EAAcruB,EAAMF,MAAMuuB,YAM9B,MAJuC,kBAA5BruB,EAAMF,MAAMuuB,cACrBA,EAAc2Y,EAAaxJ,QAAQh8B,YAAYxB,EAAMF,MAAMuuB,cAGtD6K,EAAMnsB,cAAcg6B,EAAOvJ,QAAS,CACzC7kC,MAAOA,EACP0S,UAAWA,EACX4J,OAAQjV,EAAM8nC,WACd9yB,WAAYhV,EAAM0M,YAClBmI,YAAa7U,EAAM0M,YACnB2yB,MAAO,aACPE,QAAS,SACTJ,QAAQ,EACRF,MAAM,GACL/F,EAAMnsB,cAAc6wB,EAAkBmM,cAAe,CACtDvtC,MAAOA,GACN08B,EAAMnsB,cAAci9B,EAAc7J,EAAS,CAC5Cr/B,IAAKd,EAAM4nC,aACX50C,QAASgN,EAAMhN,QACfzB,MAAO88B,EACP4b,SAAU/C,EAAW1J,QACrB0M,QAAS/C,EAAU3J,QACnB77B,YAAaA,EACb6kC,OAAQxmC,EAAMspC,YACdjpC,UAAWL,EAAM8P,cACjB7c,SAAU+M,EAAM6nC,aAChBkB,OAAQA,EACRS,aAAcA,EACdC,YAAaA,EACbC,mBAAoBA,EACpBC,kBAAmBA,EACnBC,YAAaA,EACb12C,SAAUA,EACVi3C,YAAaj3C,EACbo1C,YAAaA,EACbiB,SAAUA,EACVx2C,QAASy0C,GACRtD,OAGL,IAAIkG,GAAiB,EAAInD,EAAUzJ,SAAS,CAC1C77B,YAAa7B,EAAM6B,YACnB0oC,iBAAkBvqC,EAAMuqC,mBAK1B,OADArqC,EAAMhN,QAAU,GAAGtB,OAAO01C,EAAmBtnC,EAAM9M,SAAUo0C,EAAmBgD,IACzEpqC,EAwFT,OA7UF,SAAmBijC,EAAUC,GAC3B,GAA0B,oBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAIlxC,UAAU,kEAAoEkxC,GAG1FD,EAASjzC,UAAYV,OAAOW,OAAOizC,GAAcA,EAAWlzC,UAAW,CACrED,YAAa,CACXwB,MAAO0xC,EACP7rC,YAAY,EACZopC,UAAU,EACVnpC,cAAc,KAGd6rC,IAAY5zC,OAAOC,eAAiBD,OAAOC,eAAe0zC,EAAUC,GAAcD,EAASzzC,UAAY0zC,GAO3GC,CAAUsE,EAAoBC,GAoO9BrH,EAAaoH,EAAoB,CAAC,CAChCj0C,IAAK,oBACLjC,MAAO,WACLzB,KAAKw6C,iBACDx6C,KAAKgQ,MAAM5M,WAEO,qBAAXwpC,QACTA,OAAOv7B,iBAAiB,UAAWrR,KAAKggB,eAGtChgB,KAAKgQ,MAAMgC,WACbhS,KAAKs5C,gBAGR,CACD51C,IAAK,qBACLjC,MAAO,SAA4Bg5C,GAC7BA,EAAUr3C,WAAapD,KAAKgQ,MAAM5M,UAAYpD,KAAKgQ,MAAMgC,WAC3DhS,KAAKs5C,eAGR,CACD51C,IAAK,uBACLjC,MAAO,WACiB,qBAAXmrC,QACTA,OAAOr7B,oBAAoB,UAAWvR,KAAKggB,iBAG9C,CACDtc,IAAK,iBACLjC,MAAO,WACL,IAAIi5C,EAAO9N,OAAOC,SAAS6N,KAC3B,GAAKA,EAEL,IACE,IAAIrd,EAAUjsB,SAASupC,cAAcD,GACjCrd,GAASA,EAAQud,eAAe,CAClCC,SAAU,WAEZ,MAAO/3C,GAIPg4C,QAAQC,KAAK,sCAAuCj4C,MAGvD,CACDY,IAAK,SACLjC,MAAO,SAAgBujB,GACrB,IAAIi0B,EAASj5C,KAAKgQ,MAAMipC,OAEpBA,IACFj0B,EAAG7O,iBACH6O,EAAG3U,kBACH4oC,EAAO,CACL13C,MAAM,OAIX,CACDmC,IAAK,gBACLjC,MAAO,SAAuBujB,GAC5B,IAAIi0B,EAASj5C,KAAKgQ,MAAMipC,OAEpBA,IACFj0B,EAAG7O,iBACH6O,EAAG3U,kBACH4oC,EAAO,CACL13C,MAAM,OAIX,CACDmC,IAAK,WACLjC,MAAO,SAAkBujB,GACvB,IAAI4d,EAAW5iC,KAAKgQ,MAAM4yB,SAEtBA,IACF5d,EAAG7O,iBACH6O,EAAG3U,kBACHuyB,SAKC+U,EA1TkC,CA2TzCvO,EAAMC,eAAgBsN,EAAO9+B,aAAe,CAC5C0mB,YAAa,GACb1sB,YAAa,6BACb+nC,mBAAoB,aACpBC,kBAAmB,aACnB32C,QAAS,GACTmtB,QAAS,QACRihB,GACC4I,GAAe,EAAInM,EAAmBL,SAASqD,EAAYiK,QAAQ/M,WAAW,CAChFC,YAAa,oBACbC,YAAa,gBAFI,CAGhB,CAAC,SAAU,eAAgB,gBAAiB,gBAAiB,mLAAoL,6BAA8B,qLAAsL,8EAA8E,SAAUn+B,GAC9hB,OAAOA,EAAMtD,MAAMsG,QAClB,SAAUhD,GACX,OAAOA,EAAMtD,MAAMU,cAClB,SAAU4C,GACX,OAAOA,EAAMtD,MAAM6zB,cAClB,SAAUvwB,GACX,OAAOA,EAAMtD,MAAM8zB,cAClB,SAAUxwB,GACX,OAAOA,EAAMtD,MAAMsQ,QAClB,SAAUhN,GACX,OAAOA,EAAM5M,SAAW,YAAc,UACrC,SAAU4M,GACX,OAAOA,EAAMtD,MAAMuuC,SAErBxN,EAAQC,QAAUiK,G,oBC7hBlBuD,EAAOzN,QAAU,IAA0B,qC,oBCA3CyN,EAAOzN,QAAU,IAA0B,oC,oBCA3CyN,EAAOzN,QAAU,IAA0B,oC,oBCA3CyN,EAAOzN,QAAU,IAA0B,oC,oBCA3CyN,EAAOzN,QAAU,IAA0B,oC,oHCE3CjuC,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAGT,IAAI4uC,EAAW7wC,OAAOa,QAAU,SAAUuQ,GACxC,IAAK,IAAIpQ,EAAI,EAAGA,EAAIE,UAAUC,OAAQH,IAAK,CACzC,IAAI8vC,EAAS5vC,UAAUF,GAEvB,IAAK,IAAIkD,KAAO4sC,EACV9wC,OAAOU,UAAUL,eAAee,KAAK0vC,EAAQ5sC,KAC/CkN,EAAOlN,GAAO4sC,EAAO5sC,IAK3B,OAAOkN,GAGLorB,EAAS,CACXmf,YAAa,UACbC,WAAY,UACZC,YAAa,UACbC,MAAO,OACPC,QAAS,2BACTC,MAAO,OACPC,QAAS,qBACTC,QAAS,UACTC,UAAW,UACXC,KAAM,UACNC,QAAS,UACTC,SAAU,WAGRC,EAAOtO,EAAQsO,KAAO1L,EAAS,GAAIrU,EAAQ,CAC7CuE,WAAY,sHACZyb,eAAgB,wEAChBxb,WAAY,IACZ9mB,OAAQ,IACRsD,KAAMgf,EAAO0f,QACb7pC,YAAa,UACboqC,cAAe,UACfC,UAAWlgB,EAAOsf,MAClBa,SAAUngB,EAAO0f,QACjBU,YAAa,UACbC,gBAAiB,UACjBC,WAAY,UACZC,aAAc,UACdC,QAAS,UACTC,WAAY,UACZC,aAAc,UACdC,SAAU,UACVC,WAAY,UACZC,YAAa,UACbC,aAAc,UACdC,cAAe,UACfC,gBAAiB,UACjBC,aAAc,UACdC,cAAe,YAGbzF,EAAQhK,EAAQgK,MAAQpH,EAAS,GAAI0L,EAAM,CAC7C3uC,WAAY4uB,EAAOsf,MACnBtoC,KAAMgpB,EAAOmf,YACb9oC,KAAM2pB,EAAOof,WACb1H,kBAAmB1X,EAAOof,WAC1B+B,aAAcnhB,EAAOuf,QACrB3H,YAAa5X,EAAOsf,MACpB8B,uBAAwBphB,EAAO2f,UAC/B0B,oBAAqBrhB,EAAO6f,QAC5ByB,wBAAyBthB,EAAOsf,MAChCiC,iBAAkBvhB,EAAOmf,YACzB3E,aAAcxa,EAAO4f,KACrB4B,cAAexhB,EAAO0f,QACtBjF,wBAAyB,UACzBwE,MAAOjf,EAAO8f,SACd2B,eAAgBzhB,EAAO2f,UACvB+B,WAAY1hB,EAAO4f,KACnB+B,eAAgB3hB,EAAO4f,KACvBgC,qBAAsB5hB,EAAO2f,YAGpBlO,EAAQsM,KAAO1J,EAAS,GAAI0L,EAAM,CAC3C3uC,WAAY4uB,EAAOmf,YACnBnoC,KAAMgpB,EAAOqf,YACbhpC,KAAM2pB,EAAOqf,YACb3H,kBAAmB1X,EAAOsf,MAC1B6B,aAAcnhB,EAAOyf,QACrB7H,YAAa5X,EAAOof,WACpBgC,uBAAwBphB,EAAOsf,MAC/B+B,oBAAqBrhB,EAAOqf,YAC5BiC,wBAAyBthB,EAAOmf,YAChCoC,iBAAkBvhB,EAAOof,WACzB5E,aAAcxa,EAAOof,WACrBoC,cAAexhB,EAAO0f,QACtBjF,wBAAyB,UACzBwE,MAAOjf,EAAOqf,YACdoC,eAAgBzhB,EAAOmf,YACvBuC,WAAY1hB,EAAOof,WACnBqB,WAAY,UACZkB,eAAgB3hB,EAAOof,WACvBwC,qBAAsB,uBAGxBnQ,EAAQC,QAAU+J,G,iCCvGlBj4C,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IA+GTgsC,EAAQC,QA7GK,CACX1lC,OAAQ,CACN61C,SAAU,CACRlP,MAAO,CAAC,CACN5B,MAAO,CACL39B,OAAQ,UAGZ0uC,MAAO,CAAC,KAEVC,SAAU,CACRpP,MAAO,CAAC,CACN5B,MAAO,CACL39B,OAAQ,UAGZ0uC,MAAO,CAAC,KAEVE,SAAU,CACRrP,MAAO,CAAC,CACN5B,MAAO,CACL39B,OAAQ,UAGZ0uC,MAAO,CAAC,KAEVG,SAAU,CACRtP,MAAO,CAAC,CACN5B,MAAO,CACL39B,OAAQ,UAGZ0uC,MAAO,CAAC,KAEVI,SAAU,CACRvP,MAAO,CAAC,CACN5B,MAAO,CACL39B,OAAQ,UAGZ0uC,MAAO,CAAC,KAEVK,SAAU,CACRxP,MAAO,CAAC,CACN5B,MAAO,CACL39B,OAAQ,UAGZ0uC,MAAO,CAAC,KAEV,cAAe,CACbA,MAAO,CAAC,KAEV,kBAAmB,CACjBM,QAAQ,GAEVpe,MAAO,CACLoe,QAAQ,GAEVphC,KAAM,CACJ2xB,MAAO,CAAC,CACN0P,QAAS,CAAC,WAGd,gBAAiB,CACfD,QAAQ,IAGZhtC,SAAU,CACRu9B,MAAO,CAAC,CACN5B,MAAO,CAAC,CACNnlC,KAAM,aACL,CACDA,KAAM,YACL,CACDA,KAAM,YACL,CACDA,KAAM,YACL,CACDA,KAAM,YACL,CACDA,KAAM,YACL,CACDA,KAAM,YACL,CACDA,KAAM,eACL,CACDA,KAAM,QACL,CACDA,KAAM,mBACL,CACDA,KAAM,SACL,CACDA,KAAM,iBACL,CACDA,KAAM,gBACL,CACDA,KAAM,aACL,CACDA,KAAM,iBACL,CACDA,KAAM,SACL,CACDA,KAAM,SAERqvB,IAAK,O,iCC5GXz3B,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,KAmHT,SAAiC+F,GAC/B,GAAIA,GAAOA,EAAIwmC,WACb,OAAOxmC,EAEP,IAAIwnC,EAAS,GAEb,GAAW,MAAPxnC,EACF,IAAK,IAAI9D,KAAO8D,EACVhI,OAAOU,UAAUL,eAAee,KAAK4G,EAAK9D,KAAMsrC,EAAOtrC,GAAO8D,EAAI9D,IAI1EsrC,EAAOtB,QAAUlmC,GA1HTynC,CAFC,EAAQ,IAIR,EAAQ,GAJrB,IAQIqP,EAAuB/P,EAFD,EAAQ,MAM9BgQ,EAAkBhQ,EAFD,EAAQ,MAMzBiQ,EAAwBjQ,EAFD,EAAQ,MAM/BkQ,EAAmBlQ,EAFD,EAAQ,MAM1BmQ,EAA2BnQ,EAFD,EAAQ,MAMlCoQ,EAAsBpQ,EAFD,EAAQ,MAM7BqQ,EAA0BrQ,EAFD,EAAQ,MAMjCsQ,EAAqBtQ,EAFD,EAAQ,MAM5BuQ,EAAgBvQ,EAFD,EAAQ,MAMvBwQ,EAAaxQ,EAFD,EAAQ,MAMpByQ,EAAwBzQ,EAFD,EAAQ,MAM/B0Q,EAAqB1Q,EAFD,EAAQ,MAM5B2Q,EAAsB3Q,EAFD,EAAQ,MAM7B4Q,EAAsB5Q,EAFD,EAAQ,MAM7B6Q,EAAkB7Q,EAFD,EAAQ,MAMzB8Q,EAAa9Q,EAFD,EAAQ,MAMpB+Q,EAAW/Q,EAFD,EAAQ,MAMlBgR,EAAWhR,EAFD,EAAQ,MAMlBiR,EAAUjR,EAFD,EAAQ,MAMjBkR,EAAUlR,EAFD,EAAQ,MAMjBmR,EAAUnR,EAFD,EAAQ,MAoBrB,SAASA,EAAuB/mC,GAC9B,OAAOA,GAAOA,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,GAlBb,EAAQ,KAER,EAAQ,KAER,EAAQ,KAER,EAAQ,KAER,EAAQ,KAER,EAAQ,KAER,EAAQ,KAER,EAAQ,KA6ERimC,EAAQC,QAnDY,SAAuBU,GACzC,IAAIv8B,EAAcu8B,EAAKv8B,YACnB0oC,EAAmBnM,EAAKmM,iBAC5B,MAAO,CAACkF,EAAQ/R,QAASgS,EAAQhS,SAAS,EAAIiR,EAAoBjR,SAAS,CACzE9lC,KAAM,OACN+3C,WAAY,SACV,EAAIb,EAAcpR,SAAS,CAC7B77B,YAAaA,EACb+tC,KAAM,SAAcr0B,EAAQvT,GAC1B,OAAIuT,EAAOnoB,WACS,UAAhB4U,EAAK5I,SACS,cAAd4I,EAAKpQ,OACS,KAAdoQ,EAAKhF,QACLuY,EAAO9pB,MAAM2P,SAASyuC,YAAY12C,KAAO,UAG7C,EAAIu1C,EAAyBhR,SAAS,CACxCoS,WAAY,CAAC,MAAO,MAAO,OAAQ,MAAO,QAC1CC,YAAa,SAAqBx0B,EAAQzN,GACxC,OAAOyN,EAAOotB,gBAAgB76B,OAE9B,EAAIygC,EAAgB7Q,SAAS,CAC/BsS,cAAe,OACfpyC,SAAU,YACVqyC,cAAe,YACfC,YAAY,EACZhK,WAAW,KACT,EAAIsI,EAAsB9Q,SAAS,CACrC9lC,KAAM,cACNqoC,YAAa,eACX,EAAIwO,EAAiB/Q,SAAS,CAChCyS,UAAW,QACXC,QAAS,YACTC,SAAU,aACVC,YAAa,eACX,EAAId,EAAQ9R,YAAY,EAAImR,EAAmBnR,SAAS,CAC1D6S,OAAQ,SAAgBvoC,GACtB,MAAqB,SAAdA,EAAKpQ,MAEd44C,UAAW,SAAmBxoC,GAC5B,OAAOA,EAAKnQ,KAAKR,IAAI,aAAe,iBAEpC,EAAIi4C,EAAS5R,SAAS,CACxB+S,aAAclG,KACZ,EAAIqE,EAAwBlR,SAAS,CACvCgT,OAAQ,SACN,EAAI1B,EAAsBtR,WAAYqR,EAAWrR,SAAS,EAAIuR,EAAmBvR,YAAY,EAAIwR,EAAoBxR,YAAY,EAAIyR,EAAoBzR,YAAY,EAAI0R,EAAgB1R,YAAY,EAAI2R,EAAW3R,YAAY,EAAI4Q,EAAqB5Q,SAAS,CACpQ9lC,KAAM,eACJ,EAAI23C,EAAS7R,c,iCCtLnBluC,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAGT,IAEIk/C,EAAcpS,EAFD,EAAQ,MAMrBqS,EAAUrS,EAFD,EAAQ,IAQjBuQ,GAJS,EAAQ,GAIDvQ,EAFD,EAAQ,OAI3B,SAASA,EAAuB/mC,GAC9B,OAAOA,GAAOA,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,GA2EbimC,EAAQC,QA3DR,WACE,IAAIzqC,EAAUvC,UAAUC,OAAS,QAAsB0O,IAAjB3O,UAAU,GAAmBA,UAAU,GAAK,GAC9EmR,EAAc5O,EAAQ4O,YACtB+tC,EAAO38C,EAAQ28C,KAkDnB,OAjDA,EAAIe,EAAYjT,SAAS77B,EAAa,uEACtC,EAAI8uC,EAAYjT,SAASkS,EAAM,8DAgDxB,CACLiB,aA5CF,SAAsB7oC,EAAMuT,EAAQjqB,GAClC,IAAKiqB,EAAOkL,MAAMmpB,EAAM5nC,GACtB,OAAO1W,IAGT,IAAIw/C,EAASx/C,KAAU,GACnBy/C,EAAQ/oC,EAAKgpC,eACjB,IAAKD,EAAO,OAAOz/C,IACnB,IAAI2/C,EAAa,CACfC,OAAQ,CACNx9C,IAAKq9C,EAAMr9C,IACXy9C,OAAQ,GAEV9H,MAAO,CACL31C,IAAKq9C,EAAMr9C,IACXy9C,OAAQ,GAEVlJ,KAAM,CACJrwC,KAAM,cACNC,KAAM,CACJgK,YAAaA,KAInB,MAAO,GAAGjQ,OA9Cd,SAA4B21C,GAC1B,GAAI53C,MAAMsC,QAAQs1C,GAAM,CACtB,IAAK,IAAI/2C,EAAI,EAAGg3C,EAAO73C,MAAM43C,EAAI52C,QAASH,EAAI+2C,EAAI52C,OAAQH,IACxDg3C,EAAKh3C,GAAK+2C,EAAI/2C,GAGhB,OAAOg3C,EAEP,OAAO73C,MAAM4qC,KAAKgN,GAsCDD,CAAmBwJ,GAAS,CAACG,KAqB9CG,WAdF,SAAoBpxC,EAAOub,EAAQjqB,GACjC,IAAIsW,EAAW5H,EAAM4H,SACjBqgC,EAAOjoC,EAAMioC,KAEjB,GAAkB,gBAAdA,EAAKrwC,KAAwB,CAC/B,IAAIa,EAAUwvC,EAAKpwC,KAAKR,IAAI,eAC5B,OAAOu5C,EAAQlT,QAAQzwB,cAAc,OAAQ,KAAM2jC,EAAQlT,QAAQzwB,cAAc6hC,EAAcpR,QAAS,KAAMjlC,GAAUmP,GAG1H,OAAOtW,Q,iCCtFX9B,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAGT,IAIgC+F,EAJ5BsmC,EAAoB,EAAQ,IAUhC,IAAIuT,IAN4B75C,EAFgBsmC,IAGhCtmC,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,IAIwBkmC,QAAQl0B,KAAKtK,MAAM,CACtD+mC,iBAAiB,IAChBhI,WAAW,CACZC,YAAa,cACbC,YAAa,YAJGJ,CAKf,CAAC,8GAA+G,MAAM,SAAU/9B,GACjI,OAAOA,EAAMtD,MAAMmF,eAGrB47B,EAAQC,QAAU2T,G,iCCvBlB7hD,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAGT,IAAI4uC,EAAW7wC,OAAOa,QAAU,SAAUuQ,GACxC,IAAK,IAAIpQ,EAAI,EAAGA,EAAIE,UAAUC,OAAQH,IAAK,CACzC,IAAI8vC,EAAS5vC,UAAUF,GAEvB,IAAK,IAAIkD,KAAO4sC,EACV9wC,OAAOU,UAAUL,eAAee,KAAK0vC,EAAQ5sC,KAC/CkN,EAAOlN,GAAO4sC,EAAO5sC,IAK3B,OAAOkN,GAGT68B,EAAQC,QAcR,WA4FE,MAAO,CACL0M,QA5FY,CACZkH,sBAAuB,SAA+B/1B,EAAQvT,GAC5D,IAAIupC,GAAU,EAAIC,EAAgB9T,SAASniB,EAAO9pB,MAAM2P,SAAU4G,GAClE,OAAQuT,EAAOvb,MAAM8jB,IAAM8Y,OAAOC,SAAS4U,UAAY,IAAMF,IA0F/DpH,SAvFa,CACbuH,iBAAkB,SAA0Bn2B,EAAQvT,GAClD,OAAOuT,EAAOo2B,mBAAmB3pC,GAAM,IAEzC4pC,iBAAkB,SAA0Br2B,EAAQvT,GAClD,OAAOuT,EAAOo2B,mBAAmB3pC,GAAM,IAEzC6pC,mBAAoB,SAA4Bt2B,EAAQvT,GACtD,IAAI8pC,EAAY9pC,EAAKnQ,KAAKR,IAAI,aAC1B06C,EAAax2B,EAAO+1B,sBAAsBtpC,GAE9C,OAAI8pC,GACF9U,aAAagV,WAAWD,GACjBx2B,EAAOm2B,iBAAiB1pC,KAE/Bg1B,aAAaiV,QAAQF,EAAY,aAC1Bx2B,EAAOq2B,iBAAiB5pC,KAGnC2pC,mBAAoB,SAA4Bp2B,EAAQvT,EAAMkqC,GAC5D,IAAI9wC,EAAWma,EAAO9pB,MAAM2P,SAC5Bma,EAAO42B,aAAanqC,EAAKtU,IAAK,CAC5BmE,KAAM,CACJi6C,UAAWI,KAMf,IAHA,IAAIE,EAAejrB,SAASnf,EAAKpQ,KAAKf,QAAQ,WAAY,IAAK,IAC3Dw7C,EAAgB,GAEX3yC,EAAQ0yC,EAAc1yC,EAAQ,EAAGA,IACxC2yC,EAAc7gD,KAAK,UAAYkO,GAGjC,IAAI2+B,OAAS,EACbj9B,EAASu9B,MAAMlrC,SAAQ,SAAUhD,GAC3B4tC,GAAUgU,EAAc/d,SAAS7jC,EAAEmH,MACrCymC,GAAS,GAIPA,GACF9iB,EAAO42B,aAAa1hD,EAAEiD,IAAK,CACzBmE,KAAMwoC,EAAS,GAAI5vC,EAAEoH,KAAKyH,OAAQ,CAChC4yC,OAAQA,MAKVzhD,IAAMuX,IAAMq2B,GAAS,SAwC7BiU,cA1BF,SAAuBtqC,EAAMuT,EAAQjqB,GACnC,GAAoB,UAAhB0W,EAAK5I,OAAoB,OAAO9N,IAEpC,GAAI0W,EAAKpQ,KAAKmlC,MAAM,WAAY,CAC9B,IAAI+U,EAAY9pC,EAAKnQ,KAAKR,IAAI,aAC1B06C,EAAax2B,EAAO+1B,sBAAsBtpC,GAE1CuqC,EAAuC,cADtBvV,aAAawV,QAAQT,GAG1C,GAAIQ,IAAsBT,EACxB,OAAO,SAAUv2B,GACf,OAAOA,EAAOo2B,mBAAmB3pC,EAAMuqC,GAAmBJ,aAAanqC,EAAKtU,IAAK,CAC/EmE,KAAM,CACJi6C,UAAWS,MAOrB,OAAOjhD,KAOPiP,UApCF,SAAmByU,EAAIuG,EAAQjqB,GAC7B,IAAIixC,EAAahnB,EAAO9pB,MAAM8wC,WAC9B,OAAKA,GAAeA,EAAW3qC,MAAS2qC,EAAW3qC,KAAKmlC,MAAM,YAAewF,EAAW1qC,KAAKR,IAAI,cAGjGkkB,EAAOs2B,mBAAmBtP,GACnBjxC,KAJ+GA,OA1E7G,EAAQ,GAArB,IAMgCkG,EAJ5Bi7C,EAAiB,EAAQ,KAEzBjB,GAE4Bh6C,EAFai7C,IAG7Bj7C,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,I,iCC5BbhI,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAETgsC,EAAQC,QAcR,WAsIE,MAAO,CACLn9B,UAtIF,SAAmByU,EAAIuG,EAAQjqB,GAC7B,IAAI,EAAI01C,EAAWtJ,SAAS1oB,GAAK,OAAO1jB,IAExC,OAAQ0jB,EAAGthB,KACT,IAAK,QACH,OAaN,SAAiBshB,EAAIuG,EAAQjqB,GAC3B,IAAIG,EAAQ8pB,EAAO9pB,MACf8wC,EAAa9wC,EAAM8wC,WACnBH,EAAY3wC,EAAM2wC,UACtB,GAAIA,EAAUsQ,WAAY,OAAOphD,IACjC,IAAKixC,EAAY,OAAOjxC,IACxB,IAAIqhD,EAAYvQ,EAAUwQ,IAAIzB,OAG9B,GAAwB,UAApB5O,EAAW3qC,KAEb,OADAod,EAAG7O,iBACIoV,EAAOs3B,WAAW,IAAIC,UAAU,CACrCl7C,KAAM,YACNoL,KAAM,GACNorC,QAAQ,IAIZ,GAAI7L,EAAW3qC,KAAKmlC,MAAM,yBAOxB,OANA/nB,EAAG7O,iBAGHoV,EAAOm2B,iBAAiBnP,GAGpBoQ,EAAY,EACPp3B,EAAOs3B,aAAaC,UAAU,aAE9Bv3B,EAAOs3B,aAAaE,6BAA6BD,UAAU,aAItE,OAAOxhD,IA7CI0hD,CAAQh+B,EAAIuG,EAAQjqB,GAE7B,IAAK,MACH,OA6CN,SAAe0jB,EAAIuG,EAAQjqB,GACzB,IACIixC,EADQhnB,EAAO9pB,MACI8wC,WACvB,IAAKA,EAAY,OAAOjxC,IAGxB,GAAwB,aAApBixC,EAAW3qC,KAEb,OADAod,EAAG7O,iBACIoV,EAAOs3B,aAAaC,UAAU,aAGvC,OAAOxhD,IAxDI2hD,CAAMj+B,EAAIuG,EAAQjqB,GAE3B,IAAK,YACH,OAwDN,SAAqB0jB,EAAIuG,EAAQjqB,GAC/B,IAAIG,EAAQ8pB,EAAO9pB,MACf8wC,EAAa9wC,EAAM8wC,WACnBH,EAAY3wC,EAAM2wC,UACtB,IAAKG,EAAY,OAAOjxC,IAExB,GAAwB,UAApBixC,EAAW3qC,MAAwC,SAApB2qC,EAAW3qC,KAE5C,OADAod,EAAG7O,iBACIoV,EAAO23B,gBAAgB3Q,EAAW7uC,KAAKy/C,yBAGhD,GAAI/Q,EAAUsQ,WAMZ,OAJ+B,IAA3BtQ,EAAUgR,MAAMjC,QAAgB/O,EAAUwQ,IAAIzB,SAAW5O,EAAWv/B,KAAKrS,QAAU4xC,EAAW3qC,KAAKmlC,MAAM,YAC3GxhB,EAAOm2B,iBAAiBnP,GAGnBjxC,IAIT,GAA+B,IAA3B8wC,EAAUgR,MAAMjC,OAClB,MAAwB,cAApB5O,EAAW3qC,MAA4C,cAApB2qC,EAAW3qC,KAA6BtG,KAC/E0jB,EAAG7O,iBAECo8B,EAAW3qC,KAAKmlC,MAAM,YACxBxhB,EAAOm2B,iBAAiBnP,GAG1BhnB,EAAOu3B,UAAU,kBAEO,cAApBvQ,EAAW3qC,MACb2jB,EAAO83B,YAAY,mBAMvB,GAAIjR,EAAUE,YAAa,CAMzB,GALoBC,EAAW+Q,gBAAgBlR,GACTvmC,QAAO,SAAUosC,GACrD,MAAqB,SAAdA,EAAKrwC,QAGQuB,KAAO,EAAG,CAC9B6b,EAAG7O,iBACH,IAAIotC,EAAkB,EAClBC,EAAcpR,EAAUgR,MAAMjC,OAC9BsC,EAAWlR,EAAWmR,gBAAgBF,GACtCG,EAAkBF,EAASG,OAAOC,WAAU,SAAU77B,GAExD,OADAu7B,GAAmBv7B,EAAEhV,KAAKrS,QACD6iD,KAEvBM,EAAgBH,EAAgBh8C,KAAI,SAAU8yB,GAChD,OAAOA,EAAEznB,QACRi6B,KAAK,IACJ8W,EAAWJ,EAAgBj4C,UAAUq1C,QACzC,OAAKgD,EACDP,IAAgBM,EAAcnjD,OAAeW,IAC1CiqB,EAAOy4B,gBAAgBP,EAAS//C,IAAK8/C,EAAcO,EAAS/wC,KAAKrS,OAAQ6iD,EAAa,QAFvEliD,KAM1B,OAAOA,IAvHI2iD,CAAYj/B,EAAIuG,EAAQjqB,GAEjC,QACE,OAAOA,QA3BF,EAAQ,GAArB,IAMgCkG,EAJ5B08C,EAAY,EAAQ,KAEpBlN,GAE4BxvC,EAFQ08C,IAGxB18C,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,I,iCCbbhI,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAETgsC,EAAQC,QAcR,WA8BE,SAASyW,EAAW54B,EAAQ3jB,EAAMtG,GAGhC,GAA8B,aAFlBiqB,EAAO9pB,MAET8wC,WAAW3qC,KAAqB,OAAOtG,IACjDiqB,EAAO64B,WAAW,QAAQD,WAAWv8C,GAGvC,MAAO,CACL2I,UArCF,SAAmByU,EAAIuG,EAAQjqB,GAC7B,KAAK,EAAI01C,EAAWtJ,SAAS1oB,GAAK,OAAO1jB,IAEzC,OAAQ0jB,EAAGthB,KACT,IAAK,IAEH,OADAshB,EAAG7O,iBACIguC,EAAW54B,EAAQ,OAAQjqB,GAEpC,IAAK,IAEH,OADA0jB,EAAG7O,iBACIguC,EAAW54B,EAAQ,SAAUjqB,GAEtC,IAAK,IAEH,OADA0jB,EAAG7O,iBACIguC,EAAW54B,EAAQ,aAAcjqB,GAE1C,IAAK,IAEH,OADA0jB,EAAG7O,iBACIguC,EAAW54B,EAAQ,UAAWjqB,GAEvC,IAAK,IAEH,OADA0jB,EAAG7O,iBACIoV,EAAO84B,SAAS,IAEzB,QACE,OAAO/iD,QAtCF,EAAQ,GAArB,IAMgCkG,EAJ5B08C,EAAY,EAAQ,KAEpBlN,GAE4BxvC,EAFQ08C,IAGxB18C,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,I,iCCbbhI,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAETgsC,EAAQC,QA2BR,WA6ME,MAAO,CACLn9B,UA7MF,SAAmByU,EAAIuG,EAAQjqB,GAC7B,IACIixC,EADQhnB,EAAO9pB,MACI8wC,WACvB,IAAKA,EAAY,OAAOjxC,IAExB,GAAIixC,EAAW3qC,KAAKmlC,MAAM,QAAS,OAAOzrC,IAE1C,OAAQ0jB,EAAGthB,KACT,IAAK,IACH,OAmHN,SAAgBshB,EAAIuG,EAAQjqB,GAC1B,IAAIG,EAAQ8pB,EAAO9pB,MACf8wC,EAAa9wC,EAAM8wC,WACnBH,EAAY3wC,EAAM2wC,UACtB,GAAIA,EAAUsQ,WAAY,OAAOphD,IACjC,GAAIixC,EAAW3qC,KAAKmlC,MAAM,WAAY,OAAOzrC,IAC7C,GAAIiqB,EAAO+pB,qBAAsB,OAAOh0C,IAGxC,GAAc,OAFFixC,EAAWv/B,KAAK0pB,MAAM,EAAG0V,EAAUgR,MAAMjC,QAAQt6C,QAAQ,OAAQ,IAI3E,OADAme,EAAG7O,iBACIoV,EAAO+4B,uBAAuB/R,GAAYvmC,SAAS82C,UAAU,CAClEl7C,KAAM,kBACNw2C,QAAQ,GACP,CACDmG,WAAW,IACVC,YAAY,aAAaC,cAG9B,OAAOnjD,IAtIIojD,CAAO1/B,EAAIuG,EAAQjqB,GAE5B,IAAK,IACH,OAsIN,SAAoB0jB,EAAIuG,EAAQjqB,GAC9B,IAAIG,EAAQ8pB,EAAO9pB,MACf8wC,EAAa9wC,EAAM8wC,WACnBH,EAAY3wC,EAAM2wC,UACtB,GAAIA,EAAUsQ,WAAY,OAAOphD,IACjC,GAAIixC,EAAW3qC,KAAKmlC,MAAM,WAAY,OAAOzrC,IAG7C,GAAc,OAFFixC,EAAWv/B,KAAK0pB,MAAM,EAAG0V,EAAUgR,MAAMjC,QAAQt6C,QAAQ,OAAQ,IAI3E,OADAme,EAAG7O,iBACIoV,EAAO+4B,uBAAuB/R,GAAYvmC,SAAS82C,UAAU,CAClEl7C,KAAM,SAIV,OAAOtG,IArJIqjD,CAAW3/B,EAAIuG,EAAQjqB,GAEhC,IAAK,IACH,OAYN,SAAiB0jB,EAAIuG,EAAQjqB,GAC3B,IAAIG,EAAQ8pB,EAAO9pB,MACf2wC,EAAY3wC,EAAM2wC,UAClBG,EAAa9wC,EAAM8wC,WACvB,GAAIH,EAAUsQ,WAAY,OAAOphD,IACjC,IAAIsjD,EAAQrS,EAAWv/B,KAAK0pB,MAAM,EAAG0V,EAAUgR,MAAMjC,QAAQ0D,OACzDj9C,EAuIN,SAAiBg9C,GACf,OAAQA,GACN,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,KACL,IAAK,MACL,IAAK,MACH,MAAO,YAET,IAAK,IACH,MAAO,cAET,IAAK,IACH,MAAO,WAET,IAAK,KACH,MAAO,WAET,IAAK,MACH,MAAO,WAET,IAAK,OACH,MAAO,WAET,IAAK,QACH,MAAO,WAET,IAAK,SACH,MAAO,WAET,QACE,OAAO,MAvKAE,CAAQF,GAEnB,GAAIh9C,IAAS2jB,EAAO+pB,qBAAsB,CAExC,GAAI/C,EAAW3qC,KAAKmlC,MAAM,aAAenlC,EAAKmlC,MAAM,WAClD,OAAOzrC,IAIT,GAAa,cAATsG,GAA4C,cAApB2qC,EAAW3qC,KACrC,OAAOtG,IAGT0jB,EAAG7O,iBACH,IAAI4iB,OAAU,EACA,QAAV6rB,IAAiB7rB,GAAU,GACjB,QAAV6rB,IAAiB7rB,GAAU,GAC/BxN,EAAOw5B,oBAAmB,SAAUj+C,GAQlC,OAPAA,EAAEw9C,uBAAuB/R,GAAYvmC,SAAS82C,UAAU,CACtDl7C,KAAMA,EACNC,KAAM,CACJkxB,QAASA,KAIA,cAATnxB,OACcyH,IAAZ0pB,EACKjyB,EAAEk+C,UAAU,aACA,OAAVJ,EACF99C,EAAEk+C,UAAU,gBAEZl+C,EAAEk+C,UAAU,iBAIhB1jD,OAIX,IAAI2jD,GAA4B,EAC5BC,GAAoB,EACpBC,OAAiB91C,EAErB,IACE,IAAK,IAAoD+1C,EAAhDC,EAAYC,EAAgBrkD,OAAOC,cAAsB+jD,GAA6BG,EAAQC,EAAU/jD,QAAQC,MAAO0jD,GAA4B,EAAM,CAQhK,IAPA,IAAIvhD,EAAM0hD,EAAM3jD,MAEZw2C,EAAOv0C,EAAIu0C,KACXx0B,EAAW/f,EAAI+f,SACf8hC,EAAa,GAGR/kD,EAAI,EAAGA,EAAI+xC,EAAWv/B,KAAKrS,OAAQH,IAAK,CAC/C,IAAIwS,EAAOu/B,EAAWv/B,KAClBowC,EAAQ5iD,EACRoiD,EAAMpiD,EAAIijB,EAAS9iB,OACnB6kD,EAA6B,IAAVpC,EACnBqC,EAAa7C,IAAQ5vC,EAAKrS,OAC1B+kD,EAA0B,CAAC1yC,EAAK0pB,MAAM0mB,EAAQ,EAAGA,GAAQpwC,EAAK0pB,MAAMkmB,EAAKA,EAAM,IAAIte,SAAS,KAE5FtxB,EAAK0pB,MAAM0mB,EAAOR,KAASn/B,IAAa+hC,GAAoBC,GAAcC,IAC5EH,EAAW/jD,KAAKhB,GAKpB,GAAI+kD,EAAW5kD,OAAS,EAAG,CACzB,IAAIglD,EAAYpT,EAAWyO,eACvB4E,EAAoBL,EAAW,GAC/BM,EAAmBN,EAAWA,EAAW5kD,OAAS,GACtD,OAAO4qB,EAAOu6B,gBAAgBH,EAAUjiD,IAAKmiD,EAAkBpiC,EAAS9iB,QAAQmlD,gBAAgBH,EAAUjiD,IAAKkiD,EAAmBniC,EAAS9iB,QAAQolD,aAAaH,EAAmBC,EAAmBpiC,EAAS9iB,QAAQqlD,QAAQ/N,GAAMgO,YAAY7B,WAAWnM,KAGhQ,MAAOn1C,GACPoiD,GAAoB,EACpBC,EAAiBriD,EACjB,QACA,KACOmiD,GAA6BI,EAAU9iD,QAC1C8iD,EAAU9iD,SAEZ,QACA,GAAI2iD,EACF,MAAMC,GAKZ,OAAO7jD,IA1GI4kD,CAAQlhC,EAAIuG,EAAQjqB,GAE7B,QACE,OAAOA,QA5CF,EAAQ,GAArB,IAEIgkD,EAAkB,CAAC,CACrBrN,KAAM,OACNx0B,SAAU,MACT,CACDw0B,KAAM,OACNx0B,SAAU,MACT,CACDw0B,KAAM,SACNx0B,SAAU,KACT,CACDw0B,KAAM,SACNx0B,SAAU,KACT,CACDw0B,KAAM,OACNx0B,SAAU,KACT,CACDw0B,KAAM,WACNx0B,SAAU,MACT,CACDw0B,KAAM,UACNx0B,SAAU,Q,iCC3BZjkB,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAETgsC,EAAQC,QAgBR,WACE,MAAO,CACLyY,QAAS,SAAiBnhC,EAAIuG,EAAQjqB,GACpC,IAAI8kD,GAAW,EAAIrV,EAAYsV,kBAAkBrhC,GAC7ChS,EAAOozC,EAASpzC,KACpB,GAAsB,SAAlBozC,EAASx+C,MAAqC,SAAlBw+C,EAASx+C,KAAiB,OAAOtG,IAEjE,IAAIglD,EAAWpP,EAAaxJ,QAAQh8B,YAAYsB,GAAQ,IAExD,OAAKszC,EACE/6B,EAAOg7B,eAAeD,EAASl1C,eADtC,KAvBO,EAAQ,GAArB,IAQgC5J,EAN5BupC,EAAc,EAAQ,IAEtByV,EAAc,EAAQ,KAEtBtP,GAE4B1vC,EAFUg/C,IAG1Bh/C,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,I,iCCfbhI,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAETgsC,EAAQC,QAcR,WACE,MAAO,CACLn9B,UAAW,SAAmByU,EAAIuG,EAAQjqB,GACxC,IAAI,EAAI01C,EAAWtJ,SAAS1oB,IAAkB,MAAXA,EAAGthB,IAAa,OAAOpC,IAC1D,IAAIG,EAAQ8pB,EAAO9pB,MACf8wC,EAAa9wC,EAAM8wC,WAEvB,GADgB9wC,EAAM2wC,UACRsQ,WAAY,OAAOphD,IACjC,IAAKixC,GAAcA,EAAW3qC,KAAKmlC,MAAM,QAAS,OAAOzrC,IACzD,IAAIkiD,EAAc/hD,EAAM2wC,UAAUgR,MAAMjC,OAAS,EAC7CsC,EAAWlR,EAAWyO,eAC1B,OAAKyC,GAGS,QAFFA,EAASzwC,KAAK0pB,MAAM8mB,EAAaA,EAAc,GAGlDj4B,EAAOu6B,gBAAgBrC,EAAS//C,IAAK8/C,EAAa,GAAGiD,gBAAgBhD,EAAS//C,IAAK8/C,EAAa,UAJnFliD,OAvBf,EAAQ,GAArB,IAMgCkG,EAJ5B08C,EAAY,EAAQ,KAEpBlN,GAE4BxvC,EAFQ08C,IAGxB18C,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,I,iCCbbhI,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAGT,IAAI4uC,EAAW7wC,OAAOa,QAAU,SAAUuQ,GACxC,IAAK,IAAIpQ,EAAI,EAAGA,EAAIE,UAAUC,OAAQH,IAAK,CACzC,IAAI8vC,EAAS5vC,UAAUF,GAEvB,IAAK,IAAIkD,KAAO4sC,EACV9wC,OAAOU,UAAUL,eAAee,KAAK0vC,EAAQ5sC,KAC/CkN,EAAOlN,GAAO4sC,EAAO5sC,IAK3B,OAAOkN,GAGT68B,EAAQC,QAmCR,SAAgBU,GACd,IAAIqS,EAAerS,EAAKqS,aACxB,MAAO,CACL6B,cAAe,SAAuBtqC,EAAMuT,EAAQjqB,GAClD,IAAKm/C,GAA8B,UAAdzoC,EAAKpQ,MAAkC,SAAdoQ,EAAKpQ,MAAmBoQ,EAAKhF,OAASgF,EAAKnQ,KAAKR,IAAI,QAAS,OAAO/F,IAClH,IAAIolD,EAAYjG,EAAazoC,GAC7B,IAAK0uC,EAAW,OAAOplD,IACvB,IAAIqlD,EAjBV,SAAuBv1C,EAAU4G,GAC/B,IAAI2uC,OAAS,EAEb,KAAO3uC,IAAS5G,GAAU,CAExB,IADAu1C,EAASv1C,EAASw1C,UAAU5uC,EAAKtU,QAClB0N,EAAU,OAAO4G,EAChCA,EAAO2uC,GAWQE,CAAct7B,EAAO9pB,MAAM2P,SAAU4G,GAClD,OAAK2uC,EACe,cAAhBA,EAAO/+C,MAAwB++C,EAAO3zC,OAASgF,EAAKhF,KAAa1R,IAC9D,SAAUiqB,GACf,OAAOA,EAAOu7B,iBAAiBH,EAAOjjD,IAAK,CACzC0L,OAAQ,QACRxH,KAAM,OACNw2C,QAAQ,EACRzP,MAAO,CAAC,CACNv/B,OAAQ,OACRw0C,OAAQ,CAAC,CACP5wC,KAAM,OAGVnL,KAAMwoC,EAAS,GAAIr4B,EAAKnQ,KAAKyH,OAAQ,CACnCy3C,OAAO,EACPL,UAAWA,OAfGplD,QAnC1B,SAAiCkG,GAC/B,GAAIA,GAAOA,EAAIwmC,WACb,OAAOxmC,EAEP,IAAIwnC,EAAS,GAEb,GAAW,MAAPxnC,EACF,IAAK,IAAI9D,KAAO8D,EACVhI,OAAOU,UAAUL,eAAee,KAAK4G,EAAK9D,KAAMsrC,EAAOtrC,GAAO8D,EAAI9D,IAI1EsrC,EAAOtB,QAAUlmC,GAhBTynC,CAFC,EAAQ,IAIR,EAAQ,I,iCCxBrBzvC,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAGT,IAEI2nC,EAsBJ,SAAiC5hC,GAC/B,GAAIA,GAAOA,EAAIwmC,WACb,OAAOxmC,EAEP,IAAIwnC,EAAS,GAEb,GAAW,MAAPxnC,EACF,IAAK,IAAI9D,KAAO8D,EACVhI,OAAOU,UAAUL,eAAee,KAAK4G,EAAK9D,KAAMsrC,EAAOtrC,GAAO8D,EAAI9D,IAK1E,OADAsrC,EAAOtB,QAAUlmC,EACVwnC,EAnCCC,CAFC,EAAQ,IAQjB+X,GAJS,EAAQ,GAIJzY,EAFD,EAAQ,OAMpBkG,EAAYlG,EAFD,EAAQ,MAMnB0Y,EAAgB1Y,EAFD,EAAQ,MAI3B,SAASA,EAAuB/mC,GAC9B,OAAOA,GAAOA,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,GAuCbimC,EAAQC,QAlBR,WAaE,MAAO,CACLwZ,aAbF,SAAsBl3C,EAAOub,EAAQjqB,GACnC,IAAIsW,EAAWtW,IACf,OAAO8nC,EAAMnsB,cAAcmsB,EAAM4M,SAAU,MAAOhmC,EAAM5M,UAAYgmC,EAAMnsB,cAAcw3B,EAAU/G,QAAS,CACzGjsC,MAAO8pB,EAAO9pB,MACd8pB,OAAQA,KACLvb,EAAM5M,UAAYgmC,EAAMnsB,cAAcgqC,EAAcvZ,QAAS,CAChEniB,OAAQA,IACNvb,EAAMm3C,KAAO/d,EAAMnsB,cAAc+pC,EAAWtZ,QAAS,CACvDniB,OAAQA,IACN3T,O,kCCzDR,YAEApY,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAGT,IAAI8uC,EAAe,WACjB,SAASC,EAAiB5/B,EAAQZ,GAChC,IAAK,IAAIxP,EAAI,EAAGA,EAAIwP,EAAMrP,OAAQH,IAAK,CACrC,IAAIiwC,EAAazgC,EAAMxP,GACvBiwC,EAAWnpC,WAAampC,EAAWnpC,aAAc,EACjDmpC,EAAWlpC,cAAe,EACtB,UAAWkpC,IAAYA,EAAWC,UAAW,GACjDlxC,OAAO4H,eAAewJ,EAAQ6/B,EAAW/sC,IAAK+sC,IAIlD,OAAO,SAAUE,EAAaC,EAAYC,GAGxC,OAFID,GAAYJ,EAAiBG,EAAYzwC,UAAW0wC,GACpDC,GAAaL,EAAiBG,EAAaE,GACxCF,GAdQ,GAoBfvH,EAsBJ,SAAiC5hC,GAC/B,GAAIA,GAAOA,EAAIwmC,WACb,OAAOxmC,EAEP,IAAIwnC,EAAS,GAEb,GAAW,MAAPxnC,EACF,IAAK,IAAI9D,KAAO8D,EACVhI,OAAOU,UAAUL,eAAee,KAAK4G,EAAK9D,KAAMsrC,EAAOtrC,GAAO8D,EAAI9D,IAK1E,OADAsrC,EAAOtB,QAAUlmC,EACVwnC,EAnCCC,CAFC,EAAQ,IAMjBlB,EAAqBQ,EAFD,EAAQ,KAY5BiT,GARc,EAAQ,IAEb,EAAQ,GAEJ,EAAQ,GAIHjT,EAFD,EAAQ,OAI7B,SAASA,EAAuB/mC,GAC9B,OAAOA,GAAOA,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,GA2Bb,SAAS0pC,EAA2BC,EAAMvwC,GACxC,IAAKuwC,EACH,MAAM,IAAIC,eAAe,6DAG3B,OAAOxwC,GAAyB,kBAATA,GAAqC,oBAATA,EAA8BuwC,EAAPvwC,EAmB5E,IAAIwmD,EAAW,SAAU/V,GAGvB,SAAS+V,IACP,IAAIhZ,EAEAkD,EAAOphC,GApCf,SAAyBqhC,EAAUZ,GACjC,KAAMY,aAAoBZ,GACxB,MAAM,IAAIzuC,UAAU,qCAoCpBsvC,CAAgBxxC,KAAMonD,GAEtB,IAAK,IAAI3V,EAAO/wC,UAAUC,OAAQkD,EAAOlE,MAAM8xC,GAAOC,EAAO,EAAGA,EAAOD,EAAMC,IAC3E7tC,EAAK6tC,GAAQhxC,UAAUgxC,GAGzB,OAAeJ,EAASphC,EAAQghC,EAA2BlxC,MAAOouC,EAAOgZ,EAAS1nD,WAAaF,OAAOmyC,eAAeyV,IAAWxmD,KAAKC,MAAMutC,EAAM,CAACpuC,MAAM4B,OAAOiC,KAAiBqM,EAAMC,MAAQ,CAC5Lk3C,mBAAeh4C,GACda,EAAMo3C,oBAAsB,WAC7B,IAAIC,EAAWr3C,EAAMs3C,qBAErB,GAAKD,EAAS5mD,OAAd,CACA,IAAI0mD,EAAgBE,EAAS,GAAGzzB,GAC5BmxB,GAA4B,EAC5BC,GAAoB,EACpBC,OAAiB91C,EAErB,IACE,IAAK,IAA6C+1C,EAAzCC,EAAYkC,EAAStmD,OAAOC,cAAsB+jD,GAA6BG,EAAQC,EAAU/jD,QAAQC,MAAO0jD,GAA4B,EAAM,CACzJ,IAAI5nB,EAAU+nB,EAAM3jD,MACP47B,EAAQ9d,wBACV9I,KAAO,IAAG4wC,EAAgBhqB,EAAQvJ,KAE/C,MAAOhxB,GACPoiD,GAAoB,EACpBC,EAAiBriD,EACjB,QACA,KACOmiD,GAA6BI,EAAU9iD,QAC1C8iD,EAAU9iD,SAEZ,QACA,GAAI2iD,EACF,MAAMC,GAKRj1C,EAAMC,MAAMk3C,gBAAkBA,GAChCn3C,EAAMgB,SAAS,CACbm2C,cAAeA,MAGVnW,EAA2BhhC,EAAnCohC,GAyGL,OA5KF,SAAmB6B,EAAUC,GAC3B,GAA0B,oBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAIlxC,UAAU,kEAAoEkxC,GAG1FD,EAASjzC,UAAYV,OAAOW,OAAOizC,GAAcA,EAAWlzC,UAAW,CACrED,YAAa,CACXwB,MAAO0xC,EACP7rC,YAAY,EACZopC,UAAU,EACVnpC,cAAc,KAGd6rC,IAAY5zC,OAAOC,eAAiBD,OAAOC,eAAe0zC,EAAUC,GAAcD,EAASzzC,UAAY0zC,GAI3GC,CAAU+T,EAAU/V,GAqDpBd,EAAa6W,EAAU,CAAC,CACtB1jD,IAAK,oBACLjC,MAAO,WACiB,qBAAXmrC,QACTA,OAAOv7B,iBAAiB,SAAUrR,KAAKsnD,qBAGzCG,EAAaznD,KAAKsnD,uBAEnB,CACD5jD,IAAK,uBACLjC,MAAO,WACiB,qBAAXmrC,QACTA,OAAOr7B,oBAAoB,SAAUvR,KAAKsnD,uBAG7C,CACD5jD,IAAK,qBACLjC,MAAO,WACL,IAAI8lD,EAAW,GAEXG,GAA6B,EAC7BC,GAAqB,EACrBC,OAAkBv4C,EAEtB,IACE,IAAK,IAA8Cw4C,EAA1CC,EANI,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,MAMb7mD,OAAOC,cAAuBwmD,GAA8BG,EAASC,EAAWxmD,QAAQC,MAAOmmD,GAA6B,EAAM,CAC/J,IAAIK,EAAUF,EAAOpmD,MACjBumD,GAA6B,EAC7BC,GAAqB,EACrBC,OAAkB74C,EAEtB,IACE,IAAK,IAA4E84C,EAAxEC,EAAah3C,SAASi3C,qBAAqBN,GAAS9mD,OAAOC,cAAuB8mD,GAA8BG,EAASC,EAAW9mD,QAAQC,MAAOymD,GAA6B,EAAM,CAC7L,IAAIzwC,EAAM4wC,EAAO1mD,MACjB8lD,EAAS/lD,KAAK+V,IAEhB,MAAOzU,GACPmlD,GAAqB,EACrBC,EAAkBplD,EAClB,QACA,KACOklD,GAA8BI,EAAW7lD,QAC5C6lD,EAAW7lD,SAEb,QACA,GAAI0lD,EACF,MAAMC,KAKd,MAAOplD,GACP6kD,GAAqB,EACrBC,EAAkB9kD,EAClB,QACA,KACO4kD,GAA8BI,EAAWvlD,QAC5CulD,EAAWvlD,SAEb,QACA,GAAIolD,EACF,MAAMC,GAKZ,OAAOL,IAER,CACD7jD,IAAK,cACLjC,MAAO,WAEL,OADazB,KAAKgQ,MAAMub,OACV9pB,MAAM2P,SAASu9B,MAAM9iC,QAAO,SAAUmM,GAClD,QAAKA,EAAKhF,MACHgF,EAAKpQ,KAAKmlC,MAAM,iBAG1B,CACDrpC,IAAK,SACLjC,MAAO,WACL,IAAI6xC,EAAStzC,KAETurB,EAASvrB,KAAKgQ,MAAMub,OACpB+8B,EAAWtoD,KAAKuoD,cAEpB,OAAID,EAASn/C,MAAQ,EAAU,KACxBigC,EAAMnsB,cAAcurC,EAAS,KAAMpf,EAAMnsB,cAAcwrC,EAAU,KAAMH,EAAS3gD,KAAI,SAAU+mC,GACnG,IAAIga,GAAO,EAAIlH,EAAgB9T,SAASniB,EAAO9pB,MAAM2P,SAAUs9B,GAC3DL,EAASiF,EAAOnjC,MAAMk3C,gBAAkBqB,EAC5C,OAAOtf,EAAMnsB,cAAc0rC,EAAU,CACnC/gD,KAAM8mC,EAAQ9mC,KACdymC,OAAQA,EACR3qC,IAAKglD,GACJtf,EAAMnsB,cAAc2rC,EAAQ,CAC7B1rC,KAAM,IAAMwrC,EACZra,OAAQA,GACPK,EAAQ17B,gBAKVo0C,EA5JM,CA6Jbhe,EAAMqD,WAEJ+b,EAAUza,EAAmBL,QAAQ39B,IAAIk+B,WAAW,CACtDC,YAAa,oBACbC,YAAa,gBAFDJ,CAGX,CAAC,eAAgB,gBAAiB,2EAA4E,iCAAiC,SAAU/9B,GAC1J,OAAOA,EAAMtD,MAAM6zB,cAClB,SAAUvwB,GACX,OAAOA,EAAMtD,MAAM8zB,cAClB,SAAUxwB,GACX,OAAOA,EAAMtD,MAAMgN,UAGjBkvC,EAAS7a,EAAmBL,QAAQz0B,EAAEg1B,WAAW,CACnDC,YAAa,mBACbC,YAAa,gBAFFJ,CAGV,CAAC,SAAU,gBAAiB,6JAA8J,OAAO,SAAU/9B,GAC5M,OAAOA,EAAMq+B,OAASr+B,EAAMtD,MAAMsG,KAAOhD,EAAMtD,MAAMuvC,iBACpD,SAAUjsC,GACX,OAAOA,EAAMq+B,OAAS,IAAM,OAC3B,SAAUr+B,GACX,OAAOA,EAAMtD,MAAMgvC,WAGjBiN,EAAW5a,EAAmBL,QAAQmb,GAAG5a,WAAW,CACtDC,YAAa,qBACbC,YAAa,gBAFAJ,CAGZ,CAAC,iCAAkC,2BAA4B,wDAAyD,aAAe,kCAAmC,SAAU/9B,GACrL,OAAOA,EAAMpI,KAAKmlC,MAAM,eAAiB,MAAQ,UAChD,SAAU/8B,GACX,OAAOA,EAAMtD,MAAMuvC,iBAClB,SAAUjsC,GACX,OAAOA,EAAMq+B,OAASr+B,EAAMtD,MAAMsG,KAAOhD,EAAMtD,MAAMuvC,iBACpD,SAAUjsC,GACX,OAAOA,EAAMpI,KAAKmlC,MAAM,eAAiB,SAAM,YAG7C0b,EAAW1a,EAAmBL,QAAQob,GAAG7a,WAAW,CACtDC,YAAa,qBACbC,YAAa,gBAFAJ,CAGZ,CAAC,yKAA0K,wCAAyC,0BAA2B6a,GAAQ,SAAU54C,GAClQ,OAAOA,EAAMtD,MAAMU,cAGrBqgC,EAAQC,QAAU0Z,I,iECtSlB5nD,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAGT,IAAI8uC,EAAe,WACjB,SAASC,EAAiB5/B,EAAQZ,GAChC,IAAK,IAAIxP,EAAI,EAAGA,EAAIwP,EAAMrP,OAAQH,IAAK,CACrC,IAAIiwC,EAAazgC,EAAMxP,GACvBiwC,EAAWnpC,WAAampC,EAAWnpC,aAAc,EACjDmpC,EAAWlpC,cAAe,EACtB,UAAWkpC,IAAYA,EAAWC,UAAW,GACjDlxC,OAAO4H,eAAewJ,EAAQ6/B,EAAW/sC,IAAK+sC,IAIlD,OAAO,SAAUE,EAAaC,EAAYC,GAGxC,OAFID,GAAYJ,EAAiBG,EAAYzwC,UAAW0wC,GACpDC,GAAaL,EAAiBG,EAAaE,GACxCF,GAdQ,GAoBfvH,EAsBJ,SAAiC5hC,GAC/B,GAAIA,GAAOA,EAAIwmC,WACb,OAAOxmC,EAEP,IAAIwnC,EAAS,GAEb,GAAW,MAAPxnC,EACF,IAAK,IAAI9D,KAAO8D,EACVhI,OAAOU,UAAUL,eAAee,KAAK4G,EAAK9D,KAAMsrC,EAAOtrC,GAAO8D,EAAI9D,IAK1E,OADAsrC,EAAOtB,QAAUlmC,EACVwnC,EAnCCC,CAFC,EAAQ,IAIjBnB,EAAoB,EAAQ,IAI5Bib,GAFc,EAAQ,IAEN,EAAQ,KAIxBC,EAAkBza,EAFD,EAAQ,MAMzB0a,EAAc1a,EAFD,EAAQ,MAIzB,SAASA,EAAuB/mC,GAC9B,OAAOA,GAAOA,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,GA2Bb,SAAS0pC,EAA2BC,EAAMvwC,GACxC,IAAKuwC,EACH,MAAM,IAAIC,eAAe,6DAG3B,OAAOxwC,GAAyB,kBAATA,GAAqC,oBAATA,EAA8BuwC,EAAPvwC,EAmB5E,IAAIsoD,EAAoB,SAAU7X,GAGhC,SAAS6X,IACP,IAAI9a,EAEAkD,EAAOphC,GApCf,SAAyBqhC,EAAUZ,GACjC,KAAMY,aAAoBZ,GACxB,MAAM,IAAIzuC,UAAU,qCAoCpBsvC,CAAgBxxC,KAAMkpD,GAEtB,IAAK,IAAIzX,EAAO/wC,UAAUC,OAAQkD,EAAOlE,MAAM8xC,GAAOC,EAAO,EAAGA,EAAOD,EAAMC,IAC3E7tC,EAAK6tC,GAAQhxC,UAAUgxC,GAGzB,OAAeJ,EAASphC,EAAQghC,EAA2BlxC,MAAOouC,EAAO8a,EAAkBxpD,WAAaF,OAAOmyC,eAAeuX,IAAoBtoD,KAAKC,MAAMutC,EAAM,CAACpuC,MAAM4B,OAAOiC,KAAiBqM,EAAMi5C,QAAU,SAAUvhD,GAC1N,IACE,OAAOsI,EAAMF,MAAMub,OAAO9pB,MAAMq8C,MAAMsL,MAAK,SAAUnR,GACnD,OAAOA,EAAKrwC,OAASA,KAEvB,MAAOyhD,GACP,OAAO,IAERn5C,EAAMo5C,QAAU,SAAU1hD,GAC3B,IAAI2hD,EAAwBr5C,EAAMF,MAAMub,OAAO9pB,MAC3C8wC,EAAagX,EAAsBhX,WACnCnhC,EAAWm4C,EAAsBn4C,SAEjCu1C,EAASpU,GAAcnhC,EAASw1C,UAAUrU,EAAW7uC,KACzD,OAAO6uC,GAAcA,EAAW3qC,OAASA,GAAQ++C,GAAUA,EAAO/+C,OAASA,GAC1EsI,EAAMs5C,YAAc,SAAUxkC,EAAIpd,GACnCod,EAAG7O,iBACH6O,EAAG3U,kBACH,IAAIkb,EAASrb,EAAMF,MAAMub,OACzBA,EAAO44B,WAAWv8C,IAGCsI,EAAMi5C,QAAQ,SAAoB,SAATvhD,IAG1C2jB,EAAO9pB,MAAMq8C,MAAMr6C,SAAQ,SAAUw0C,GACjB,SAAdA,EAAKrwC,MAAiB2jB,EAAO64B,WAAWnM,OAG/C/nC,EAAMu5C,aAAe,SAAUzkC,EAAIpd,GACpCod,EAAG7O,iBACH6O,EAAG3U,kBACH,IAAIkb,EAASrb,EAAMF,MAAMub,OACrBm+B,EAAgBn+B,EAAO9pB,MACvB8wC,EAAamX,EAAcnX,WAE3BoU,EADW+C,EAAct4C,SACPw1C,UAAUrU,EAAW7uC,KAC3C6nB,EAAO42B,aAAa5P,EAAW7uC,IAAKkE,GAEhC++C,GAAUA,EAAO/+C,MAAiB,cAATA,GAC3B2jB,EAAO42B,aAAawE,EAAOjjD,IAAKkE,IAEjCsI,EAAMy5C,iBAAmB,SAAU3kC,GACpCA,EAAG7O,iBACH6O,EAAG3U,kBACH,IAAI+hC,EAAYxF,OAAOyF,eAAeprC,WAGtC,IAFAmrC,EAAYA,EAAUyS,QAERlkD,OAAQ,CAKpBuP,EAAMF,MAAMub,OAAOq+B,WAAW,CAC5BhiD,KAAM,OACNC,KANS,CACTqV,KAAM,MAQRhN,EAAMF,MAAMyjC,aAAazuB,KAE1B9U,EAAM25C,iBAAmB,SAAUjiD,EAAMkiD,EAAWz5B,GACrD,IAAI05B,EAAuB75C,EAAMF,MAAMtD,MAAMq9C,qBACzCC,EAAU95C,EAAMF,MAAMub,OAAOvb,MAAMqgB,QAEvC,GAAI05B,GAAwBA,EAAqBjM,OAASiM,EAAqBjM,MAAMxZ,SAAS18B,GAC5F,OAAO,KAGT,IAAIytC,EAAWnlC,EAAMi5C,QAAQvhD,GAM7B,OAAOwhC,EAAMnsB,cAAc+rC,EAAgBtb,QAAS,CAClDt9B,YALgB,SAAqB4U,GACrC,OAAO9U,EAAMs5C,YAAYxkC,EAAIpd,IAK7BymC,OAAQgH,GACPjM,EAAMnsB,cAAc+sC,EAAS,CAC9B35B,QAASA,EACT45B,UAAW,OACV7gB,EAAMnsB,cAAc6sC,EAAW,CAChCl1B,MAAO1kB,EAAMF,MAAMtD,MAAMknC,iBAE1B1jC,EAAMg6C,kBAAoB,SAAUtiD,EAAMkiD,EAAWz5B,GACtD,IAAI05B,EAAuB75C,EAAMF,MAAMtD,MAAMq9C,qBACzCC,EAAU95C,EAAMF,MAAMub,OAAOvb,MAAMqgB,QACvC,GAAI05B,GAAwBA,EAAqB/hD,QAAU+hD,EAAqB/hD,OAAOs8B,SAAS18B,GAAO,OAAO,KAE9G,IAAIytC,EAAWnlC,EAAMo5C,QAAQ1hD,GAM7B,OAAOwhC,EAAMnsB,cAAc+rC,EAAgBtb,QAAS,CAClDt9B,YALgB,SAAqB4U,GACrC,OAAO9U,EAAMu5C,aAAazkC,EAAIqwB,EAAW,YAAcztC,IAKvDymC,OAAQgH,GACPjM,EAAMnsB,cAAc+sC,EAAS,CAC9B35B,QAASA,EACT45B,UAAW,OACV7gB,EAAMnsB,cAAc6sC,EAAW,CAChCl1B,MAAO1kB,EAAMF,MAAMtD,MAAMknC,iBAElB1C,EAA2BhhC,EAAnCohC,GAiCL,OAtKF,SAAmB6B,EAAUC,GAC3B,GAA0B,oBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAIlxC,UAAU,kEAAoEkxC,GAG1FD,EAASjzC,UAAYV,OAAOW,OAAOizC,GAAcA,EAAWlzC,UAAW,CACrED,YAAa,CACXwB,MAAO0xC,EACP7rC,YAAY,EACZopC,UAAU,EACVnpC,cAAc,KAGd6rC,IAAY5zC,OAAOC,eAAiBD,OAAOC,eAAe0zC,EAAUC,GAAcD,EAASzzC,UAAY0zC,GAI3GC,CAAU6V,EAAmB7X,GAqI7Bd,EAAa2Y,EAAmB,CAAC,CAC/BxlD,IAAK,SACLjC,MAAO,WACL,IAAI6zC,EAAqBt1C,KAAKgQ,MAAMub,OAAO+pB,qBACvC0U,EAAUhqD,KAAKgQ,MAAMub,OAAOvb,MAAMqgB,QACtC,OAAO+Y,EAAMnsB,cAAcmsB,EAAM4M,SAAU,KAAMh2C,KAAK6pD,iBAAiB,OAAQd,EAAcoB,SAAU,QAASnqD,KAAK6pD,iBAAiB,SAAUd,EAAcqB,WAAY,UAAWpqD,KAAK6pD,iBAAiB,UAAWd,EAAcsB,kBAAmB,iBAAkBrqD,KAAK6pD,iBAAiB,OAAQd,EAAcuB,SAAU,SAAUhV,GAAsBlM,EAAMnsB,cAAcmsB,EAAM4M,SAAU,KAAM5M,EAAMnsB,cAAcgsC,EAAYvb,QAAS,MAAO1tC,KAAKkqD,kBAAkB,WAAYnB,EAAcwB,aAAc,WAAYvqD,KAAKkqD,kBAAkB,WAAYnB,EAAcyB,aAAc,cAAexqD,KAAKkqD,kBAAkB,cAAenB,EAAc0B,eAAgB,UAAWrhB,EAAMnsB,cAAcgsC,EAAYvb,QAAS,MAAOtE,EAAMnsB,cAAc+rC,EAAgBtb,QAAS,CAC5vBt9B,YAAapQ,KAAK2pD,kBACjBvgB,EAAMnsB,cAAc+sC,EAAS,CAC9B35B,QAAS,cACT45B,UAAW,OACV7gB,EAAMnsB,cAAc8rC,EAAc2B,SAAU,CAC7C91B,MAAO50B,KAAKgQ,MAAMtD,MAAMknC,qBAKvBsV,EAtJe,CAuJtB9f,EAAMqD,WAERgB,EAAQC,SAAU,EAAII,EAAkB6c,WAAWzB,I,kCCxPnD,YAEA1pD,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAGT,IAsBIk1C,EApBAC,EAAgBrI,EAFD,EAAQ,MAIvBgC,EAAe,WACjB,SAASC,EAAiB5/B,EAAQZ,GAChC,IAAK,IAAIxP,EAAI,EAAGA,EAAIwP,EAAMrP,OAAQH,IAAK,CACrC,IAAIiwC,EAAazgC,EAAMxP,GACvBiwC,EAAWnpC,WAAampC,EAAWnpC,aAAc,EACjDmpC,EAAWlpC,cAAe,EACtB,UAAWkpC,IAAYA,EAAWC,UAAW,GACjDlxC,OAAO4H,eAAewJ,EAAQ6/B,EAAW/sC,IAAK+sC,IAIlD,OAAO,SAAUE,EAAaC,EAAYC,GAGxC,OAFID,GAAYJ,EAAiBG,EAAYzwC,UAAW0wC,GACpDC,GAAaL,EAAiBG,EAAaE,GACxCF,GAdQ,GAsBfvH,EAkCJ,SAAiC5hC,GAC/B,GAAIA,GAAOA,EAAIwmC,WACb,OAAOxmC,EAEP,IAAIwnC,EAAS,GAEb,GAAW,MAAPxnC,EACF,IAAK,IAAI9D,KAAO8D,EACVhI,OAAOU,UAAUL,eAAee,KAAK4G,EAAK9D,KAAMsrC,EAAOtrC,GAAO8D,EAAI9D,IAK1E,OADAsrC,EAAOtB,QAAUlmC,EACVwnC,EA/CCC,CAFC,EAAQ,IAIjB2b,EAAY,EAAQ,IAIpB7Z,GAFS,EAAQ,GAEH,EAAQ,KAItB8Z,EAAUtc,EAFD,EAAQ,MAIjBT,EAAoB,EAAQ,IAE5BC,EAAqBQ,EAAuBT,GAI5Cgd,EAAiBvc,EAFD,EAAQ,MAIxBwa,EAAgB,EAAQ,IAIxB9R,EAAS1I,EAFD,EAAQ,MAMhBwc,EAAqBxc,EAFD,EAAQ,MAM5Bya,EAAkBza,EAFD,EAAQ,MAqB7B,SAASA,EAAuB/mC,GAC9B,OAAOA,GAAOA,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,GAuCb,SAAS0pC,EAA2BC,EAAMvwC,GACxC,IAAKuwC,EACH,MAAM,IAAIC,eAAe,6DAG3B,OAAOxwC,GAAyB,kBAATA,GAAqC,oBAATA,EAA8BuwC,EAAPvwC,EAmB5E,IAAIoqD,GAAc,EAAIF,EAAepd,SAASiJ,EAAS,SAAUtF,GAG/D,SAAS2Z,IACP,IAAI5c,EAGAkD,EAAOphC,EAFPojC,EAAStzC,MAnCjB,SAAyBuxC,EAAUZ,GACjC,KAAMY,aAAoBZ,GACxB,MAAM,IAAIzuC,UAAU,qCAqCpBsvC,CAAgBxxC,KAAMgrD,GAEtB,IAAK,IAAIvZ,EAAO/wC,UAAUC,OAAQkD,EAAOlE,MAAM8xC,GAAOC,EAAO,EAAGA,EAAOD,EAAMC,IAC3E7tC,EAAK6tC,GAAQhxC,UAAUgxC,GAGzB,OAAeJ,EAASphC,EAAQghC,EAA2BlxC,MAAOouC,EAAO4c,EAAYtrD,WAAaF,OAAOmyC,eAAeqZ,IAAcpqD,KAAKC,MAAMutC,EAAM,CAACpuC,MAAM4B,OAAOiC,KAAiBqM,EAAM+6C,cAAgB,GAAI/6C,EAAMC,MAAQ,CAC5Nqd,WAAW,EACX09B,YAAY,EACZC,QAAS,IACRj7C,EAAMk7C,wBAA0B,SAAUpmC,GAE3C,IAAIqY,GAAU,EAAIutB,EAAUnY,aAAaviC,EAAMm7C,SAE/C,MAAKhuB,GAAWrY,EAAGpU,kBAAkB06C,aAAejuB,EAAQ1sB,SAASqU,EAAGpU,SAAWoU,EAAG9N,QAAwB,IAAd8N,EAAG9N,QAAnG,CAKA,IACE,IAAIq0C,GAAc,EAAIxa,EAAY0B,aAAaviC,EAAMF,MAAMgN,MAE3D,IAAKuuC,GAAevmC,EAAGpU,kBAAkB06C,aAAeC,EAAY56C,SAASqU,EAAGpU,SAAWoU,EAAG9N,QAAwB,IAAd8N,EAAG9N,OACzG,OAEF,MAAOpU,IAITkiB,EAAG7O,iBAEHjG,EAAMoC,KAAKpC,EAAMuN,MAAQvN,EAAMuN,MAAMhc,MAAQ,MAC5CyO,EAAMs7C,OAAS,WAChB,IArGqB5oD,EAqGjBwsC,GArGiBxsC,EAuGrBg0C,EAAclJ,QAAQuK,MAAK,SAASC,EAAQuT,GAC1C,IAAIlgC,EAAQmgC,EAEZ,OAAO9U,EAAclJ,QAAQ0K,MAAK,SAAkBC,GAClD,OACE,OAAQA,EAASC,KAAOD,EAAS/2C,MAC/B,KAAK,EAGH,IAFAiqB,EAASrb,EAAMF,MAAMub,QAEVvb,MAAM0pC,aAAc,CAC7BrB,EAAS/2C,KAAO,EAChB,MAGF,OAAO+2C,EAASE,OAAO,UAEzB,KAAK,EAKH,GAJAroC,EAAMgB,SAAS,CACbg6C,YAAY,KAGTO,EAAM,CACTpT,EAAS/2C,KAAO,GAChB,MAKF,OAFA+2C,EAASC,KAAO,EAChBD,EAAS/2C,KAAO,EACTiqB,EAAOvb,MAAM0pC,aAAa+R,GAEnC,KAAK,EACHC,EAAWrT,EAASsT,KAEpBz7C,EAAMgB,SAAS,CACbi6C,QAASO,IAGXrT,EAAS/2C,KAAO,GAChB,MAEF,KAAK,GACH+2C,EAASC,KAAO,GAChBD,EAASuT,GAAKvT,EAAgB,MAAE,GAChCyC,QAAQp5C,MAAM22C,EAASuT,IAEzB,KAAK,GACHvT,EAAS/2C,KAAO,GAChB,MAEF,KAAK,GACH4O,EAAMgB,SAAS,CACbi6C,QAAS,KAGb,KAAK,GACHj7C,EAAMgB,SAAS,CACbg6C,YAAY,IAGhB,KAAK,GACL,IAAK,MACH,OAAO7S,EAASO,UAGrBV,EAAS5E,EAAQ,CAAC,CAAC,EAAG,SAtKxB,WACL,IAAIuF,EAAMj2C,EAAG/B,MAAMb,KAAMU,WACzB,OAAO,IAAIgd,SAAQ,SAAUC,EAASC,GAqBpC,OApBA,SAASk7B,EAAKp1C,EAAKS,GACjB,IACE,IAAI40C,EAAOF,EAAIn1C,GAAKS,GAChB1C,EAAQs3C,EAAKt3C,MACjB,MAAOC,GAEP,YADAkc,EAAOlc,GAIT,IAAIq3C,EAAKx3C,KAGP,OAAOmc,QAAQC,QAAQlc,GAAOk4B,MAAK,SAAUl4B,GAC3Cq3C,EAAK,OAAQr3C,MACZ,SAAUqB,GACXg2C,EAAK,QAASh2C,MALhB6a,EAAQlc,GAULq3C,CAAK,aAkJZ,OAAO,SAAUE,GACf,OAAO5J,EAAMvuC,MAAMb,KAAMU,YAvEX,GAyEbwP,EAAM27C,mBAAqB,SAAU7mC,EAAIjI,GAC5CiI,EAAG7O,iBAEHjG,EAAMoC,KAAKyK,IACV7M,EAAM47C,OAAS,WAChB57C,EAAMoC,KAAKpC,EAAM+6C,gBAChB/6C,EAAMK,UAAY,SAAUyU,GAC7B,OAAQA,EAAGthB,KACT,IAAK,QAEH,GADAshB,EAAG7O,mBACG6O,EAAGpU,kBAAkBm7C,kBAAmB,OAC9C,OAAO77C,EAAMoC,KAAK0S,EAAGpU,OAAOnP,OAE9B,IAAK,SAGH,OAFAujB,EAAG7O,iBACH6O,EAAG3U,kBACIH,EAAM47C,SAEf,IAAK,YAGH,GAFA9mC,EAAG7O,iBAECjG,EAAM87C,cAAe,CACvB,IAAI3uB,GAAU,EAAIutB,EAAUnY,aAAaviC,EAAM87C,eAC3C3uB,aAAmBiuB,aAAajuB,EAAQgc,WAOjDnpC,EAAM/M,SAAW,SAAU6hB,GAC5B,GAAK9U,EAAMF,MAAMub,OAAOvb,MAAM0pC,aAA9B,CAEA,IACE,IAAIuS,IAAIjnC,EAAGpU,OAAOnP,OAClB,MAAOqB,GAIP,YAFAoN,EAAMs7C,OAAOxmC,EAAGpU,OAAOnP,OAKzByO,EAAMgB,SAAS,CACbi6C,QAAS,OAEVj7C,EAAMg8C,gBAAkB,SAAUlnC,GACpB,WAAXA,EAAGthB,MACLshB,EAAG7O,iBACH6O,EAAG3U,kBAEHH,EAAM47C,WAEP57C,EAAMi8C,WAAa,WACpBj8C,EAAMoC,KAAK,KACVpC,EAAMk8C,SAAW,SAAUpnC,GAC5B,IAAImtB,EAAcjiC,EAAMF,MACpBgN,EAAOm1B,EAAYn1B,KACnBuO,EAAS4mB,EAAY5mB,OACrBrO,EAAOF,EAAKnV,KAAKR,IAAI,QAErBkkB,EAAOvb,MAAM2pC,aACf30B,EAAG7O,iBACHoV,EAAOvb,MAAM2pC,YAAYz8B,IAEzB0vB,OAAOhL,KAAK1kB,EAAM,WAEnBhN,EAAMoC,KAAO,SAAU4K,GACxB,IAAImvC,EAAen8C,EAAMF,MACrBub,EAAS8gC,EAAa9gC,OACtBvO,EAAOqvC,EAAarvC,MACxBE,EAAOA,EAAK2nC,QAGVt5B,EAAO42B,aAAanlC,EAAKtZ,IAAK,CAC5BkE,KAAM,OACNC,KAAM,CACJqV,KAAMA,KAGDF,GACTuO,EAAO+gC,kBAAkBtvC,EAAKtZ,KAGhC6nB,EAAOghC,WAEPr8C,EAAMF,MAAMwjC,UACXtjC,EAAMs8C,kBAAoB,SAAUx7C,GACrCd,EAAM87C,cAAgBh7C,GACrBd,EAAMu8C,cAAgB,SAAUz7C,GACjCd,EAAMm7C,QAAUr6C,GACPkgC,EAA2BhhC,EAAnCohC,GAmFL,OA/SF,SAAmB6B,EAAUC,GAC3B,GAA0B,oBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAIlxC,UAAU,kEAAoEkxC,GAG1FD,EAASjzC,UAAYV,OAAOW,OAAOizC,GAAcA,EAAWlzC,UAAW,CACrED,YAAa,CACXwB,MAAO0xC,EACP7rC,YAAY,EACZopC,UAAU,EACVnpC,cAAc,KAGd6rC,IAAY5zC,OAAOC,eAAiBD,OAAOC,eAAe0zC,EAAUC,GAAcD,EAASzzC,UAAY0zC,GAI3GC,CAAU2X,EAAa3Z,GA8MvBd,EAAaya,EAAa,CAAC,CACzBtnD,IAAK,oBACLjC,MAAO,WACL,IAAIirD,EAAS1sD,KAEbA,KAAKirD,cAAgBjrD,KAAKgQ,MAAMgN,KAAKnV,KAAKR,IAAI,QAC9CrH,KAAKkR,SAAS,CACZsc,YAAaxtB,KAAKirD,gBAGE,qBAAXre,QACT6a,GAAa,WACX,OAAO7a,OAAOv7B,iBAAiB,YAAaq7C,EAAOtB,8BAIxD,CACD1nD,IAAK,uBACLjC,MAAO,WACiB,qBAAXmrC,QACTA,OAAOr7B,oBAAoB,YAAavR,KAAKorD,2BAGhD,CACD1nD,IAAK,SACLjC,MAAO,WACL,IAAIkrD,EAAS3sD,KAETkd,EAAOld,KAAKgQ,MAAMgN,KAAKnV,KAAKR,IAAI,QAChCulD,EAAa5sD,KAAKmQ,MAAMg7C,QAAQxqD,OAAS,EACzCqpD,EAAUhqD,KAAKgQ,MAAMub,OAAOvb,MAAMqgB,QACtC,OAAO+Y,EAAMnsB,cAAc,OAAQ,CACjCjM,IAAKhR,KAAKysD,eACTrjB,EAAMnsB,cAAc4vC,EAAY,KAAMzjB,EAAMnsB,cAAc6vC,EAAO,CAClE97C,IAAK,SAAas+B,GAChB,OAAOqd,EAAOlvC,MAAQ6xB,GAExB0K,aAAc98B,EACdrL,YAAa,+BACbtB,UAAWvQ,KAAKuQ,UAChBpN,SAAUnD,KAAKmD,SACf6O,UAAoB,KAATkL,IACTld,KAAKmQ,MAAMqd,WAAa4b,EAAMnsB,cAAc+rC,EAAgBtb,QAAS,CACvEt9B,YAAapQ,KAAKosD,UACjBhjB,EAAMnsB,cAAc+sC,EAAS,CAC9B35B,QAAS,YACT45B,UAAW,OACV7gB,EAAMnsB,cAAc8rC,EAAcgE,SAAU,CAC7Cn4B,MAAO50B,KAAKgQ,MAAMtD,MAAMknC,gBACpBxK,EAAMnsB,cAAc+rC,EAAgBtb,QAAS,CACjDt9B,YAAapQ,KAAKmsD,YACjBnsD,KAAKmQ,MAAMqd,UAAY4b,EAAMnsB,cAAc+sC,EAAS,CACrD35B,QAAS,cACT45B,UAAW,OACV7gB,EAAMnsB,cAAc8rC,EAAciE,UAAW,CAC9Cp4B,MAAO50B,KAAKgQ,MAAMtD,MAAMknC,eACpBxK,EAAMnsB,cAAc+sC,EAAS,CACjC35B,QAAS,eACT45B,UAAW,OACV7gB,EAAMnsB,cAAc8rC,EAAc1vC,UAAW,CAC9Cub,MAAO50B,KAAKgQ,MAAMtD,MAAMknC,iBACnBgZ,GAAcxjB,EAAMnsB,cAAcgwC,EAAe,KAAM7jB,EAAMnsB,cAAc4tC,EAAQnd,QAAS,CACjGwf,KAAMrC,EAAQnd,QAAQwf,KAAKC,SAC3BC,wBAAyB,GACxBptD,KAAKmQ,MAAMg7C,QAAQxjD,KAAI,SAAUyW,EAAQ3b,GAC1C,OAAO2mC,EAAMnsB,cAAc8tC,EAAmBrd,QAAS,CACrD18B,IAAK,SAAaw+B,GAChB,OAAiB,IAAV/sC,GAAekqD,EAAOH,kBAAkBhd,IAEjD1oB,MAAO1I,EAAO0I,MACdpjB,IAAK0a,EAAOrB,IACZuK,QAAS,SAAiBtC,GACxB,OAAO2nC,EAAOd,mBAAmB7mC,EAAI5G,EAAOrB,MAE9CxM,UAAWo8C,EAAOT,4BAMnBlB,EA/R8C,CAgSrD5hB,EAAMqD,aAAekK,EAEnBsW,EAAgBlf,EAAmBL,QAAQ39B,IAAIk+B,WAAW,CAC5DC,YAAa,6BACbC,YAAa,YAFKJ,CAGjB,CAAC,cAAe,qIAAqI,SAAU/9B,GAChK,OAAOA,EAAMtD,MAAMgnC,qBAGjBmZ,GAAa,EAAI9e,EAAmBL,SAASuJ,EAAOvJ,SAASO,WAAW,CAC1EC,YAAa,0BACbC,YAAa,YAFE,CAGd,CAAC,wDAEA2e,EAAQ/e,EAAmBL,QAAQjwB,MAAMwwB,WAAW,CACtDC,YAAa,qBACbC,YAAa,YAFHJ,CAGT,CAAC,6BAA8B,UAAW,mFAAmF,SAAU/9B,GACxI,OAAOA,EAAMtD,MAAMywC,gBAClB,SAAUntC,GACX,OAAOA,EAAMtD,MAAMknC,eAGrBnG,EAAQC,SAAU,EAAII,EAAkB6c,WAAWK,K,iECzcnDxrD,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAGT,IA0CgC+F,EA1C5B6oC,EAAW7wC,OAAOa,QAAU,SAAUuQ,GACxC,IAAK,IAAIpQ,EAAI,EAAGA,EAAIE,UAAUC,OAAQH,IAAK,CACzC,IAAI8vC,EAAS5vC,UAAUF,GAEvB,IAAK,IAAIkD,KAAO4sC,EACV9wC,OAAOU,UAAUL,eAAee,KAAK0vC,EAAQ5sC,KAC/CkN,EAAOlN,GAAO4sC,EAAO5sC,IAK3B,OAAOkN,GAGL2/B,EAAe,WACjB,SAASC,EAAiB5/B,EAAQZ,GAChC,IAAK,IAAIxP,EAAI,EAAGA,EAAIwP,EAAMrP,OAAQH,IAAK,CACrC,IAAIiwC,EAAazgC,EAAMxP,GACvBiwC,EAAWnpC,WAAampC,EAAWnpC,aAAc,EACjDmpC,EAAWlpC,cAAe,EACtB,UAAWkpC,IAAYA,EAAWC,UAAW,GACjDlxC,OAAO4H,eAAewJ,EAAQ6/B,EAAW/sC,IAAK+sC,IAIlD,OAAO,SAAUE,EAAaC,EAAYC,GAGxC,OAFID,GAAYJ,EAAiBG,EAAYzwC,UAAW0wC,GACpDC,GAAaL,EAAiBG,EAAaE,GACxCF,GAdQ,GAoBfvH,EAcJ,SAAiC5hC,GAC/B,GAAIA,GAAOA,EAAIwmC,WACb,OAAOxmC,EAEP,IAAIwnC,EAAS,GAEb,GAAW,MAAPxnC,EACF,IAAK,IAAI9D,KAAO8D,EACVhI,OAAOU,UAAUL,eAAee,KAAK4G,EAAK9D,KAAMsrC,EAAOtrC,GAAO8D,EAAI9D,IAK1E,OADAsrC,EAAOtB,QAAUlmC,EACVwnC,EA3BCC,CAFC,EAAQ,IAIjBnB,EAAoB,EAAQ,IAE5BC,GAI4BvmC,EAJgBsmC,IAKhCtmC,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,GAJTuhD,EAAgB,EAAQ,IAmE5B,IAAIsE,EAAmB,SAAUhc,GAG/B,SAASgc,IAGP,OApCJ,SAAyB9b,EAAUZ,GACjC,KAAMY,aAAoBZ,GACxB,MAAM,IAAIzuC,UAAU,qCAgCpBsvC,CAAgBxxC,KAAMqtD,GA5B1B,SAAoClc,EAAMvwC,GACxC,IAAKuwC,EACH,MAAM,IAAIC,eAAe,6DAG3B,OAAOxwC,GAAyB,kBAATA,GAAqC,oBAATA,EAA8BuwC,EAAPvwC,EAyBjEswC,CAA2BlxC,MAAOqtD,EAAiB3tD,WAAaF,OAAOmyC,eAAe0b,IAAmBxsD,MAAMb,KAAMU,YAkB9H,OAxCF,SAAmByyC,EAAUC,GAC3B,GAA0B,oBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAIlxC,UAAU,kEAAoEkxC,GAG1FD,EAASjzC,UAAYV,OAAOW,OAAOizC,GAAcA,EAAWlzC,UAAW,CACrED,YAAa,CACXwB,MAAO0xC,EACP7rC,YAAY,EACZopC,UAAU,EACVnpC,cAAc,KAGd6rC,IAAY5zC,OAAOC,eAAiBD,OAAOC,eAAe0zC,EAAUC,GAAcD,EAASzzC,UAAY0zC,GAI3GC,CAAUga,EAAkBhc,GAQ5Bd,EAAa8c,EAAkB,CAAC,CAC9B3pD,IAAK,SACLjC,MAAO,WACL,IAAI0yC,EAASn0C,KAAKgQ,MACd8W,EAAQqtB,EAAOrtB,MACfstB,EAxDV,SAAkC5sC,EAAKiE,GACrC,IAAImF,EAAS,GAEb,IAAK,IAAIpQ,KAAKgH,EACRiE,EAAKb,QAAQpK,IAAM,GAClBhB,OAAOU,UAAUL,eAAee,KAAK4G,EAAKhH,KAC/CoQ,EAAOpQ,GAAKgH,EAAIhH,IAGlB,OAAOoQ,EA+CQ8+B,CAAyByE,EAAQ,CAAC,UAE7C,OAAO/K,EAAMnsB,cAAc0rC,EAAUtY,EAAS,GAAI+D,EAAM,CACtDl3B,KAAM,KACJksB,EAAMnsB,cAAc,IAAK,KAAMmsB,EAAMnsB,cAAc8rC,EAAcuE,SAAU,CAC7E7V,OAAO,KACJ3wB,OAIFumC,EAxBc,CAyBrBjkB,EAAMqD,WAEJkc,EAAW5a,EAAmBL,QAAQz0B,EAAEg1B,WAAW,CACrDC,YAAa,6BACbC,YAAa,YAFAJ,CAGZ,CAAC,2EAA4E,gBAAiB,+KAA+K,SAAU/9B,GACxR,OAAOA,EAAMtD,MAAMknC,eAClB,SAAU5jC,GACX,OAAOA,EAAMtD,MAAM6zB,cAGrBkN,EAAQC,QAAU2f,G,iCCnJlB7tD,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAGT,IAEI2uC,EAAY7B,EAFA,EAAQ,MAIpB8B,EAAW7wC,OAAOa,QAAU,SAAUuQ,GACxC,IAAK,IAAIpQ,EAAI,EAAGA,EAAIE,UAAUC,OAAQH,IAAK,CACzC,IAAI8vC,EAAS5vC,UAAUF,GAEvB,IAAK,IAAIkD,KAAO4sC,EACV9wC,OAAOU,UAAUL,eAAee,KAAK0vC,EAAQ5sC,KAC/CkN,EAAOlN,GAAO4sC,EAAO5sC,IAK3B,OAAOkN,GAGL2/B,EAAe,WACjB,SAASC,EAAiB5/B,EAAQZ,GAChC,IAAK,IAAIxP,EAAI,EAAGA,EAAIwP,EAAMrP,OAAQH,IAAK,CACrC,IAAIiwC,EAAazgC,EAAMxP,GACvBiwC,EAAWnpC,WAAampC,EAAWnpC,aAAc,EACjDmpC,EAAWlpC,cAAe,EACtB,UAAWkpC,IAAYA,EAAWC,UAAW,GACjDlxC,OAAO4H,eAAewJ,EAAQ6/B,EAAW/sC,IAAK+sC,IAIlD,OAAO,SAAUE,EAAaC,EAAYC,GAGxC,OAFID,GAAYJ,EAAiBG,EAAYzwC,UAAW0wC,GACpDC,GAAaL,EAAiBG,EAAaE,GACxCF,GAdQ,GAoBfvH,EAcJ,SAAiC5hC,GAC/B,GAAIA,GAAOA,EAAIwmC,WACb,OAAOxmC,EAEP,IAAIwnC,EAAS,GAEb,GAAW,MAAPxnC,EACF,IAAK,IAAI9D,KAAO8D,EACVhI,OAAOU,UAAUL,eAAee,KAAK4G,EAAK9D,KAAMsrC,EAAOtrC,GAAO8D,EAAI9D,IAK1E,OADAsrC,EAAOtB,QAAUlmC,EACVwnC,EA3BCC,CAFC,EAAQ,IAIjB6B,EAAe,EAAQ,KAIvBC,GAFS,EAAQ,GAEH,EAAQ,KAEtBjD,EAAoB,EAAQ,IAE5BC,EAAqBQ,EAAuBT,GAE5Cib,EAAgB,EAAQ,IAmB5B,SAASxa,EAAuB/mC,GAC9B,OAAOA,GAAOA,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,GAUb,SAAS0pC,EAA2BC,EAAMvwC,GACxC,IAAKuwC,EACH,MAAM,IAAIC,eAAe,6DAG3B,OAAOxwC,GAAyB,kBAATA,GAAqC,oBAATA,EAA8BuwC,EAAPvwC,EAuD5E,IAAI2sD,EAAc,SAAUlc,GAG1B,SAASkc,IACP,IAAInf,EAEAkD,EAAOphC,GAxEf,SAAyBqhC,EAAUZ,GACjC,KAAMY,aAAoBZ,GACxB,MAAM,IAAIzuC,UAAU,qCAwEpBsvC,CAAgBxxC,KAAMutD,GAEtB,IAAK,IAAI9b,EAAO/wC,UAAUC,OAAQkD,EAAOlE,MAAM8xC,GAAOC,EAAO,EAAGA,EAAOD,EAAMC,IAC3E7tC,EAAK6tC,GAAQhxC,UAAUgxC,GAGzB,OAAeJ,EAASphC,EAAQghC,EAA2BlxC,MAAOouC,EAAOmf,EAAY7tD,WAAaF,OAAOmyC,eAAe4b,IAAc3sD,KAAKC,MAAMutC,EAAM,CAACpuC,MAAM4B,OAAOiC,KAAiBqM,EAAMC,MAAQ,CAClMsG,KAAM,IACND,MAAO,IACP63B,QAAQ,EACRmf,qBAAiBn+C,GAChBa,EAAMiB,kBAAoB,WACL,qBAAXy7B,QACTA,OAAOv7B,iBAAiB,YAAanB,EAAMu9C,kBAE5Cv9C,EAAMoB,qBAAuB,WAC1BpB,EAAMw9C,kBAAkBnhC,aAAarc,EAAMw9C,kBAEzB,qBAAX9gB,QACTA,OAAOr7B,oBAAoB,YAAarB,EAAMu9C,kBAE/Cv9C,EAAMy9C,YAAc,WACrBz9C,EAAMgB,SAAS,CACbm9B,QAAQ,KAETn+B,EAAMu9C,gBAAkB,SAAUzoC,GACnC,IAAI4oC,EAAe19C,EAAMc,IAAMd,EAAMc,IAAIuO,wBAAwB/I,KAAO,IAAMo2B,OAAOihB,WACjFzvC,EAvEV,SAA6B3c,EAAOujB,GAClC,IAAI8oC,OAAW,EACX7I,GAA4B,EAC5BC,GAAoB,EACpBC,OAAiB91C,EAErB,IACE,IAAK,IAAyD+1C,EAArDC,EAAY5jD,EAAM2P,SAASu9B,MAAM1tC,OAAOC,cAAsB+jD,GAA6BG,EAAQC,EAAU/jD,QAAQC,MAAO0jD,GAA4B,EAAM,CACrK,IAAIjtC,EAAOotC,EAAM3jD,MACb47B,GAAU,EAAI0T,EAAY0B,aAAaz6B,GACvC+1C,EAAS1wB,EAAQ9d,wBACrB,GAAIwuC,EAAOt3C,IAAMuO,EAAG1N,QAAS,OAAOw2C,EACpCA,EAAW,CACT91C,KAAMA,EACNqlB,QAASA,EACT0wB,OAAQA,IAGZ,MAAOjrD,GACPoiD,GAAoB,EACpBC,EAAiBriD,EACjB,QACA,KACOmiD,GAA6BI,EAAU9iD,QAC1C8iD,EAAU9iD,SAEZ,QACA,GAAI2iD,EACF,MAAMC,GAKZ,OAAO2I,EAsCUE,CAAoB99C,EAAMF,MAAMub,OAAO9pB,MAAOujB,GAEvDwtB,EAAWnC,EAAS,GAAIngC,EAAMC,QAElCqiC,EAASnE,OAASrpB,EAAG5N,QAAUw2C,EAE3BxvC,KACFo0B,EAASgb,gBAAkBpvC,EAAOpG,KAGK,cAArBoG,EAAOpG,KAAKpQ,QAA0BwW,EAAOpG,KAAKhF,KAAK6xC,QAAUzmC,EAAOpG,KAAKomC,QAG7F5L,EAASh8B,MAAQ,IACjBg8B,EAASnE,QAAS,IAElBmE,EAASh8B,KAAOzP,KAAKgsC,MAAM30B,EAAO2vC,OAAOv3C,KAAO,IAChDg8B,EAAS/7B,IAAM1P,KAAKgsC,MAAM30B,EAAO2vC,OAAOt3C,IAAMm2B,OAAOoG,WAIrD9iC,EAAMC,MAAMk+B,SACVn+B,EAAMw9C,kBAAkBnhC,aAAarc,EAAMw9C,kBAC/Cx9C,EAAMw9C,iBAAmBrhC,WAAWnc,EAAMy9C,YAAa,OAGpD,EAAIvd,EAAU1C,SAAS8E,EAAUtiC,EAAMC,QAC1CD,EAAMgB,SAASshC,IAEhBtiC,EAAMklB,YAAc,SAAUpQ,GAC/BA,EAAG7O,iBACH6O,EAAG3U,kBAEHH,EAAMgB,SAAS,CACbm9B,QAAQ,IAGV,IAAI9iB,EAASrb,EAAMF,MAAMub,OAEzBA,EAAO9pB,MAAM2P,SAASu9B,MAAMlrC,SAAQ,SAAUuU,GAC1B,kBAAdA,EAAKpQ,MACP2jB,EAAO42B,aAAanqC,EAAKtU,IAAK,CAC5BkE,KAAM,YACNw2C,QAAQ,OAId,IAAIpmC,EAAO9H,EAAMC,MAAMq9C,gBAClBx1C,IAEAA,EAAKhF,KAAK6xC,QAAwB,cAAd7sC,EAAKpQ,MAC5B2jB,EAAO42B,aAAanqC,EAAKtU,IAAK,CAC5BkE,KAAM,gBACNw2C,QAAQ,MAGXluC,EAAM+9C,OAAS,SAAUj9C,GAC1Bd,EAAMc,IAAMA,GACHkgC,EAA2BhhC,EAAnCohC,GAuBL,OAxKF,SAAmB6B,EAAUC,GAC3B,GAA0B,oBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAIlxC,UAAU,kEAAoEkxC,GAG1FD,EAASjzC,UAAYV,OAAOW,OAAOizC,GAAcA,EAAWlzC,UAAW,CACrED,YAAa,CACXwB,MAAO0xC,EACP7rC,YAAY,EACZopC,UAAU,EACVnpC,cAAc,KAGd6rC,IAAY5zC,OAAOC,eAAiBD,OAAOC,eAAe0zC,EAAUC,GAAcD,EAASzzC,UAAY0zC,GAwC3GC,CAAUka,EAAalc,GA+FvBd,EAAagd,EAAa,CAAC,CACzB7pD,IAAK,SACLjC,MAAO,WACL,IAAIiL,EAAQ1M,KAAKgQ,MAAMtD,MACnB7D,EAAQ,CACV4N,IAAKzW,KAAKmQ,MAAMsG,IAAM,KACtBD,KAAMxW,KAAKmQ,MAAMqG,KAAO,MAE1B,OAAO4yB,EAAMnsB,cAAcmsB,EAAM4M,SAAU,KAAM5M,EAAMnsB,cAAc,OAAQ,CAC3EjM,IAAKhR,KAAKiuD,SACR7kB,EAAMnsB,cAAc6zB,EAAayC,OAAQ,KAAMnK,EAAMnsB,cAAcixC,EAAS,CAC9E7f,OAAQruC,KAAKmQ,MAAMk+B,OACnBxlC,MAAOA,GACNugC,EAAMnsB,cAAc8rC,EAAcoF,SAAU,CAC7C7mC,QAAStnB,KAAKo1B,YACdR,MAAOloB,EAAM2wC,6BAKZkQ,EApHS,CAqHhBnkB,EAAMqD,WAEJyhB,EAAUngB,EAAmBL,QAAQ39B,IAAIk+B,WAAW,CACtDC,YAAa,uBACbC,YAAa,eAFDJ,CAGX,CAAC,6BAA8B,+BAAgC,kLAAmL,oFAAqF,aAAc,MAAO,MAAM,SAAU/9B,GAC7W,OAAOA,EAAMtD,MAAMgN,OAAS,MAC3B,SAAU1J,GACX,OAAOA,EAAMtD,MAAMU,cAClB,SAAU4C,GACX,OAAOA,EAAMtD,MAAM2wC,uBAClB,SAAUrtC,GACX,OAAOA,EAAMtD,MAAM2wC,uBAClB,SAAUrtC,GACX,OAAOA,EAAMtD,MAAM4wC,2BAClB,SAAUlO,GAEX,OADaA,EAAMf,QACF,sDAGnBZ,EAAQC,SAAU,EAAII,EAAkB6c,WAAW4C,I,iCC1RnD/tD,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAGT,IAAI4uC,EAAW7wC,OAAOa,QAAU,SAAUuQ,GACxC,IAAK,IAAIpQ,EAAI,EAAGA,EAAIE,UAAUC,OAAQH,IAAK,CACzC,IAAI8vC,EAAS5vC,UAAUF,GAEvB,IAAK,IAAIkD,KAAO4sC,EACV9wC,OAAOU,UAAUL,eAAee,KAAK0vC,EAAQ5sC,KAC/CkN,EAAOlN,GAAO4sC,EAAO5sC,IAK3B,OAAOkN,GAsLT68B,EAAQC,QAnLR,WACE,MAAO,CACLgJ,OAAQ,CACN1uC,OAAQ,CACN,aAAc,CACZH,KAAM,CACJ0nC,MAAO,SAAe6e,GACpB,MAAO,CAAC,OAAQ,SAAU,SAAS9pB,SAAS8pB,KAGhD7J,UAAW,SAAmBngD,EAAQ1C,GACjB,sBAAfA,EAAM2Q,MACRjO,EAAO+9C,aAAazgD,EAAMsW,KAAKtU,IAAK,CAClCmE,KAAMnG,EAAMsW,KAAKnQ,KAAKqC,IAAI,QAAS,cAO/CiwC,SAAU,CACRkU,eAAgB,SAAwB9iC,EAAQgkB,GAC9C,IAAI+e,EAAM/iC,EAAOgjC,YAAYhjC,EAAO9pB,OAUpC,OATkB8pB,EAAOijC,iBAAiBF,EAAIlZ,MAAOkZ,EAAI1Y,kBAC7CnyC,SAAQ,SAAUqyC,GAC5B,IAAIjuC,EAAOiuC,EAAKjuC,KAAK4mD,WACrBljC,EAAO42B,aAAarM,EAAKpyC,IAAK,CAC5BmE,KAAMwoC,EAAS,GAAIxoC,EAAM,CACvB0nC,MAAOA,SAINhkB,GAETmjC,oBAAqB,SAA6BnjC,EAAQ6pB,EAAOuZ,GACnDpjC,EAAOijC,iBAAiBpZ,EAAOuZ,GACrClrD,SAAQ,SAAUqyC,GACtB,GAAKA,EAAL,CACA,IAAIjuC,EAAOiuC,EAAKjuC,KAAK4mD,WACrBljC,EAAO42B,aAAarM,EAAKpyC,IAAK,CAC5BmE,KAAMwoC,EAAS,GAAIxoC,EAAM,CACvBs0C,cAAU9sC,WAKlBu/C,iBAAkB,SAA0BrjC,EAAQ6pB,EAAOyZ,GAC7CtjC,EAAOujC,cAAc1Z,EAAOyZ,GAClCprD,SAAQ,SAAUqyC,GACtB,GAAKA,EAAL,CACA,IAAIjuC,EAAOiuC,EAAKjuC,KAAK4mD,WACrBljC,EAAO42B,aAAarM,EAAKpyC,IAAK,CAC5BmE,KAAMwoC,EAAS,GAAIxoC,EAAM,CACvBs0C,cAAU9sC,WAKlB0/C,WAAY,SAAoBxjC,EAAQ6pB,EAAOyZ,GAC7C,IAAIG,EAAYzjC,EAAOujC,cAAc1Z,EAAO,GAGxCpuB,EAAWuE,EAAOspB,iBAAiBtpB,EAAO9pB,MAAM2P,SAAUgkC,EAAM1xC,KACxD6nB,EAAOujC,cAAc9nC,EAASouB,MAAOyZ,GAG3CprD,SAAQ,SAAUqyC,EAAMrzC,GAC5B,IACIoF,EADWmnD,EAAU3nD,IAAI5E,GACToF,KAAK4mD,WACzBljC,EAAO42B,aAAarM,EAAKpyC,IAAK,CAC5BmE,KAAMwoC,EAAS,GAAIxoC,EAAM,CACvBs0C,cAAU9sC,UAKlB0mC,cAAe,SAAuBxqB,EAAQ6pB,GAC5C,IAAI6Z,EAAyB7Z,EAAMvtC,KAAKR,IAAI,iBAAmB,GAC3D6nD,EAA4B9Z,EAAMvtC,KAAKR,IAAI,oBAAsB,GAmBrE,OAlBAkkB,EAAO4jC,eAAc,WACnBF,EAAuBxrD,SAAQ,SAAUorD,GACvCtjC,EAAOqjC,iBAAiBxZ,EAAOyZ,MAEjCK,EAA0BzrD,SAAQ,SAAUkrD,GAC1CpjC,EAAOmjC,oBAAoBtZ,EAAOuZ,OAGhCM,EAAuBtuD,QAAUuuD,EAA0BvuD,SAC7D4qB,EAAO42B,aAAa/M,EAAM1xC,IAAK,CAC7BmE,KAAM,CACJunD,eAAe,EACf5Z,gBAAiB,GACjBD,aAAc,SAKfhqB,GAET8qB,aAAc,SAAsB9qB,EAAQ4wB,GAC1C,IAAImS,EAAM/iC,EAAOgjC,YAAYhjC,EAAO9pB,OAChC4tD,EAAiBf,EAAI1Y,iBAmBzB,OAlBArqB,EAAO4jC,eAAc,WACnB5jC,EAAOwqB,cAAcuY,EAAIlZ,OACzB7pB,EAAO42B,aAAamM,EAAIlZ,MAAM1xC,IAAK,CACjCmE,KAAM,CACJ2tC,gBAAiB2G,EAAW,CAACkT,GAAkB,GAC/C9Z,aAAc,MAGNhqB,EAAOijC,iBAAiBF,EAAIlZ,MAAOia,GACzC5rD,SAAQ,SAAUqyC,GACtB,IAAIjuC,EAAOiuC,EAAKjuC,KAAK4mD,WACrBljC,EAAO42B,aAAarM,EAAKpyC,IAAK,CAC5BmE,KAAMwoC,EAAS,GAAIxoC,EAAM,CACvBs0C,SAAUA,YAKX5wB,GAET6qB,UAAW,SAAmB7qB,EAAQ4wB,GACpC,IAAImS,EAAM/iC,EAAOgjC,YAAYhjC,EAAO9pB,OAChC6tD,EAAchB,EAAI5Y,cAmBtB,OAlBAnqB,EAAO4jC,eAAc,WACnB5jC,EAAOwqB,cAAcuY,EAAIlZ,OACzB7pB,EAAO42B,aAAamM,EAAIlZ,MAAM1xC,IAAK,CACjCmE,KAAM,CACJ2tC,gBAAiB,GACjBD,aAAc4G,EAAW,CAACmT,GAAe,MAGjC/jC,EAAOujC,cAAcR,EAAIlZ,MAAOka,GACtC7rD,SAAQ,SAAUqyC,GACtB,IAAIjuC,EAAOiuC,EAAKjuC,KAAK4mD,WACrBljC,EAAO42B,aAAarM,EAAKpyC,IAAK,CAC5BmE,KAAMwoC,EAAS,GAAIxoC,EAAM,CACvBs0C,SAAUA,YAKX5wB,GAET2qB,UAAW,SAAmB3qB,GAC5B,IAAI4wB,IAAWz7C,UAAUC,OAAS,QAAsB0O,IAAjB3O,UAAU,KAAmBA,UAAU,GAC1E4tD,EAAM/iC,EAAOgjC,YAAYhjC,EAAO9pB,OACpC8pB,EAAO4jC,eAAc,WACnB5jC,EAAOw5B,oBAAmB,WACxB,IAAIzvC,EAAQg5C,EAAIiB,WACZ95C,EAAS64C,EAAIkB,YACb3nD,EAAO,CACTunD,eAAe,EACf5Z,gBAAiB71C,MAAM4qC,KAAK5qC,MAAM2V,GAAO7J,QACzC8pC,aAAc51C,MAAM4qC,KAAK5qC,MAAM8V,GAAQhK,SAEzC8f,EAAO42B,aAAamM,EAAIlZ,MAAM1xC,IAAK,CACjCmE,KAAMA,IAGR,IAAK,IAAIoX,EAAI,EAAGA,EAAIqvC,EAAIkB,YAAavwC,IAAK,CAC5BsM,EAAOujC,cAAcR,EAAIlZ,MAAOn2B,GACtCxb,SAAQ,SAAUqyC,GACtB,IAAIjuC,EAAOiuC,EAAKjuC,KAAK4mD,WACrBljC,EAAO42B,aAAarM,EAAKpyC,IAAK,CAC5BmE,KAAMwoC,EAAS,GAAIxoC,EAAM,CACvBs0C,SAAUA,qB,iCCzL9B38C,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAGT,IAEI2nC,EAwDJ,SAAiC5hC,GAC/B,GAAIA,GAAOA,EAAIwmC,WACb,OAAOxmC,EAEP,IAAIwnC,EAAS,GAEb,GAAW,MAAPxnC,EACF,IAAK,IAAI9D,KAAO8D,EACVhI,OAAOU,UAAUL,eAAee,KAAK4G,EAAK9D,KAAMsrC,EAAOtrC,GAAO8D,EAAI9D,IAK1E,OADAsrC,EAAOtB,QAAUlmC,EACVwnC,EArECC,CAFC,EAAQ,IAQjBwgB,GAJS,EAAQ,GAIRlhB,EAFD,EAAQ,OAMhBmhB,EAAiBnhB,EAFD,EAAQ,MAMxBohB,EAAmBphB,EAFD,EAAQ,MAM1BqhB,EAAUrhB,EAFD,EAAQ,MAMjBshB,EAASthB,EAFD,EAAQ,MAMhBiR,EAAUjR,EAFD,EAAQ,MAMjBuhB,EAASvhB,EAFD,EAAQ,MAMhBwhB,EAAQxhB,EAFD,EAAQ,MAMfyhB,EAAazhB,EAFD,EAAQ,MAMpB0hB,EAAa1hB,EAFD,EAAQ,MAIpB2hB,EAAW,EAAQ,KAInBC,EAAc5hB,EAFD,EAAQ,MAIzB,SAASA,EAAuB/mC,GAC9B,OAAOA,GAAOA,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,GAiGbimC,EAAQC,QAAU,CAChB0iB,WA7EF,SAAoBpgD,EAAOub,EAAQjqB,GACjC,IAAIszC,EAAa5kC,EAAM4kC,WAMvB,OALa5kC,EAAMgI,KAAKnQ,KAAKR,IAAI,YACrButC,EAAW/rC,MAAQ,CAC7BwnD,QAAS,SAGHrgD,EAAMgI,KAAKpQ,MACjB,IAAK,YACH,OAAOwhC,EAAMnsB,cAAckzC,EAAYziB,QAAS19B,GAElD,IAAK,gBACH,OAAOo5B,EAAMnsB,cAAcyyC,EAAehiB,QAAS19B,GAErD,IAAK,cACH,OAAOo5B,EAAMnsB,cAAc,aAAc23B,EAAY5kC,EAAM4H,UAE7D,IAAK,gBACH,OAAOwxB,EAAMnsB,cAAc,KAAM23B,EAAY5kC,EAAM4H,UAErD,IAAK,eACH,OAAOwxB,EAAMnsB,cAAc,KAAM23B,EAAY5kC,EAAM4H,UAErD,IAAK,YACH,OAAOwxB,EAAMnsB,cAAcgzC,EAAWviB,QAASkH,EAAY5kC,EAAM4H,UAEnE,IAAK,QACH,OAAOwxB,EAAMnsB,cAAcuiC,EAAQ9R,QAAS19B,EAAOA,EAAM4H,UAE3D,IAAK,YACH,OAAOwxB,EAAMnsB,cAAc8yC,EAAMriB,QAAS19B,GAE5C,IAAK,aACH,OAAOo5B,EAAMnsB,cAAc6yC,EAAOpiB,QAAS19B,GAE7C,IAAK,YACH,OAAOo5B,EAAMnsB,cAAc+yC,EAAWtiB,QAAS19B,GAEjD,IAAK,kBACH,OAAOo5B,EAAMnsB,cAAc0yC,EAAiBjiB,QAAS19B,GAEvD,IAAK,OACH,OAAOo5B,EAAMnsB,cAAcwyC,EAAO/hB,QAAS19B,GAE7C,IAAK,YACH,OAAOo5B,EAAMnsB,cAAc,MAAO23B,EAAY5kC,EAAM4H,UAEtD,IAAK,QACH,OAAOwxB,EAAMnsB,cAAc2yC,EAAQliB,QAAS19B,GAE9C,IAAK,OACH,OAAOo5B,EAAMnsB,cAAc4yC,EAAOniB,QAAS19B,GAE7C,IAAK,WACH,OAAOo5B,EAAMnsB,cAAcizC,EAASI,SAAUtgD,GAEhD,IAAK,WACH,OAAOo5B,EAAMnsB,cAAcizC,EAASK,SAAUvgD,GAEhD,IAAK,WACH,OAAOo5B,EAAMnsB,cAAcizC,EAASM,SAAUxgD,GAEhD,IAAK,WACH,OAAOo5B,EAAMnsB,cAAcizC,EAASO,SAAUzgD,GAEhD,IAAK,WACH,OAAOo5B,EAAMnsB,cAAcizC,EAASQ,SAAU1gD,GAEhD,IAAK,WACH,OAAOo5B,EAAMnsB,cAAcizC,EAASS,SAAU3gD,GAEhD,QACE,OAAO1O,Q,iCCvJb9B,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAGT,IAEImvD,EAAQriB,EAFA,EAAQ,MAIhB8B,EAAW7wC,OAAOa,QAAU,SAAUuQ,GACxC,IAAK,IAAIpQ,EAAI,EAAGA,EAAIE,UAAUC,OAAQH,IAAK,CACzC,IAAI8vC,EAAS5vC,UAAUF,GAEvB,IAAK,IAAIkD,KAAO4sC,EACV9wC,OAAOU,UAAUL,eAAee,KAAK0vC,EAAQ5sC,KAC/CkN,EAAOlN,GAAO4sC,EAAO5sC,IAK3B,OAAOkN,GAGT68B,EAAQC,QA2DR,SAAmBU,GACjB,IAAIx2B,EAAWw2B,EAAKx2B,SAChBI,EAAOo2B,EAAKp2B,KACZ5U,EAAWgrC,EAAKhrC,SAChBwxC,EAAaxG,EAAKwG,WAClBrpB,EAAS6iB,EAAK7iB,OACd1jB,EAAOmQ,EAAKnQ,KACZgpD,EAAWhpD,EAAKR,IAAI,aAAe,aAUvC,OAAO+hC,EAAMnsB,cAAciyB,EAAWmB,EAAS,GAAIuE,EAAY,CAC7DyF,YAAY,IACVj3C,GAAYgmC,EAAMnsB,cAAc6zC,EAAapjB,QAAS,CACxD16B,KAAM+9C,EAAY/4C,KAChBoxB,EAAMnsB,cAAc+zC,EAAM,KAAMp5C,IAAYxU,GAAYgmC,EAAMnsB,cAAcg0C,EAAU,CACxF9tD,SAbqB,SAA0B6hB,GAC/CuG,EAAO42B,aAAanqC,EAAKtU,IAAK,CAC5BmE,KAAMwoC,EAAS,GAAIxoC,EAAM,CACvBgpD,SAAU7rC,EAAGpU,OAAOnP,WAWxBA,MAAOovD,EACP5a,iBAAiB,IAChB,EAAI2a,EAAMljB,SAASwjB,GAAW,SAAUhkD,EAAMzL,GAC/C,OAAO2nC,EAAMnsB,cAAc,SAAU,CACnCvZ,IAAKjC,EACLA,MAAOA,GACNyL,SAtFP,IAEIk8B,EAUJ,SAAiC5hC,GAC/B,GAAIA,GAAOA,EAAIwmC,WACb,OAAOxmC,EAEP,IAAIwnC,EAAS,GAEb,GAAW,MAAPxnC,EACF,IAAK,IAAI9D,KAAO8D,EACVhI,OAAOU,UAAUL,eAAee,KAAK4G,EAAK9D,KAAMsrC,EAAOtrC,GAAO8D,EAAI9D,IAK1E,OADAsrC,EAAOtB,QAAUlmC,EACVwnC,EAvBCC,CAFC,EAAQ,IAMjBlB,EAAqBQ,EAFD,EAAQ,KAM5BuiB,EAAeviB,EAFD,EAAQ,MAqB1B,SAASA,EAAuB/mC,GAC9B,OAAOA,GAAOA,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,GAIb,SAASupD,EAAY/4C,GACnB,OAAOA,EAAK22B,MAAMtlC,QAAO,SAAU8nD,EAAMC,GACvC,MAAO,GAAKD,EAAOC,EAAKp+C,KAAO,OAC9B,IAGL,IAAIk+C,EAAY,CACdG,KAAM,OACNC,KAAM,OACNC,IAAK,MACLC,MAAO,IACPC,OAAQ,KACRC,OAAQ,OACRC,KAAM,OACNC,WAAY,aACZC,IAAK,MACLC,WAAY,aACZC,OAAQ,SACRC,KAAM,OACNC,WAAY,cAyCd,IAAIjB,EAAOjjB,EAAmBL,QAAQr7B,KAAK47B,WAAW,CACpDC,YAAa,OACbC,YAAa,YAFJJ,CAGR,CAAC,oHAAqH,2NAA4N,6EAA8E,8BAA+B,qFAAsF,2BAA4B,sBAAuB,yBAA0B,2BAA4B,4BAA6B,qFAAsF,wFAAyF,2BAA4B,uDAAwD,8CAA+C,2FAA4F,iIAAkI,kCAAkC,SAAU/9B,GACxtC,OAAOA,EAAMtD,MAAMsvC,kBAClB,SAAUhsC,GACX,OAAOA,EAAMtD,MAAM2F,QAClB,SAAUrC,GACX,OAAOA,EAAMtD,MAAM0vC,eAClB,SAAUpsC,GACX,OAAOA,EAAMtD,MAAM2vC,mBAClB,SAAUrsC,GACX,OAAOA,EAAMtD,MAAM4vC,cAClB,SAAUtsC,GACX,OAAOA,EAAMtD,MAAM6vC,gBAClB,SAAUvsC,GACX,OAAOA,EAAMtD,MAAM8vC,WAClB,SAAUxsC,GACX,OAAOA,EAAMtD,MAAM+vC,cAClB,SAAUzsC,GACX,OAAOA,EAAMtD,MAAMgwC,gBAClB,SAAU1sC,GACX,OAAOA,EAAMtD,MAAMiwC,YAClB,SAAU3sC,GACX,OAAOA,EAAMtD,MAAMkwC,cAClB,SAAU5sC,GACX,OAAOA,EAAMtD,MAAMmwC,eAClB,SAAU7sC,GACX,OAAOA,EAAMtD,MAAMowC,gBAClB,SAAU9sC,GACX,OAAOA,EAAMtD,MAAMqwC,iBAClB,SAAU/sC,GACX,OAAOA,EAAMtD,MAAMswC,mBAClB,SAAUhtC,GACX,OAAOA,EAAMtD,MAAMuwC,gBAClB,SAAUjtC,GACX,OAAOA,EAAMtD,MAAMwwC,iBAGjB+T,EAAWljB,EAAmBL,QAAQwkB,OAAOjkB,WAAW,CAC1DC,YAAa,iBACbC,YAAa,YAFAJ,CAGZ,CAAC,sDAEAmB,EAAYnB,EAAmBL,QAAQ39B,IAAIk+B,WAAW,CACxDC,YAAa,kBACbC,YAAa,YAFCJ,CAGb,CAAC,gCAAiC,uCAAwC,8BAA+B,kBAAkB,SAAU/9B,GACtI,OAAOA,EAAMtD,MAAM+wC,kBAClB,SAAUztC,GACX,OAAOA,EAAMtD,MAAMgxC,aAClBuT,I,iCC1KHzxD,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAGT,IAAI4uC,EAAW7wC,OAAOa,QAAU,SAAUuQ,GACxC,IAAK,IAAIpQ,EAAI,EAAGA,EAAIE,UAAUC,OAAQH,IAAK,CACzC,IAAI8vC,EAAS5vC,UAAUF,GAEvB,IAAK,IAAIkD,KAAO4sC,EACV9wC,OAAOU,UAAUL,eAAee,KAAK0vC,EAAQ5sC,KAC/CkN,EAAOlN,GAAO4sC,EAAO5sC,IAK3B,OAAOkN,GAGL2/B,EAAe,WACjB,SAASC,EAAiB5/B,EAAQZ,GAChC,IAAK,IAAIxP,EAAI,EAAGA,EAAIwP,EAAMrP,OAAQH,IAAK,CACrC,IAAIiwC,EAAazgC,EAAMxP,GACvBiwC,EAAWnpC,WAAampC,EAAWnpC,aAAc,EACjDmpC,EAAWlpC,cAAe,EACtB,UAAWkpC,IAAYA,EAAWC,UAAW,GACjDlxC,OAAO4H,eAAewJ,EAAQ6/B,EAAW/sC,IAAK+sC,IAIlD,OAAO,SAAUE,EAAaC,EAAYC,GAGxC,OAFID,GAAYJ,EAAiBG,EAAYzwC,UAAW0wC,GACpDC,GAAaL,EAAiBG,EAAaE,GACxCF,GAdQ,GAoBfvH,EAgBJ,SAAiC5hC,GAC/B,GAAIA,GAAOA,EAAIwmC,WACb,OAAOxmC,EAEP,IAAIwnC,EAAS,GAEb,GAAW,MAAPxnC,EACF,IAAK,IAAI9D,KAAO8D,EACVhI,OAAOU,UAAUL,eAAee,KAAK4G,EAAK9D,KAAMsrC,EAAOtrC,GAAO8D,EAAI9D,IAK1E,OADAsrC,EAAOtB,QAAUlmC,EACVwnC,EA7BCC,CAFC,EAAQ,IAMjBlB,EAAqBQ,EAFD,EAAQ,KAM5B4jB,EAAoB5jB,EAFD,EAAQ,MAI/B,SAASA,EAAuB/mC,GAC9B,OAAOA,GAAOA,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,GA2Bb,SAAS0pC,EAA2BC,EAAMvwC,GACxC,IAAKuwC,EACH,MAAM,IAAIC,eAAe,6DAG3B,OAAOxwC,GAAyB,kBAATA,GAAqC,oBAATA,EAA8BuwC,EAAPvwC,EAmB5E,IAAIwxD,EAAa,SAAU/gB,GAGzB,SAAS+gB,IACP,IAAIhkB,EAEAkD,EAAOphC,GApCf,SAAyBqhC,EAAUZ,GACjC,KAAMY,aAAoBZ,GACxB,MAAM,IAAIzuC,UAAU,qCAoCpBsvC,CAAgBxxC,KAAMoyD,GAEtB,IAAK,IAAI3gB,EAAO/wC,UAAUC,OAAQkD,EAAOlE,MAAM8xC,GAAOC,EAAO,EAAGA,EAAOD,EAAMC,IAC3E7tC,EAAK6tC,GAAQhxC,UAAUgxC,GAGzB,OAAeJ,EAASphC,EAAQghC,EAA2BlxC,MAAOouC,EAAOgkB,EAAW1yD,WAAaF,OAAOmyC,eAAeygB,IAAaxxD,KAAKC,MAAMutC,EAAM,CAACpuC,MAAM4B,OAAOiC,KAAiBqM,EAAMC,MAAQ,CAChMkiD,QAAQ,GACPniD,EAAMoiD,WAAa,WACpBpiD,EAAMgB,SAAS,CACbmhD,QAAQ,IAGVniD,EAAMqiD,cAAgBlmC,YAAW,WAC/B,OAAOnc,EAAMgB,SAAS,CACpBmhD,QAAQ,MAET,MACMnhB,EAA2BhhC,EAAnCohC,GAiBL,OA3DF,SAAmB6B,EAAUC,GAC3B,GAA0B,oBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAIlxC,UAAU,kEAAoEkxC,GAG1FD,EAASjzC,UAAYV,OAAOW,OAAOizC,GAAcA,EAAWlzC,UAAW,CACrED,YAAa,CACXwB,MAAO0xC,EACP7rC,YAAY,EACZopC,UAAU,EACVnpC,cAAc,KAGd6rC,IAAY5zC,OAAOC,eAAiBD,OAAOC,eAAe0zC,EAAUC,GAAcD,EAASzzC,UAAY0zC,GAI3GC,CAAU+e,EAAY/gB,GA4BtBd,EAAa6hB,EAAY,CAAC,CACxB1uD,IAAK,uBACLjC,MAAO,WACDzB,KAAKuyD,eAAehmC,aAAavsB,KAAKuyD,iBAE3C,CACD7uD,IAAK,SACLjC,MAAO,WACL,OAAO2nC,EAAMnsB,cAAcu1C,EAAuBniB,EAAS,CACzD2D,OAAQh0C,KAAKsyD,YACZtyD,KAAKgQ,OAAQo5B,EAAMnsB,cAAc,OAAQ,KAAMjd,KAAKmQ,MAAMkiD,OAAS,SAAW,aAI9ED,EA3CQ,CA4CfhpB,EAAMqD,WAEJ+lB,GAAwB,EAAIzkB,EAAmBL,SAASykB,EAAkBzkB,SAASO,WAAW,CAChGC,YAAa,oCACbC,YAAa,gBAFa,CAGzB,CAAC,yFAA0F,yCAA0C,eAAgB,6DAA6D,SAAUn+B,GAC7N,OAAOA,EAAMtD,MAAMgN,OAAS,MAC3B,SAAU1J,GACX,OAAOA,EAAMtD,MAAMsG,QAClB,SAAUhD,GACX,OAAOA,EAAMtD,MAAMgxC,cAErBjQ,EAAQC,QAAU0kB,G,iCC7JlB5yD,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAGT,IAoCIgxD,EAAqB9b,EAlCrBC,EAAgBrI,EAFD,EAAQ,MAIvB8B,EAAW7wC,OAAOa,QAAU,SAAUuQ,GACxC,IAAK,IAAIpQ,EAAI,EAAGA,EAAIE,UAAUC,OAAQH,IAAK,CACzC,IAAI8vC,EAAS5vC,UAAUF,GAEvB,IAAK,IAAIkD,KAAO4sC,EACV9wC,OAAOU,UAAUL,eAAee,KAAK0vC,EAAQ5sC,KAC/CkN,EAAOlN,GAAO4sC,EAAO5sC,IAK3B,OAAOkN,GAGL2/B,EAAe,WACjB,SAASC,EAAiB5/B,EAAQZ,GAChC,IAAK,IAAIxP,EAAI,EAAGA,EAAIwP,EAAMrP,OAAQH,IAAK,CACrC,IAAIiwC,EAAazgC,EAAMxP,GACvBiwC,EAAWnpC,WAAampC,EAAWnpC,aAAc,EACjDmpC,EAAWlpC,cAAe,EACtB,UAAWkpC,IAAYA,EAAWC,UAAW,GACjDlxC,OAAO4H,eAAewJ,EAAQ6/B,EAAW/sC,IAAK+sC,IAIlD,OAAO,SAAUE,EAAaC,EAAYC,GAGxC,OAFID,GAAYJ,EAAiBG,EAAYzwC,UAAW0wC,GACpDC,GAAaL,EAAiBG,EAAaE,GACxCF,GAdQ,GAsBfvH,EA0BJ,SAAiC5hC,GAC/B,GAAIA,GAAOA,EAAIwmC,WACb,OAAOxmC,EAEP,IAAIwnC,EAAS,GAEb,GAAW,MAAPxnC,EACF,IAAK,IAAI9D,KAAO8D,EACVhI,OAAOU,UAAUL,eAAee,KAAK4G,EAAK9D,KAAMsrC,EAAOtrC,GAAO8D,EAAI9D,IAK1E,OADAsrC,EAAOtB,QAAUlmC,EACVwnC,EAvCCC,CAFC,EAAQ,IAIjB2b,EAAY,EAAQ,IAIpBE,EAAiBvc,EAFD,EAAQ,MAIxBT,EAAoB,EAAQ,IAE5BC,EAAqBQ,EAAuBT,GAE5Cib,EAAgB,EAAQ,IAIxBhS,EAAyBxI,EAFD,EAAQ,MAMhCwQ,EAAaxQ,EAFD,EAAQ,MAMpBya,EAAkBza,EAFD,EAAQ,MAqB7B,SAASA,EAAuB/mC,GAC9B,OAAOA,GAAOA,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,GAuCb,SAAS0pC,EAA2BC,EAAMvwC,GACxC,IAAKuwC,EACH,MAAM,IAAIC,eAAe,6DAG3B,OAAOxwC,GAAyB,kBAATA,GAAqC,oBAATA,EAA8BuwC,EAAPvwC,EAgD5E,IAAI8xD,EAAU3T,EAAWrR,QAAQglB,QAC7BC,GAAgBF,GAAO,EAAI3H,EAAepd,SAAS,OA9BvD,SAAmC98B,EAAQgiD,EAAUj/C,EAAY88B,EAAYjuC,GAC3E,IAAIoR,EAAO,GACXpU,OAAkB,KAAEixC,GAAYhtC,SAAQ,SAAUC,GAChDkQ,EAAKlQ,GAAO+sC,EAAW/sC,MAEzBkQ,EAAKtM,aAAesM,EAAKtM,WACzBsM,EAAKrM,eAAiBqM,EAAKrM,cAEvB,UAAWqM,GAAQA,EAAKi/C,eAC1Bj/C,EAAK88B,UAAW,GAGlB98B,EAAOD,EAAW+oB,QAAQhxB,UAAUrC,QAAO,SAAUuK,EAAMk/C,GACzD,OAAOA,EAAUliD,EAAQgiD,EAAUh/C,IAASA,IAC3CA,GAECpR,QAAgC,IAArBoR,EAAKi/C,cAClBj/C,EAAKnS,MAAQmS,EAAKi/C,YAAcj/C,EAAKi/C,YAAYjyD,KAAK4B,QAAW,EACjEoR,EAAKi/C,iBAAcxjD,QAGI,IAArBuE,EAAKi/C,cACPrzD,OAA4B,eAAEoR,EAAQgiD,EAAUh/C,GAChDA,EAAO,MAiMSm/C,EA1L4Cpc,EAAS,SAAUtF,GAGjF,SAASshB,IACP,IAAIvkB,EAGAkD,EAAOphC,EAFPojC,EAAStzC,MAjEjB,SAAyBuxC,EAAUZ,GACjC,KAAMY,aAAoBZ,GACxB,MAAM,IAAIzuC,UAAU,qCAmEpBsvC,CAAgBxxC,KAAM2yD,GAEtB,IAAK,IAAIlhB,EAAO/wC,UAAUC,OAAQkD,EAAOlE,MAAM8xC,GAAOC,EAAO,EAAGA,EAAOD,EAAMC,IAC3E7tC,EAAK6tC,GAAQhxC,UAAUgxC,GAGzB,OAAeJ,EAASphC,EAAQghC,EAA2BlxC,MAAOouC,EAAOukB,EAAajzD,WAAaF,OAAOmyC,eAAeghB,IAAe/xD,KAAKC,MAAMutC,EAAM,CAACpuC,MAAM4B,OAAOiC,KAAiBqM,EAAMk7C,wBAA0B,SAAUpmC,GAChO,IAAIqY,GAAU,EAAIutB,EAAUnY,aAAaviC,EAAM8iD,MAE1C31B,GAAWrY,EAAGpU,kBAAkB4e,MAAQ6N,EAAQ1sB,SAASqU,EAAGpU,SAAWoU,EAAG9N,QAAwB,IAAd8N,EAAG9N,QAI5FhH,EAAM+iD,WAAWjuC,IAChB9U,EAAMs0C,YAAc,SAAUvhD,GAC/B,IAAIiwD,EAAiBxyD,UAAUC,OAAS,QAAsB0O,IAAjB3O,UAAU,GAAmBA,UAAU,GAAK,KACrF6qB,EAASrb,EAAMF,MAAMub,OAYzB,OAXAA,EAAO4nC,gBAAgBjjD,EAAMF,MAAMgI,MAEd,UAAjB/U,EAAQ2E,KACV2jB,EAAO6nC,YAAY,EAAG,GAEtB7nC,EAAOi5B,YAAYvhD,EAAQ2E,MAG7B2jB,EAAO23B,gBAAgBhzC,EAAMF,MAAMgI,KAAKtU,KAAKuiD,YACtB,WAAnBiN,GAA6B3nC,EAAOw3B,6BACjB,UAAnBmQ,GAA4B3nC,EAAO43B,yBAChC53B,EAAO8tB,SACbnpC,EAAMmjD,WAAa,SAAUzrD,GAC9B,IAAI2jB,EAASrb,EAAMF,MAAMub,OACrBwN,EAAmB,cAATnxB,QAA+ByH,EAO7C,OANAkc,EAAO4nC,gBAAgBjjD,EAAMF,MAAMgI,MAAMs7C,QAAQZ,EAAQa,WAAY3rD,OAAMyH,EAAW,CACpFzH,KAAM,YACNC,KAAM,CACJkxB,QAASA,KAGNxN,EAAO23B,gBAAgBhzC,EAAMF,MAAMgI,KAAKtU,KAAK8vD,uBAAuBna,SAC1EnpC,EAAMujD,iBAAmB,SAAUzuC,EAAIpd,GAIxC,OAHAod,EAAG7O,iBACH6O,EAAG3U,kBAEKzI,GACN,IAAK,WACL,IAAK,WACL,IAAK,cACL,IAAK,QACL,IAAK,OACH,OAAOsI,EAAMs0C,YAAY,CACvB58C,KAAMA,IAGV,IAAK,kBACH,OAAOsI,EAAMs0C,YAAY,CACvB58C,KAAM,CACJA,KAAM,kBACNw2C,QAAQ,IAET,SAEL,IAAK,gBACH,OAAOluC,EAAMmjD,WAAW,iBAE1B,IAAK,eACH,OAAOnjD,EAAMmjD,WAAW,gBAE1B,IAAK,YACH,OAAOnjD,EAAMmjD,WAAW,aAE1B,IAAK,QACH,OAAOnjD,EAAMwjD,gBAIhBxjD,EAAMwjD,YAAc,WAEjBxjD,EAAM4N,MAAM5N,EAAM4N,KAAKV,SAC1BlN,EAAMyjD,cAAgB,WACvB,IAjLqB/wD,EAiLjBwsC,GAjLiBxsC,EAmLrBg0C,EAAclJ,QAAQuK,MAAK,SAASC,EAAQlzB,GAC1C,IAAIjH,EAAOwN,EAAQ/qB,EAAGsd,EACtB,OAAO84B,EAAclJ,QAAQ0K,MAAK,SAAkBC,GAClD,OACE,OAAQA,EAASC,KAAOD,EAAS/2C,MAC/B,KAAK,EAIH,IAHAyc,GAAQ,EAAIg5B,EAAuBrJ,SAAS1oB,GAC5CuG,EAASrb,EAAMF,MAAMub,OAEhB/qB,EAAI,EAAGA,EAAIud,EAAMpd,OAAQH,IAC5Bsd,EAAOC,EAAMvd,GACb+qB,EAAOotB,gBAAgB76B,GAG3B,KAAK,EACL,IAAK,MACH,OAAOu6B,EAASO,UAGrBV,EAAS5E,MArMX,WACL,IAAIuF,EAAMj2C,EAAG/B,MAAMb,KAAMU,WACzB,OAAO,IAAIgd,SAAQ,SAAUC,EAASC,GAqBpC,OApBA,SAASk7B,EAAKp1C,EAAKS,GACjB,IACE,IAAI40C,EAAOF,EAAIn1C,GAAKS,GAChB1C,EAAQs3C,EAAKt3C,MACjB,MAAOC,GAEP,YADAkc,EAAOlc,GAIT,IAAIq3C,EAAKx3C,KAGP,OAAOmc,QAAQC,QAAQlc,GAAOk4B,MAAK,SAAUl4B,GAC3Cq3C,EAAK,OAAQr3C,MACZ,SAAUqB,GACXg2C,EAAK,QAASh2C,MALhB6a,EAAQlc,GAULq3C,CAAK,aAiLZ,OAAO,SAAU8a,GACf,OAAOxkB,EAAMvuC,MAAMb,KAAMU,YA1BJ,GA4BpBwP,EAAMg6C,kBAAoB,SAAUtiD,EAAMkiD,EAAWz5B,GACxD,IAAI05B,EAAuB75C,EAAMF,MAAMtD,MAAMq9C,qBACzCC,EAAU95C,EAAMF,MAAMub,OAAOvb,MAAMqgB,QAEvC,OAAI05B,GAAwBA,EAAqB/hD,QAAU+hD,EAAqB/hD,OAAOs8B,SAAS18B,GACvF,KAGFwhC,EAAMnsB,cAAc+rC,EAAgBtb,QAAS,CAClDt9B,YAAa,SAAqB4U,GAChC,OAAO9U,EAAMujD,iBAAiBzuC,EAAIpd,KAEnCwhC,EAAMnsB,cAAc+sC,EAAS,CAC9B35B,QAASA,EACT45B,UAAW,OACV7gB,EAAMnsB,cAAc6sC,EAAW,CAChCl1B,MAAO1kB,EAAMF,MAAMtD,MAAM6wC,sBAElBrM,EAA2BhhC,EAAnCohC,GAoDL,OAvOF,SAAmB6B,EAAUC,GAC3B,GAA0B,oBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAIlxC,UAAU,kEAAoEkxC,GAG1FD,EAASjzC,UAAYV,OAAOW,OAAOizC,GAAcA,EAAWlzC,UAAW,CACrED,YAAa,CACXwB,MAAO0xC,EACP7rC,YAAY,EACZopC,UAAU,EACVnpC,cAAc,KAGd6rC,IAAY5zC,OAAOC,eAAiBD,OAAOC,eAAe0zC,EAAUC,GAAcD,EAASzzC,UAAY0zC,GAkC3GC,CAAUsf,EAActhB,GAuIxBd,EAAaoiB,EAAc,CAAC,CAC1BjvD,IAAK,oBACLjC,MAAO,WACiB,qBAAXmrC,QACTA,OAAOv7B,iBAAiB,QAASrR,KAAKorD,2BAGzC,CACD1nD,IAAK,uBACLjC,MAAO,WACiB,qBAAXmrC,QACTA,OAAOr7B,oBAAoB,QAASvR,KAAKorD,2BAG5C,CACD1nD,IAAK,aACLjC,MAAO,SAAoBujB,GACzBA,EAAG7O,iBACH6O,EAAG3U,kBACHrQ,KAAKgQ,MAAMub,OAAO42B,aAAaniD,KAAKgQ,MAAMgI,KAAKtU,IAAK,CAClDkE,KAAM,YACNoL,KAAM,GACNorC,QAAQ,MAGX,CACD16C,IAAK,SACLjC,MAAO,WACL,IAAIirD,EAAS1sD,KAETm0C,EAASn0C,KAAKgQ,MACdub,EAAS4oB,EAAO5oB,OAChBqpB,EAAaT,EAAOS,WACpBif,IAAmBtoC,EAAOvb,MAAMwoC,YACpC,OAAOpP,EAAMnsB,cAAc62C,EAAKzjB,EAAS,GAAIuE,EAAY,CACvD5jC,IAAK,SAAaw+B,GAChB,OAAOkd,EAAOsG,IAAMxjB,KAEpBpG,EAAMnsB,cAAc82C,EAAa,CACnCnsD,KAAM,OACNoJ,IAAK,SAAas+B,GAChB,OAAOod,EAAO5uC,KAAOwxB,GAEvBnsC,SAAUnD,KAAK2zD,cACfn2C,OAAQ,YACNxd,KAAKkqD,kBAAkB,WAAYnB,EAAcwB,aAAc,eAAgBvqD,KAAKkqD,kBAAkB,WAAYnB,EAAcyB,aAAc,kBAAmBphB,EAAMnsB,cAAc02B,EAAW,MAAO3zC,KAAKkqD,kBAAkB,gBAAiBnB,EAAciL,iBAAkB,uBAAwBh0D,KAAKkqD,kBAAkB,eAAgBnB,EAAckL,gBAAiB,uBAAwBj0D,KAAKkqD,kBAAkB,YAAanB,EAAcmL,aAAc,mBAAoB9qB,EAAMnsB,cAAc02B,EAAW,MAAO3zC,KAAKkqD,kBAAkB,QAASnB,EAAcoL,UAAW,gBAAiBn0D,KAAKkqD,kBAAkB,cAAenB,EAAc0B,eAAgB,aAAczqD,KAAKkqD,kBAAkB,OAAQnB,EAAcuB,SAAU,YAAatqD,KAAKkqD,kBAAkB,kBAAmBnB,EAAcqL,mBAAoB,aAAcP,GAAkB7zD,KAAKkqD,kBAAkB,QAASnB,EAAcsL,UAAW,kBAIr4B1B,EAzLgE,CA0LvEvpB,EAAMqD,YAA6CvsC,UAAW,aAAc,CAACuyD,GAAOjzD,OAAOqU,yBAAyB8iC,EAAOz2C,UAAW,cAAey2C,EAAOz2C,WAAYy2C,GAEtKhD,EAAY5F,EAAmBL,QAAQ39B,IAAIk+B,WAAW,CACxDC,YAAa,0BACbC,YAAa,gBAFCJ,CAGb,CAAC,4FAEA+lB,EAAM/lB,EAAmBL,QAAQ39B,IAAIk+B,WAAW,CAClDC,YAAa,oBACbC,YAAa,gBAFLJ,CAGP,CAAC,wBAAyB,oDAAqD,2GAA8G,iEAAiE,SAAU/9B,GACzQ,OAAOA,EAAMtD,MAAMgN,UAClB,SAAU1J,GACX,OAAOA,EAAMtD,MAAM0wC,0BAClB,SAAUptC,GACX,OAAOA,EAAMtD,MAAM0wC,0BAGjB2W,EAAchmB,EAAmBL,QAAQjwB,MAAMwwB,WAAW,CAC5DC,YAAa,4BACbC,YAAa,gBAFGJ,CAGf,CAAC,gEAEJN,EAAQC,SAAU,EAAII,EAAkB6c,WAAWgI,I,iCCvYnDnzD,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAGT,IAAI4uC,EAAW7wC,OAAOa,QAAU,SAAUuQ,GACxC,IAAK,IAAIpQ,EAAI,EAAGA,EAAIE,UAAUC,OAAQH,IAAK,CACzC,IAAI8vC,EAAS5vC,UAAUF,GAEvB,IAAK,IAAIkD,KAAO4sC,EACV9wC,OAAOU,UAAUL,eAAee,KAAK0vC,EAAQ5sC,KAC/CkN,EAAOlN,GAAO4sC,EAAO5sC,IAK3B,OAAOkN,GAKLgwC,EAAUrS,EAFD,EAAQ,IAQrB,SAASA,EAAuB/mC,GAC9B,OAAOA,GAAOA,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,GAYb,IAAI8sD,EAhBqB/lB,EAFD,EAAQ,KAkBEb,QAAQ6mB,GAAGtmB,WAAW,CACtDC,YAAa,2BACbC,YAAa,gBAFAJ,CAGZ,CAAC,gEAAiE,MAAM,SAAU/9B,GACnF,OAAOA,EAAMklC,WAAallC,EAAMtD,MAAMyvC,SAAWnsC,EAAMtD,MAAMixC,kBAG/DlQ,EAAQC,QAfR,SAAwB19B,GACtB,IAAIklC,EAAallC,EAAMklC,WACnBN,EAAa5kC,EAAM4kC,WACvB,OAAOgM,EAAQlT,QAAQzwB,cAAcq3C,EAAUjkB,EAAS,CACtD6E,WAAYA,GACXN,M,iCCrCLp1C,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAGT,IAAI4uC,EAAW7wC,OAAOa,QAAU,SAAUuQ,GACxC,IAAK,IAAIpQ,EAAI,EAAGA,EAAIE,UAAUC,OAAQH,IAAK,CACzC,IAAI8vC,EAAS5vC,UAAUF,GAEvB,IAAK,IAAIkD,KAAO4sC,EACV9wC,OAAOU,UAAUL,eAAee,KAAK0vC,EAAQ5sC,KAC/CkN,EAAOlN,GAAO4sC,EAAO5sC,IAK3B,OAAOkN,GAGL2/B,EAAe,WACjB,SAASC,EAAiB5/B,EAAQZ,GAChC,IAAK,IAAIxP,EAAI,EAAGA,EAAIwP,EAAMrP,OAAQH,IAAK,CACrC,IAAIiwC,EAAazgC,EAAMxP,GACvBiwC,EAAWnpC,WAAampC,EAAWnpC,aAAc,EACjDmpC,EAAWlpC,cAAe,EACtB,UAAWkpC,IAAYA,EAAWC,UAAW,GACjDlxC,OAAO4H,eAAewJ,EAAQ6/B,EAAW/sC,IAAK+sC,IAIlD,OAAO,SAAUE,EAAaC,EAAYC,GAGxC,OAFID,GAAYJ,EAAiBG,EAAYzwC,UAAW0wC,GACpDC,GAAaL,EAAiBG,EAAaE,GACxCF,GAdQ,GAoBfvH,EAoBJ,SAAiC5hC,GAC/B,GAAIA,GAAOA,EAAIwmC,WACb,OAAOxmC,EAEP,IAAIwnC,EAAS,GAEb,GAAW,MAAPxnC,EACF,IAAK,IAAI9D,KAAO8D,EACVhI,OAAOU,UAAUL,eAAee,KAAK4G,EAAK9D,KAAMsrC,EAAOtrC,GAAO8D,EAAI9D,IAK1E,OADAsrC,EAAOtB,QAAUlmC,EACVwnC,EAjCCC,CAFC,EAAQ,IAMjBulB,EAAyBjmB,EAFD,EAAQ,MAMhCkmB,EAA0BlmB,EAFD,EAAQ,MAMjCR,EAAqBQ,EAFD,EAAQ,KAIhC,SAASA,EAAuB/mC,GAC9B,OAAOA,GAAOA,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,GA2Bb,SAAS0pC,EAA2BC,EAAMvwC,GACxC,IAAKuwC,EACH,MAAM,IAAIC,eAAe,6DAG3B,OAAOxwC,GAAyB,kBAATA,GAAqC,oBAATA,EAA8BuwC,EAAPvwC,EAmB5E,IAAI8zD,EAAQ,SAAUrjB,GAGpB,SAASqjB,IACP,IAAItmB,EAEAkD,EAAOphC,GApCf,SAAyBqhC,EAAUZ,GACjC,KAAMY,aAAoBZ,GACxB,MAAM,IAAIzuC,UAAU,qCAoCpBsvC,CAAgBxxC,KAAM00D,GAEtB,IAAK,IAAIjjB,EAAO/wC,UAAUC,OAAQkD,EAAOlE,MAAM8xC,GAAOC,EAAO,EAAGA,EAAOD,EAAMC,IAC3E7tC,EAAK6tC,GAAQhxC,UAAUgxC,GAGzB,OAAeJ,EAASphC,EAAQghC,EAA2BlxC,MAAOouC,EAAOsmB,EAAMh1D,WAAaF,OAAOmyC,eAAe+iB,IAAQ9zD,KAAKC,MAAMutC,EAAM,CAACpuC,MAAM4B,OAAOiC,KAAiBqM,EAAMC,MAAQ,CACtLwkD,UAAU,GACTzkD,EAAM8P,cAAgB,SAAUgF,GACjC,GAAe,UAAXA,EAAGthB,KAA8B,cAAXshB,EAAGthB,IAAqB,CAChDshB,EAAG7O,iBACH,IAAIg8B,EAAcjiC,EAAMF,MACpBub,EAAS4mB,EAAY5mB,OACrBvT,EAAOm6B,EAAYn6B,KACvB,OAAOuT,EAAOqpC,kBAAkB58C,GAAMmrC,yBAAyB9J,UAEhEnpC,EAAM6nC,aAAe,SAAU/yB,GAChCA,EAAG3U,kBACH,IAAIs4B,EAAM3jB,EAAGpU,OAAOnP,MAChB4qD,EAAen8C,EAAMF,MACrBub,EAAS8gC,EAAa9gC,OACtBvT,EAAOq0C,EAAar0C,KACpBnQ,EAAOmQ,EAAKnQ,KAAK4mD,WACrBljC,EAAO42B,aAAanqC,EAAKtU,IAAK,CAC5BmE,KAAMwoC,EAAS,GAAIxoC,EAAM,CACvB8gC,IAAKA,OAGRz4B,EAAMklB,YAAc,SAAUpQ,GAC/BA,EAAG3U,mBACFH,EAAM2kD,YAAc,WACrB3kD,EAAMgB,SAAS,CACbyjD,UAAU,KAEHzjB,EAA2BhhC,EAAnCohC,GAqDL,OA/GF,SAAmB6B,EAAUC,GAC3B,GAA0B,oBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAIlxC,UAAU,kEAAoEkxC,GAG1FD,EAASjzC,UAAYV,OAAOW,OAAOizC,GAAcA,EAAWlzC,UAAW,CACrED,YAAa,CACXwB,MAAO0xC,EACP7rC,YAAY,EACZopC,UAAU,EACVnpC,cAAc,KAGd6rC,IAAY5zC,OAAOC,eAAiBD,OAAOC,eAAe0zC,EAAUC,GAAcD,EAASzzC,UAAY0zC,GAI3GC,CAAUqhB,EAAOrjB,GA4CjBd,EAAamkB,EAAO,CAAC,CACnBhxD,IAAK,SACLjC,MAAO,WACL,IAAI0yC,EAASn0C,KAAKgQ,MACd4kC,EAAaT,EAAOS,WACpB58B,EAAOm8B,EAAOn8B,KACdk9B,EAAaf,EAAOe,WACpB9xC,EAAW+wC,EAAO/wC,SAClB0xD,EAAY98C,EAAKnQ,KAAKR,IAAI,WAC1B0tD,EAAU/8C,EAAKnQ,KAAKR,IAAI,QAAU,GAClCqhC,EAAM1wB,EAAKnQ,KAAKR,IAAI,OACpB2tD,GAAe5xD,GAAY2xD,EAC/B,OAAO3rB,EAAMnsB,cAAcg4C,EAAe,CACxChf,iBAAiB,GAChBj2C,KAAKmQ,MAAMwkD,SAAWvrB,EAAMnsB,cAAcmsB,EAAM4M,SAAU,KAAM5M,EAAMnsB,cAAci4C,EAAU,CAC/FC,GAAI,MACJjgB,WAAYA,IACV9L,EAAMnsB,cAAcm4C,EAAc,KAAM,yBAA2BhsB,EAAMnsB,cAAcmsB,EAAM4M,SAAU,KAAM5M,EAAMnsB,cAAco4C,EAAW,CAC9I3sB,IAAKA,EACL4sB,QAASt1D,KAAK60D,cACXzxD,EAMCgmC,EAAMnsB,cAAcu3C,EAAuB9mB,QAAS,CACxD1N,MAAOqQ,EAAS,CACd3H,IAAKA,EACLC,IAAKosB,EACLlsD,MAAO,CACL8kB,SAAU,SAEXinB,GACH2gB,2BAA2B,IAdbnsB,EAAMnsB,cAAcu4C,EAAWnlB,EAAS,GAAIuE,EAAY,CACtElM,IAAKA,EACLC,IAAKosB,EACL7f,WAAYA,EACZ4f,UAAWA,EACXW,QAAS,UAUPT,GAAe5rB,EAAMnsB,cAAcy4C,EAAS,CAC9C9tD,KAAM,OACNiK,YAAa,kBACbtB,UAAWvQ,KAAKggB,cAChB7c,SAAUnD,KAAK+3C,aACfzwB,QAAStnB,KAAKo1B,YACd4kB,aAAc+a,EACd9e,iBAAiB,EACjB0f,SAAUvyD,EACV4qB,UAAW,EACX4nC,OAAO,UAKNlB,EA/FG,CAgGVtrB,EAAMqD,WAEJ2oB,EAAernB,EAAmBL,QAAQ39B,IAAIk+B,WAAW,CAC3DC,YAAa,sBACbC,YAAa,eAFIJ,CAGhB,CAAC,iGAAkG,eAAgB,mFAAmF,SAAU/9B,GACjN,OAAOA,EAAMtD,MAAMsG,QAClB,SAAUhD,GACX,OAAOA,EAAMtD,MAAMkxC,wBAKjBiY,EAAM,SAAa7lD,GACrB,OAAOo5B,EAAMnsB,cAAc,MAAOjN,IAGhCqlD,GAAY,EAAItnB,EAAmBL,SAASmoB,GAAK5nB,WAAW,CAC9DC,YAAa,mBACbC,YAAa,eAFC,CAGb,CAAC,kBACAqnB,GAAY,EAAIznB,EAAmBL,SAASmoB,GAAK5nB,WAAW,CAC9DC,YAAa,mBACbC,YAAa,eAFC,CAGb,CAAC,6BAA8B,kBAAmB,YAAa,MAAM,SAAUn+B,GAChF,OAAOA,EAAMklC,WAAa,aAAellC,EAAMtD,MAAMyvC,SAAW,UAC/D,SAAUnsC,GACX,OAAOA,EAAMklC,WAAa,MAAQ,OACjC,SAAUllC,GACX,OAAOA,EAAM8kD,UAAY,GAAM,KAE7BI,GAAW,EAAInnB,EAAmBL,SAAS8nB,GAAWvnB,WAAW,CACnEC,YAAa,kBACbC,YAAa,eAFA,CAGZ,CAAC,4CAEA8mB,EAAgBlnB,EAAmBL,QAAQl0B,KAAKy0B,WAAW,CAC7DC,YAAa,uBACbC,YAAa,eAFKJ,CAGjB,CAAC,uDAEA2nB,GAAU,EAAI3nB,EAAmBL,SAAS+mB,EAAwB/mB,SAASO,WAAW,CACxFC,YAAa,iBACbC,YAAa,eAFD,CAGX,CAAC,iEAAkE,8HAA+H,OAAO,SAAUn+B,GACpN,OAAOA,EAAMtD,MAAMuvC,iBAClB,SAAUjsC,GACX,OAAOA,EAAMtD,MAAMmF,eAErB47B,EAAQC,QAAUgnB,G,iCC1PlBl1D,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAGT,IAAI4uC,EAAW7wC,OAAOa,QAAU,SAAUuQ,GACxC,IAAK,IAAIpQ,EAAI,EAAGA,EAAIE,UAAUC,OAAQH,IAAK,CACzC,IAAI8vC,EAAS5vC,UAAUF,GAEvB,IAAK,IAAIkD,KAAO4sC,EACV9wC,OAAOU,UAAUL,eAAee,KAAK0vC,EAAQ5sC,KAC/CkN,EAAOlN,GAAO4sC,EAAO5sC,IAK3B,OAAOkN,GAGT68B,EAAQC,QAuBR,SAAc19B,GACZ,IAAI4kC,EAAa5kC,EAAM4kC,WACnB58B,EAAOhI,EAAMgI,KACbJ,EAAW5H,EAAM4H,SACjB2T,EAASvb,EAAMub,OACfnoB,EAAW4M,EAAM5M,SACjB2jD,EAAQ/uC,EAAKnQ,KAAKR,IAAI,SACtBolC,EAAYz0B,EAAKnQ,KAAKR,IAAI,aAC1B6V,EAAOlF,EAAKnQ,KAAKR,IAAI,QAEzB,GAAI0/C,GAASta,EACX,OAAOrD,EAAMnsB,cAAcwvB,EAAWz8B,GAGxC,OAAOo5B,EAAMnsB,cAAc,IAAKozB,EAAS,GAAIuE,EAAY,CACvD13B,KAAM9Z,EAAW8Z,OAAO7N,EACxBiY,QAASlkB,EAAW,SAAU4hB,GACxBuG,EAAOvb,MAAM2pC,cACf30B,EAAG7O,iBACHoV,EAAOvb,MAAM2pC,YAAYz8B,UAEzB7N,EACJuB,OAAQ,WACNgH,IA5CN,IAEIwxB,EAEJ,SAAiC5hC,GAC/B,GAAIA,GAAOA,EAAIwmC,WACb,OAAOxmC,EAEP,IAAIwnC,EAAS,GAEb,GAAW,MAAPxnC,EACF,IAAK,IAAI9D,KAAO8D,EACVhI,OAAOU,UAAUL,eAAee,KAAK4G,EAAK9D,KAAMsrC,EAAOtrC,GAAO8D,EAAI9D,IAK1E,OADAsrC,EAAOtB,QAAUlmC,EACVwnC,EAfCC,CAFC,EAAQ,K,iCCpBrBzvC,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAGT,IAAI4uC,EAAW7wC,OAAOa,QAAU,SAAUuQ,GACxC,IAAK,IAAIpQ,EAAI,EAAGA,EAAIE,UAAUC,OAAQH,IAAK,CACzC,IAAI8vC,EAAS5vC,UAAUF,GAEvB,IAAK,IAAIkD,KAAO4sC,EACV9wC,OAAOU,UAAUL,eAAee,KAAK0vC,EAAQ5sC,KAC/CkN,EAAOlN,GAAO4sC,EAAO5sC,IAK3B,OAAOkN,GAGL2/B,EAAe,WACjB,SAASC,EAAiB5/B,EAAQZ,GAChC,IAAK,IAAIxP,EAAI,EAAGA,EAAIwP,EAAMrP,OAAQH,IAAK,CACrC,IAAIiwC,EAAazgC,EAAMxP,GACvBiwC,EAAWnpC,WAAampC,EAAWnpC,aAAc,EACjDmpC,EAAWlpC,cAAe,EACtB,UAAWkpC,IAAYA,EAAWC,UAAW,GACjDlxC,OAAO4H,eAAewJ,EAAQ6/B,EAAW/sC,IAAK+sC,IAIlD,OAAO,SAAUE,EAAaC,EAAYC,GAGxC,OAFID,GAAYJ,EAAiBG,EAAYzwC,UAAW0wC,GACpDC,GAAaL,EAAiBG,EAAaE,GACxCF,GAdQ,GAoBfvH,EAoBJ,SAAiC5hC,GAC/B,GAAIA,GAAOA,EAAIwmC,WACb,OAAOxmC,EAEP,IAAIwnC,EAAS,GAEb,GAAW,MAAPxnC,EACF,IAAK,IAAI9D,KAAO8D,EACVhI,OAAOU,UAAUL,eAAee,KAAK4G,EAAK9D,KAAMsrC,EAAOtrC,GAAO8D,EAAI9D,IAK1E,OADAsrC,EAAOtB,QAAUlmC,EACVwnC,EAjCCC,CAFC,EAAQ,IAIjB2b,EAAY,EAAQ,IAIpB7c,EAAqBQ,EAFD,EAAQ,KAI5BunB,EAAQ,EAAQ,KAIhBC,EAAexnB,EAFD,EAAQ,MAI1B,SAASA,EAAuB/mC,GAC9B,OAAOA,GAAOA,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,GA2Bb,SAAS0pC,EAA2BC,EAAMvwC,GACxC,IAAKuwC,EACH,MAAM,IAAIC,eAAe,6DAG3B,OAAOxwC,GAAyB,kBAATA,GAAqC,oBAATA,EAA8BuwC,EAAPvwC,EAqB5E,IAAIo1D,EAAQ,SAAU3kB,GAGpB,SAAS2kB,IACP,IAAI5nB,EAEAkD,EAAOphC,GAtCf,SAAyBqhC,EAAUZ,GACjC,KAAMY,aAAoBZ,GACxB,MAAM,IAAIzuC,UAAU,qCAsCpBsvC,CAAgBxxC,KAAMg2D,GAEtB,IAAK,IAAIvkB,EAAO/wC,UAAUC,OAAQkD,EAAOlE,MAAM8xC,GAAOC,EAAO,EAAGA,EAAOD,EAAMC,IAC3E7tC,EAAK6tC,GAAQhxC,UAAUgxC,GAGzB,OAAeJ,EAASphC,EAAQghC,EAA2BlxC,MAAOouC,EAAO4nB,EAAMt2D,WAAaF,OAAOmyC,eAAeqkB,IAAQp1D,KAAKC,MAAMutC,EAAM,CAACpuC,MAAM4B,OAAOiC,KAAiBqM,EAAMk7C,wBAA0B,SAAUpmC,GAClN,IAAIqY,GAAU,EAAIutB,EAAUnY,aAAaviC,EAAMklC,QAE1C/X,GAAWrY,EAAGpU,kBAAkB4e,MAAQ6N,EAAQ1sB,SAASqU,EAAGpU,SAIjEV,EAAMF,MAAMub,OAAOwqB,cAAc7lC,EAAMF,MAAMgI,OACpCk5B,EAA2BhhC,EAAnCohC,GAiCL,OAzEF,SAAmB6B,EAAUC,GAC3B,GAA0B,oBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAIlxC,UAAU,kEAAoEkxC,GAG1FD,EAASjzC,UAAYV,OAAOW,OAAOizC,GAAcA,EAAWlzC,UAAW,CACrED,YAAa,CACXwB,MAAO0xC,EACP7rC,YAAY,EACZopC,UAAU,EACVnpC,cAAc,KAGd6rC,IAAY5zC,OAAOC,eAAiBD,OAAOC,eAAe0zC,EAAUC,GAAcD,EAASzzC,UAAY0zC,GAM3GC,CAAU2iB,EAAO3kB,GAwBjBd,EAAaylB,EAAO,CAAC,CACnBtyD,IAAK,oBACLjC,MAAO,WACiB,qBAAXmrC,QACTA,OAAOv7B,iBAAiB,QAASrR,KAAKorD,2BAGzC,CACD1nD,IAAK,uBACLjC,MAAO,WACiB,qBAAXmrC,QACTA,OAAOr7B,oBAAoB,QAASvR,KAAKorD,2BAG5C,CACD1nD,IAAK,SACLjC,MAAO,WACL,IAAI6xC,EAAStzC,KAETm0C,EAASn0C,KAAKgQ,MACd4H,EAAWu8B,EAAOv8B,SAClBg9B,EAAaT,EAAOS,WACxB,OAAOxL,EAAMnsB,cAAc84C,EAAaroB,QAAS,KAAMtE,EAAMnsB,cAAcg5C,EAAa5lB,EAAS,CAC/Fr/B,IAAK,SAAao+B,GAChB,OAAOkE,EAAO8B,MAAQhG,IAEvBwF,GAAaxL,EAAMnsB,cAAc,QAAS,KAAMrF,SAIhDo+C,EAvDG,CAwDV5sB,EAAMqD,WAEJwpB,EAAcloB,EAAmBL,QAAQ0H,MAAMnH,WAAW,CAC5DC,YAAa,qBACbC,YAAa,gBAFGJ,CAGf,CAAC,0EAA2E,yCAA0C,IAAK,IAAK,4DAA6D,IAAK,IAAK,kBAAkB,SAAU/9B,GACpO,OAAOA,EAAMtD,MAAM8pC,eAClBsf,EAAMxhB,WAAYwhB,EAAMvhB,QAASuhB,EAAMthB,UAAWshB,EAAMxhB,WAAYwhB,EAAMvhB,QAASuhB,EAAMthB,WAE5F/G,EAAQC,QAAUsoB,G,iCC5KlBx2D,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAGT,IAkCgC+F,EAlC5B+oC,EAAe,WACjB,SAASC,EAAiB5/B,EAAQZ,GAChC,IAAK,IAAIxP,EAAI,EAAGA,EAAIwP,EAAMrP,OAAQH,IAAK,CACrC,IAAIiwC,EAAazgC,EAAMxP,GACvBiwC,EAAWnpC,WAAampC,EAAWnpC,aAAc,EACjDmpC,EAAWlpC,cAAe,EACtB,UAAWkpC,IAAYA,EAAWC,UAAW,GACjDlxC,OAAO4H,eAAewJ,EAAQ6/B,EAAW/sC,IAAK+sC,IAIlD,OAAO,SAAUE,EAAaC,EAAYC,GAGxC,OAFID,GAAYJ,EAAiBG,EAAYzwC,UAAW0wC,GACpDC,GAAaL,EAAiBG,EAAaE,GACxCF,GAdQ,GAoBfvH,EAoBJ,SAAiC5hC,GAC/B,GAAIA,GAAOA,EAAIwmC,WACb,OAAOxmC,EAEP,IAAIwnC,EAAS,GAEb,GAAW,MAAPxnC,EACF,IAAK,IAAI9D,KAAO8D,EACVhI,OAAOU,UAAUL,eAAee,KAAK4G,EAAK9D,KAAMsrC,EAAOtrC,GAAO8D,EAAI9D,IAK1E,OADAsrC,EAAOtB,QAAUlmC,EACVwnC,EAjCCC,CAFC,EAAQ,IAMjB6B,GAFS,EAAQ,GAEF,EAAQ,MAEvB8Z,EAAY,EAAQ,IAEpBsL,EAAgB,EAAQ,KAExBC,GAI4B3uD,EAJY0uD,IAK5B1uD,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,GAJT4uD,EAAW,EAAQ,KA+BvB,SAASllB,EAA2BC,EAAMvwC,GACxC,IAAKuwC,EACH,MAAM,IAAIC,eAAe,6DAG3B,OAAOxwC,GAAyB,kBAATA,GAAqC,oBAATA,EAA8BuwC,EAAPvwC,EAoB5E,IAAIy1D,EAAc,CAChBC,IAAK,IACLjnB,OAAQ,IACR+F,MAAO,IAELmhB,EAAa,CACfD,IAAK,OACLjnB,OAAQ,SACR+F,MAAO,QAGLnM,EAAU,SAAUoI,GAGtB,SAASpI,IACP,IAAImF,EAEAkD,EAAOphC,GAhDf,SAAyBqhC,EAAUZ,GACjC,KAAMY,aAAoBZ,GACxB,MAAM,IAAIzuC,UAAU,qCAgDpBsvC,CAAgBxxC,KAAMipC,GAEtB,IAAK,IAAIwI,EAAO/wC,UAAUC,OAAQkD,EAAOlE,MAAM8xC,GAAOC,EAAO,EAAGA,EAAOD,EAAMC,IAC3E7tC,EAAK6tC,GAAQhxC,UAAUgxC,GAGzB,OAAeJ,EAASphC,EAAQghC,EAA2BlxC,MAAOouC,EAAOnF,EAAQvpC,WAAaF,OAAOmyC,eAAe1I,IAAUroC,KAAKC,MAAMutC,EAAM,CAACpuC,MAAM4B,OAAOiC,KAAiBqM,EAAMC,MAAQ,CAC1LsG,IAAK,EACLD,KAAM,GACG06B,EAA2BhhC,EAAnCohC,GA4CL,OAzFF,SAAmB6B,EAAUC,GAC3B,GAA0B,oBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAIlxC,UAAU,kEAAoEkxC,GAG1FD,EAASjzC,UAAYV,OAAOW,OAAOizC,GAAcA,EAAWlzC,UAAW,CACrED,YAAa,CACXwB,MAAO0xC,EACP7rC,YAAY,EACZopC,UAAU,EACVnpC,cAAc,KAGd6rC,IAAY5zC,OAAOC,eAAiBD,OAAOC,eAAe0zC,EAAUC,GAAcD,EAASzzC,UAAY0zC,GAgB3GC,CAAUpK,EAASoI,GAmBnBd,EAAatH,EAAS,CAAC,CACrBvlC,IAAK,4BACLjC,MAAO,WACL,GAAKzB,KAAKgQ,MAAM8lC,KAAhB,CACA,IAAIzY,GAAU,EAAIutB,EAAUnY,aAAazyC,KAAKgQ,MAAM8lC,MACpD,GAAMzY,aAAmBiuB,YAAzB,CACA,IAAI3sC,EAAO0e,EAAQ9d,wBACfi3C,EAAYH,EAAYr2D,KAAKgQ,MAAMpI,MAGnC4O,EAAuC,WAAhC+/C,EAAWv2D,KAAKgQ,MAAMpI,MAAqBb,KAAKgsC,MAAMp0B,EAAKnI,KAAOo2B,OAAOiG,QAAUl0B,EAAKrJ,MAAQ,EAAIkhD,EAAY,GAAKzvD,KAAKgsC,MAAMp0B,EAAKnI,KAAOo2B,OAAOiG,QAAU2jB,EAAY,GAChL//C,EAAM1P,KAAKgsC,MAAMp0B,EAAKlI,IAAMm2B,OAAOoG,QAHtB,GAG6C,IAC9DhzC,KAAKkR,UAAS,SAAUf,GACtB,GAAIA,EAAMqG,OAASA,GAAQrG,EAAMsG,MAAQA,EACvC,MAAO,CACLD,KAAMA,EACNC,IAAKA,UAKZ,CACD/S,IAAK,SACLjC,MAAO,WACL,IAAI0yC,EAASn0C,KAAKgQ,MACdub,EAAS4oB,EAAO5oB,OAChB3jB,EAAOusC,EAAOvsC,KACdymC,EAAS8F,EAAO9F,OACpB,OAAKruC,KAAKmQ,MAAMsG,KAAQzW,KAAKmQ,MAAMqG,KAC5B4yB,EAAMnsB,cAAc6zB,EAAayC,OAAQ,KAAMnK,EAAMnsB,cAAcm5C,EAASlmB,KAAM,CACvF7B,OAAQA,EACRxlC,MAAO7I,KAAKmQ,OACXi5B,EAAMnsB,cAAck5C,EAAezoB,QAAS,CAC7CniB,OAAQA,EACR4pB,gBAA0B,UAATvtC,EACjB6tC,cAAwB,QAAT7tC,EACf+tC,iBAA2B,WAAT/tC,MAR4B,SAa7CqhC,EA7DK,CA8DZG,EAAMqD,WAERgB,EAAQC,QAAUzE,G,iCCvKlBzpC,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAGT,IAAI8uC,EAAe,WACjB,SAASC,EAAiB5/B,EAAQZ,GAChC,IAAK,IAAIxP,EAAI,EAAGA,EAAIwP,EAAMrP,OAAQH,IAAK,CACrC,IAAIiwC,EAAazgC,EAAMxP,GACvBiwC,EAAWnpC,WAAampC,EAAWnpC,aAAc,EACjDmpC,EAAWlpC,cAAe,EACtB,UAAWkpC,IAAYA,EAAWC,UAAW,GACjDlxC,OAAO4H,eAAewJ,EAAQ6/B,EAAW/sC,IAAK+sC,IAIlD,OAAO,SAAUE,EAAaC,EAAYC,GAGxC,OAFID,GAAYJ,EAAiBG,EAAYzwC,UAAW0wC,GACpDC,GAAaL,EAAiBG,EAAaE,GACxCF,GAdQ,GAoBfvH,EAsBJ,SAAiC5hC,GAC/B,GAAIA,GAAOA,EAAIwmC,WACb,OAAOxmC,EAEP,IAAIwnC,EAAS,GAEb,GAAW,MAAPxnC,EACF,IAAK,IAAI9D,KAAO8D,EACVhI,OAAOU,UAAUL,eAAee,KAAK4G,EAAK9D,KAAMsrC,EAAOtrC,GAAO8D,EAAI9D,IAK1E,OADAsrC,EAAOtB,QAAUlmC,EACVwnC,EAnCCC,CAFC,EAAQ,IAIjBnB,EAAoB,EAAQ,IAI5Bib,GAFc,EAAQ,IAEN,EAAQ,KAIxBC,EAAkBza,EAFD,EAAQ,MAMzB0a,EAAc1a,EAFD,EAAQ,MAIzB,SAASA,EAAuB/mC,GAC9B,OAAOA,GAAOA,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,GA2Bb,SAAS0pC,EAA2BC,EAAMvwC,GACxC,IAAKuwC,EACH,MAAM,IAAIC,eAAe,6DAG3B,OAAOxwC,GAAyB,kBAATA,GAAqC,oBAATA,EAA8BuwC,EAAPvwC,EAmB5E,IAAI61D,EAAe,SAAUplB,GAG3B,SAASolB,IACP,IAAIroB,EAEAkD,EAAOphC,GApCf,SAAyBqhC,EAAUZ,GACjC,KAAMY,aAAoBZ,GACxB,MAAM,IAAIzuC,UAAU,qCAoCpBsvC,CAAgBxxC,KAAMy2D,GAEtB,IAAK,IAAIhlB,EAAO/wC,UAAUC,OAAQkD,EAAOlE,MAAM8xC,GAAOC,EAAO,EAAGA,EAAOD,EAAMC,IAC3E7tC,EAAK6tC,GAAQhxC,UAAUgxC,GAGzB,OAAeJ,EAASphC,EAAQghC,EAA2BlxC,MAAOouC,EAAOqoB,EAAa/2D,WAAaF,OAAOmyC,eAAe8kB,IAAe71D,KAAKC,MAAMutC,EAAM,CAACpuC,MAAM4B,OAAOiC,KAAiBqM,EAAMwmD,SAAW,SAAUnnB,GACjN,IACE,IAAIonB,EAAUzmD,EAAMF,MAAMub,OACtBm+B,EAAgBiN,EAAQl1D,MACxB8wC,EAAamX,EAAcnX,WAC3BnhC,EAAWs4C,EAAct4C,SAI7B,OAFeulD,EAAQ9hB,iBAAiBzjC,EAAUmhC,EAAW7uC,KAE7CoyC,KAAKjuC,KAAKR,IAAI,WAAakoC,GAASgD,EAAW1qC,KAAKR,IAAI,WAAakoC,EACrF,MAAO8Z,GACP,OAAO,IAERn5C,EAAM0mD,aAAe,SAAU5xC,EAAIuqB,GACpCvqB,EAAG7O,iBACH6O,EAAG3U,kBACH,IAAIkb,EAASrb,EAAMF,MAAMub,OACrBsrC,EAAiBtrC,EAAO9pB,MACxB8wC,EAAaskB,EAAetkB,WAC5BnhC,EAAWylD,EAAezlD,SAC1B4V,EAAWuE,EAAOspB,iBAAiBzjC,EAAUmhC,EAAW7uC,KAC5D6nB,EAAOurC,cAAc9vC,EAAS4uB,iBAAkB5uB,EAAS0uB,eACzDnqB,EAAO8iC,eAAe9e,IACrBr/B,EAAM6mD,kBAAoB,SAAUxnB,EAAOua,GAC5C,IAAIzU,EAAWnlC,EAAMwmD,SAASnnB,GAE1Bya,EAAU95C,EAAMF,MAAMub,OAAOvb,MAAMqgB,QAMvC,OAAO+Y,EAAMnsB,cAAc+rC,EAAgBtb,QAAS,CAClDt9B,YALgB,SAAqB4U,GACrC,OAAO9U,EAAM0mD,aAAa5xC,EAAIuqB,IAK9BlB,OAAQgH,GACPjM,EAAMnsB,cAAc+sC,EAAS,CAC9B35B,QAAS,SAAWkf,EACpB0a,UAAW,OACV7gB,EAAMnsB,cAAc6sC,EAAW,CAChCl1B,MAAO1kB,EAAMF,MAAMtD,MAAMknC,iBAE1B1jC,EAAM8mD,YAAc,SAAUhyC,GAC/BA,EAAG7O,iBAEHjG,EAAMF,MAAMub,OAAOyrC,cAAc7gB,QAChCjmC,EAAM+mD,YAAc,SAAUjyC,GAC/BA,EAAG7O,iBACH,IAAIoV,EAASrb,EAAMF,MAAMub,OACrB2rC,EAAiB3rC,EAAO9pB,MACxB8wC,EAAa2kB,EAAe3kB,WAC5BnhC,EAAW8lD,EAAe9lD,SAC1B4V,EAAWuE,EAAOspB,iBAAiBzjC,EAAUmhC,EAAW7uC,KAC5D6nB,EAAOwqB,cAAc/uB,EAASouB,OAAO+hB,UAAUnwC,EAAS0uB,cAAgB,GAAGqZ,WAAW/nC,EAASouB,MAAOpuB,EAAS0uB,cAAgB,GAAGS,QACjIjmC,EAAMknD,YAAc,SAAUpyC,GAC/BA,EAAG7O,iBACH,IAAIoV,EAASrb,EAAMF,MAAMub,OACrB8rC,EAAiB9rC,EAAO9pB,MACxB8wC,EAAa8kB,EAAe9kB,WAC5BnhC,EAAWimD,EAAejmD,SAC1B4V,EAAWuE,EAAOspB,iBAAiBzjC,EAAUmhC,EAAW7uC,KAC5D6nB,EAAOwqB,cAAc/uB,EAASouB,OAAO+hB,UAAUnwC,EAAS0uB,eAAeqZ,WAAW/nC,EAASouB,MAAOpuB,EAAS0uB,eAAeS,QACzHjmC,EAAMonD,UAAY,SAAUtyC,GAC7BA,EAAG7O,iBAEHjG,EAAMF,MAAMub,OAAO+rC,YAAYnhB,QAC9BjmC,EAAMqnD,eAAiB,SAAUvyC,GAClCA,EAAG7O,iBACH,IAAIoV,EAASrb,EAAMF,MAAMub,OACrBisC,EAAiBjsC,EAAO9pB,MACxB8wC,EAAailB,EAAejlB,WAC5BnhC,EAAWomD,EAAepmD,SAC1B4V,EAAWuE,EAAOspB,iBAAiBzjC,EAAUmhC,EAAW7uC,KAE5DwM,EAAMF,MAAMub,OAAOwqB,cAAc/uB,EAASouB,OAAOqiB,gBAChDvnD,EAAMwnD,cAAgB,SAAU1yC,GACjCA,EAAG7O,iBACH,IAAIoV,EAASrb,EAAMF,MAAMub,OACrBosC,EAAiBpsC,EAAO9pB,MACxB8wC,EAAaolB,EAAeplB,WAC5BnhC,EAAWumD,EAAevmD,SAC1B4V,EAAWuE,EAAOspB,iBAAiBzjC,EAAUmhC,EAAW7uC,KAC5D6nB,EAAOksC,aAAazwC,EAAS4uB,kBAAkBG,cAAc/uB,EAASouB,OAAOwiB,iBAAiB,EAAG,IAChG1nD,EAAM2nD,aAAe,SAAU7yC,GAChCA,EAAG7O,iBAEHjG,EAAMF,MAAMub,OAAOssC,eAAe1hB,QACzBjF,EAA2BhhC,EAAnCohC,GAgEL,OApLF,SAAmB6B,EAAUC,GAC3B,GAA0B,oBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAIlxC,UAAU,kEAAoEkxC,GAG1FD,EAASjzC,UAAYV,OAAOW,OAAOizC,GAAcA,EAAWlzC,UAAW,CACrED,YAAa,CACXwB,MAAO0xC,EACP7rC,YAAY,EACZopC,UAAU,EACVnpC,cAAc,KAGd6rC,IAAY5zC,OAAOC,eAAiBD,OAAOC,eAAe0zC,EAAUC,GAAcD,EAASzzC,UAAY0zC,GAI3GC,CAAUojB,EAAcplB,GAsGxBd,EAAakmB,EAAc,CAAC,CAC1B/yD,IAAK,SACLjC,MAAO,WACL,IAAI0yC,EAASn0C,KAAKgQ,MACdylC,EAAgBtB,EAAOsB,cACvBE,EAAmBxB,EAAOwB,iBAC1BR,EAAkBhB,EAAOgB,gBACzB6U,EAAUhqD,KAAKgQ,MAAMub,OAAOvb,MAAMqgB,QACtC,OAAO+Y,EAAMnsB,cAAcmsB,EAAM4M,SAAU,KAAMb,GAAmB/L,EAAMnsB,cAAc+rC,EAAgBtb,QAAS,CAC/Gt9B,YAAapQ,KAAKg3D,aACjB5tB,EAAMnsB,cAAc+sC,EAAS,CAC9B35B,QAAS,eACT45B,UAAW,OACV7gB,EAAMnsB,cAAc8rC,EAAciE,UAAW,CAC9Cp4B,MAAO50B,KAAKgQ,MAAMtD,MAAMknC,gBACpB+B,GAAoBvM,EAAMnsB,cAAcmsB,EAAM4M,SAAU,KAAMh2C,KAAK+2D,kBAAkB,OAAQhO,EAAc+O,eAAgB93D,KAAK+2D,kBAAkB,SAAUhO,EAAcgP,iBAAkB/3D,KAAK+2D,kBAAkB,QAAShO,EAAciP,gBAAiB5uB,EAAMnsB,cAAcgsC,EAAYvb,QAAS,MAAOtE,EAAMnsB,cAAc+rC,EAAgBtb,QAAS,CAC5Vt9B,YAAapQ,KAAK63D,cACjBzuB,EAAMnsB,cAAc+sC,EAAS,CAC9B35B,QAAS,gBACT45B,UAAW,OACV7gB,EAAMnsB,cAAc8rC,EAAciE,UAAW,CAC9Cp4B,MAAO50B,KAAKgQ,MAAMtD,MAAMknC,gBACpBxK,EAAMnsB,cAAcgsC,EAAYvb,QAAS,MAAOtE,EAAMnsB,cAAc+rC,EAAgBtb,QAAS,CACjGt9B,YAAapQ,KAAK03D,eACjBtuB,EAAMnsB,cAAc+sC,EAAS,CAC9B35B,QAAS,qBACT45B,UAAW,OACV7gB,EAAMnsB,cAAc8rC,EAAckP,eAAgB,CACnDrjC,MAAO50B,KAAKgQ,MAAMtD,MAAMknC,gBACpBxK,EAAMnsB,cAAc+rC,EAAgBtb,QAAS,CACjDt9B,YAAapQ,KAAKu3D,gBACjBnuB,EAAMnsB,cAAc+sC,EAAS,CAC9B35B,QAAS,sBACT45B,UAAW,OACV7gB,EAAMnsB,cAAc8rC,EAAcmP,gBAAiB,CACpDtjC,MAAO50B,KAAKgQ,MAAMtD,MAAMknC,iBACnB6B,GAAiBrM,EAAMnsB,cAAcmsB,EAAM4M,SAAU,KAAM5M,EAAMnsB,cAAc+rC,EAAgBtb,QAAS,CAC7Gt9B,YAAapQ,KAAKs3D,WACjBluB,EAAMnsB,cAAc+sC,EAAS,CAC9B35B,QAAS,aACT45B,UAAW,OACV7gB,EAAMnsB,cAAc8rC,EAAciE,UAAW,CAC9Cp4B,MAAO50B,KAAKgQ,MAAMtD,MAAMknC,gBACpBxK,EAAMnsB,cAAcgsC,EAAYvb,QAAS,MAAOtE,EAAMnsB,cAAc+rC,EAAgBtb,QAAS,CACjGt9B,YAAapQ,KAAKo3D,aACjBhuB,EAAMnsB,cAAc+sC,EAAS,CAC9B35B,QAAS,mBACT45B,UAAW,OACV7gB,EAAMnsB,cAAc8rC,EAAcoP,gBAAiB,CACpDvjC,MAAO50B,KAAKgQ,MAAMtD,MAAMknC,gBACpBxK,EAAMnsB,cAAc+rC,EAAgBtb,QAAS,CACjDt9B,YAAapQ,KAAKi3D,aACjB7tB,EAAMnsB,cAAc+sC,EAAS,CAC9B35B,QAAS,mBACT45B,UAAW,OACV7gB,EAAMnsB,cAAc8rC,EAAcqP,gBAAiB,CACpDxjC,MAAO50B,KAAKgQ,MAAMtD,MAAMknC,sBAKvB6iB,EApKU,CAqKjBrtB,EAAMqD,WAERgB,EAAQC,SAAU,EAAII,EAAkB6c,WAAW8L,I,iCCpQnDj3D,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAGT,IAIgC+F,EAJ5BsmC,EAAoB,EAAQ,IAUhC,IAAIuqB,IAN4B7wD,EAFgBsmC,IAGhCtmC,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,IAIiBkmC,QAAQz0B,EAAEg1B,WAAW,CACjDC,YAAa,OACbC,YAAa,YAFJJ,CAGR,CAAC,+CAAgD,IAAK,uBAAwB,OAAO,SAAU/9B,GAChG,OAAOA,EAAMklC,WAAallC,EAAMtD,MAAM8wC,cAAgBxtC,EAAMtD,MAAM8pC,gBACjE,SAAUxmC,GACX,OAAOA,EAAMklC,YAAc,4BAC1B,SAAUllC,GACX,OAAOA,EAAMklC,WAAallC,EAAMtD,MAAM8wC,cAAgBxtC,EAAMtD,MAAMgnC,qBAGpEjG,EAAQC,QAAU2qB,G,iCCzBlB74D,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAGT,IAwCgC+F,EAxC5B6oC,EAAW7wC,OAAOa,QAAU,SAAUuQ,GACxC,IAAK,IAAIpQ,EAAI,EAAGA,EAAIE,UAAUC,OAAQH,IAAK,CACzC,IAAI8vC,EAAS5vC,UAAUF,GAEvB,IAAK,IAAIkD,KAAO4sC,EACV9wC,OAAOU,UAAUL,eAAee,KAAK0vC,EAAQ5sC,KAC/CkN,EAAOlN,GAAO4sC,EAAO5sC,IAK3B,OAAOkN,GAGL2/B,EAAe,WACjB,SAASC,EAAiB5/B,EAAQZ,GAChC,IAAK,IAAIxP,EAAI,EAAGA,EAAIwP,EAAMrP,OAAQH,IAAK,CACrC,IAAIiwC,EAAazgC,EAAMxP,GACvBiwC,EAAWnpC,WAAampC,EAAWnpC,aAAc,EACjDmpC,EAAWlpC,cAAe,EACtB,UAAWkpC,IAAYA,EAAWC,UAAW,GACjDlxC,OAAO4H,eAAewJ,EAAQ6/B,EAAW/sC,IAAK+sC,IAIlD,OAAO,SAAUE,EAAaC,EAAYC,GAGxC,OAFID,GAAYJ,EAAiBG,EAAYzwC,UAAW0wC,GACpDC,GAAaL,EAAiBG,EAAaE,GACxCF,GAdQ,GAoBfvH,EAYJ,SAAiC5hC,GAC/B,GAAIA,GAAOA,EAAIwmC,WACb,OAAOxmC,EAEP,IAAIwnC,EAAS,GAEb,GAAW,MAAPxnC,EACF,IAAK,IAAI9D,KAAO8D,EACVhI,OAAOU,UAAUL,eAAee,KAAK4G,EAAK9D,KAAMsrC,EAAOtrC,GAAO8D,EAAI9D,IAK1E,OADAsrC,EAAOtB,QAAUlmC,EACVwnC,EAzBCC,CAFC,EAAQ,IAIjBnB,EAAoB,EAAQ,IAE5BC,GAE4BvmC,EAFgBsmC,IAGhCtmC,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,GAuCb,SAAS0pC,EAA2BC,EAAMvwC,GACxC,IAAKuwC,EACH,MAAM,IAAIC,eAAe,6DAG3B,OAAOxwC,GAAyB,kBAATA,GAAqC,oBAATA,EAA8BuwC,EAAPvwC,EAmB5E,IAAI03D,EAAa,SAAUjnB,GAGzB,SAASinB,IACP,IAAIlqB,EAEAkD,EAAOphC,GApCf,SAAyBqhC,EAAUZ,GACjC,KAAMY,aAAoBZ,GACxB,MAAM,IAAIzuC,UAAU,qCAoCpBsvC,CAAgBxxC,KAAMs4D,GAEtB,IAAK,IAAI7mB,EAAO/wC,UAAUC,OAAQkD,EAAOlE,MAAM8xC,GAAOC,EAAO,EAAGA,EAAOD,EAAMC,IAC3E7tC,EAAK6tC,GAAQhxC,UAAUgxC,GAGzB,OAAeJ,EAASphC,EAAQghC,EAA2BlxC,MAAOouC,EAAOkqB,EAAW54D,WAAaF,OAAOmyC,eAAe2mB,IAAa13D,KAAKC,MAAMutC,EAAM,CAACpuC,MAAM4B,OAAOiC,KAAiBqM,EAAMC,MAAQ,CAChMooD,YAAY,EACZC,aAAa,GACZtoD,EAAMuoD,aAAe,SAAUzzC,GAChC,IAAIuzC,EAAavzC,EAAG0zC,cAAchiD,WAAa,EAE3CxG,EAAMC,MAAMooD,aAAeA,GAC7BroD,EAAMgB,SAAS,CACbqnD,WAAYA,KAGPrnB,EAA2BhhC,EAAnCohC,GA8CL,OAvFF,SAAmB6B,EAAUC,GAC3B,GAA0B,oBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAIlxC,UAAU,kEAAoEkxC,GAG1FD,EAASjzC,UAAYV,OAAOW,OAAOizC,GAAcA,EAAWlzC,UAAW,CACrED,YAAa,CACXwB,MAAO0xC,EACP7rC,YAAY,EACZopC,UAAU,EACVnpC,cAAc,KAGd6rC,IAAY5zC,OAAOC,eAAiBD,OAAOC,eAAe0zC,EAAUC,GAAcD,EAASzzC,UAAY0zC,GAI3GC,CAAUilB,EAAYjnB,GA2BtBd,EAAa+nB,EAAY,CAAC,CACxB50D,IAAK,oBACLjC,MAAO,WACLzB,KAAK24D,sBAEN,CACDj1D,IAAK,qBACLjC,MAAO,WACLzB,KAAK24D,sBAEN,CACDj1D,IAAK,oBACLjC,MAAO,WACL,IAAI+2D,KAAiBx4D,KAAKq9B,SAAWr9B,KAAKq9B,QAAQu7B,YAAc54D,KAAKq9B,QAAQ9nB,aAEzEvV,KAAKmQ,MAAMqoD,cAAgBA,GAC7Bx4D,KAAKkR,SAAS,CACZsnD,YAAaA,MAIlB,CACD90D,IAAK,SACLjC,MAAO,WACL,IAAI6xC,EAAStzC,KAETm0C,EAASn0C,KAAKgQ,MACd4H,EAAWu8B,EAAOv8B,SAClBw8B,EAlGV,SAAkC5sC,EAAKiE,GACrC,IAAImF,EAAS,GAEb,IAAK,IAAIpQ,KAAKgH,EACRiE,EAAKb,QAAQpK,IAAM,GAClBhB,OAAOU,UAAUL,eAAee,KAAK4G,EAAKhH,KAC/CoQ,EAAOpQ,GAAKgH,EAAIhH,IAGlB,OAAOoQ,EAyFQ8+B,CAAyByE,EAAQ,CAAC,aAE7C,OAAO/K,EAAMnsB,cAAcurC,EAAS,KAAMpf,EAAMnsB,cAAc47C,EAAWxoB,EAAS,CAChFr/B,IAAK,SAAao+B,GAChB,OAAOkE,EAAOjW,QAAU+R,GAE1B0pB,SAAU94D,KAAKy4D,cACdrkB,GAAOx8B,GAAWwxB,EAAMnsB,cAAc87C,EAAQ,CAC/CviD,KAAMxW,KAAKmQ,MAAMooD,aACfnvB,EAAMnsB,cAAc87C,EAAQ,CAC9Bv6C,MAAOxe,KAAKmQ,MAAMqoD,mBAKjBF,EAvEQ,CAwEflvB,EAAMqD,WAEJ+b,EAAUza,EAAmBL,QAAQ39B,IAAIk+B,WAAW,CACtDC,YAAa,sBACbC,YAAa,gBAFDJ,CAGX,CAAC,sCAEA8qB,EAAY9qB,EAAmBL,QAAQ39B,IAAIk+B,WAAW,CACxDC,YAAa,wBACbC,YAAa,gBAFCJ,CAGb,CAAC,oLAEAgrB,EAAShrB,EAAmBL,QAAQ39B,IAAIk+B,WAAW,CACrDC,YAAa,qBACbC,YAAa,gBAFFJ,CAGV,CAAC,wKAAyK,IAAK,KAAK,SAAU/9B,GAC/L,OAAOA,EAAMwG,MAAQ,6FAA+FxG,EAAMtD,MAAMU,WAAa,WAC5I,SAAU4C,GACX,OAAOA,EAAMwO,OAAS,kGAGxBivB,EAAQC,QAAU4qB,G,iCC1MlB94D,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAGT,IAQgC+F,EAN5B4hC,EAYJ,SAAiC5hC,GAC/B,GAAIA,GAAOA,EAAIwmC,WACb,OAAOxmC,EAEP,IAAIwnC,EAAS,GAEb,GAAW,MAAPxnC,EACF,IAAK,IAAI9D,KAAO8D,EACVhI,OAAOU,UAAUL,eAAee,KAAK4G,EAAK9D,KAAMsrC,EAAOtrC,GAAO8D,EAAI9D,IAK1E,OADAsrC,EAAOtB,QAAUlmC,EACVwnC,EAzBCC,CAFC,EAAQ,IAIjBnB,EAAoB,EAAQ,IA2BhC,IAAIkrB,IAvB4BxxD,EAFgBsmC,IAGhCtmC,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,IAqBqBkmC,QAAQurB,GAAGhrB,WAAW,CACtDC,YAAa,gBACbC,YAAa,gBAFAJ,CAGZ,CAAC,6CAA8C,MAAM,SAAU/9B,GAChE,OAAOA,EAAMtD,MAAM8pC,gBASrB/I,EAAQC,QANE,SAAaU,GACrB,IAAIx2B,EAAWw2B,EAAKx2B,SAChBg9B,EAAaxG,EAAKwG,WACtB,OAAOxL,EAAMnsB,cAAc+7C,EAAUpkB,EAAYh9B,K,iCC7CnDpY,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAGT,IAAI4uC,EAAW7wC,OAAOa,QAAU,SAAUuQ,GACxC,IAAK,IAAIpQ,EAAI,EAAGA,EAAIE,UAAUC,OAAQH,IAAK,CACzC,IAAI8vC,EAAS5vC,UAAUF,GAEvB,IAAK,IAAIkD,KAAO4sC,EACV9wC,OAAOU,UAAUL,eAAee,KAAK0vC,EAAQ5sC,KAC/CkN,EAAOlN,GAAO4sC,EAAO5sC,IAK3B,OAAOkN,GAGT68B,EAAQC,QA4BR,SAAkBU,GAChB,IAAIx2B,EAAWw2B,EAAKx2B,SAChBI,EAAOo2B,EAAKp2B,KACZ48B,EAAaxG,EAAKwG,WAClB5kC,EAhBN,SAAkCxI,EAAKiE,GACrC,IAAImF,EAAS,GAEb,IAAK,IAAIpQ,KAAKgH,EACRiE,EAAKb,QAAQpK,IAAM,GAClBhB,OAAOU,UAAUL,eAAee,KAAK4G,EAAKhH,KAC/CoQ,EAAOpQ,GAAKgH,EAAIhH,IAGlB,OAAOoQ,EAOK8+B,CAAyBtB,EAAM,CAAC,WAAY,OAAQ,eAIhE,QAAgB/+B,IAFF2I,EAAKnQ,KAAKR,IAAI,WAG1B,OAAOu5C,EAAQlT,QAAQzwB,cAAci8C,EAAWxrB,QAAS2C,EAAS,CAChEr4B,KAAMA,EACN48B,WAAYA,GACX5kC,GAAQ4H,GAGb,OAAOgpC,EAAQlT,QAAQzwB,cAAc,KAAM23B,EAAYh9B,IAzCzD,IAEIgpC,EAAUrS,EAFD,EAAQ,IAMjB2qB,EAAa3qB,EAFD,EAAQ,MAIxB,SAASA,EAAuB/mC,GAC9B,OAAOA,GAAOA,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,K,iCC9BbhI,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAETgsC,EAAQC,aAAUr+B,EAElB,IAwCgC7H,EAxC5B6oC,EAAW7wC,OAAOa,QAAU,SAAUuQ,GACxC,IAAK,IAAIpQ,EAAI,EAAGA,EAAIE,UAAUC,OAAQH,IAAK,CACzC,IAAI8vC,EAAS5vC,UAAUF,GAEvB,IAAK,IAAIkD,KAAO4sC,EACV9wC,OAAOU,UAAUL,eAAee,KAAK0vC,EAAQ5sC,KAC/CkN,EAAOlN,GAAO4sC,EAAO5sC,IAK3B,OAAOkN,GAGL2/B,EAAe,WACjB,SAASC,EAAiB5/B,EAAQZ,GAChC,IAAK,IAAIxP,EAAI,EAAGA,EAAIwP,EAAMrP,OAAQH,IAAK,CACrC,IAAIiwC,EAAazgC,EAAMxP,GACvBiwC,EAAWnpC,WAAampC,EAAWnpC,aAAc,EACjDmpC,EAAWlpC,cAAe,EACtB,UAAWkpC,IAAYA,EAAWC,UAAW,GACjDlxC,OAAO4H,eAAewJ,EAAQ6/B,EAAW/sC,IAAK+sC,IAIlD,OAAO,SAAUE,EAAaC,EAAYC,GAGxC,OAFID,GAAYJ,EAAiBG,EAAYzwC,UAAW0wC,GACpDC,GAAaL,EAAiBG,EAAaE,GACxCF,GAdQ,GAoBfvH,EAYJ,SAAiC5hC,GAC/B,GAAIA,GAAOA,EAAIwmC,WACb,OAAOxmC,EAEP,IAAIwnC,EAAS,GAEb,GAAW,MAAPxnC,EACF,IAAK,IAAI9D,KAAO8D,EACVhI,OAAOU,UAAUL,eAAee,KAAK4G,EAAK9D,KAAMsrC,EAAOtrC,GAAO8D,EAAI9D,IAK1E,OADAsrC,EAAOtB,QAAUlmC,EACVwnC,EAzBCC,CAFC,EAAQ,IAIjBnB,EAAoB,EAAQ,IAE5BC,GAE4BvmC,EAFgBsmC,IAGhCtmC,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,GA2Bb,SAAS0pC,EAA2BC,EAAMvwC,GACxC,IAAKuwC,EACH,MAAM,IAAIC,eAAe,6DAG3B,OAAOxwC,GAAyB,kBAATA,GAAqC,oBAATA,EAA8BuwC,EAAPvwC,EAmB5E,IAAIu4D,EAAW,SAAU9nB,GAGvB,SAAS8nB,IACP,IAAI/qB,EAEAkD,EAAOphC,GApCf,SAAyBqhC,EAAUZ,GACjC,KAAMY,aAAoBZ,GACxB,MAAM,IAAIzuC,UAAU,qCAoCpBsvC,CAAgBxxC,KAAMm5D,GAEtB,IAAK,IAAI1nB,EAAO/wC,UAAUC,OAAQkD,EAAOlE,MAAM8xC,GAAOC,EAAO,EAAGA,EAAOD,EAAMC,IAC3E7tC,EAAK6tC,GAAQhxC,UAAUgxC,GAGzB,OAAeJ,EAASphC,EAAQghC,EAA2BlxC,MAAOouC,EAAO+qB,EAASz5D,WAAaF,OAAOmyC,eAAewnB,IAAWv4D,KAAKC,MAAMutC,EAAM,CAACpuC,MAAM4B,OAAOiC,KAAiBqM,EAAM6nC,aAAe,SAAU/yB,GAC7M,IAAI+T,EAAU/T,EAAGpU,OAAOmoB,QACpBoZ,EAAcjiC,EAAMF,MACpBub,EAAS4mB,EAAY5mB,OACrBvT,EAAOm6B,EAAYn6B,KACvBuT,EAAO42B,aAAanqC,EAAKtU,IAAK,CAC5BmE,KAAM,CACJkxB,QAASA,MAGJmY,EAA2BhhC,EAAnCohC,GAyBL,OAjEF,SAAmB6B,EAAUC,GAC3B,GAA0B,oBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAIlxC,UAAU,kEAAoEkxC,GAG1FD,EAASjzC,UAAYV,OAAOW,OAAOizC,GAAcA,EAAWlzC,UAAW,CACrED,YAAa,CACXwB,MAAO0xC,EACP7rC,YAAY,EACZopC,UAAU,EACVnpC,cAAc,KAGd6rC,IAAY5zC,OAAOC,eAAiBD,OAAOC,eAAe0zC,EAAUC,GAAcD,EAASzzC,UAAY0zC,GAI3GC,CAAU8lB,EAAU9nB,GA0BpBd,EAAa4oB,EAAU,CAAC,CACtBz1D,IAAK,SACLjC,MAAO,WACL,IAAI0yC,EAASn0C,KAAKgQ,MACd4H,EAAWu8B,EAAOv8B,SAClBI,EAAOm8B,EAAOn8B,KACd48B,EAAaT,EAAOS,WACpBxxC,EAAW+wC,EAAO/wC,SAClB21B,EAAU/gB,EAAKnQ,KAAKR,IAAI,WAC5B,OAAO+hC,EAAMnsB,cAAc0rC,EAAUtY,EAAS,CAC5CtX,QAASA,GACR6b,GAAaxL,EAAMnsB,cAAc,OAAQ,CAC1Cg5B,iBAAiB,GAChB7M,EAAMnsB,cAAc6vC,EAAO,CAC5BllD,KAAM,WACNmxB,QAASA,EACT51B,SAAUnD,KAAK+3C,aACf4d,SAAUvyD,KACPwU,OAIFuhD,EAjDM,CAkDb/vB,EAAMqD,WAERgB,EAAQC,QAAUyrB,EAElB,IAAIxQ,EAAW5a,EAAmBL,QAAQmb,GAAG5a,WAAW,CACtDC,YAAa,qBACbC,YAAa,eAFAJ,CAGZ,CAAC,yDAA0D,oBAAqB,OAAO,SAAU/9B,GAClG,OAAOA,EAAM+oB,QAAU/oB,EAAMtD,MAAMuvC,cAAgB,aAClD,SAAUjsC,GACX,OAAOA,EAAM+oB,QAAU,eAAiB,UAGtC+zB,EAAQ/e,EAAmBL,QAAQjwB,MAAMwwB,WAAW,CACtDC,YAAa,kBACbC,YAAa,eAFHJ,CAGT,CAAC,yC,iCCpKJvuC,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAGT,IAIgC+F,EAJ5BsmC,EAAoB,EAAQ,IAUhC,IAAIsrB,IAN4B5xD,EAFgBsmC,IAGhCtmC,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,IAIqBkmC,QAAQ2rB,GAAGprB,WAAW,CACtDC,YAAa,WACbC,YAAa,YAFAJ,CAGZ,CAAC,+DAEJN,EAAQC,QAAU0rB,G,iCCnBlB55D,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAETgsC,EAAQkjB,SAAWljB,EAAQijB,SAAWjjB,EAAQgjB,SAAWhjB,EAAQ+iB,SAAW/iB,EAAQ8iB,SAAW9iB,EAAQ6iB,SAAW7iB,EAAQ6rB,mBAAgBjqD,EAE1I,IAAIghC,EAAW7wC,OAAOa,QAAU,SAAUuQ,GACxC,IAAK,IAAIpQ,EAAI,EAAGA,EAAIE,UAAUC,OAAQH,IAAK,CACzC,IAAI8vC,EAAS5vC,UAAUF,GAEvB,IAAK,IAAIkD,KAAO4sC,EACV9wC,OAAOU,UAAUL,eAAee,KAAK0vC,EAAQ5sC,KAC/CkN,EAAOlN,GAAO4sC,EAAO5sC,IAK3B,OAAOkN,GAKLw4B,EAsBJ,SAAiC5hC,GAC/B,GAAIA,GAAOA,EAAIwmC,WACb,OAAOxmC,EAEP,IAAIwnC,EAAS,GAEb,GAAW,MAAPxnC,EACF,IAAK,IAAI9D,KAAO8D,EACVhI,OAAOU,UAAUL,eAAee,KAAK4G,EAAK9D,KAAMsrC,EAAOtrC,GAAO8D,EAAI9D,IAK1E,OADAsrC,EAAOtB,QAAUlmC,EACVwnC,EAnCCC,CAFC,EAAQ,IAMjBlB,EAAqBQ,EAFD,EAAQ,KAI5Bwa,EAAgB,EAAQ,IAIxBvH,EAAkBjT,EAFD,EAAQ,MAMzB4jB,EAAoB5jB,EAFD,EAAQ,MAI/B,SAASA,EAAuB/mC,GAC9B,OAAOA,GAAOA,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,GA+Db,IAAI+xD,EAAiBxrB,EAAmBL,QAAQz0B,EAAEg1B,WAAW,CAC3DC,YAAa,0BACbC,YAAa,YAFMJ,CAGlB,CAAC,WAAY,mBAAoB,eAAgB,+DAAgE,SAAU,6DAA8D,QAAQ,SAAU/9B,GAC5M,OAAOA,EAAM2lD,SAAW,IAAM,OAC7B,SAAU3lD,GACX,OAAOA,EAAM2lD,SAAW,OAAS,SAChC,SAAU3lD,GACX,OAAOA,EAAM8xC,UAAY,UAAY,YACpC,SAAU9xC,GACX,OAAOA,EAAM8xC,WAAa,gCACzB,SAAU9xC,GACX,OAAOA,EAAM8xC,UAAY9xC,EAAMtD,MAAMsG,KAAOhD,EAAMtD,MAAMmF,eACvD,SAAU7B,GACX,OAAOA,EAAMtD,MAAMsG,QAGjBw1C,EAAUza,EAAmBL,QAAQ39B,IAAIk+B,WAAW,CACtDC,YAAa,mBACbC,YAAa,YAFDJ,CAGX,CAAC,8BAA+B,MAAM,SAAU/9B,GACjD,OAAOA,EAAMwpD,YAAc,SAAW,KAGpCC,EAAe1rB,EAAmBL,QAAQz0B,EAAEg1B,WAAW,CACzDC,YAAa,wBACbC,YAAa,YAFIJ,CAGhB,CAAC,iEAEA6a,GAAS,EAAI7a,EAAmBL,SAASykB,EAAkBzkB,SAASO,WAAW,CACjFC,YAAa,kBACbC,YAAa,YAFF,CAGV,CAAC,2CACAmrB,EAAgB7rB,EAAQ6rB,eAAgB,EAAIvrB,EAAmBL,UA3EnE,SAAiB19B,GACf,IAAIgI,EAAOhI,EAAMgI,KACbuT,EAASvb,EAAMub,OACfnoB,EAAW4M,EAAM5M,SACjBwU,EAAW5H,EAAM4H,SACjB8hD,EAAmB1pD,EAAM02C,UACzBA,OAAiCr3C,IAArBqqD,EAAiC,KAAOA,EACpD9kB,EAAa5kC,EAAM4kC,WACnBr5B,EAAYvL,EAAMuL,UAClBo+C,EAAYpuC,EAAO9pB,MAAM2P,SAASu9B,MAAMoS,UAAY/oC,EACpDupC,GAAU,EAAIC,EAAgB9T,SAASniB,EAAO9pB,MAAM2P,SAAU4G,GAC9D4hD,EAAWx2D,KAAcm+C,EACzB9U,EAAYia,EACZjN,EAAWluB,EAAOvb,MAAMypC,UAAY,GACpC3yB,EAAQ9O,EAAKhF,KAAK6xC,OAClBgV,EAA6BpgB,GAAY3yB,EAAMimB,MAAM,IAAI+sB,OAAO,IAAMrgB,EAAW,QACjFsgB,EAA6B,qBAAXntB,OAAyBA,OAAOC,SAAS4U,SAAW,GACtEpnC,EAA2B,qBAAXuyB,OAAyBA,OAAOC,SAASxyB,OAAS,GAClE2/C,EAAgBD,EAAW,IAAMxY,EACjCO,EAAY9pC,EAAKnQ,KAAKR,IAAI,aAC9B,OAAO+hC,EAAMnsB,cAAcwvB,EAAW4D,EAAS,GAAIuE,EAAY,CAC7Dr5B,UAAWA,IACT6tB,EAAMnsB,cAAcw8C,EAAc,CACpC3lC,GAAIytB,IACFnY,EAAMnsB,cAAcs8C,EAAgB,CACtCjyC,QAAS,WACP,OAAOiE,EAAOs2B,mBAAmB7pC,IAEnCi+B,iBAAiB,EACjB6L,UAAWA,EACX6T,SAAUgE,IAAc7yC,GACvBsiB,EAAMnsB,cAAc8rC,EAAckR,cAAe,OAAQ7wB,EAAMnsB,cAAcurC,EAAS,CACvFgR,YAAaG,GAAaE,GACzBjiD,GAAWgiD,GAAYxwB,EAAMnsB,cAAc2rC,EAAQ,CACpD17C,KAAMq0C,EACNvN,OAAQ,WACN,OAAOzoB,EAAOvb,MAAM8pC,aAAevuB,EAAOvb,MAAM8pC,YAAY,6BAE9D9mC,KAAM,GAAKqH,EAAS2/C,GACnB5wB,EAAMnsB,cAAc,OAAQ,KAAM,UAoC8CgxB,WAAW,CAC9FC,YAAa,yBACbC,YAAa,YAF6B,CAGzC,CAAC,+EAAgF,wBAAyB,UAAW,yEAA0E,QAASorB,EAAgB3Q,GAAQ,SAAU54C,GAC3O,OAAOA,EAAMtD,MAAMmF,eAClB,SAAU7B,GACX,OAAOA,EAAMtD,MAAMsG,QAGNy6B,EAAQ6iB,SAAW,SAAkBtgD,GAClD,OAAOo5B,EAAMnsB,cAAcq8C,EAAejpB,EAAS,CACjDqW,UAAW,MACV12C,KAGUy9B,EAAQ8iB,SAAW,SAAkBvgD,GAClD,OAAOo5B,EAAMnsB,cAAcq8C,EAAejpB,EAAS,CACjDqW,UAAW,MACV12C,KAGUy9B,EAAQ+iB,SAAW,SAAkBxgD,GAClD,OAAOo5B,EAAMnsB,cAAcq8C,EAAejpB,EAAS,CACjDqW,UAAW,MACV12C,KAGUy9B,EAAQgjB,SAAW,SAAkBzgD,GAClD,OAAOo5B,EAAMnsB,cAAcq8C,EAAejpB,EAAS,CACjDqW,UAAW,MACV12C,KAGUy9B,EAAQijB,SAAW,SAAkB1gD,GAClD,OAAOo5B,EAAMnsB,cAAcq8C,EAAejpB,EAAS,CACjDqW,UAAW,MACV12C,KAGUy9B,EAAQkjB,SAAW,SAAkB3gD,GAClD,OAAOo5B,EAAMnsB,cAAcq8C,EAAejpB,EAAS,CACjDqW,UAAW,MACV12C,M,iCCjLLxQ,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAETgsC,EAAQC,QAYR,SAAmBU,GACjB,IAAIwG,EAAaxG,EAAKwG,WAClBh9B,EAAWw2B,EAAKx2B,SACpB,OAAOgpC,EAAQlT,QAAQzwB,cAAc,IAAK23B,EAAYh9B,IAbxD,IAIgCpQ,EAJ5B0yD,EAAS,EAAQ,GAEjBtZ,GAE4Bp5C,EAFK0yD,IAGrB1yD,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,I,iCCXbhI,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAGT,IAUgC+F,EAR5B4hC,EAcJ,SAAiC5hC,GAC/B,GAAIA,GAAOA,EAAIwmC,WACb,OAAOxmC,EAEP,IAAIwnC,EAAS,GAEb,GAAW,MAAPxnC,EACF,IAAK,IAAI9D,KAAO8D,EACVhI,OAAOU,UAAUL,eAAee,KAAK4G,EAAK9D,KAAMsrC,EAAOtrC,GAAO8D,EAAI9D,IAK1E,OADAsrC,EAAOtB,QAAUlmC,EACVwnC,EA3BCC,CAFC,EAAQ,IAMjBkrB,GAFS,EAAQ,GAEH,EAAQ,MAEtBC,GAE4B5yD,EAFU2yD,IAG1B3yD,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,GA8CbimC,EAAQC,QAAU,CAChB0T,WA1BF,SAAoBpxC,EAAOub,EAAQjqB,GACjC,OAAQ0O,EAAMioC,KAAKrwC,MACjB,IAAK,OACH,OAAOwhC,EAAMnsB,cAAc,SAAU,KAAMjN,EAAM4H,UAEnD,IAAK,OACH,OAAOwxB,EAAMnsB,cAAcm9C,EAAa1sB,QAAS,KAAM19B,EAAM4H,UAE/D,IAAK,SACH,OAAOwxB,EAAMnsB,cAAc,KAAM,KAAMjN,EAAM4H,UAE/C,IAAK,aACH,OAAOwxB,EAAMnsB,cAAc,IAAK,KAAMjN,EAAM4H,UAE9C,IAAK,UACH,OAAOwxB,EAAMnsB,cAAc,MAAO,KAAMjN,EAAM4H,UAEhD,IAAK,WACH,OAAOwxB,EAAMnsB,cAAc,OAAQ,KAAMjN,EAAM4H,UAEjD,QACE,OAAOtW,Q,iCC1Db9B,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAGT,IAIgC+F,EAJ5BsmC,EAAoB,EAAQ,IAUhC,IAAIusB,IAN4B7yD,EAFgBsmC,IAGhCtmC,EAAIwmC,WAAaxmC,EAAM,CACnCkmC,QAASlmC,IAIuBkmC,QAAQr7B,KAAKnD,MAAM,CACrDmrC,YAAY,IACXpM,WAAW,CACZC,YAAa,aACbC,YAAa,gBAJEJ,CAKd,CAAC,cAAe,uCAAwC,kFAAoF,SAAU/9B,GACvJ,OAAOA,EAAMtD,MAAM+wC,kBAClB,SAAUztC,GACX,OAAOA,EAAMtD,MAAMgxC,cAGrBjQ,EAAQC,QAAU2sB,G,iCCzBlB76D,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAGT,IAAI64D,EAAS,EAAQ,GAEjBngB,EAAW,CACbkK,SAAU,SAAkB94B,EAAQrO,GAC7BqO,EAAOgvC,gBACVhvC,EAAOq+B,WAAW,CAChBhiD,KAAM,OACNC,KAAM,CACJqV,KAAMA,MAKds9C,WAAY,SAAoBjvC,GAC9BA,EAAOkvC,aAAa,SAEtB9hB,gBAAiB,SAAyBptB,EAAQzN,GAChD,IAAI48C,EAAgBnvC,EAAOvb,MACvBwoC,EAAckiB,EAAcliB,YAC5BoB,EAAqB8gB,EAAc9gB,mBACnCE,EAAc4gB,EAAc5gB,YAC5BD,EAAoB6gB,EAAc7gB,kBAEjCrB,GACHsC,QAAQC,KAAK,iEAGXnB,GAAoBA,IAExB,IAAIl2C,EAAM42D,EAAOK,SAASx6D,SAItBy6D,EAAiB3O,IAAI4O,gBAAgB/8C,GAErC9F,EAAOsiD,EAAOnzD,MAAMhH,OAAO,CAC7BuD,IAAKA,EACLkE,KAAM,QACNw2C,QAAQ,EACRv2C,KAAM,CACJ6gC,IAAKkyB,EACLjyB,IAVM,GAWN8sB,SAAS,KAIblqC,EAAOi5B,YAAYxsC,GAAMwsC,YAAY,aAAarhD,SAASooB,GAI3DA,EAAO4jC,eAAc,SAAU5jC,GAG7BitB,EAAY16B,GAAM6b,MAAK,SAAU+O,GAC/B,IAAKA,EACH,MAAM,IAAI/lC,MAAM,mDAKlB,IACE4oB,EAAO42B,aAAaz+C,EAAK,CACvBmE,KAAM,CACJ6gC,IAAKA,EACLC,IAjCA,GAkCA8sB,SAAS,KAGb,MAAO3yD,GACPg4C,QAAQC,KAAK,uCAAwCj4C,OAEtDg4D,OAAM,SAAUh4D,GAQjB,MANAyoB,EAAO23B,gBAAgBx/C,GAEnBo2C,GACFA,EAAY,gDAGRh3C,KACLi4D,SAAQ,WACLlhB,GAAmBA,YAK/BpM,EAAQC,QAAUyM,G,iCC1FlB36C,OAAO4H,eAAeqmC,EAAS,aAAc,CAC3ChsC,OAAO,IAGI,EAAQ,GAArB,IAEI24C,EAAU,CACZmgB,aAAc,SAAsBhvC,GAGlC,OAFYA,EAAO9pB,MACCu5D,QACL5R,MAAK,SAAU5oD,GAC5B,MAAkB,SAAXA,EAAEoH,SAGbsqC,mBAAoB,SAA4B3mB,GAC9C,IACE,IAAI9pB,EAAQ8pB,EAAO9pB,MACfw5D,EAAgBx5D,EAAM2P,SAAS8pD,sBAAsBz5D,EAAM2wC,WAAWvmC,QAAO,SAAUmM,GACzF,MAAqB,SAAdA,EAAKpQ,QAGd,GAAIqzD,EAAc9xD,KAAM,CACtB,IAAI6T,EAAOi+C,EAAcla,QACrB3O,EAAY3wC,EAAM2wC,UAEtB,GAAIA,EAAU8O,OAAOia,SAASn+C,IAASo1B,EAAUiH,MAAM8hB,SAASn+C,GAC9D,OAAOA,GAGX,MAAOla,GAEPg4C,QAAQp5C,MAAMoB,MAIpB2qC,EAAQC,QAAU0M,I","file":"static/js/main.c1a2aeb1.chunk.js","sourcesContent":["import debug from 'debug';\nimport memoizeOne from 'memoize-one';\nimport warning from 'tiny-warning';\nimport { List, Record, Map as Map$1 } from 'immutable';\nimport isPlainObject from 'is-plain-object';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar _extendStatics = function extendStatics(d, b) {\n  _extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) {\n      if (b.hasOwnProperty(p)) d[p] = b[p];\n    }\n  };\n\n  return _extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  _extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar _assign = function __assign() {\n  _assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return _assign.apply(this, arguments);\n};\n\nfunction __values(o) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator],\n      i = 0;\n  if (m) return m.call(o);\n  return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n}\n\nfunction __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n}\n\nfunction __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++) {\n    ar = ar.concat(__read(arguments[i]));\n  }\n\n  return ar;\n}\n\nfunction CorePlugin(options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _a = options.plugins,\n      plugins = _a === void 0 ? [] : _a;\n  return __spread(plugins);\n}\n\nvar log = debug('core:controller');\n\nfunction registerPlugin(controller, plugin) {\n  if (Array.isArray(plugin)) {\n    plugin.forEach(function (p) {\n      return registerPlugin(controller, p);\n    });\n    return;\n  }\n\n  if (plugin == null) {\n    return;\n  }\n\n  for (var key in plugin) {\n    var fn = plugin[key];\n    controller.middleware[key] = controller.middleware[key] || [];\n    controller.middleware[key].push(fn);\n  }\n} // modified from koa-compose\n\n\nfunction compose(middleware) {\n  var e_1, _a;\n\n  if (!Array.isArray(middleware)) throw new TypeError('Middleware stack must be an array!');\n\n  try {\n    for (var middleware_1 = __values(middleware), middleware_1_1 = middleware_1.next(); !middleware_1_1.done; middleware_1_1 = middleware_1.next()) {\n      var fn = middleware_1_1.value;\n      if (typeof fn !== 'function') throw new TypeError('Middleware must be composed of functions!');\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (middleware_1_1 && !middleware_1_1.done && (_a = middleware_1.return)) _a.call(middleware_1);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n\n  return function (context, next) {\n    // last called middleware #\n    var index = -1;\n    return dispatch(0);\n\n    function dispatch(i) {\n      if (i <= index) throw new Error('next() called multiple times');\n      index = i;\n      var fn = middleware[i];\n      if (i === middleware.length) fn = next;\n      if (!fn) return null;\n\n      try {\n        return fn(context, dispatch.bind(null, i + 1));\n      } catch (err) {\n        throw err;\n      }\n    }\n  };\n}\n\nvar Controller =\n/** @class */\nfunction () {\n  function Controller(options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var _a = options.plugins,\n        plugins = _a === void 0 ? [] : _a,\n        onChange = options.onChange,\n        readOnly = options.readOnly;\n    this.readOnly = readOnly;\n    this.onChange = onChange;\n    this.middleware = new Map();\n    var corePlugin = CorePlugin({\n      plugins: plugins\n    });\n    registerPlugin(this, corePlugin);\n  }\n\n  Controller.prototype.run = function (key) {\n    var args = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      args[_i - 1] = arguments[_i];\n    }\n\n    var middleware = this.middleware;\n    var fns = middleware[key] || [];\n    warning(fns.length !== 0, \"the middleware function \" + key + \" is not found!\");\n    var composedFn = memoizeOne(compose)(fns); // @ts-ignore\n\n    return composedFn.apply(void 0, __spread(args));\n  };\n\n  Controller.prototype.getValue = function (propKey, arg) {\n    return this.run('getValue', _assign(_assign({}, arg), {\n      propKey: propKey\n    }));\n  };\n\n  Controller.prototype.change = function (model, callback) {\n    this.onChange(model, callback);\n    this.currentModel = model;\n  };\n\n  return Controller;\n}();\n\nvar TopicDirection = {\n  LEFT: 'L',\n  RIGHT: 'R',\n  BOTTOM: 'B',\n  MAIN: 'M' // root\n\n};\nvar DiagramLayoutType;\n\n(function (DiagramLayoutType) {\n  DiagramLayoutType[DiagramLayoutType[\"LEFT_TO_RIGHT\"] = 0] = \"LEFT_TO_RIGHT\";\n  DiagramLayoutType[DiagramLayoutType[\"RIGHT_TO_LEFT\"] = 1] = \"RIGHT_TO_LEFT\";\n  DiagramLayoutType[DiagramLayoutType[\"LEFT_AND_RIGHT\"] = 2] = \"LEFT_AND_RIGHT\";\n  DiagramLayoutType[DiagramLayoutType[\"TOP_TO_BOTTOM\"] = 3] = \"TOP_TO_BOTTOM\";\n})(DiagramLayoutType || (DiagramLayoutType = {}));\n\nvar TopicVisualLevel = {\n  ROOT: 0,\n  PRIMARY: 1,\n  NORMAL: 2\n};\nvar BlockType = {\n  CONTENT: 'CONTENT',\n  DESC: 'DESC'\n};\nvar FocusMode = {\n  NORMAL: 'NORMAL',\n  EDITING_CONTENT: 'EDITING_CONTENT',\n  EDITING_DESC: 'EDITING_DESC',\n  SHOW_POPUP: 'SHOW_POPUP',\n  DRAGGING: 'DRAGGING'\n};\nvar TopicRelationship = {\n  ANCESTOR: 'ANCESTOR',\n  DESCENDANT: 'DESCENDANT',\n  SIBLING: 'SIBLING',\n  NONE: 'NONE'\n};\nvar OpType = {\n  TOGGLE_COLLAPSE: 'TOGGLE_COLLAPSE',\n  COLLAPSE_ALL: 'COLLAPSE_ALL',\n  EXPAND_ALL: 'EXPAND_ALL',\n  EXPAND_TO: 'EXPAND_TO',\n  ADD_CHILD: 'ADD_CHILD',\n  ADD_SIBLING: 'ADD_SIBLING',\n  DELETE_TOPIC: 'DELETE_TOPIC',\n  FOCUS_TOPIC: 'FOCUS_TOPIC',\n  SET_FOCUS_MODE: 'SET_FOCUS_MODE',\n  SET_STYLE: 'SET_STYLE',\n  SET_THEME: 'SET_THEME',\n  SET_TOPIC_BLOCK: 'SET_TOPIC_BLOCK',\n  DELETE_TOPIC_BLOCK: 'DELETE_TOPIC_BLOCK',\n  // SET_TOPIC_CONTENT: 'SET_TOPIC_CONTENT',\n  // SET_TOPIC_DESC: 'SET_TOPIC_DESC',\n  START_EDITING_CONTENT: 'START_EDITING_CONTENT',\n  START_EDITING_DESC: 'START_EDITING_DESC',\n  DRAG_AND_DROP: 'DRAG_AND_DROP',\n  SET_EDITOR_ROOT: 'SET_EDITOR_ROOT'\n};\n\nfunction createKey() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    var r = Math.random() * 16 | 0,\n        v = c === 'x' ? r : r & 0x3 | 0x8;\n    return v.toString(16);\n  });\n}\n\nvar defaultBlockRecord = {\n  type: null,\n  key: null,\n  data: null\n};\n\nvar Block =\n/** @class */\nfunction (_super) {\n  __extends(Block, _super);\n\n  function Block() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Object.defineProperty(Block.prototype, \"data\", {\n    get: function get() {\n      return this.get('data');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Block.prototype, \"type\", {\n    get: function get() {\n      return this.get('type');\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Block.create = function (obj) {\n    return new Block(obj);\n  };\n\n  Block.createList = function (obj) {\n    if (List.isList(obj) || Array.isArray(obj)) {\n      // @ts-ignore\n      return List(obj.map(Block.create));\n    }\n\n    throw new Error(\"Block.createList only accepts Array or List, but you passed it: \" + obj);\n  };\n\n  return Block;\n}(Record(defaultBlockRecord));\n\nvar defaultTopicRecord = {\n  key: null,\n  parentKey: null,\n  collapse: false,\n  subKeys: null,\n  blocks: null,\n  relations: null,\n  style: null\n};\n\nvar Topic =\n/** @class */\nfunction (_super) {\n  __extends(Topic, _super);\n\n  function Topic() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Object.defineProperty(Topic.prototype, \"key\", {\n    get: function get() {\n      return this.get('key');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Topic.prototype, \"parentKey\", {\n    get: function get() {\n      return this.get('parentKey');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Topic.prototype, \"collapse\", {\n    get: function get() {\n      return this.get('collapse');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Topic.prototype, \"subKeys\", {\n    get: function get() {\n      return this.get('subKeys');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Topic.prototype, \"blocks\", {\n    get: function get() {\n      return this.get('blocks');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Topic.prototype, \"relations\", {\n    get: function get() {\n      return this.get('relations');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Topic.prototype, \"style\", {\n    get: function get() {\n      return this.get('style');\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Topic.prototype.getBlock = function (type) {\n    var index = this.blocks.findIndex(function (b) {\n      return b.type === type;\n    });\n    if (index === -1) return {\n      index: index,\n      block: null\n    };\n    return {\n      index: index,\n      block: this.blocks.get(index)\n    };\n  };\n\n  Topic.fromJSON = function (obj) {\n    var key = obj.key,\n        _a = obj.parentKey,\n        parentKey = _a === void 0 ? null : _a,\n        blocks = obj.blocks,\n        _b = obj.subKeys,\n        subKeys = _b === void 0 ? [] : _b,\n        _c = obj.collapse,\n        collapse = _c === void 0 ? false : _c;\n    return new Topic({\n      key: key,\n      parentKey: parentKey,\n      collapse: collapse,\n      subKeys: List(subKeys),\n      blocks: Block.createList(blocks)\n    });\n  };\n\n  Topic.create = function (_a) {\n    var key = _a.key,\n        _b = _a.parentKey,\n        parentKey = _b === void 0 ? null : _b,\n        _c = _a.content,\n        content = _c === void 0 ? '' : _c,\n        _d = _a.subKeys,\n        subKeys = _d === void 0 ? [] : _d,\n        _e = _a.collapse,\n        collapse = _e === void 0 ? false : _e;\n    var block = Block.create({\n      type: BlockType.CONTENT,\n      data: content,\n      key: null\n    });\n    var blocks = List([block]);\n    return new Topic({\n      key: key,\n      parentKey: parentKey,\n      blocks: blocks,\n      subKeys: List(subKeys),\n      collapse: collapse\n    });\n  };\n\n  return Topic;\n}(Record(defaultTopicRecord));\n\nfunction getAllSubTopicKeys(model, topicKey) {\n  var item = model.getTopic(topicKey);\n  var res = [];\n\n  if (item.subKeys.size > 0) {\n    var subKeys = item.subKeys.toArray();\n    res.push.apply(res, __spread(subKeys));\n    res = subKeys.reduce(function (acc, key) {\n      acc.push.apply(acc, __spread(getAllSubTopicKeys(model, key)));\n      return acc;\n    }, res);\n  }\n\n  return res;\n}\n\nfunction getKeyPath(model, topicKey, reverse) {\n  if (reverse === void 0) {\n    reverse = false;\n  }\n\n  var res = [topicKey];\n  var item = model.getTopic(topicKey);\n\n  while (item.parentKey) {\n    reverse ? res.push(item.parentKey) : res.unshift(item.parentKey);\n    item = model.getParentTopic(item.key);\n  }\n\n  return res;\n}\n\nfunction getRelationship(model, srcKey, dstKey) {\n  var srcTopic = model.getTopic(srcKey);\n  var dstTopic = model.getTopic(dstKey);\n\n  if (srcTopic && dstTopic) {\n    if (srcTopic.parentKey == dstTopic.parentKey) return TopicRelationship.SIBLING;\n    var pTopic = srcTopic;\n\n    while (pTopic.parentKey) {\n      if (pTopic.parentKey === dstTopic.key) return TopicRelationship.DESCENDANT;\n      pTopic = model.getParentTopic(pTopic.key);\n    }\n\n    pTopic = dstTopic;\n\n    while (pTopic.parentKey) {\n      if (pTopic.parentKey === srcTopic.key) return TopicRelationship.ANCESTOR;\n      pTopic = model.getParentTopic(pTopic.key);\n    }\n  }\n\n  return TopicRelationship.NONE;\n}\n\nvar log$1 = debug('modifier');\n\nfunction toggleCollapse(_a) {\n  var model = _a.model,\n      topicKey = _a.topicKey;\n  var topic = model.getTopic(topicKey);\n\n  if (topic && topic.subKeys.size !== 0) {\n    topic = topic.merge({\n      collapse: !topic.collapse\n    });\n    model = model.updateIn(['topics', topic.key, 'collapse'], function (collapse) {\n      return !collapse;\n    });\n  }\n\n  model = focusTopic({\n    model: model,\n    topicKey: topicKey,\n    focusMode: FocusMode.NORMAL\n  });\n  return model;\n}\n\nfunction collapseAll(_a) {\n  var model = _a.model;\n  log$1('collapseAll');\n  var topicKeys = getAllSubTopicKeys(model, model.editorRootTopicKey);\n  log$1(model);\n  model = model.withMutations(function (m) {\n    topicKeys.forEach(function (topicKey) {\n      m.setIn(['topics', topicKey, 'collapse'], true);\n    });\n  });\n  log$1(model);\n  return model;\n}\n\nfunction expandAll(_a) {\n  var model = _a.model;\n  var topicKeys = getAllSubTopicKeys(model, model.editorRootTopicKey);\n  log$1(model);\n  model = model.withMutations(function (m) {\n    topicKeys.forEach(function (topicKey) {\n      m.setIn(['topics', topicKey, 'collapse'], false);\n    });\n  });\n  log$1(model);\n  return model;\n}\n\nfunction expandTo(_a) {\n  var model = _a.model,\n      topicKey = _a.topicKey;\n  var keys = getKeyPath(model, topicKey).filter(function (t) {\n    return t !== topicKey;\n  });\n  model = model.withMutations(function (m) {\n    keys.forEach(function (topicKey) {\n      m.setIn(['topics', topicKey, 'collapse'], false);\n    });\n  }); // \n\n  if (getRelationship(model, topicKey, model.editorRootTopicKey) !== TopicRelationship.DESCENDANT) {\n    model = model.set('editorRootTopicKey', model.rootTopicKey);\n  }\n\n  return model;\n}\n\nfunction focusTopic(_a) {\n  var model = _a.model,\n      topicKey = _a.topicKey,\n      focusMode = _a.focusMode;\n  log$1('focus topic');\n  if (topicKey !== model.focusKey) model = model.set('focusKey', topicKey);\n  if (focusMode !== model.focusMode) model = model.set('focusMode', focusMode);\n  return model;\n}\n\nfunction setFocusMode(_a) {\n  var model = _a.model,\n      focusMode = _a.focusMode;\n  log$1('setFocusMode');\n  if (focusMode !== model.focusMode) model = model.set('focusMode', focusMode);\n  return model;\n}\n\nfunction addChild(_a) {\n  var model = _a.model,\n      topicKey = _a.topicKey;\n  log$1('addChild:', topicKey);\n  var topic = model.getTopic(topicKey);\n\n  if (topic) {\n    var child_1 = Topic.create({\n      key: createKey(),\n      parentKey: topic.key\n    });\n    topic = topic.set('collapse', false).update('subKeys', function (subKeys) {\n      return subKeys.push(child_1.key);\n    });\n    model = model.update('topics', function (topics) {\n      return topics.set(topicKey, topic).set(child_1.key, child_1);\n    });\n    return focusTopic({\n      model: model,\n      topicKey: child_1.key,\n      focusMode: FocusMode.EDITING_CONTENT\n    });\n  }\n\n  return model;\n}\n\nfunction addSibling(_a) {\n  var model = _a.model,\n      topicKey = _a.topicKey;\n  if (topicKey === model.rootTopicKey) return model;\n  var topic = model.getTopic(topicKey);\n\n  if (topic) {\n    var pItem = model.getTopic(topic.parentKey);\n    var idx_1 = pItem.subKeys.indexOf(topicKey);\n    var sibling_1 = Topic.create({\n      key: createKey(),\n      parentKey: pItem.key\n    });\n    model = model.update('topics', function (topics) {\n      return topics.set(sibling_1.key, sibling_1);\n    }).updateIn(['topics', pItem.key, 'subKeys'], function (subKeys) {\n      return subKeys.insert(idx_1 + 1, sibling_1.key);\n    });\n    return focusTopic({\n      model: model,\n      topicKey: sibling_1.key,\n      focusMode: FocusMode.EDITING_CONTENT\n    });\n  }\n\n  return model;\n}\n\nfunction deleteTopic(_a) {\n  var model = _a.model,\n      topicKey = _a.topicKey;\n  if (topicKey === model.editorRootTopicKey) return model;\n  var item = model.getTopic(topicKey);\n\n  if (item) {\n    model = model.withMutations(function (m) {\n      m.update('topics', function (topics) {\n        topics = topics.delete(topicKey);\n        var deleteKeys = getAllSubTopicKeys(model, topicKey);\n        topics = topics.withMutations(function (t) {\n          deleteKeys.forEach(function (dKey) {\n            t.delete(dKey);\n          });\n        });\n        return topics;\n      });\n      m.updateIn(['topics', item.parentKey, 'subKeys'], function (subKeys) {\n        return subKeys.delete(subKeys.indexOf(topicKey));\n      });\n      if (m.focusKey === topicKey) m.set('focusKey', null).set('focusMode', null);\n    });\n  }\n\n  return model;\n}\n/**\r\n * setBlockData of one topic\r\n * @param model\r\n * @param topicKey\r\n * @param blockType\r\n * @param focusMode\r\n * @param data\r\n */\n\n\nfunction setBlockData(_a) {\n  var model = _a.model,\n      topicKey = _a.topicKey,\n      blockType = _a.blockType,\n      focusMode = _a.focusMode,\n      data = _a.data;\n  var topic = model.getTopic(topicKey);\n\n  if (topic) {\n    var _b = topic.getBlock(blockType),\n        index = _b.index,\n        block = _b.block;\n\n    if (index === -1) {\n      model = model.updateIn(['topics', topicKey, 'blocks'], function (blocks) {\n        return blocks.push(Block.create({\n          type: blockType,\n          data: data\n        }));\n      });\n    } else {\n      if (block.data !== data) {\n        model = model.updateIn(['topics', topicKey, 'blocks', index, 'data'], function (dt) {\n          return data;\n        });\n      }\n    }\n\n    if (focusMode) {\n      model = focusTopic({\n        model: model,\n        topicKey: topicKey,\n        focusMode: focusMode\n      });\n    }\n  }\n\n  return model;\n}\n\nfunction deleteBlock(_a) {\n  var model = _a.model,\n      topicKey = _a.topicKey,\n      blockType = _a.blockType;\n  var topic = model.getTopic(topicKey);\n\n  if (topic) {\n    var index_1 = topic.getBlock(blockType).index;\n\n    if (index_1 !== -1) {\n      model = model.updateIn(['topics', topicKey, 'blocks'], function (blocks) {\n        return blocks.delete(index_1);\n      });\n    }\n\n    model = focusTopic({\n      model: model,\n      topicKey: null,\n      focusMode: null\n    });\n  }\n\n  return model;\n}\n\nfunction setStyle(_a) {\n  var model = _a.model,\n      topicKey = _a.topicKey,\n      style = _a.style;\n  var topic = model.getTopic(topicKey);\n\n  if (topic) {\n    if (style !== topic.style) {\n      model = model.updateIn(['topics', topicKey, 'style'], function (s) {\n        return style;\n      });\n    }\n  }\n\n  return model;\n}\n\nfunction setTheme(_a) {\n  var model = _a.model,\n      theme = _a.theme;\n  model = model.setIn(['config', 'theme'], theme);\n  return model;\n}\n\nfunction setLayoutDir(_a) {\n  var model = _a.model,\n      layoutDir = _a.layoutDir;\n  if (model.config.layoutDir === layoutDir) return model;\n  model = model.setIn(['config', 'layoutDir'], layoutDir);\n  return model;\n}\n\nfunction setEditorRootTopicKey(_a) {\n  var model = _a.model,\n      topicKey = _a.topicKey;\n  if (model.editorRootTopicKey !== topicKey) model = model.set('editorRootTopicKey', topicKey);\n  if (model.getTopic(topicKey).collapse) model = model.setIn(['topics', topicKey, 'collapse'], false);\n  return model;\n}\n\nfunction setZoomFactor(_a) {\n  var model = _a.model,\n      zoomFactor = _a.zoomFactor;\n  if (model.zoomFactor !== zoomFactor) model = model.set('zoomFactor', zoomFactor);\n  return model;\n}\n\nvar modifiers = {\n  addChild: addChild,\n  addSibling: addSibling,\n  toggleCollapse: toggleCollapse,\n  collapseAll: collapseAll,\n  expandAll: expandAll,\n  expandTo: expandTo,\n  focusTopic: focusTopic,\n  setFocusMode: setFocusMode,\n  deleteTopic: deleteTopic,\n  setBlockData: setBlockData,\n  deleteBlock: deleteBlock,\n  setStyle: setStyle,\n  setTheme: setTheme,\n  setLayoutDir: setLayoutDir,\n  setEditorRootTopicKey: setEditorRootTopicKey,\n  setZoomFactor: setZoomFactor\n};\n\nfunction isThemeType(obj) {\n  return obj.name != null && obj.background != null && obj.highlightColor != null;\n}\n\nvar defaultTheme = {\n  name: 'default',\n  randomColor: true,\n  background: 'rgb(57,60,65)',\n  highlightColor: '#50C9CE',\n  marginH: 60,\n  marginV: 20,\n  contentStyle: {\n    lineHeight: '1.5'\n  },\n  linkStyle: {\n    lineRadius: 5,\n    lineType: 'curve',\n    lineWidth: '3px'\n  },\n  rootTopic: {\n    contentStyle: {\n      fontSize: '34px',\n      borderRadius: '35px',\n      padding: '16px 18px 16px 18px'\n    },\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: '3px',\n      lineColor: 'rgb(113, 203, 45)'\n    }\n  },\n  primaryTopic: {\n    contentStyle: {\n      borderWidth: '1px',\n      borderStyle: 'solid',\n      borderRadius: '20px',\n      fontSize: '17px',\n      padding: '10px 15px 10px 15px'\n    },\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: '3px',\n      lineColor: 'rgb(113, 203, 45)'\n    }\n  },\n  normalTopic: {\n    contentStyle: {\n      border: '1px solid #e8eaec',\n      borderRadius: '20px',\n      fontSize: '17px',\n      padding: '4px 10px'\n    },\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: '3px',\n      lineColor: 'white'\n    }\n  }\n};\nvar defaultConfigRecord = {\n  readOnly: false,\n  allowUndo: true,\n  layoutDir: DiagramLayoutType.LEFT_AND_RIGHT,\n  theme: defaultTheme\n};\n\nvar Config =\n/** @class */\nfunction (_super) {\n  __extends(Config, _super);\n\n  function Config() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Object.defineProperty(Config.prototype, \"layoutDir\", {\n    get: function get() {\n      return this.get('layoutDir');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Config.prototype, \"readOnly\", {\n    get: function get() {\n      return this.get('readOnly');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Config.prototype, \"allowUndo\", {\n    get: function get() {\n      return this.get('allowUndo');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Config.prototype, \"theme\", {\n    get: function get() {\n      return this.get('theme');\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Config.fromJSON = function (obj) {\n    return new Config(obj);\n  };\n\n  return Config;\n}(Record(defaultConfigRecord));\n\nvar defaultModelRecord = {\n  topics: Map$1(),\n  extData: Map$1(),\n  config: null,\n  rootTopicKey: null,\n  editorRootTopicKey: null,\n  focusKey: null,\n  focusMode: null,\n  formatVersion: null,\n  zoomFactor: 1\n};\n\nvar Model =\n/** @class */\nfunction (_super) {\n  __extends(Model, _super);\n\n  function Model() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Model.isModel = function (obj) {\n    return obj instanceof Model;\n  };\n\n  Model.create = function (attrs) {\n    if (attrs === void 0) {\n      attrs = null;\n    }\n\n    if (attrs == null) return Model.createEmpty();\n    var res;\n\n    if (Model.isModel(attrs)) {\n      res = attrs;\n    }\n\n    if (isPlainObject(attrs)) {\n      res = Model.fromJSON(attrs);\n    }\n\n    if (res) {\n      if (res.focusKey == null) {\n        res = res.set('focusKey', res.rootTopicKey);\n      }\n\n      if (res.focusMode == null) {\n        res = res.set('focusMode', FocusMode.NORMAL);\n      }\n\n      return res;\n    }\n\n    throw new Error(\"`Value.create` only accepts objects or values, but you passed it: \" + attrs);\n  };\n\n  Model.createEmpty = function () {\n    var model = new Model();\n    var rootTopic = Topic.create({\n      key: createKey()\n    });\n    return model.update('topics', function (topics) {\n      return topics.set(rootTopic.key, rootTopic);\n    }).set('rootTopicKey', rootTopic.key).set('focusKey', rootTopic.key).set('focusMode', FocusMode.NORMAL);\n  };\n\n  Model.fromJSON = function (object) {\n    var model = new Model();\n    var _a = object.topics,\n        topics = _a === void 0 ? [] : _a,\n        _b = object.config,\n        config = _b === void 0 ? {} : _b,\n        rootTopicKey = object.rootTopicKey;\n    var editorRootTopicKey = object.editorRootTopicKey;\n    if (editorRootTopicKey === undefined) editorRootTopicKey = rootTopicKey;\n    model = model.merge({\n      rootTopicKey: rootTopicKey,\n      editorRootTopicKey: editorRootTopicKey\n    });\n    model = model.withMutations(function (model) {\n      topics.forEach(function (topic) {\n        model.update('topics', function (topics) {\n          return topics.set(topic.key, Topic.fromJSON(topic));\n        });\n      });\n      model.set('config', Config.fromJSON(config));\n    });\n    return model;\n  };\n\n  Model.prototype.toJS = function () {\n    var obj = {\n      rootTopicKey: this.rootTopicKey,\n      topics: Object.values(this.topics.toJS()),\n      config: this.config,\n      extData: this.extData,\n      zoomFactor: this.zoomFactor\n    };\n    return obj;\n  };\n\n  Object.defineProperty(Model.prototype, \"extData\", {\n    get: function get() {\n      return this.get('extData');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Model.prototype, \"topics\", {\n    get: function get() {\n      return this.get('topics');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Model.prototype, \"config\", {\n    get: function get() {\n      return this.get('config');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Model.prototype, \"formatVersion\", {\n    get: function get() {\n      return this.get('formatVersion');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Model.prototype, \"rootTopicKey\", {\n    get: function get() {\n      return this.get('rootTopicKey');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Model.prototype, \"editorRootTopicKey\", {\n    get: function get() {\n      return this.get('editorRootTopicKey');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Model.prototype, \"focusKey\", {\n    get: function get() {\n      return this.get('focusKey');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Model.prototype, \"focusMode\", {\n    get: function get() {\n      return this.get('focusMode');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Model.prototype, \"editingContentKey\", {\n    get: function get() {\n      return this.focusMode === FocusMode.EDITING_CONTENT ? this.focusKey : null;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Model.prototype, \"editingDescKey\", {\n    get: function get() {\n      return this.focusMode === FocusMode.EDITING_DESC ? this.focusKey : null;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Model.prototype.getTopic = function (key) {\n    return this.topics.get(key);\n  };\n\n  Model.prototype.getExtDataItem = function (key, c) {\n    return this.extData.get(key) || new c();\n  };\n\n  Model.prototype.getParentTopic = function (key) {\n    var topic = this.getTopic(key);\n    return topic.parentKey ? this.getTopic(topic.parentKey) : null;\n  };\n\n  Model.prototype.getTopicVisualLevel = function (key) {\n    var topic = this.getTopic(key);\n    var level = 0;\n\n    while (topic && topic.key !== this.editorRootTopicKey) {\n      level++;\n      topic = this.getParentTopic(topic.key);\n    }\n\n    return level;\n  };\n\n  Object.defineProperty(Model.prototype, \"rootTopic\", {\n    get: function get() {\n      return this.getTopic(this.rootTopicKey);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Model.prototype, \"zoomFactor\", {\n    get: function get() {\n      return this.get('zoomFactor');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return Model;\n}(Record(defaultModelRecord));\n\nexport { Block, BlockType, Config, Controller, DiagramLayoutType, FocusMode, Model, modifiers as ModelModifier, modifiers as Modifiers, OpType, Topic, TopicDirection, TopicRelationship, TopicVisualLevel, createKey, defaultTheme, getAllSubTopicKeys, getKeyPath, getRelationship, isThemeType };","import { BlockType, OpType, FocusMode } from '@blink-mind/core';\nimport { createElement, PureComponent } from 'react';\nimport plainSerializer from 'slate-plain-serializer';\nimport debug from 'debug';\nimport { Editor } from 'slate-react';\nimport styled from 'styled-components';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar _extendStatics = function extendStatics(d, b) {\n  _extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) {\n      if (b.hasOwnProperty(p)) d[p] = b[p];\n    }\n  };\n\n  return _extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  _extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar _assign = function __assign() {\n  _assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return _assign.apply(this, arguments);\n};\n\nfunction __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n}\n\nvar log = debug('node:text-editor');\nvar Content = styled.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  padding: 6px;\\n  background-color: \", \";\\n  cursor: \", \";\\n  min-width: 50px;\\n\"], [\"\\n  padding: 6px;\\n  background-color: \", \";\\n  cursor: \", \";\\n  min-width: 50px;\\n\"])), function (props) {\n  return props.readOnly ? null : 'white';\n}, function (props) {\n  return props.readOnly ? 'pointer' : 'text';\n});\n\nvar SimpleTextEditor =\n/** @class */\nfunction (_super) {\n  __extends(SimpleTextEditor, _super);\n\n  function SimpleTextEditor(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.state = {\n      content: null\n    };\n\n    _this.onMouseDown = function (e) {\n      e.stopPropagation();\n    };\n\n    _this.onMouseMove = function (e) {// log('onMouseMove');\n      // e.stopPropagation();\n    };\n\n    _this.onKeyDown = function (e) {};\n\n    _this._handleClick = function (event) {\n      var wasOutside = !_this.root.contains(event.target);\n      wasOutside && _this.onClickOutSide(event);\n    };\n\n    _this.rootRef = function (saveRef) {\n      return function (ref) {\n        saveRef(ref);\n        _this.root = ref;\n      };\n    };\n\n    _this.initState();\n\n    return _this;\n  }\n\n  SimpleTextEditor.prototype.onChange = function (_a) {\n    var value = _a.value;\n    log('onChange', value);\n    this.setState({\n      content: value\n    });\n  };\n\n  SimpleTextEditor.prototype.componentDidMount = function () {\n    var readOnly = this.props.readOnly;\n    if (readOnly) return;\n    document.addEventListener('click', this._handleClick);\n  };\n\n  SimpleTextEditor.prototype.componentWillUnmount = function () {\n    var readOnly = this.props.readOnly;\n    if (readOnly) return;\n    document.removeEventListener('click', this._handleClick);\n  };\n\n  SimpleTextEditor.prototype.onClickOutSide = function (e) {};\n\n  SimpleTextEditor.prototype.getCustomizeProps = function () {\n    return null;\n  };\n\n  SimpleTextEditor.prototype.getContent = function () {\n    var block = this.getCustomizeProps().block;\n    var content = block.data;\n    if (content == null) return null;\n\n    if (typeof content === 'string') {\n      content = plainSerializer.deserialize(content);\n    }\n\n    return content;\n  };\n\n  SimpleTextEditor.prototype.initState = function () {\n    var content = this.getContent();\n    this.state = {\n      content: content\n    };\n  };\n\n  SimpleTextEditor.prototype.render = function () {\n    var _a = this.props,\n        topicKey = _a.topicKey,\n        saveRef = _a.saveRef;\n\n    var _b = this.getCustomizeProps(),\n        readOnly = _b.readOnly,\n        getRefKeyFunc = _b.getRefKeyFunc,\n        placeholder = _b.placeholder,\n        style = _b.style;\n\n    log(readOnly);\n    var key = getRefKeyFunc(topicKey);\n    var content = readOnly ? this.getContent() : this.state.content;\n\n    var _c = this,\n        onMouseDown = _c.onMouseDown,\n        onMouseMove = _c.onMouseMove,\n        onKeyDown = _c.onKeyDown;\n\n    var editorProps = {\n      value: content,\n      readOnly: readOnly,\n      onChange: this.onChange.bind(this),\n      placeholder: placeholder,\n      style: style\n    };\n    var contentProps = {\n      key: key,\n      readOnly: readOnly,\n      ref: this.rootRef(saveRef(key)),\n      onMouseDown: onMouseDown,\n      onMouseMove: onMouseMove,\n      onKeyDown: onKeyDown\n    };\n    return createElement(Content, _assign({}, contentProps), createElement(Editor, _assign({}, editorProps, {\n      autoFocus: true\n    })));\n  };\n\n  return SimpleTextEditor;\n}(PureComponent);\n\nvar templateObject_1;\nvar log$1 = debug('node:topic-content-editor');\n\nfunction contentEditorRefKey(key) {\n  return \"content-editor-\" + key;\n}\n\nvar TopicContentEditor =\n/** @class */\nfunction (_super) {\n  __extends(TopicContentEditor, _super);\n\n  function TopicContentEditor(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.onKeyDown = function (e) {\n      if (e.nativeEvent.ctrlKey && e.nativeEvent.code === 'Enter') {\n        _this.save();\n      }\n    };\n\n    return _this;\n  }\n\n  TopicContentEditor.prototype.getCustomizeProps = function () {\n    var _a = this.props,\n        model = _a.model,\n        topicKey = _a.topicKey,\n        readOnly = _a.readOnly;\n    var block = model.getTopic(topicKey).getBlock(BlockType.CONTENT).block;\n    var getRefKeyFunc = contentEditorRefKey;\n    var style = {\n      whiteSpace: 'pre'\n    };\n    return {\n      block: block,\n      readOnly: readOnly,\n      getRefKeyFunc: getRefKeyFunc,\n      placeholder: 'new',\n      style: style\n    };\n  };\n\n  TopicContentEditor.prototype.onClickOutSide = function (e) {\n    log$1('onClickOutSide');\n    this.save();\n  };\n\n  TopicContentEditor.prototype.save = function () {\n    var _a = this.props,\n        model = _a.model,\n        topicKey = _a.topicKey;\n    var readOnly = model.editingContentKey !== topicKey;\n    if (readOnly) return;\n    var controller = this.props.controller;\n    controller.run('operation', _assign(_assign({}, this.props), {\n      opType: OpType.SET_TOPIC_BLOCK,\n      blockType: BlockType.CONTENT,\n      data: this.state.content,\n      focusMode: FocusMode.NORMAL\n    }));\n  };\n\n  return TopicContentEditor;\n}(SimpleTextEditor);\n\nvar log$2 = debug('node:topic-desc-editor');\n\nfunction descEditorRefKey(key) {\n  return \"desc-editor-\" + key;\n}\n\nvar TopicDescEditor =\n/** @class */\nfunction (_super) {\n  __extends(TopicDescEditor, _super);\n\n  function TopicDescEditor(props) {\n    var _this = _super.call(this, props) || this;\n\n    log$2('constructor');\n    return _this;\n  }\n\n  TopicDescEditor.prototype.initState = function () {\n    _super.prototype.initState.call(this);\n\n    var _a = this.props,\n        controller = _a.controller,\n        topicKey = _a.topicKey;\n    var key = \"topic-desc-data-\" + topicKey;\n    var value = this.state.content;\n    controller.run('setTempValue', {\n      key: key,\n      value: value\n    });\n  };\n\n  TopicDescEditor.prototype.getCustomizeProps = function () {\n    var _a = this.props,\n        model = _a.model,\n        topicKey = _a.topicKey;\n    var block = model.getTopic(topicKey).getBlock(BlockType.DESC).block;\n    var readOnly = model.editingDescKey !== topicKey;\n    var getRefKeyFunc = descEditorRefKey;\n    return {\n      block: block,\n      readOnly: readOnly,\n      getRefKeyFunc: getRefKeyFunc,\n      placeholder: 'write topic notes here'\n    };\n  };\n\n  TopicDescEditor.prototype.onChange = function (_a) {\n    var value = _a.value;\n    log$2('onChange');\n    var _b = this.props,\n        controller = _b.controller,\n        topicKey = _b.topicKey,\n        model = _b.model;\n    var readOnly = model.editingDescKey !== topicKey;\n    if (readOnly) return;\n    var key = \"topic-desc-data-\" + topicKey;\n    controller.run('setTempValue', {\n      key: key,\n      value: value\n    });\n    this.setState({\n      content: value\n    });\n  };\n\n  return TopicDescEditor;\n}(SimpleTextEditor);\n\nfunction SimpleTextEditorPlugin() {\n  return {\n    getTopicTitle: function getTopicTitle(props) {\n      var model = props.model,\n          controller = props.controller,\n          topicKey = props.topicKey,\n          maxLength = props.maxLength;\n      var topic = model.getTopic(topicKey);\n      var block = topic.getBlock(BlockType.CONTENT).block;\n      var text = controller.run('serializeBlockData', _assign(_assign({}, props), {\n        block: block\n      }));\n\n      if (maxLength != null) {\n        text = text.length > maxLength ? text.substr(0, maxLength) + '...' : text;\n      }\n\n      return text;\n    },\n    renderTopicContentEditor: function renderTopicContentEditor(props) {\n      return createElement(TopicContentEditor, _assign({}, props));\n    },\n    renderTopicDescEditor: function renderTopicDescEditor(props) {\n      return createElement(TopicDescEditor, _assign({}, props));\n    },\n    isBlockEmpty: function isBlockEmpty(props, next) {\n      var block = props.block,\n          controller = props.controller;\n\n      if (block.type === BlockType.CONTENT || block.type === BlockType.DESC) {\n        return block.data == null || controller.run('serializeBlockData', props) === '';\n      }\n\n      return next();\n    },\n    serializeBlockData: function serializeBlockData(props, next) {\n      var block = props.block;\n\n      if (block.type === BlockType.CONTENT || block.type === BlockType.DESC) {\n        return typeof block.data === 'string' ? block.data : plainSerializer.serialize(block.data);\n      }\n\n      return next();\n    }\n  };\n}\n\nexport default SimpleTextEditorPlugin;","import { PureComponent, createElement, Component, Fragment, useState } from 'react';\nimport ResizeObserver from 'resize-observer-polyfill';\nimport styled, { css, ThemeProvider } from 'styled-components';\nimport debug from 'debug';\nimport { Checkbox, Menu, MenuItem, Breadcrumbs, PopoverPosition, Breadcrumb, Tooltip, Hotkey, Hotkeys, HotkeysTarget, Dialog, Classes, ContextMenuTarget, PopoverInteractionKind, Popover, Position, Drawer, Tabs, Divider, Button, NumericInput, InputGroup, Tab, Alert } from '@blueprintjs/core';\nimport { FocusMode, OpType, DiagramLayoutType, ModelModifier, getRelationship, TopicRelationship, getAllSubTopicKeys, BlockType, TopicDirection, isThemeType, TopicVisualLevel, Controller } from '@blink-mind/core';\nimport '@blink-mind/icons';\nimport '@blueprintjs/core/lib/css/blueprint.css';\nimport memoizeOne from 'memoize-one';\nimport SimpleTextEditorPlugin from '@blink-mind/plugin-simple-text-editor';\nimport { Stack, List } from 'immutable';\nimport cx from 'classnames';\nimport { Select } from '@blueprintjs/select';\nimport { SketchPicker } from 'react-color';\nimport { merge, clone, isEqual } from 'lodash';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar _extendStatics = function extendStatics(d, b) {\n  _extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) {\n      if (b.hasOwnProperty(p)) d[p] = b[p];\n    }\n  };\n\n  return _extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  _extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar _assign = function __assign() {\n  _assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return _assign.apply(this, arguments);\n};\n\nfunction __rest(s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\n\nfunction __decorate(decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nfunction __values(o) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator],\n      i = 0;\n  if (m) return m.call(o);\n  return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n}\n\nfunction __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n}\n\nfunction __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++) {\n    ar = ar.concat(__read(arguments[i]));\n  }\n\n  return ar;\n}\n\nfunction __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n}\n\nvar BaseWidget =\n/** @class */\nfunction (_super) {\n  __extends(BaseWidget, _super);\n\n  function BaseWidget(props) {\n    return _super.call(this, props) || this;\n  }\n\n  BaseWidget.prototype.operation = function (opType, arg) {\n    this.props.controller.run('operation', _assign({\n      opType: opType\n    }, arg));\n  };\n\n  BaseWidget.prototype.run = function (name, arg) {\n    this.props.controller.run(name, arg);\n  };\n\n  Object.defineProperty(BaseWidget.prototype, \"topic\", {\n    get: function get() {\n      return this.props.model.getTopic(this.props.topicKey);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return BaseWidget;\n}(PureComponent);\n\nvar log = debug('node:drag-scroll-widget');\nvar DragScrollView = styled.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  position: relative;\\n  width: 100%;\\n  height: 100%;\\n  overflow: scroll;\\n\"], [\"\\n  position: relative;\\n  width: 100%;\\n  height: 100%;\\n  overflow: scroll;\\n\"])));\nvar DragScrollContent = styled.div(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  position: relative;\\n  width: max-content;\\n\"], [\"\\n  position: relative;\\n  width: max-content;\\n\"])));\n\nvar DragScrollWidget =\n/** @class */\nfunction (_super) {\n  __extends(DragScrollWidget, _super);\n\n  function DragScrollWidget(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.contentResizeCallback = function (entries, observer) {\n      if (_this.oldContentRect) {\n        var widgetStyle = {\n          width: _this.content.clientWidth + _this.viewBox.clientWidth * 2,\n          height: _this.content.clientHeight + _this.viewBox.clientHeight * 2\n        };\n        _this.bigView.style.width = widgetStyle.width + 'px';\n        _this.bigView.style.height = widgetStyle.height + 'px';\n      }\n\n      _this.oldContentRect = entries[0].contentRect;\n    };\n\n    _this.contentResizeObserver = new ResizeObserver(_this.contentResizeCallback);\n\n    _this.contentRef = function (ref) {\n      if (ref) {\n        _this.content = ref;\n\n        _this.contentResizeObserver.observe(_this.content);\n      }\n    };\n\n    _this.viewBoxRef = function (ref) {\n      if (ref) {\n        _this.viewBox = ref;\n\n        if (!_this.props.enableMouseWheel) {\n          log('addEventListener onwheel');\n\n          _this.viewBox.addEventListener('wheel', function (e) {\n            log('onwheel');\n            (e.ctrlKey || e.altKey) && e.preventDefault();\n          }, {\n            passive: false\n          });\n        }\n\n        _this.setViewBoxScroll(_this.viewBox.clientWidth, _this.viewBox.clientHeight);\n      }\n    };\n\n    _this.bigViewRef = function (ref) {\n      if (ref) {\n        _this.bigView = ref;\n      }\n    };\n\n    _this.setWidgetStyle = function () {\n      if (_this.content && _this.viewBox && _this.bigView) {\n        _this.bigView.style.width = (_this.content.clientWidth + _this.viewBox.clientWidth) * 2 + 'px';\n        _this.bigView.style.height = (_this.content.clientHeight + _this.viewBox.clientHeight) * 2 + 'px';\n        _this.content.style.left = _this.viewBox.clientWidth + 'px';\n        _this.content.style.top = _this.viewBox.clientHeight + 'px';\n      }\n    };\n\n    _this.setViewBoxScroll = function (left, top) {\n      log(\"setViewBoxScroll \" + left + \" \" + top);\n\n      if (_this.viewBox) {\n        _this.viewBox.scrollLeft = left;\n        _this.viewBox.scrollTop = top;\n      }\n    };\n\n    _this.setViewBoxScrollDelta = function (deltaLeft, deltaTop) {\n      log(\"setViewBoxScrollDelta \" + deltaLeft + \" \" + deltaTop);\n\n      if (_this.viewBox) {\n        _this.viewBox.scrollLeft += deltaLeft;\n        _this.viewBox.scrollTop += deltaTop;\n      }\n    };\n\n    _this.onMouseDown = function (e) {\n      // log('Drag Scroll onMouseDown');\n      // log(e.nativeEvent.target);\n      // mouseKey \n      // needKeyPressed ctrl\n      // canDragFunc\n      var _a = _this.props,\n          mouseKey = _a.mouseKey,\n          needKeyPressed = _a.needKeyPressed,\n          canDragFunc = _a.canDragFunc;\n      if (canDragFunc && !canDragFunc()) return;\n\n      if (e.button === 0 && mouseKey === 'left' || e.button === 2 && mouseKey === 'right') {\n        if (needKeyPressed) {\n          if (!e.ctrlKey) return;\n        }\n\n        _this._lastCoordX = _this.viewBox.scrollLeft + e.nativeEvent.clientX;\n        _this._lastCoordY = _this.viewBox.scrollTop + e.nativeEvent.clientY;\n        var ele = _this.viewBox;\n        ele.addEventListener('mousemove', _this.onMouseMove);\n        ele.addEventListener('mouseup', _this.onMouseUp);\n      }\n    };\n\n    _this.onMouseUp = function (e) {\n      var ele = _this.viewBox;\n      ele.removeEventListener('mousemove', _this.onMouseMove);\n      ele.removeEventListener('mouseup', _this.onMouseUp);\n    };\n\n    _this.onMouseMove = function (e) {\n      _this.viewBox.scrollLeft = _this._lastCoordX - e.clientX;\n      _this.viewBox.scrollTop = _this._lastCoordY - e.clientY; // log(`onMouseMove ${this.viewBox.scrollLeft} ${this.viewBox.scrollTop}`);\n    };\n\n    _this.handleContextMenu = function (e) {\n      e.preventDefault();\n    };\n\n    _this.state = {\n      widgetStyle: {\n        width: '10000px',\n        height: '10000px'\n      }\n    };\n    return _this;\n  }\n\n  DragScrollWidget.prototype.componentDidMount = function () {\n    this.setWidgetStyle();\n    document.addEventListener('contextmenu', this.handleContextMenu);\n  };\n\n  DragScrollWidget.prototype.componentWillUnmount = function () {\n    document.removeEventListener('contextmenu', this.handleContextMenu);\n  };\n\n  DragScrollWidget.prototype.setZoomFactor = function (zoomFactor) {\n    this.bigView.style.transform = \"scale(\" + zoomFactor + \")\";\n    this.bigView.style.transformOrigin = '50% 50%';\n  };\n\n  DragScrollWidget.prototype.render = function () {\n    var style = _assign({}, this.state.widgetStyle // zoom:this.props.zoomFactor,\n    // transform: `scale(${this.props.zoomFactor})`,\n    // transformOrigin: '50% 50%'\n    );\n\n    return createElement(DragScrollView, {\n      ref: this.viewBoxRef,\n      onMouseDown: this.onMouseDown\n    }, createElement(\"div\", {\n      style: style,\n      ref: this.bigViewRef\n    }, createElement(DragScrollContent, {\n      ref: this.contentRef,\n      style: this.state.contentStyle\n    }, this.props.children(this.setViewBoxScroll, this.setViewBoxScrollDelta))));\n  };\n\n  DragScrollWidget.defaultProps = {\n    mouseKey: 'left',\n    needKeyPressed: false\n  };\n  return DragScrollWidget;\n}(Component);\n\nvar templateObject_1, templateObject_2;\nvar log$1 = debug('node:save-ref'); //TODO ,topic\n\nvar SaveRef =\n/** @class */\nfunction (_super) {\n  __extends(SaveRef, _super);\n\n  function SaveRef() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.getRef = function (name) {\n      log$1(_this);\n      return _this[name];\n    };\n\n    _this.saveRef = function (name) {\n      return function (node) {\n        if (node) {\n          _this[name] = node;\n\n          _this.fireListener(name, node);\n        }\n      };\n    };\n\n    _this.deleteRef = function (name) {\n      log$1('deleteRef:', name);\n      delete _this[name];\n    };\n\n    _this.observers = new Map();\n\n    _this.fireListener = function (name, ref) {\n      var e_1, _a;\n\n      if (_this.observers.has(name)) {\n        var listeners = _this.observers.get(name);\n\n        try {\n          for (var listeners_1 = __values(listeners), listeners_1_1 = listeners_1.next(); !listeners_1_1.done; listeners_1_1 = listeners_1.next()) {\n            var listener = listeners_1_1.value;\n            listener(name, ref);\n          }\n        } catch (e_1_1) {\n          e_1 = {\n            error: e_1_1\n          };\n        } finally {\n          try {\n            if (listeners_1_1 && !listeners_1_1.done && (_a = listeners_1.return)) _a.call(listeners_1);\n          } finally {\n            if (e_1) throw e_1.error;\n          }\n        }\n      }\n    };\n\n    _this.registerRefListener = function (name, listener) {\n      if (!_this.observers.has(name)) {\n        _this.observers.set(name, [listener]);\n      } else {\n        _this.observers.get(name).push(listener);\n      }\n    };\n\n    return _this;\n  }\n\n  SaveRef.prototype.render = function () {\n    return this.props.children(this.saveRef, this.getRef, this.deleteRef, this.registerRefListener.bind(this));\n  };\n\n  return SaveRef;\n}(Component);\n\nvar Flex = styled.div(templateObject_1$1 || (templateObject_1$1 = __makeTemplateObject([\"\\n  display: flex;\\n  flex-direction: \", \";\\n  align-items: \", \";\\n  justify-content: \", \";\\n\"], [\"\\n  display: flex;\\n  flex-direction: \", \";\\n  align-items: \", \";\\n  justify-content: \", \";\\n\"])), function (props) {\n  return props.flexDirection ? props.flexDirection : 'row';\n}, function (props) {\n  return props.alignItems;\n}, function (props) {\n  return props.justifyContent;\n});\nvar Margin = styled.div(templateObject_2$1 || (templateObject_2$1 = __makeTemplateObject([\"\\n  margin: \", \";\\n\"], [\"\\n  margin: \", \";\\n\"])), function (props) {\n  return props.margin;\n});\nvar ShowMenuIcon = styled.a(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  font-size: 20px !important;\\n\"], [\"\\n  font-size: 20px !important;\\n\"])));\nvar IconBg = styled.div(templateObject_4 || (templateObject_4 = __makeTemplateObject([\"\\n  padding: 5px;\\n  cursor: pointer;\\n\"], [\"\\n  padding: 5px;\\n  cursor: pointer;\\n\"])));\nvar Btn = styled.div(templateObject_5 || (templateObject_5 = __makeTemplateObject([\"\\n  cursor: pointer;\\n  &:hover {\\n    color: #1ea7fd;\\n  }\\n\"], [\"\\n  cursor: pointer;\\n  &:hover {\\n    color: #1ea7fd;\\n  }\\n\"])));\nvar StyledCheckbox = styled(Checkbox)(templateObject_6 || (templateObject_6 = __makeTemplateObject([\"\\n  margin-bottom: 0px !important;\\n\"], [\"\\n  margin-bottom: 0px !important;\\n\"])));\nvar CloseIcon = styled(Btn)(templateObject_7 || (templateObject_7 = __makeTemplateObject([\"\\n  position: absolute;\\n  right: 5px;\\n  top: 5px;\\n  //padding: 5px;\\n\"], [\"\\n  position: absolute;\\n  right: 5px;\\n  top: 5px;\\n  //padding: 5px;\\n\"])));\nvar Title = styled.div(templateObject_8 || (templateObject_8 = __makeTemplateObject([\"\\n  height: 16px;\\n\"], [\"\\n  height: 16px;\\n\"])));\nvar TopicBlockIcon = styled.span(templateObject_9 || (templateObject_9 = __makeTemplateObject([\"\\n  margin: 0px 10px;\\n  &:hover {\\n    color: palevioletred;\\n  }\\n\"], [\"\\n  margin: 0px 10px;\\n  &:hover {\\n    color: palevioletred;\\n  }\\n\"])));\nvar ZIndex = styled.div(templateObject_10 || (templateObject_10 = __makeTemplateObject([\"\\n  z-index: \", \";\\n\"], [\"\\n  z-index: \", \";\\n\"])), function (props) {\n  return props.zIndex;\n});\nvar PanelTabRoot = styled.div(templateObject_11 || (templateObject_11 = __makeTemplateObject([\"\\n  min-width: 360px;\\n  max-height: 470px;\\n  overflow: auto;\\n\"], [\"\\n  min-width: 360px;\\n  max-height: 470px;\\n  overflow: auto;\\n\"])));\nvar templateObject_1$1, templateObject_2$1, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8, templateObject_9, templateObject_10, templateObject_11;\nvar log$2 = debug('plugin:event');\n\nfunction EventPlugin() {\n  var eventListeners = {};\n  return {\n    handleTopicClick: function handleTopicClick(props) {\n      log$2('handleTopicClick');\n      var controller = props.controller,\n          model = props.model,\n          topicKey = props.topicKey;\n      log$2(model.zoomFactor); //TODO\n\n      if (model.editingDescKey !== null) return;\n      if (model.editingContentKey === topicKey) return;\n      if (model.focusKey === topicKey && model.focusMode === FocusMode.EDITING_CONTENT) return;\n      controller.run('operation', _assign(_assign({}, props), {\n        opType: OpType.FOCUS_TOPIC,\n        focusMode: FocusMode.NORMAL\n      }));\n    },\n    handleTopicDoubleClick: function handleTopicDoubleClick(props) {\n      var controller = props.controller,\n          model = props.model;\n      if (model.editingDescKey !== null) return;\n      controller.run('operation', _assign(_assign({}, props), {\n        opType: OpType.FOCUS_TOPIC,\n        focusMode: FocusMode.EDITING_CONTENT\n      }));\n    },\n    handleTopicContextMenu: function handleTopicContextMenu(props) {\n      var controller = props.controller;\n      controller.run('operation', _assign(_assign({}, props), {\n        opType: OpType.FOCUS_TOPIC,\n        focusMode: FocusMode.SHOW_POPUP\n      }));\n    },\n    handleActiveModalClose: function handleActiveModalClose(props) {\n      var controller = props.controller;\n      var activeModalProps = controller.run('getActiveModalProps', props);\n      if (activeModalProps == null) return null;\n\n      if (activeModalProps.name === 'edit-desc') {\n        return function () {\n          controller.run('operation', _assign(_assign({}, props), {\n            focusMode: FocusMode.NORMAL,\n            opType: OpType.FOCUS_TOPIC\n          }));\n        };\n      }\n    },\n    addEventListener: function addEventListener(props) {\n      var key = props.key,\n          listener = props.listener,\n          once = props.once,\n          controller = props.controller;\n      if (!eventListeners[key]) eventListeners[key] = [];\n\n      if (once) {\n        only.origin = listener;\n        eventListeners[key].push(only);\n      } else {\n        eventListeners[key].push(listener);\n      }\n\n      function only() {\n        listener();\n        controller.run('removeEventListener', {\n          key: key,\n          listener: listener\n        });\n      }\n    },\n    removeEventListener: function removeEventListener(props) {\n      var key = props.key,\n          listener = props.listener;\n\n      if (eventListeners[key]) {\n        eventListeners[key] = eventListeners[key].filter(function (fn) {\n          return fn !== listener && fn.origin !== listener;\n        });\n      }\n    },\n    fireEvent: function fireEvent(props) {\n      var key = props.key;\n\n      if (eventListeners[key]) {\n        eventListeners[key].forEach(function (fn) {\n          return fn();\n        });\n      }\n    }\n  };\n}\n\nvar IconName = {\n  SHOW_MENU: 'show-menu',\n  CLOSE: 'close',\n  COLOR_PICKER: 'color-picker',\n  NOTES: 'notes',\n  PLUS: 'plus',\n  MINUS: 'minus',\n  COLLAPSE_ALL: 'collapse',\n  EXPAND_ALL: 'expand',\n  CENTER: 'center',\n  TRASH: 'trash',\n  SEARCH: 'search',\n  THEME: 'theme',\n  EXPORT: 'export',\n  OPEN_FILE: 'openfile'\n};\n\nfunction iconClassName(name) {\n  return \"icon iconfont bm-\" + name;\n}\n\nfunction Icon(iconName) {\n  return createElement(\"span\", {\n    className: iconClassName(iconName)\n  });\n}\n\nfunction contentRefKey(key) {\n  return \"content-\" + key;\n}\n\nfunction contentEditorRefKey(key) {\n  return \"content-editor-\" + key;\n}\n\nfunction descEditorRefKey(key) {\n  return \"desc-editor-\" + key;\n}\n\nfunction topicWidgetRefKey(key) {\n  return \"topic-widget-\" + key;\n}\n\nfunction topicRefKey(key) {\n  return \"topic-\" + key;\n}\n\nfunction linksRefKey(key) {\n  return \"links-\" + key;\n}\n\nfunction linksSvgRefKey(key) {\n  return \"links-svg-\" + key;\n}\n\nfunction collapseRefKey(key) {\n  return \"collapse-\" + key;\n}\n\nfunction dropAreaRefKey(key, dir) {\n  return \"dropArea-\" + dir + \"-\" + key;\n}\n\nvar RefKey = {\n  DIAGRAM_ROOT_KEY: 'DIAGRAM-ROOT',\n  DRAG_SCROLL_WIDGET_KEY: 'DragScrollWidget',\n  SVG_HIGHLIGHT_KEY: 'svg-highlight',\n  FOCUS_HIGHLIGHT_KEY: 'focus-highlight',\n  DROP_EFFECT_KEY: 'drop-effect'\n};\nvar EventKey = {\n  CENTER_ROOT_TOPIC: 'CENTER_ROOT_TOPIC'\n};\nvar PropKey = {\n  DIAGRAM_CUSTOMIZE_BASE_Z_INDEX: 'DIAGRAM_CUSTOMIZE_BASE_Z_INDEX',\n  TOPIC_CONTEXT_MENU_ENABLED: 'TOPIC_CONTEXT_MENU_ENABLED',\n  TOPIC_TITLE: 'TOPIC_TITLE'\n};\n\nvar cancelEvent = function cancelEvent(e) {\n  e.stopPropagation();\n};\n\nfunction browserDownloadFile(url, filename) {\n  var link = document.createElement('a');\n  link.href = url;\n  link.download = filename;\n  link.click();\n}\n\nfunction browserDownloadText(text, filename) {\n  var url = \"data:text/plain,\" + encodeURIComponent(text);\n  browserDownloadFile(url, filename);\n}\n\nfunction browserOpenFile(accept) {\n  var input = document.createElement('input');\n  input.type = 'file';\n  input.accept = accept;\n  return new Promise(function (resolve, reject) {\n    input.addEventListener('change', function (evt) {\n      //@ts-ignore\n      var file = evt.target.files[0];\n      var fr = new FileReader();\n\n      fr.onload = function (evt) {\n        var txt = evt.target.result; //@ts-ignore\n\n        resolve(txt);\n      };\n\n      fr.onerror = function (evt) {\n        reject(evt.target.error);\n      };\n\n      fr.readAsText(file);\n    });\n    input.click();\n  });\n}\n\nfunction paddingCss(arg) {\n  var _a = arg.top,\n      top = _a === void 0 ? 0 : _a,\n      _b = arg.right,\n      right = _b === void 0 ? 0 : _b,\n      _c = arg.bottom,\n      bottom = _c === void 0 ? 0 : _c,\n      _d = arg.left,\n      left = _d === void 0 ? 0 : _d;\n  return top + \"px \" + right + \"px \" + bottom + \"px \" + left + \"px\";\n}\n\nfunction getLinkKey(fromKey, toKey) {\n  return \"link-\" + fromKey + \"-\" + toKey;\n}\n\nfunction centerY(rect) {\n  return (rect.top + rect.bottom) / 2;\n}\n\nfunction centerX(rect) {\n  return (rect.left + rect.right) / 2;\n}\n\nfunction centerPointX(p1, p2) {\n  return (p1.x + p2.x) / 2;\n}\n\nfunction centerPointY(p1, p2) {\n  return (p1.y + p2.y) / 2;\n}\n\nfunction center(rect) {\n  return [(rect.left + rect.right) / 2, (rect.top + rect.bottom) / 2];\n}\n\nfunction _getRelativeRect(el, rel, scale) {\n  if (scale === void 0) {\n    scale = 1;\n  }\n\n  var rect = el.getBoundingClientRect();\n  var relRect = rel.getBoundingClientRect();\n  var relCenter = center(relRect);\n  var elCenter = center(rect);\n  elCenter[0] = (elCenter[0] - relCenter[0]) / scale;\n  elCenter[1] = (elCenter[1] - relCenter[1]) / scale;\n  var width = rect.width / scale;\n  var height = rect.height / scale;\n  return {\n    left: elCenter[0] - width / 2,\n    right: elCenter[0] + width / 2,\n    top: elCenter[1] - height / 2,\n    bottom: elCenter[1] + height / 2,\n    width: width,\n    height: height\n  };\n}\n\nfunction getRelativeVector(el, rel) {\n  var rect = el.getBoundingClientRect();\n  var relRect = rel.getBoundingClientRect();\n  var relCenter = center(relRect);\n  var elCenter = center(rect);\n  return [elCenter[0] - relCenter[0], elCenter[1] - relCenter[1]];\n}\n\nfunction GetValuePlugin() {\n  return {\n    getValue: function getValue(props, next) {\n      var propKey = props.propKey,\n          controller = props.controller;\n\n      switch (propKey) {\n        case PropKey.DIAGRAM_CUSTOMIZE_BASE_Z_INDEX:\n          return 3;\n\n        case PropKey.TOPIC_CONTEXT_MENU_ENABLED:\n          return controller.run('isOperationEnabled', props);\n\n        case PropKey.TOPIC_TITLE:\n          return controller.run('getTopicTitle', props);\n      }\n\n      return next();\n    }\n  };\n}\n\nvar HotKeyName = {\n  ADD_CHILD: 'ADD_CHILD',\n  ADD_SIBLING: 'ADD_SIBLING',\n  DELETE_TOPIC: 'DELETE_TOPIC',\n  EDIT_CONTENT: 'EDIT_CONTENT',\n  EDIT_NOTES: 'EDIT_NOTES',\n  SET_EDITOR_ROOT: 'SET_EDITOR_ROOT'\n};\n\nfunction op(opType, props) {\n  var topicKey = props.topicKey,\n      model = props.model,\n      controller = props.controller;\n\n  if (topicKey === undefined) {\n    props = _assign(_assign({}, props), {\n      topicKey: model.focusKey\n    });\n  }\n\n  controller.run('operation', _assign(_assign({}, props), {\n    opType: opType\n  }));\n}\n\nfunction HotKeyPlugin() {\n  return {\n    customizeHotKeys: function customizeHotKeys(props) {\n      var handleKeyDown = function handleKeyDown(opType) {\n        return function (e) {\n          // log('HotKeyPlugin', opType);\n          op(opType, props);\n        };\n      };\n\n      var topicHotKeys = new Map([[HotKeyName.ADD_CHILD, {\n        label: 'add child',\n        combo: 'tab',\n        onKeyDown: handleKeyDown(OpType.ADD_CHILD)\n      }], [HotKeyName.ADD_SIBLING, {\n        label: 'add sibling',\n        combo: 'enter',\n        onKeyDown: handleKeyDown(OpType.ADD_SIBLING)\n      }], [HotKeyName.DELETE_TOPIC, {\n        label: 'delete topic',\n        combo: 'del',\n        onKeyDown: handleKeyDown(OpType.DELETE_TOPIC)\n      }], [HotKeyName.EDIT_CONTENT, {\n        label: 'edit content',\n        combo: 'space',\n        onKeyDown: handleKeyDown(OpType.START_EDITING_CONTENT)\n      }], [HotKeyName.EDIT_NOTES, {\n        label: 'edit notes',\n        combo: 'alt + d',\n        onKeyDown: handleKeyDown(OpType.START_EDITING_DESC)\n      }], [HotKeyName.SET_EDITOR_ROOT, {\n        label: 'set editor root',\n        combo: 'alt + shift + f',\n        onKeyDown: handleKeyDown(OpType.SET_EDITOR_ROOT)\n      }]]);\n      var globalHotKeys = new Map();\n      return {\n        topicHotKeys: topicHotKeys,\n        globalHotKeys: globalHotKeys\n      };\n    }\n  };\n}\n\nfunction LayoutPlugin() {\n  var _zoomFactor = 1;\n  return {\n    getPartTopics: function getPartTopics(_a) {\n      var layout = _a.layout,\n          model = _a.model,\n          topicKey = _a.topicKey;\n      var topic = model.getTopic(topicKey);\n      var subTopicCount = topic.subKeys.size;\n      var topics = topic.subKeys.toArray();\n\n      switch (layout) {\n        case DiagramLayoutType.LEFT_TO_RIGHT:\n          return {\n            R: topics\n          };\n\n        case DiagramLayoutType.RIGHT_TO_LEFT:\n          return {\n            L: topics\n          };\n\n        case DiagramLayoutType.LEFT_AND_RIGHT:\n          return {\n            L: topics.slice(Math.ceil(subTopicCount / 2), subTopicCount),\n            R: topics.slice(0, Math.ceil(subTopicCount / 2))\n          };\n\n        case DiagramLayoutType.TOP_TO_BOTTOM:\n          return {\n            B: topics\n          };\n      }\n    },\n    createSubTopics: function createSubTopics(props) {\n      var model = props.model,\n          topicKey = props.topicKey,\n          controller = props.controller,\n          topics = props.topics,\n          saveRef = props.saveRef;\n      var topic = model.getTopic(topicKey);\n      if (topics.size === 0 || topic.collapse) return null;\n      var subTopics = [];\n      topics.forEach(function (tKey) {\n        var topicProps = _assign(_assign({}, props), {\n          topicKey: tKey,\n          key: tKey,\n          ref: saveRef(topicWidgetRefKey(tKey))\n        });\n\n        subTopics.push(controller.run('renderTopicWidget', topicProps));\n      });\n      return {\n        subTopics: subTopics\n      };\n    },\n    layout: function layout(props) {\n      var getRef = props.getRef,\n          model = props.model;\n      var links = getRef(linksRefKey(model.editorRootTopicKey));\n      var highlight = getRef(RefKey.FOCUS_HIGHLIGHT_KEY);\n      var dropEffect = getRef(RefKey.DROP_EFFECT_KEY);\n      links && links.layout();\n      highlight && highlight.layout();\n      dropEffect && dropEffect.layout();\n      var editorRootTopic = model.getTopic(model.editorRootTopicKey);\n      layoutTopic(editorRootTopic);\n\n      function layoutTopic(topic) {\n        var e_1, _a;\n\n        if (topic.key !== model.editorRootTopicKey) {\n          var topicWidget = getRef(topicWidgetRefKey(topic.key));\n          topicWidget && topicWidget.layoutLinks();\n        }\n\n        if (!topic.collapse) {\n          try {\n            for (var _b = __values(topic.subKeys), _c = _b.next(); !_c.done; _c = _b.next()) {\n              var subKey = _c.value;\n              layoutTopic(model.getTopic(subKey));\n            }\n          } catch (e_1_1) {\n            e_1 = {\n              error: e_1_1\n            };\n          } finally {\n            try {\n              if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            } finally {\n              if (e_1) throw e_1.error;\n            }\n          }\n        }\n      }\n    },\n    setLayoutDir: function setLayoutDir(props) {\n      var layoutDir = props.layoutDir,\n          model = props.model,\n          controller = props.controller;\n      controller.change(ModelModifier.setLayoutDir({\n        model: model,\n        layoutDir: layoutDir\n      }));\n    },\n    getRelativeRect: function getRelativeRect(props) {\n      var element = props.element,\n          controller = props.controller,\n          getRef = props.getRef;\n      var zoomFactor = controller.run('getZoomFactor', props);\n      var bigView = getRef(RefKey.DRAG_SCROLL_WIDGET_KEY).bigView;\n      return _getRelativeRect(element, bigView, zoomFactor);\n    },\n    getRelativeRectFromViewPort: function getRelativeRectFromViewPort(props) {\n      var element = props.element,\n          controller = props.controller,\n          getRef = props.getRef;\n      var zoomFactor = controller.run('getZoomFactor', props);\n      var viewBox = getRef(RefKey.DRAG_SCROLL_WIDGET_KEY).viewBox;\n      return _getRelativeRect(element, viewBox, zoomFactor);\n    },\n    getRelativeVectorFromViewPort: function getRelativeVectorFromViewPort(props) {\n      var element = props.element,\n          getRef = props.getRef;\n      var viewBox = getRef(RefKey.DRAG_SCROLL_WIDGET_KEY).viewBox;\n      return getRelativeVector(element, viewBox);\n    },\n    addZoomFactorChangeEventListener: function addZoomFactorChangeEventListener(props) {\n      var controller = props.controller;\n      controller.run('addTempValueChangeListener', _assign({\n        key: 'ZoomFactor'\n      }, props));\n    },\n    removeZoomFactorChangeEventListener: function removeZoomFactorChangeEventListener(props) {\n      var controller = props.controller;\n      controller.run('removeTempValueChangeListener', _assign({\n        key: 'ZoomFactor'\n      }, props));\n    },\n    setZoomFactor: function setZoomFactor(props) {\n      var controller = props.controller,\n          zoomFactor = props.zoomFactor;\n      return controller.run('setTempValue', {\n        key: 'ZoomFactor',\n        value: zoomFactor\n      });\n    },\n    getZoomFactor: function getZoomFactor(props) {\n      var controller = props.controller;\n      return controller.run('getTempValue', {\n        key: 'ZoomFactor'\n      }) || _zoomFactor;\n    },\n    moveTopicToCenter: function moveTopicToCenter(props) {\n      var getRef = props.getRef,\n          topicKey = props.topicKey,\n          model = props.model;\n\n      if (model.editorRootTopicKey !== topicKey && getRelationship(model, topicKey, model.editorRootTopicKey) !== TopicRelationship.DESCENDANT) {\n        throw new Error(\"moveTopicToCenter error: topicKey \" + topicKey + \" is not the DESCENDANT of editor root topic\");\n      }\n\n      var topic = getRef(topicRefKey(topicKey));\n      var dragScroll = getRef(RefKey.DRAG_SCROLL_WIDGET_KEY);\n      var viewBox = dragScroll.viewBox;\n\n      if (!topic || !viewBox) {\n        throw new Error(\"moveTopicToCenter error: topic or viewBox is null\");\n      }\n\n      var vector = getRelativeVector(topic, viewBox); //TODO\n\n      dragScroll.setViewBoxScrollDelta(vector[0], vector[1]);\n    },\n    focusTopicAndMoveToCenter: function focusTopicAndMoveToCenter(props) {\n      var controller = props.controller,\n          topicKey = props.topicKey;\n      controller.run('operation', _assign(_assign({}, props), {\n        opArray: [{\n          opType: OpType.FOCUS_TOPIC,\n          topicKey: topicKey,\n          focusMode: FocusMode.NORMAL\n        }, {\n          opType: OpType.EXPAND_TO,\n          topicKey: topicKey\n        }],\n        callback: function callback() {\n          controller.run('moveTopicToCenter', _assign(_assign({}, props), {\n            topicKey: topicKey\n          }));\n        }\n      }));\n    }\n  };\n}\n\nvar log$3 = debug('plugin:operation');\n\nfunction OperationPlugin() {\n  var startEditingContent = function startEditingContent(_a) {\n    var model = _a.model,\n        topicKey = _a.topicKey;\n    return ModelModifier.focusTopic({\n      model: model,\n      topicKey: topicKey,\n      focusMode: FocusMode.EDITING_CONTENT\n    });\n  };\n\n  var startEditingDesc = function startEditingDesc(_a) {\n    var model = _a.model,\n        topicKey = _a.topicKey;\n    var topic = model.getTopic(topicKey);\n    var desc = topic.getBlock(BlockType.DESC);\n\n    if (desc.block == null || desc.block.data == null) {\n      model = ModelModifier.setBlockData({\n        model: model,\n        topicKey: topicKey,\n        blockType: BlockType.DESC,\n        data: ''\n      });\n    }\n\n    model = ModelModifier.focusTopic({\n      model: model,\n      topicKey: topicKey,\n      focusMode: FocusMode.EDITING_DESC\n    });\n    return model;\n  };\n\n  function dragAndDrop(props) {\n    var srcKey = props.srcKey,\n        dstKey = props.dstKey,\n        dropDir = props.dropDir;\n    var model = props.model;\n    var srcTopic = model.getTopic(srcKey);\n    var dstTopic = model.getTopic(dstKey);\n    var srcParentKey = srcTopic.parentKey;\n    var srcParentTopic = model.getTopic(srcParentKey);\n    var srcParentSubKeys = srcParentTopic.subKeys;\n    var srcIndex = srcParentSubKeys.indexOf(srcKey);\n    srcParentSubKeys = srcParentSubKeys.delete(srcIndex);\n\n    if (dropDir === 'in') {\n      var dstSubKeys_1 = dstTopic.subKeys;\n      dstSubKeys_1 = dstSubKeys_1.push(srcKey);\n      model = model.withMutations(function (m) {\n        m.setIn(['topics', srcParentKey, 'subKeys'], srcParentSubKeys).setIn(['topics', srcKey, 'parentKey'], dstKey).setIn(['topics', dstKey, 'subKeys'], dstSubKeys_1).setIn(['topics', dstKey, 'collapse'], false);\n      });\n    } else {\n      var dstParentKey_1 = dstTopic.parentKey;\n      var dstParentItem = model.getTopic(dstParentKey_1);\n      var dstParentSubKeys_1 = dstParentItem.subKeys;\n      var dstIndex = dstParentSubKeys_1.indexOf(dstKey); //src  dst \n\n      if (srcParentKey === dstParentKey_1) {\n        var newDstParentSubKeys_1 = List();\n        dstParentSubKeys_1.forEach(function (key) {\n          if (key !== srcKey) {\n            if (key === dstKey) {\n              if (dropDir === 'prev') {\n                newDstParentSubKeys_1 = newDstParentSubKeys_1.push(srcKey).push(key);\n              } else {\n                newDstParentSubKeys_1 = newDstParentSubKeys_1.push(key).push(srcKey);\n              }\n            } else {\n              newDstParentSubKeys_1 = newDstParentSubKeys_1.push(key);\n            }\n          }\n        });\n        model = model.withMutations(function (m) {\n          m.setIn(['topics', dstParentKey_1, 'subKeys'], newDstParentSubKeys_1);\n        });\n      } else {\n        if (dropDir === 'prev') {\n          dstParentSubKeys_1 = dstParentSubKeys_1.insert(dstIndex, srcKey);\n        } else if (dropDir === 'next') {\n          dstParentSubKeys_1 = dstParentSubKeys_1.insert(dstIndex + 1, srcKey);\n        }\n\n        model = model.withMutations(function (m) {\n          m.setIn(['topics', srcParentKey, 'subKeys'], srcParentSubKeys).setIn(['topics', srcKey, 'parentKey'], dstParentKey_1).setIn(['topics', dstParentKey_1, 'subKeys'], dstParentSubKeys_1).setIn(['topics', dstParentKey_1, 'collapse'], false);\n        });\n      }\n    }\n\n    return model;\n  }\n\n  var OpMap = new Map([[OpType.TOGGLE_COLLAPSE, ModelModifier.toggleCollapse], [OpType.COLLAPSE_ALL, ModelModifier.collapseAll], [OpType.EXPAND_ALL, ModelModifier.expandAll], [OpType.EXPAND_TO, ModelModifier.expandTo], [OpType.ADD_CHILD, ModelModifier.addChild], [OpType.ADD_SIBLING, ModelModifier.addSibling], [OpType.DELETE_TOPIC, ModelModifier.deleteTopic], [OpType.FOCUS_TOPIC, ModelModifier.focusTopic], [OpType.SET_FOCUS_MODE, ModelModifier.setFocusMode], [OpType.SET_STYLE, ModelModifier.setStyle], [OpType.SET_THEME, ModelModifier.setTheme], [OpType.SET_TOPIC_BLOCK, ModelModifier.setBlockData], [OpType.DELETE_TOPIC_BLOCK, ModelModifier.deleteBlock], [OpType.START_EDITING_CONTENT, startEditingContent], [OpType.START_EDITING_DESC, startEditingDesc], [OpType.DRAG_AND_DROP, dragAndDrop], [OpType.SET_EDITOR_ROOT, ModelModifier.setEditorRootTopicKey]]);\n  var undoStack = Stack();\n  var redoStack = Stack();\n  var enabled = true;\n  var whiteListOperation = new Set();\n  return {\n    isOperationEnabled: function isOperationEnabled(props) {\n      return enabled;\n    },\n    enableOperation: function enableOperation() {\n      enabled = true;\n    },\n    disableOperation: function disableOperation(_a) {\n      var whiteList = _a.whiteList;\n      enabled = false;\n      if (whiteList) whiteListOperation = new Set(whiteList);else whiteListOperation.clear();\n    },\n\n    /** plugin can extend Operation Map\r\n     * for example: A plugin can write a function\r\n     * getOpMap(props,next) {\r\n     *   let opMap = next();\r\n     *   opMap.set(\"OpTypeName\",opFunc);\r\n     *   return opMap;\r\n     * }\r\n     * @param props\r\n     */\n    getOpMap: function getOpMap(props) {\n      return OpMap;\n    },\n    getAllowUndo: function getAllowUndo(props) {\n      var model = props.model,\n          opType = props.opType;\n\n      if (opType) {\n        switch (opType) {\n          case OpType.FOCUS_TOPIC:\n          case OpType.START_EDITING_CONTENT:\n          case OpType.START_EDITING_DESC:\n            return false;\n        }\n      }\n\n      switch (model.focusMode) {\n        case 'EDITING_DESC':\n        case 'EDITING_CONTENT':\n          return false;\n      }\n\n      return model.config.allowUndo;\n    },\n    getUndoRedoStack: function getUndoRedoStack() {\n      return {\n        undoStack: undoStack,\n        redoStack: redoStack\n      };\n    },\n    setUndoStack: function setUndoStack(props) {\n      log$3('setUndoStack', props.undoStack);\n      undoStack = props.undoStack;\n    },\n    setRedoStack: function setRedoStack(props) {\n      log$3('setRedoStack', props.redoStack);\n      redoStack = props.redoStack;\n    },\n    canUndo: function canUndo(props) {\n      var controller = props.controller;\n      var undoStack = controller.run('getUndoRedoStack', props).undoStack;\n      var allowUndo = controller.run('getAllowUndo', props);\n      return undoStack.size > 0 && allowUndo;\n    },\n    canRedo: function canRedo(props) {\n      var controller = props.controller;\n      var redoStack = controller.run('getUndoRedoStack', props).redoStack;\n      var allowUndo = controller.run('getAllowUndo', props);\n      return redoStack.size > 0 && allowUndo;\n    },\n    undo: function undo(props) {\n      var controller = props.controller,\n          model = props.model;\n\n      if (!controller.run('getAllowUndo', props)) {\n        return;\n      }\n\n      var _a = controller.run('getUndoRedoStack', props),\n          undoStack = _a.undoStack,\n          redoStack = _a.redoStack;\n\n      var newModel = undoStack.peek();\n      if (!newModel) return;\n      controller.run('setUndoStack', _assign(_assign({}, props), {\n        undoStack: undoStack.shift()\n      }));\n      controller.run('setRedoStack', _assign(_assign({}, props), {\n        redoStack: redoStack.push(model)\n      }));\n      log$3(newModel);\n      controller.change(newModel);\n    },\n    redo: function redo(props) {\n      var controller = props.controller,\n          model = props.model;\n\n      if (!controller.run('getAllowUndo', props)) {\n        return;\n      }\n\n      var _a = controller.run('getUndoRedoStack', props),\n          undoStack = _a.undoStack,\n          redoStack = _a.redoStack;\n\n      var newModel = redoStack.peek();\n      if (!newModel) return;\n      controller.run('setUndoStack', _assign(_assign({}, props), {\n        undoStack: undoStack.push(model)\n      }));\n      controller.run('setRedoStack', _assign(_assign({}, props), {\n        redoStack: redoStack.shift()\n      }));\n      controller.change(newModel);\n    },\n    //TODO \n    operation: function operation(props) {\n      var controller = props.controller,\n          opType = props.opType,\n          model = props.model,\n          opArray = props.opArray,\n          callback = props.callback;\n\n      if (opArray != null && !Array.isArray(opArray)) {\n        throw new Error('operation: the type of opArray must be array!');\n      }\n\n      if (opType != null && opArray != null) {\n        throw new Error('operation: opType and opArray conflict!');\n      }\n\n      var isOperationEnabled = controller.run('isOperationEnabled', props);\n\n      if (!isOperationEnabled) {\n        // warning(\n        //   true,\n        //   `You have disabled operation,but you run operation ${props} now!`\n        // );\n        if (whiteListOperation.size === 0) return;\n\n        if (opArray != null) {\n          var opNotInWhiteList = opArray.filter(function (op) {\n            return !whiteListOperation.has(op.opType);\n          });\n\n          if (opNotInWhiteList && opNotInWhiteList.length > 0) {\n            return;\n          }\n        } else if (!whiteListOperation.has(opType)) {\n          return;\n        }\n      }\n\n      log$3('operation:', opType);\n      log$3('operation:', model);\n      log$3('operation:', props);\n      var opMap = controller.run('getOpMap', props);\n      controller.run('beforeOperation', props);\n\n      if (controller.run('getAllowUndo', props)) {\n        var undoStack_1 = controller.run('getUndoRedoStack', props).undoStack;\n        controller.run('setUndoStack', _assign(_assign({}, props), {\n          undoStack: undoStack_1.push(model)\n        }));\n      }\n\n      var newModel;\n\n      if (opArray != null) {\n        newModel = opArray.reduce(function (acc, cur) {\n          var opType = cur.opType;\n          if (!opMap.has(opType)) throw new Error(\"opType:\" + opType + \" not exist!\");\n          var opFunc = opMap.get(opType);\n\n          var opFuncProps = _assign(_assign({\n            controller: controller\n          }, cur), {\n            model: acc\n          });\n\n          var res = controller.run('beforeOpFunction', opFuncProps);\n          res = opFunc(_assign(_assign({}, opFuncProps), {\n            model: res\n          }));\n          res = controller.run('afterOpFunction', _assign(_assign({}, opFuncProps), {\n            model: res\n          }));\n          return res;\n        }, model);\n      } else {\n        if (!opMap.has(opType)) throw new Error(\"opType:\" + opType + \" not exist!\");\n        var opFunc = opMap.get(opType);\n        newModel = controller.run('beforeOpFunction', props);\n        newModel = opFunc(_assign(_assign({}, props), {\n          model: newModel\n        }));\n        newModel = controller.run('afterOpFunction', _assign(_assign({}, props), {\n          model: newModel\n        }));\n      }\n\n      log$3('newModel:', newModel);\n      controller.change(newModel, callback);\n      controller.run('afterOperation', props);\n    },\n    deleteRefKey: function deleteRefKey(props) {\n      var e_1, _a;\n\n      var model = props.model,\n          topicKey = props.topicKey,\n          deleteRef = props.deleteRef;\n      var allSubKeys = getAllSubTopicKeys(model, topicKey);\n      allSubKeys.push(topicKey);\n\n      try {\n        for (var allSubKeys_1 = __values(allSubKeys), allSubKeys_1_1 = allSubKeys_1.next(); !allSubKeys_1_1.done; allSubKeys_1_1 = allSubKeys_1.next()) {\n          var key = allSubKeys_1_1.value;\n          deleteRef(linksRefKey(key));\n          deleteRef(linksSvgRefKey(key));\n          deleteRef(contentRefKey(key));\n          deleteRef(contentEditorRefKey(key));\n          deleteRef(descEditorRefKey(key));\n          deleteRef(topicWidgetRefKey(key));\n          deleteRef(topicRefKey(key));\n          deleteRef(collapseRefKey(key));\n          deleteRef(dropAreaRefKey(key, 'next'));\n          deleteRef(dropAreaRefKey(key, 'prev'));\n        }\n      } catch (e_1_1) {\n        e_1 = {\n          error: e_1_1\n        };\n      } finally {\n        try {\n          if (allSubKeys_1_1 && !allSubKeys_1_1.done && (_a = allSubKeys_1.return)) _a.call(allSubKeys_1);\n        } finally {\n          if (e_1) throw e_1.error;\n        }\n      }\n    },\n    // Operation\n    beforeOperation: function beforeOperation(props) {},\n    afterOperation: function afterOperation(props) {},\n    // OpFunction\n    beforeOpFunction: function beforeOpFunction(props) {\n      var controller = props.controller,\n          opType = props.opType,\n          model = props.model,\n          topicKey = props.topicKey;\n\n      if (opType === OpType.DELETE_TOPIC && topicKey !== model.editorRootTopicKey) {\n        controller.run('deleteRefKey', props);\n      }\n\n      return model;\n    },\n    afterOpFunction: function afterOpFunction(props) {\n      return props.model;\n    }\n  };\n}\n\nvar TopicContextMenu =\n/** @class */\nfunction (_super) {\n  __extends(TopicContextMenu, _super);\n\n  function TopicContextMenu() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  TopicContextMenu.prototype.render = function () {\n    var controller = this.props.controller;\n    return createElement(Menu, null, controller.run('customizeTopicContextMenu', this.props));\n  };\n\n  return TopicContextMenu;\n}(BaseWidget);\n\nvar items = [{\n  icon: 'edit',\n  label: 'edit',\n  shortcut: 'Space',\n  rootCanUse: true,\n  opType: OpType.START_EDITING_CONTENT\n}, {\n  icon: 'add-sibling',\n  label: 'add sibling',\n  shortcut: 'Enter',\n  opType: OpType.ADD_SIBLING\n}, {\n  icon: 'add-child',\n  label: 'add child',\n  shortcut: 'Tab',\n  rootCanUse: true,\n  opType: OpType.ADD_CHILD\n}, {\n  icon: 'notes',\n  label: 'edit notes',\n  shortcut: 'Alt + D',\n  rootCanUse: true,\n  opType: OpType.START_EDITING_DESC\n}, {\n  icon: 'delete-node',\n  label: 'delete node',\n  shortcut: 'Del',\n  opType: OpType.DELETE_TOPIC\n}, {\n  icon: 'root',\n  label: 'set as editor root',\n  shortcut: 'Alt + Shift + F',\n  opType: OpType.SET_EDITOR_ROOT\n}];\n\nfunction ContextMenuPlugin() {\n  return {\n    renderTopicContextMenu: function renderTopicContextMenu(props) {\n      return createElement(TopicContextMenu, _assign({}, props));\n    },\n    customizeTopicContextMenu: function customizeTopicContextMenu(props) {\n      var topicKey = props.topicKey,\n          model = props.model,\n          controller = props.controller;\n      var isRoot = topicKey === model.editorRootTopicKey;\n\n      function onClickItem(item) {\n        return function (e) {\n          item.opType && controller.run('operation', _assign(_assign({}, props), {\n            opType: item.opType\n          }));\n        };\n      }\n\n      return items.map(function (item) {\n        return isRoot && !item.rootCanUse ? null : createElement(MenuItem, {\n          key: item.label,\n          icon: Icon(item.icon),\n          text: item.label,\n          labelElement: createElement(\"kbd\", null, item.shortcut),\n          onClick: onClickItem(item)\n        });\n      });\n    }\n  };\n}\n\nvar log$4 = debug('node:topic-drop-effect');\nvar DropEffectSvg = styled.svg(templateObject_1$2 || (templateObject_1$2 = __makeTemplateObject([\"\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  z-index: 2;\\n  pointer-events: none;\\n\"], [\"\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  z-index: 2;\\n  pointer-events: none;\\n\"])));\n\nvar TopicDropEffect =\n/** @class */\nfunction (_super) {\n  __extends(TopicDropEffect, _super);\n\n  function TopicDropEffect() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      content: null\n    };\n    return _this;\n  }\n\n  TopicDropEffect.prototype.layout = function () {\n    var props = this.props;\n    var _a = this.props,\n        getRef = _a.getRef,\n        model = _a.model,\n        zoomFactor = _a.zoomFactor,\n        controller = _a.controller;\n    var targetProps = controller.run('getDragTargetProps', props);\n    var key = targetProps.key,\n        dropDir = targetProps.dropDir;\n    log$4('layout', dropDir);\n\n    if (key === null) {\n      this.setState({\n        content: null\n      });\n      return;\n    }\n\n    var refKey;\n\n    if (dropDir === 'in') {\n      refKey = contentRefKey(key);\n    } else {\n      refKey = dropAreaRefKey(key, dropDir);\n    }\n\n    var content = getRef(refKey);\n    var svg = getRef('svg-drop-effect');\n    var bigView = getRef(RefKey.DRAG_SCROLL_WIDGET_KEY).bigView;\n\n    var contentRect = _getRelativeRect(content, bigView, zoomFactor);\n\n    var svgRect = _getRelativeRect(svg, bigView, zoomFactor);\n\n    var padding = 3;\n    var x = contentRect.left - svgRect.left - padding;\n    var y = contentRect.top - svgRect.top - padding;\n    var width = contentRect.width + 2 * padding;\n    var height = contentRect.height + 2 * padding;\n    this.setState({\n      content: createElement(\"g\", null, createElement(\"rect\", {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        fill: \"none\",\n        stroke: model.config.theme.highlightColor,\n        strokeDasharray: \"5,5\",\n        strokeWidth: 2\n      }))\n    });\n  };\n\n  TopicDropEffect.prototype.render = function () {\n    var saveRef = this.props.saveRef;\n    return createElement(DropEffectSvg, {\n      ref: saveRef('svg-drop-effect')\n    }, this.state.content);\n  };\n\n  return TopicDropEffect;\n}(BaseWidget);\n\nvar templateObject_1$2;\nvar log$5 = debug('plugin:drag-and-drop');\nvar DropArea = styled.div(templateObject_1$3 || (templateObject_1$3 = __makeTemplateObject([\"\\n  height: \", \";\\n  width: 100%;\\n  margin: 5px 0px;\\n\"], [\"\\n  height: \", \";\\n  width: 100%;\\n  margin: 5px 0px;\\n\"])), function (props) {\n  return props.height + \"px\";\n});\n\nfunction DragAndDropPlugin() {\n  var dragTargetKey = null;\n  var dragTargetDir = null;\n  return {\n    renderTopicDropArea: function renderTopicDropArea(props) {\n      var topicKey = props.topicKey,\n          dropDir = props.dropDir,\n          saveRef = props.saveRef,\n          controller = props.controller,\n          model = props.model;\n\n      var onDragEnter = function onDragEnter(ev) {\n        log$5('onDragEnter', topicKey, dropDir);\n        controller.run('handleTopicDragEnter', _assign(_assign({}, props), {\n          ev: ev,\n          dropDir: dropDir\n        }));\n      };\n\n      var onDragLeave = function onDragLeave(ev) {\n        log$5('onDragLeave', topicKey, dropDir);\n        controller.run('handleTopicDragLeave', _assign(_assign({}, props), {\n          ev: ev,\n          dropDir: dropDir\n        }));\n      };\n\n      var onDragOver = function onDragOver(ev) {\n        ev.preventDefault();\n      };\n\n      var onDrop = function onDrop(ev) {\n        log$5('onDrop', topicKey, dropDir);\n        controller.run('handleTopicDrop', _assign(_assign({}, props), {\n          ev: ev,\n          dropDir: dropDir\n        }));\n      };\n\n      var eventHandlers = {\n        onDragEnter: onDragEnter,\n        onDragLeave: onDragLeave,\n        onDragOver: onDragOver,\n        onDrop: onDrop\n      };\n      return createElement(DropArea, _assign({\n        height: model.config.theme.marginV / 2,\n        ref: saveRef(dropAreaRefKey(topicKey, dropDir))\n      }, eventHandlers));\n    },\n    renderDragAndDropEffect: function renderDragAndDropEffect(props) {\n      log$5('renderDragAndDropEffect');\n      var saveRef = props.saveRef;\n      return createElement(TopicDropEffect, _assign({\n        ref: saveRef(RefKey.DROP_EFFECT_KEY)\n      }, props));\n    },\n    getDragTargetProps: function getDragTargetProps(props) {\n      return {\n        key: dragTargetKey,\n        dropDir: dragTargetDir\n      };\n    },\n    handleTopicDragStart: function handleTopicDragStart(props) {\n      var controller = props.controller,\n          ev = props.ev;\n      ev.stopPropagation();\n      controller.run('operation', _assign(_assign({}, props), {\n        opType: OpType.FOCUS_TOPIC,\n        focusMode: FocusMode.DRAGGING\n      }));\n    },\n    canDrop: function canDrop(props) {\n      var srcKey = props.srcKey,\n          dstKey = props.dstKey,\n          model = props.model,\n          dropDir = props.dropDir;\n      if (srcKey === model.editorRootTopicKey || srcKey === dstKey || getRelationship(model, srcKey, dstKey) === TopicRelationship.ANCESTOR) return false;\n      if (dstKey === model.editorRootTopicKey && dropDir !== 'in') return false;\n      var srcTopic = model.getTopic(srcKey);\n      if (srcTopic.parentKey === dstKey && dropDir === 'in') return false;\n      return true;\n    },\n    handleTopicDragEnter: function handleTopicDragEnter(props) {\n      var dropDir = props.dropDir,\n          topicKey = props.topicKey,\n          controller = props.controller,\n          model = props.model;\n      log$5('handleTopicDragEnter:', topicKey, dropDir);\n      var canDrop = controller.run('canDrop', _assign(_assign({}, props), {\n        srcKey: model.focusKey,\n        dstKey: topicKey\n      }));\n\n      if (canDrop) {\n        dragTargetKey = topicKey;\n        dragTargetDir = dropDir;\n        controller.change(model);\n      }\n    },\n    handleTopicDragLeave: function handleTopicDragLeave(props) {\n      var controller = props.controller,\n          model = props.model,\n          topicKey = props.topicKey,\n          dropDir = props.dropDir,\n          getRef = props.getRef,\n          ev = props.ev;\n      var relatedTarget = ev.nativeEvent.relatedTarget;\n      log$5('handleTopicDragLeave:', topicKey, dropDir);\n      var content = getRef(contentRefKey(topicKey));\n\n      if (content == relatedTarget || content.contains(relatedTarget)) {\n        return;\n      }\n\n      dragTargetKey = null;\n      dragTargetDir = null;\n      controller.change(model);\n    },\n    handleTopicDrop: function handleTopicDrop(props) {\n      log$5('handleTopicDrop');\n      var controller = props.controller,\n          topicKey = props.topicKey,\n          model = props.model;\n      props = _assign(_assign({}, props), {\n        srcKey: model.focusKey,\n        dstKey: topicKey\n      });\n      dragTargetKey = null;\n      dragTargetDir = null;\n\n      if (controller.run('canDrop', props)) {\n        controller.run('operation', _assign(_assign({}, props), {\n          opType: OpType.DRAG_AND_DROP\n        }));\n      }\n    }\n  };\n}\n\nvar templateObject_1$3;\nvar EditorRootBreadcrumbsRoot = styled(ZIndex)(templateObject_1$4 || (templateObject_1$4 = __makeTemplateObject([\"\\n  position: absolute;\\n  width: 20%;\\n  padding: 0 5px;\\n  background: white;\\n  left: 30px;\\n  top: 20px;\\n  border-radius: 2px;\\n\"], [\"\\n  position: absolute;\\n  width: 20%;\\n  padding: 0 5px;\\n  background: white;\\n  left: 30px;\\n  top: 20px;\\n  border-radius: 2px;\\n\"])));\nvar TooltipContent = styled.div(templateObject_2$2 || (templateObject_2$2 = __makeTemplateObject([\"\\n  max-width: 600px;\\n\"], [\"\\n  max-width: 600px;\\n\"])));\nvar BreadcrumbTitle = styled.span(templateObject_3$1 || (templateObject_3$1 = __makeTemplateObject([\"\"], [\"\"])));\n\nvar EditorRootBreadcrumbs =\n/** @class */\nfunction (_super) {\n  __extends(EditorRootBreadcrumbs, _super);\n\n  function EditorRootBreadcrumbs(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.setEditorRootTopicKey = function (topicKey) {\n      return function () {\n        var _a = _this.props,\n            model = _a.model,\n            controller = _a.controller;\n\n        if (model.editorRootTopicKey !== topicKey) {\n          controller.change(ModelModifier.setEditorRootTopicKey({\n            model: model,\n            topicKey: topicKey\n          }));\n        }\n      };\n    };\n\n    _this.breadcrumbRenderer = function (props) {\n      var text = props.text,\n          breadProps = __rest(props, [\"text\"]);\n\n      var needTooltip = text.length > 8;\n      var title = needTooltip ? text.substr(0, 8) + '...' : text; //TODO\n\n      var content = createElement(TooltipContent, null, text);\n      var tooltipProps = {\n        content: content,\n        position: PopoverPosition.BOTTOM_RIGHT\n      };\n      var breadcrumb = createElement(Breadcrumb, _assign({}, breadProps), createElement(BreadcrumbTitle, null, title));\n      return needTooltip ? createElement(Tooltip, _assign({}, tooltipProps), breadcrumb) : breadcrumb; // return (\n      //   <Breadcrumb {...breadProps}>\n      //     <BreadcrumbTitle>{title}</BreadcrumbTitle>\n      //   </Breadcrumb>\n      // );\n    };\n\n    _this.state = {\n      show: false\n    };\n    return _this;\n  }\n\n  EditorRootBreadcrumbs.prototype.render = function () {\n    var props = this.props;\n    var model = props.model,\n        controller = props.controller,\n        zIndex = props.zIndex;\n    var editingRootKey = model.editorRootTopicKey;\n    if (editingRootKey === model.rootTopicKey) return null;\n    var items = [];\n    var topic = model.getTopic(editingRootKey);\n\n    while (topic != null) {\n      var title = controller.getValue(PropKey.TOPIC_TITLE, _assign(_assign({}, props), {\n        topicKey: topic.key\n      }));\n      items.unshift({\n        text: title,\n        onClick: this.setEditorRootTopicKey(topic.key)\n      });\n      topic = model.getTopic(topic.parentKey);\n    }\n\n    var breadcrumbProps = {\n      items: items,\n      breadcrumbRenderer: this.breadcrumbRenderer\n    };\n    return createElement(EditorRootBreadcrumbsRoot, {\n      zIndex: zIndex\n    }, createElement(Breadcrumbs, _assign({}, breadcrumbProps)));\n  };\n\n  return EditorRootBreadcrumbs;\n}(BaseWidget);\n\nvar templateObject_1$4, templateObject_2$2, templateObject_3$1;\nvar NodeLayer = styled.div(templateObject_1$5 || (templateObject_1$5 = __makeTemplateObject([\"\\n  position: relative;\\n  display: flex;\\n  align-items: center;\\n  padding: 5px;\\n\"], [\"\\n  position: relative;\\n  display: flex;\\n  align-items: center;\\n  padding: 5px;\\n\"])));\nvar DIV = styled.div(templateObject_2$3 || (templateObject_2$3 = __makeTemplateObject([\"\\n  width: 100%;\\n  height: 100%;\\n  background: \", \";\\n\"], [\"\\n  width: 100%;\\n  height: 100%;\\n  background: \", \";\\n\"])), function (props) {\n  return props.theme.background;\n});\n\nvar MindDragScrollWidget =\n/** @class */\nfunction (_super) {\n  __extends(MindDragScrollWidget, _super);\n\n  function MindDragScrollWidget(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.setZoomFactor = function (zoomFactor) {\n      _this.dragScrollWidget.setZoomFactor(zoomFactor);\n    };\n\n    _this.onWheel = function (e) {\n      if (e.altKey || e.ctrlKey) {\n        var controller = _this.props.controller;\n        var zoomFactor = controller.run('getZoomFactor', _this.props);\n        zoomFactor = zoomFactor - (e.nativeEvent.deltaY > 0 ? 0.1 : -0.1);\n        if (zoomFactor < 0.5) zoomFactor = 0.5;\n        if (zoomFactor > 4) zoomFactor = 4; // console.log('zoomFactor=>', zoomFactor);\n\n        controller.run('setZoomFactor', _assign(_assign({}, _this.props), {\n          zoomFactor: zoomFactor\n        }));\n      }\n    };\n\n    return _this;\n  }\n\n  MindDragScrollWidget.prototype.renderHotkeys = function () {\n    var props = this.props;\n    var controller = props.controller,\n        model = props.model;\n    var hotKeys = controller.run('customizeHotKeys', props);\n    if (hotKeys === null) return null;\n\n    if (!(hotKeys.topicHotKeys instanceof Map && hotKeys.globalHotKeys instanceof Map)) {\n      throw new TypeError('topicHotKeys and globalHotKeys must be a Map');\n    }\n\n    var children = [];\n\n    if (model.focusMode === FocusMode.NORMAL || model.focusMode === FocusMode.SHOW_POPUP) {\n      hotKeys.topicHotKeys.forEach(function (v, k) {\n        children.push(createElement(Hotkey, _assign({\n          key: k\n        }, v, {\n          global: true\n        })));\n      });\n    }\n\n    hotKeys.globalHotKeys.forEach(function (v, k) {\n      children.push(createElement(Hotkey, _assign({\n        key: k\n      }, v, {\n        global: true\n      })));\n    });\n    return createElement(Hotkeys, null, children);\n  };\n\n  MindDragScrollWidget.prototype.componentDidMount = function () {\n    var _a = this.props,\n        getRef = _a.getRef,\n        model = _a.model,\n        controller = _a.controller;\n    controller.run('addZoomFactorChangeEventListener', _assign(_assign({}, this.props), {\n      listener: this.setZoomFactor\n    }));\n    var rootTopic = getRef(topicRefKey(model.editorRootTopicKey)); //TODO\n\n    var nodeLayer = getRef('node-layer');\n    var rootTopicRect = rootTopic.getBoundingClientRect();\n    var nodeLayerRect = nodeLayer.getBoundingClientRect();\n    this.dragScrollWidget.setViewBoxScrollDelta(0, rootTopicRect.top - nodeLayerRect.top - this.dragScrollWidget.viewBox.getBoundingClientRect().height / 2 + rootTopicRect.height);\n    this.layout();\n  };\n\n  MindDragScrollWidget.prototype.componentWillUnmount = function () {\n    var controller = this.props.controller;\n    controller.run('removeZoomFactorChangeEventListener', _assign(_assign({}, this.props), {\n      listener: this.setZoomFactor\n    }));\n  };\n\n  Object.defineProperty(MindDragScrollWidget.prototype, \"dragScrollWidget\", {\n    get: function get() {\n      return this.props.getRef(RefKey.DRAG_SCROLL_WIDGET_KEY);\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  MindDragScrollWidget.prototype.componentDidUpdate = function () {\n    var controller = this.props.controller;\n    controller.run('fireEvent', _assign(_assign({}, this.props), {\n      key: EventKey.CENTER_ROOT_TOPIC\n    }));\n    this.layout();\n  };\n\n  MindDragScrollWidget.prototype.layout = function () {\n    var controller = this.props.controller;\n    controller.run('layout', this.props);\n  };\n\n  MindDragScrollWidget.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.props,\n        saveRef = _a.saveRef,\n        model = _a.model,\n        controller = _a.controller;\n    var nodeKey = model.editorRootTopicKey;\n    return createElement(DIV, {\n      onWheel: this.onWheel\n    }, createElement(DragScrollWidget, _assign({}, this.state, {\n      enableMouseWheel: false,\n      zoomFactor: model.zoomFactor,\n      ref: saveRef(RefKey.DRAG_SCROLL_WIDGET_KEY)\n    }), function (setViewBoxScroll, setViewBoxScrollDelta) {\n      var rootWidgetProps = _assign(_assign({}, _this.props), {\n        topicKey: nodeKey,\n        setViewBoxScroll: setViewBoxScroll,\n        setViewBoxScrollDelta: setViewBoxScrollDelta\n      });\n\n      return createElement(NodeLayer, {\n        ref: saveRef('node-layer')\n      }, controller.run('renderRootWidget', rootWidgetProps));\n    }));\n  };\n\n  MindDragScrollWidget = __decorate([HotkeysTarget], MindDragScrollWidget);\n  return MindDragScrollWidget;\n}(Component);\n\nvar templateObject_1$5, templateObject_2$3;\n\nvar Modals =\n/** @class */\nfunction (_super) {\n  __extends(Modals, _super);\n\n  function Modals() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.handleClose = function () {\n      var controller = _this.props.controller;\n      var handleActiveModalClose = controller.run('handleActiveModalClose', _this.props);\n      handleActiveModalClose && handleActiveModalClose();\n    };\n\n    return _this;\n  }\n\n  Modals.prototype.render = function () {\n    var controller = this.props.controller;\n    var activeModal = controller.run('renderModal', this.props);\n    var activeModalProps = controller.run('getActiveModalProps', this.props);\n    return createElement(Dialog, {\n      onClose: this.handleClose,\n      isOpen: activeModal !== null,\n      autoFocus: true,\n      enforceFocus: true,\n      usePortal: true,\n      title: activeModalProps && activeModalProps.title,\n      style: activeModalProps && activeModalProps.style\n    }, createElement(\"div\", {\n      className: Classes.DIALOG_BODY,\n      style: {\n        minHeight: 0\n      }\n    }, activeModal));\n  };\n\n  return Modals;\n}(BaseWidget);\n\nvar RootLinksSvg = styled.svg(templateObject_1$6 || (templateObject_1$6 = __makeTemplateObject([\"\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  z-index: 1;\\n  pointer-events: none;\\n\"], [\"\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  z-index: 1;\\n  pointer-events: none;\\n\"])));\nvar log$6 = debug('node:root-sub-links');\n\nvar RootSubLinks =\n/** @class */\nfunction (_super) {\n  __extends(RootSubLinks, _super);\n\n  function RootSubLinks() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      curves: []\n    };\n    return _this;\n  }\n\n  RootSubLinks.prototype.layout = function () {\n    var props = this.props;\n    var model = props.model,\n        getRef = props.getRef,\n        topicKey = props.topicKey,\n        zoomFactor = props.zoomFactor,\n        controller = props.controller;\n    var topic = model.getTopic(topicKey);\n    var content = getRef(contentRefKey(topicKey));\n    var svg = getRef(linksSvgRefKey(topicKey));\n    var bigView = getRef(RefKey.DRAG_SCROLL_WIDGET_KEY).bigView;\n\n    var contentRect = _getRelativeRect(content, bigView, zoomFactor);\n\n    var svgRect = _getRelativeRect(svg, bigView, zoomFactor);\n\n    var p1, p2;\n    p1 = {\n      x: centerX(contentRect) - svgRect.left,\n      y: centerY(contentRect) - svgRect.top\n    };\n    var curves = [];\n    topic.subKeys.forEach(function (key) {\n      var linkStyle = controller.run('getLinkStyle', _assign(_assign({}, props), {\n        topicKey: key\n      }));\n      var lineType = linkStyle.lineType;\n      var subTopicContent = getRef(contentRefKey(key));\n\n      var rect = _getRelativeRect(subTopicContent, bigView, zoomFactor);\n\n      if (rect.left > contentRect.right) {\n        p2 = {\n          x: rect.left,\n          y: centerY(rect)\n        };\n      } else {\n        p2 = {\n          x: rect.right,\n          y: centerY(rect)\n        };\n      }\n\n      p2 = {\n        x: p2.x - svgRect.left,\n        y: p2.y - svgRect.top\n      };\n      var curve;\n\n      if (lineType === 'curve') {\n        curve = \"M \" + p1.x + \" \" + p1.y + \" C \" + p1.x + \" \" + centerPointY(p1, p2) + \" \" + centerPointX(p1, p2) + \" \" + p2.y + \" \" + p2.x + \" \" + p2.y;\n      } else if (lineType === 'line') {\n        curve = \"M \" + p1.x + \" \" + p1.y + \" L \" + p2.x + \" \" + p2.y;\n      } else if (lineType === 'round') {\n        var vDir = p2.y > p1.y ? 1 : -1;\n        var hDir = p2.x > p1.x ? 1 : -1;\n        var radius = linkStyle.lineRadius;\n\n        if (radius == null) {\n          throw new Error('link line type is round, but lineRadius is not provided!');\n        }\n\n        if (p2.y === p1.y) {\n          curve = \"M \" + p1.x + \" \" + p1.y + \" H \" + p2.x;\n        } else {\n          // 0  1 \n          curve = \"M \" + p1.x + \" \" + p1.y + \"  V \" + (p2.y - vDir * radius) + \" A \" + radius + \" \" + radius + \" 0 0 \" + (vDir * hDir === 1 ? 0 : 1) + \" \" + (p1.x + radius * hDir) + \" \" + p2.y + \" H \" + p2.x;\n        }\n      }\n\n      curves.push(createElement(\"path\", {\n        key: \"link-\" + key,\n        d: curve,\n        strokeWidth: linkStyle.lineWidth,\n        stroke: linkStyle.lineColor,\n        fill: \"none\"\n      }));\n    });\n    this.setState({\n      curves: curves\n    });\n  };\n\n  RootSubLinks.prototype.render = function () {\n    log$6('render');\n    var _a = this.props,\n        topicKey = _a.topicKey,\n        saveRef = _a.saveRef;\n    return createElement(RootLinksSvg, {\n      ref: saveRef(linksSvgRefKey(topicKey))\n    }, createElement(\"g\", null, this.state.curves));\n  };\n\n  return RootSubLinks;\n}(BaseWidget);\n\nvar templateObject_1$6;\nvar log$7 = debug('RootNode');\nvar LayerPart = styled.div(templateObject_1$7 || (templateObject_1$7 = __makeTemplateObject([\"\\n  display: flex;\\n  position: relative;\\n\\n  align-items: \", \";\\n  flex-direction: column;\\n\\n  padding: \", \";\\n\"], [\"\\n  display: flex;\\n  position: relative;\\n\\n  align-items: \", \";\\n  flex-direction: column;\\n\\n  padding: \", \";\\n\"])), function (props) {\n  //@ts-ignore\n  return props.topicDirection === TopicDirection.LEFT ? 'flex-end' : 'flex-start';\n}, function (props) {\n  //@ts-ignore\n  return props.topicDirection === TopicDirection.LEFT ? '15px 60px 15px 0px' : '15px 0px 15px 60px';\n});\nvar Topic = styled.div(templateObject_2$4 || (templateObject_2$4 = __makeTemplateObject([\"\\n  display: flex;\\n  position: relative;\\n  align-items: center;\\n  z-index: 3;\\n\"], [\"\\n  display: flex;\\n  position: relative;\\n  align-items: center;\\n  z-index: 3;\\n\"])));\n\nvar RootWidget =\n/** @class */\nfunction (_super) {\n  __extends(RootWidget, _super);\n\n  function RootWidget() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  RootWidget.prototype.renderPartTopics = function (topics, dir) {\n    var _a = this.props,\n        controller = _a.controller,\n        saveRef = _a.saveRef;\n    var res = controller.run('createSubTopics', _assign(_assign({}, this.props), {\n      dir: dir,\n      isRoot: true,\n      topics: topics\n    }));\n    if (!res) return null;\n    var subTopics = res.subTopics;\n    var cxName = \"bm-layer-\" + (dir === TopicDirection.LEFT ? 'left' : 'right');\n    return (//@ts-ignore\n      createElement(LayerPart, {\n        topicDirection: dir,\n        ref: saveRef(cxName)\n      }, subTopics)\n    );\n  };\n\n  RootWidget.prototype.render = function () {\n    log$7('render');\n    var props = this.props;\n    var model = props.model,\n        topicKey = props.topicKey,\n        saveRef = props.saveRef,\n        controller = props.controller;\n    var topicStyle = controller.run('getTopicContentStyle', props);\n    var config = model.config;\n    var topicContent = controller.run('renderTopicContent', _assign(_assign({}, props), {\n      topicStyle: topicStyle,\n      dir: TopicDirection.MAIN\n    }));\n    var partTopics = controller.run('getPartTopics', {\n      layout: config.layoutDir,\n      model: model,\n      topicKey: topicKey\n    });\n    var rootTopic = createElement(Topic, {\n      ref: saveRef(topicRefKey(topicKey))\n    }, topicContent);\n    var children = controller.run('renderRootWidgetOtherChildren', props);\n\n    switch (config.layoutDir) {\n      case DiagramLayoutType.LEFT_AND_RIGHT:\n        return createElement(Fragment, null, this.renderPartTopics(partTopics.L, 'L'), rootTopic, this.renderPartTopics(partTopics.R, 'R'), children);\n\n      case DiagramLayoutType.LEFT_TO_RIGHT:\n        return createElement(Fragment, null, rootTopic, this.renderPartTopics(partTopics.R, 'R'), children);\n\n      case DiagramLayoutType.RIGHT_TO_LEFT:\n        return createElement(Fragment, null, this.renderPartTopics(partTopics.L, 'L'), rootTopic, children);\n\n      case DiagramLayoutType.TOP_TO_BOTTOM:\n        return createElement(Fragment, null, rootTopic, this.renderPartTopics(partTopics.B, 'B'), children);\n    }\n\n    return null;\n  };\n\n  return RootWidget;\n}(Component);\n\nvar templateObject_1$7, templateObject_2$4;\nvar Icon$1 = styled.div(templateObject_3$2 || (templateObject_3$2 = __makeTemplateObject([\"\\n  position: absolute;\\n  top: calc(50% - 10px);\\n  \", \";\\n  border-radius: 50%;\\n  width: 20px;\\n  height: 20px;\\n  text-align: center;\\n  //@ts-ignore\\n  background: \", \";\\n  cursor: pointer;\\n  padding: 0;\\n  font-size: 14px;\\n  line-height: 20px;\\n  border: 0;\\n  z-index: 2;\\n\"], [\"\\n  position: absolute;\\n  top: calc(50% - 10px);\\n  \", \";\\n  border-radius: 50%;\\n  width: 20px;\\n  height: 20px;\\n  text-align: center;\\n  //@ts-ignore\\n  background: \", \";\\n  cursor: pointer;\\n  padding: 0;\\n  font-size: 14px;\\n  line-height: 20px;\\n  border: 0;\\n  z-index: 2;\\n\"])), function (_a) {\n  var dir = _a.dir;\n  if (dir === TopicDirection.RIGHT) return css(templateObject_1$8 || (templateObject_1$8 = __makeTemplateObject([\"\\n        right: -25px;\\n      \"], [\"\\n        right: -25px;\\n      \"])));\n  if (dir === TopicDirection.LEFT) return css(templateObject_2$5 || (templateObject_2$5 = __makeTemplateObject([\"\\n        left: -25px;\\n      \"], [\"\\n        left: -25px;\\n      \"])));\n}, function (props) {\n  return props.background;\n});\n\nfunction TopicCollapseIcon(props) {\n  var _a;\n\n  var model = props.model,\n      topicKey = props.topicKey,\n      topicStyle = props.topicStyle,\n      dir = props.dir,\n      saveRef = props.saveRef,\n      onClickCollapse = props.onClickCollapse;\n  var topic = model.getTopic(topicKey);\n  return topic.subKeys.size > 0 ? createElement(Icon$1, {\n    ref: saveRef(collapseRefKey(topicKey)),\n    onClick: onClickCollapse,\n    background: topicStyle.background,\n    dir: dir,\n    className: cx((_a = {\n      icon: true,\n      iconfont: true\n    }, _a[\"bm-\" + (topic.collapse ? 'plus' : 'minus')] = true, _a))\n  }) : null;\n}\n\nvar templateObject_1$8, templateObject_2$5, templateObject_3$2;\nvar log$8 = debug('node:topic-content2');\nvar EditingRoot = styled.div(templateObject_1$9 || (templateObject_1$9 = __makeTemplateObject([\"\\n  position: relative;\\n\"], [\"\\n  position: relative;\\n\"])));\nvar EditingWrapper = styled.div(templateObject_2$6 || (templateObject_2$6 = __makeTemplateObject([\"\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  width: auto;\\n  z-index: 10;\\n  color: black;\\n\"], [\"\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  width: auto;\\n  z-index: 10;\\n  color: black;\\n\"])));\n\nvar cancelEvent$1 = function cancelEvent$1(e) {\n  log$8('cancelEvent');\n  e.preventDefault();\n  e.stopPropagation();\n};\n\nfunction TopicContent(props) {\n  var controller = props.controller,\n      model = props.model,\n      topicKey = props.topicKey,\n      getRef = props.getRef;\n  var readOnly = model.editingContentKey !== topicKey;\n  var editor = controller.run('renderTopicContentEditor', _assign(_assign({}, props), {\n    readOnly: readOnly\n  }));\n  var child;\n\n  if (readOnly) {\n    child = editor;\n  } else {\n    var wrapper_1;\n\n    var wrapperRef = function wrapperRef(ref) {\n      if (ref) {\n        wrapper_1 = ref;\n        contentResizeObserver_1.observe(wrapper_1);\n      }\n    };\n\n    var rect_1 = {\n      width: 50,\n      height: 40\n    };\n    var editorDiv = getRef(\"content-editor-\" + topicKey);\n    if (editorDiv) rect_1 = editorDiv.getBoundingClientRect();\n\n    var contentResizeCallback = function contentResizeCallback(entries, observer) {\n      var r = entries[0].contentRect;\n      wrapper_1.style.left = (rect_1.width - r.width) / 2 + 'px';\n      wrapper_1.style.top = (rect_1.height - r.height) / 2 + 'px';\n    };\n\n    var contentResizeObserver_1 = new ResizeObserver(contentResizeCallback);\n    log$8(rect_1);\n    child = createElement(Fragment, null, createElement(\"div\", {\n      style: {\n        width: rect_1.width,\n        height: rect_1.height\n      }\n    }), createElement(EditingWrapper, {\n      ref: wrapperRef\n    }, editor));\n  }\n\n  return createElement(EditingRoot, {\n    onDragEnter: cancelEvent$1,\n    onDragOver: cancelEvent$1\n  }, child);\n}\n\nvar templateObject_1$9, templateObject_2$6;\nvar log$9 = debug('node:topic-content-widget');\nvar TopicContent$1 = styled.div(templateObject_1$a || (templateObject_1$a = __makeTemplateObject([\"\\n  display: flex;\\n  align-items: center;\\n  cursor: pointer;\\n  //overflow: hidden;\\n  position: relative;\\n\"], [\"\\n  display: flex;\\n  align-items: center;\\n  cursor: pointer;\\n  //overflow: hidden;\\n  position: relative;\\n\"])));\nvar TopicContentWithDropArea = styled.div(templateObject_2$7 || (templateObject_2$7 = __makeTemplateObject([\"\\n  position: relative;\\n\"], [\"\\n  position: relative;\\n\"])));\n\nvar TopicContentWidget =\n/** @class */\nfunction (_super) {\n  __extends(TopicContentWidget, _super);\n\n  function TopicContentWidget(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.onDragStart = function (ev) {\n      _this.run('handleTopicDragStart', _assign(_assign({}, _this.props), {\n        ev: ev\n      }));\n    };\n\n    _this.onDragOver = function (ev) {\n      // log('onDragOver');\n      ev.preventDefault();\n    };\n\n    _this.onDragEnter = function (ev) {\n      log$9('onDragEnter', _this.props.topicKey);\n\n      _this.run('handleTopicDragEnter', _assign(_assign({}, _this.props), {\n        ev: ev,\n        dropDir: 'in'\n      }));\n    };\n\n    _this.onDragLeave = function (ev) {\n      _this.run('handleTopicDragLeave', _assign(_assign({}, _this.props), {\n        ev: ev,\n        dropDir: 'in'\n      }));\n    };\n\n    _this.onDrop = function (ev) {\n      log$9('onDrop');\n\n      _this.run('handleTopicDrop', _assign(_assign({}, _this.props), {\n        ev: ev,\n        dropDir: 'in'\n      }));\n    };\n\n    _this.onClick = function (ev) {\n      var props = _this.props;\n      var controller = props.controller; //TODO bug [Violation] 'setTimeout' handler took 69ms\n\n      _this.handleTopicClickTimeout = setTimeout(function () {\n        // log('handleTopicClick');\n        //this.props, props, onClick, topic-content-editoronClickOutside\n        //onClickOutside,model, props,model model\n        controller.run('handleTopicClick', _assign(_assign({}, _this.props), {\n          ev: ev\n        }));\n      }, 200);\n    };\n\n    _this.onDoubleClick = function (ev) {\n      clearTimeout(_this.handleTopicClickTimeout);\n      var controller = _this.props.controller;\n      controller.run('handleTopicDoubleClick', _assign(_assign({}, _this.props), {\n        ev: ev\n      }));\n    };\n\n    _this.needRelocation = false;\n\n    _this.onClickCollapse = function (e) {\n      e.stopPropagation();\n      var _a = _this.props,\n          topicKey = _a.topicKey,\n          getRef = _a.getRef;\n      _this.needRelocation = true;\n      var collapseIcon = getRef(collapseRefKey(topicKey));\n      var rect = collapseIcon.getBoundingClientRect();\n      log$9('oldRect', rect);\n      _this.oldCollapseIconVector = [rect.left + rect.width / 2, rect.top + rect.height / 2];\n      log$9('oldCollapseIconVector', _this.oldCollapseIconVector); // this.oldCollapseIconVector = controller.run('getRelativeVectorFromViewPort', {\n      //   ...this.props,\n      //   element: collapseIcon\n      // });\n\n      _this.operation(OpType.TOGGLE_COLLAPSE, _this.props);\n    };\n\n    _this.state = {\n      dragEnter: false\n    };\n    return _this;\n  }\n\n  TopicContentWidget.prototype.renderContextMenu = function () {\n    var controller = this.props.controller;\n\n    if (!controller.getValue(PropKey.TOPIC_CONTEXT_MENU_ENABLED, _assign({}, this.props))) {\n      return;\n    }\n\n    this.operation(OpType.FOCUS_TOPIC, _assign(_assign({}, this.props), {\n      focusMode: FocusMode.SHOW_POPUP\n    }));\n    return controller.run('renderTopicContextMenu', this.props);\n  };\n\n  TopicContentWidget.prototype.onContextMenuClose = function () {// Optional method called once the context menu is closed.\n  };\n\n  TopicContentWidget.prototype.componentDidUpdate = function () {\n    if (this.needRelocation) {\n      var _a = this.props,\n          getRef = _a.getRef,\n          topicKey = _a.topicKey,\n          setViewBoxScrollDelta = _a.setViewBoxScrollDelta;\n      var newIcon = getRef(collapseRefKey(topicKey));\n      var newRect = newIcon.getBoundingClientRect(); // const newVector = controller.run('getRelativeVectorFromViewPort', {\n      //   ...this.props,\n      //   element: getRef(collapseRefKey(topicKey))\n      // });\n\n      var newVector = [newRect.left + newRect.width / 2, newRect.top + newRect.height / 2];\n      log$9('newVector:', newVector);\n      log$9('oldVector:', this.oldCollapseIconVector); //TODO bug\n\n      var vector = [newVector[0] - this.oldCollapseIconVector[0], newVector[1] - this.oldCollapseIconVector[1]];\n      log$9('vector', vector);\n      setViewBoxScrollDelta(vector[0], vector[1]);\n      this.needRelocation = false;\n    }\n  };\n\n  TopicContentWidget.prototype.render = function () {\n    var props = this.props;\n    var saveRef = props.saveRef,\n        topicKey = props.topicKey,\n        model = props.model,\n        controller = props.controller,\n        topicStyle = props.topicStyle,\n        dir = props.dir;\n    log$9('render', topicKey, model.focusMode);\n    var draggable = controller.run('isOperationEnabled', props) && model.editingContentKey !== topicKey;\n    var collapseIcon = controller.run('renderTopicCollapseIcon', _assign(_assign({}, props), {\n      onClickCollapse: this.onClickCollapse.bind(this)\n    }));\n    var prevDropArea = controller.run('renderTopicDropArea', _assign(_assign({}, props), {\n      dropDir: 'prev'\n    }));\n    var nextDropArea = controller.run('renderTopicDropArea', _assign(_assign({}, props), {\n      dropDir: 'next'\n    }));\n    var dropEventHandlers = {\n      onDragEnter: this.onDragEnter,\n      onDragLeave: this.onDragLeave,\n      onDragOver: this.onDragOver,\n      onDrop: this.onDrop\n    }; // log(topicKey, 'style', topicStyle);\n\n    return createElement(TopicContentWithDropArea, null, prevDropArea, createElement(TopicContent$1, _assign({\n      style: topicStyle,\n      draggable: draggable,\n      ref: saveRef(contentRefKey(topicKey)),\n      onDragStart: this.onDragStart,\n      onClick: this.onClick,\n      onDoubleClick: this.onDoubleClick\n    }, dropEventHandlers), controller.run('renderTopicBlocks', props), controller.run('renderTopicContentOthers', props)), nextDropArea, dir !== TopicDirection.MAIN && collapseIcon);\n  };\n\n  TopicContentWidget = __decorate([ContextMenuTarget], TopicContentWidget);\n  return TopicContentWidget;\n}(BaseWidget);\n\nvar templateObject_1$a, templateObject_2$7;\nvar log$a = debug('node:topic-desc');\nvar TooltipContentWrapper = styled.div(templateObject_1$b || (templateObject_1$b = __makeTemplateObject([\"\\n  overflow: auto;\\n\"], [\"\\n  overflow: auto;\\n\"])));\n\nfunction TopicDesc(props) {\n  var controller = props.controller,\n      model = props.model,\n      topicKey = props.topicKey,\n      getRef = props.getRef;\n  var isEditing = model.editingDescKey === topicKey;\n  log$a('isEditing', isEditing);\n\n  var onClick = function onClick(e) {\n    e.stopPropagation();\n    controller.run('operation', _assign(_assign({}, props), {\n      opType: OpType.START_EDITING_DESC\n    }));\n  };\n\n  var desc = model.getTopic(topicKey).getBlock(BlockType.DESC);\n  if (!isEditing && controller.run('isBlockEmpty', _assign(_assign({}, props), {\n    block: desc.block\n  }))) return null;\n  var descEditor = controller.run('renderTopicDescEditor', props);\n  var diagramRoot = getRef(RefKey.DIAGRAM_ROOT_KEY);\n  var style = {\n    maxWidth: '800px',\n    maxHeight: '600px'\n  };\n\n  if (diagramRoot) {\n    var dRect = diagramRoot.getBoundingClientRect();\n    style.maxWidth = dRect.width * 0.6 + \"px\";\n    style.maxHeight = dRect.height * 0.8 + \"px\";\n  }\n\n  var tooltipContent = createElement(TooltipContentWrapper, {\n    onClick: cancelEvent,\n    classname: Classes.POPOVER_DISMISS,\n    style: style\n  }, descEditor);\n  var icon = createElement(TopicBlockIcon, {\n    onClick: onClick,\n    className: iconClassName(IconName.NOTES),\n    tabIndex: -1\n  });\n  var tooltipProps = {\n    autoFocus: false,\n    content: tooltipContent,\n    target: icon,\n    interactionKind: PopoverInteractionKind.HOVER,\n    hoverOpenDelay: 500\n  };\n  var descIcon = desc.block && createElement(Popover, _assign({}, tooltipProps));\n  return descIcon;\n}\n\nvar templateObject_1$b;\nvar FocusHighlightSvg = styled.svg(templateObject_1$c || (templateObject_1$c = __makeTemplateObject([\"\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  z-index: 2;\\n  pointer-events: none;\\n\"], [\"\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  z-index: 2;\\n  pointer-events: none;\\n\"])));\n\nvar TopicHighlight =\n/** @class */\nfunction (_super) {\n  __extends(TopicHighlight, _super);\n\n  function TopicHighlight() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      content: null\n    };\n    return _this;\n  }\n\n  TopicHighlight.prototype.layout = function () {\n    var _a = this.props,\n        getRef = _a.getRef,\n        model = _a.model,\n        zoomFactor = _a.zoomFactor;\n    var focusKey = model.focusKey;\n    var focusMode = model.focusMode;\n\n    if (!focusKey || focusMode === FocusMode.EDITING_CONTENT) {\n      this.setState({\n        content: null\n      });\n      return;\n    }\n\n    var content = getRef(contentRefKey(focusKey));\n    var bigView = getRef(RefKey.DRAG_SCROLL_WIDGET_KEY).bigView;\n    var svg = getRef(RefKey.SVG_HIGHLIGHT_KEY);\n\n    var contentRect = _getRelativeRect(content, bigView, zoomFactor);\n\n    var svgRect = _getRelativeRect(svg, bigView, zoomFactor);\n\n    var padding = 3;\n    var x = contentRect.left - svgRect.left - padding;\n    var y = contentRect.top - svgRect.top - padding;\n    var width = contentRect.width + 2 * padding;\n    var height = contentRect.height + 2 * padding;\n    this.setState({\n      content: createElement(\"rect\", {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        fill: \"none\",\n        stroke: model.config.theme.highlightColor,\n        strokeWidth: 2\n      })\n    });\n  };\n\n  TopicHighlight.prototype.render = function () {\n    var saveRef = this.props.saveRef;\n    return createElement(FocusHighlightSvg, {\n      ref: saveRef(RefKey.SVG_HIGHLIGHT_KEY)\n    }, this.state.content);\n  };\n\n  return TopicHighlight;\n}(BaseWidget);\n\nvar templateObject_1$c;\nvar TopicLinksSvg = styled.svg(templateObject_1$d || (templateObject_1$d = __makeTemplateObject([\"\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  z-index: 1;\\n  pointer-events: none;\\n\"], [\"\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  z-index: 1;\\n  pointer-events: none;\\n\"])));\nvar log$b = debug('node:topic-sub-links');\n\nvar TopicSubLinks =\n/** @class */\nfunction (_super) {\n  __extends(TopicSubLinks, _super);\n\n  function TopicSubLinks() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      curves: []\n    };\n    return _this;\n  }\n\n  TopicSubLinks.prototype.layout = function () {\n    var props = this.props;\n    var model = props.model,\n        getRef = props.getRef,\n        topicKey = props.topicKey,\n        dir = props.dir,\n        controller = props.controller;\n    var z = controller.run('getZoomFactor', props);\n    var topic = model.getTopic(topicKey);\n    var content = getRef(contentRefKey(topicKey));\n    var svg = getRef(linksSvgRefKey(topicKey));\n    var collapseIcon = getRef(collapseRefKey(topicKey));\n    var bigView = getRef(RefKey.DRAG_SCROLL_WIDGET_KEY).bigView;\n\n    var svgRect = _getRelativeRect(svg, bigView, z);\n\n    var collapseRect = _getRelativeRect(collapseIcon, bigView, z);\n\n    var contentRect = _getRelativeRect(content, bigView, z);\n\n    log$b(topicKey);\n    log$b('svgRect', svgRect);\n    log$b('collapseRect', collapseRect);\n    log$b('contentRect', contentRect);\n    var p1, p2, p3;\n\n    if (dir === TopicDirection.RIGHT) {\n      p1 = {\n        x: 0,\n        y: centerY(contentRect) - svgRect.top\n      };\n      p2 = {\n        x: collapseRect.right - svgRect.left + 10,\n        y: p1.y\n      };\n    } else if (dir === TopicDirection.LEFT) {\n      p1 = {\n        x: svgRect.right - svgRect.left,\n        y: centerY(contentRect) - svgRect.top\n      };\n      p2 = {\n        x: collapseRect.left - svgRect.left - 10,\n        y: p1.y\n      };\n    }\n\n    var curves = [];\n    topic.subKeys.forEach(function (key) {\n      var curve;\n      var linkStyle = controller.run('getLinkStyle', _assign(_assign({}, props), {\n        topicKey: key\n      })); // log(key);\n\n      var subContent = getRef(contentRefKey(key));\n      if (!subContent) return;\n\n      var rect = _getRelativeRect(subContent, bigView, z);\n\n      if (dir === TopicDirection.RIGHT) {\n        p3 = {\n          x: rect.left - svgRect.left,\n          y: centerY(rect) - svgRect.top\n        };\n      }\n\n      if (dir === TopicDirection.LEFT) {\n        p3 = {\n          x: rect.right - svgRect.left,\n          y: centerY(rect) - svgRect.top\n        };\n      }\n\n      var lineType = linkStyle.lineType;\n\n      if (lineType === 'curve') {\n        curve = \"M \" + p1.x + \" \" + p1.y + \" L \" + p2.x + \" \" + p2.y + \" C \" + p2.x + \" \" + centerPointY(p2, p3) + \" \" + centerPointX(p2, p3) + \" \" + p3.y + \" \" + p3.x + \" \" + p3.y;\n      } else if (lineType === 'round') {\n        var vDir = p3.y > p1.y ? 1 : -1;\n        var hDir = p3.x > p1.x ? 1 : -1;\n        var radius = linkStyle.lineRadius; // if (p3.y === p1.y) { //\n\n        if (topic.subKeys.size === 1 || Math.abs(p3.y - p1.y) <= 1) {\n          curve = \"M \" + p1.x + \" \" + p1.y + \" L \" + p3.x + \" \" + p3.y;\n        } else {\n          // 0  1 \n          curve = \"M \" + p1.x + \" \" + p1.y + \" H \" + p2.x + \" V \" + (p3.y - vDir * radius) + \" A \" + radius + \" \" + radius + \" 0 0 \" + (vDir * hDir === 1 ? 0 : 1) + \" \" + (p2.x + radius * hDir) + \" \" + p3.y + \" H \" + p3.x;\n        }\n      } else if (lineType === 'line') {\n        curve = \"M \" + p1.x + \" \" + p1.y + \" H \" + p2.x + \" L \" + p3.x + \" \" + p3.y;\n      }\n\n      curves.push(createElement(\"path\", {\n        key: \"link-\" + key,\n        d: curve,\n        strokeWidth: linkStyle.lineWidth,\n        stroke: linkStyle.lineColor,\n        fill: \"none\"\n      }));\n    });\n    this.setState({\n      curves: curves\n    });\n  };\n\n  TopicSubLinks.prototype.render = function () {\n    var _a = this.props,\n        topicKey = _a.topicKey,\n        saveRef = _a.saveRef;\n    return createElement(TopicLinksSvg, {\n      ref: saveRef(linksSvgRefKey(topicKey))\n    }, createElement(\"g\", null, this.state.curves));\n  };\n\n  return TopicSubLinks;\n}(BaseWidget);\n\nvar templateObject_1$d;\nvar log$c = debug('node:topic-widget');\nvar Node = styled.div(templateObject_1$e || (templateObject_1$e = __makeTemplateObject([\"\\n  display: flex;\\n  align-items: center;\\n  flex-direction: \", \";\\n\"], [\"\\n  display: flex;\\n  align-items: center;\\n  flex-direction: \", \";\\n\"])), function (props) {\n  return props.topicDirection === TopicDirection.RIGHT ? 'row' : 'row-reverse';\n}); // TODO\n\nvar NodeChildren = styled.div(templateObject_2$8 || (templateObject_2$8 = __makeTemplateObject([\"\\n  position: relative;\\n  padding: \", \";\\n\"], [\"\\n  position: relative;\\n  padding: \", \";\\n\"])), function (props) {\n  return props.dir === TopicDirection.RIGHT ? \"0 0 0 \" + props.marginH + \"px\" : \"0 \" + props.marginH + \"px 0 0\";\n});\nvar NodeTopic = styled.div(templateObject_3$3 || (templateObject_3$3 = __makeTemplateObject([\"\\n  display: flex;\\n  position: relative;\\n  align-items: center;\\n\\n  flex-direction: \", \";\\n\"], [\"\\n  display: flex;\\n  position: relative;\\n  align-items: center;\\n\\n  flex-direction: \", \";\\n\"])), function (props) {\n  return props.topicDirection === TopicDirection.RIGHT ? 'row' : 'row-reverse';\n});\n\nvar TopicWidget =\n/** @class */\nfunction (_super) {\n  __extends(TopicWidget, _super);\n\n  function TopicWidget() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  TopicWidget.prototype.renderSubTopics = function () {\n    var props = this.props;\n    var controller = props.controller,\n        model = props.model,\n        topicKey = props.topicKey,\n        dir = props.dir;\n    var topics = model.getTopic(topicKey).subKeys.toArray();\n    var res = controller.run('createSubTopics', _assign(_assign({}, props), {\n      topics: topics\n    }));\n    if (!res) return null;\n    var subTopics = res.subTopics;\n    var subLinks = controller.run('renderSubLinks', props);\n    return createElement(NodeChildren, {\n      dir: dir,\n      marginH: model.config.theme.marginH\n    }, subTopics, \" \", subLinks);\n  }; // componentDidUpdate(): void {\n  //   this.layoutLinks();\n  // }\n  //\n  // componentDidMount(): void {\n  //   this.layoutLinks();\n  // }\n\n\n  TopicWidget.prototype.layoutLinks = function () {\n    var _a = this.props,\n        getRef = _a.getRef,\n        topicKey = _a.topicKey,\n        model = _a.model;\n    var topic = model.getTopic(topicKey);\n    if (topic.subKeys.size === 0 || topic.collapse) return;\n    log$c('layoutLinks', topicKey);\n    var links = getRef(linksRefKey(topicKey));\n    links && links.layout();\n  };\n\n  TopicWidget.prototype.render = function () {\n    var props = this.props;\n    var controller = props.controller,\n        topicKey = props.topicKey,\n        dir = props.dir,\n        saveRef = props.saveRef;\n    log$c('render', topicKey);\n    var topicStyle = controller.run('getTopicContentStyle', props);\n\n    var propsMore = _assign(_assign({}, props), {\n      topicStyle: topicStyle\n    });\n\n    var topicContent = controller.run('renderTopicContent', propsMore);\n    return createElement(Node, {\n      topicDirection: dir\n    }, createElement(NodeTopic, {\n      topicDirection: dir,\n      ref: saveRef(topicRefKey(topicKey))\n    }, topicContent), this.renderSubTopics());\n  };\n\n  return TopicWidget;\n}(Component);\n\nvar templateObject_1$e, templateObject_2$8, templateObject_3$3;\nvar log$d = debug('node:view-port-viewer');\nvar ViewerRoot = styled(ZIndex)(templateObject_1$f || (templateObject_1$f = __makeTemplateObject([\"\\n  position: absolute;\\n  background: white;\\n  right: 30px;\\n  bottom: 20px;\\n  border-radius: 2px;\\n  display: flex;\\n  flex-direction: row;\\n  user-select: none;\\n\"], [\"\\n  position: absolute;\\n  background: white;\\n  right: 30px;\\n  bottom: 20px;\\n  border-radius: 2px;\\n  display: flex;\\n  flex-direction: row;\\n  user-select: none;\\n\"])));\nvar Item_ = styled(Btn)(templateObject_2$9 || (templateObject_2$9 = __makeTemplateObject([\"\\n  margin: 10px;\\n\"], [\"\\n  margin: 10px;\\n\"])));\nvar ZoomFactorSpan = styled.span(templateObject_3$4 || (templateObject_3$4 = __makeTemplateObject([\"\\n  display: inline-block;\\n  width: 80px;\\n  height: 18px;\\n\"], [\"\\n  display: inline-block;\\n  width: 80px;\\n  height: 18px;\\n\"])));\n\nvar Item = function Item(props) {\n  return createElement(Tooltip, {\n    content: props.tooltip,\n    position: Position.TOP,\n    className: Classes.ICON\n  }, createElement(Item_, {\n    onClick: props.onClick,\n    tabIndex: -1\n  }, props.children));\n};\n\nvar ViewPortViewer =\n/** @class */\nfunction (_super) {\n  __extends(ViewPortViewer, _super);\n\n  function ViewPortViewer(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.zoomFactorChange = function (zoomFactor) {\n      log$d('zoomFactorChange', zoomFactor);\n\n      _this.setState({\n        zoomFactor: zoomFactor\n      });\n    };\n\n    _this.onClickResetZoom = function (e) {\n      var props = _this.props;\n      var controller = props.controller;\n      controller.run('setZoomFactor', _assign(_assign({}, props), {\n        zoomFactor: 1\n      }));\n    };\n\n    _this.onClickAddZoom = function (e) {\n      var props = _this.props;\n      var controller = props.controller;\n      var zoomFactor = controller.run('getZoomFactor', props);\n      controller.run('setZoomFactor', _assign(_assign({}, props), {\n        zoomFactor: zoomFactor + 0.1\n      }));\n    };\n\n    _this.onClickMinusZoom = function (e) {\n      var props = _this.props;\n      var controller = props.controller;\n      var zoomFactor = controller.run('getZoomFactor', props);\n      controller.run('setZoomFactor', _assign(_assign({}, props), {\n        zoomFactor: zoomFactor - 0.1\n      }));\n    };\n\n    _this.onClickCollapseAll = function (e) {\n      var props = _this.props;\n      var controller = props.controller;\n      controller.run('addEventListener', _assign(_assign({}, props), {\n        key: EventKey.CENTER_ROOT_TOPIC,\n        listener: _this.centerRootTopic,\n        once: true\n      }));\n      controller.run('operation', _assign(_assign({}, props), {\n        opType: OpType.COLLAPSE_ALL\n      }));\n    };\n\n    _this.onClickExpandAll = function (e) {\n      var props = _this.props;\n      var controller = props.controller;\n      controller.run('addEventListener', _assign(_assign({}, props), {\n        key: EventKey.CENTER_ROOT_TOPIC,\n        listener: _this.centerRootTopic,\n        once: true\n      }));\n      controller.run('operation', _assign(_assign({}, props), {\n        opType: OpType.EXPAND_ALL\n      }));\n    };\n\n    _this.centerRootTopic = function () {\n      var _a = _this.props,\n          model = _a.model,\n          controller = _a.controller;\n      controller.run('moveTopicToCenter', _assign(_assign({}, _this.props), {\n        topicKey: model.editorRootTopicKey\n      }));\n    };\n\n    return _this;\n  }\n\n  ViewPortViewer.prototype.componentDidMount = function () {\n    var props = this.props;\n    var controller = props.controller;\n    controller.run('addZoomFactorChangeEventListener', _assign(_assign({}, props), {\n      listener: this.zoomFactorChange\n    }));\n  };\n\n  ViewPortViewer.prototype.componentWillUnmount = function () {\n    var props = this.props;\n    var controller = props.controller;\n    controller.run('removeZoomFactorChangeEventListener', _assign(_assign({}, props), {\n      listener: this.zoomFactorChange\n    }));\n  };\n\n  ViewPortViewer.prototype.render = function () {\n    log$d('render');\n    var props = this.props;\n    var controller = props.controller,\n        zIndex = props.zIndex;\n    var zoomFactor = controller.run('getZoomFactor', props);\n    return createElement(ViewerRoot, {\n      zIndex: zIndex\n    }, createElement(Item, {\n      onClick: this.onClickCollapseAll,\n      tooltip: \"collapse all\"\n    }, Icon(IconName.COLLAPSE_ALL)), createElement(Item, {\n      onClick: this.onClickExpandAll,\n      tooltip: \"expand all\"\n    }, Icon(IconName.EXPAND_ALL)), createElement(Item, {\n      onClick: this.centerRootTopic,\n      tooltip: \"center root topic\"\n    }, Icon(IconName.CENTER)), createElement(Item, {\n      onClick: this.onClickMinusZoom,\n      tooltip: \"zoom in\"\n    }, Icon(IconName.MINUS)), createElement(Item, {\n      onClick: this.onClickResetZoom,\n      tooltip: \"reset zoom\"\n    }, createElement(ZoomFactorSpan, null, \"zoom:\" + Math.floor(zoomFactor * 100) + \"%\")), createElement(Item, {\n      onClick: this.onClickAddZoom,\n      tooltip: \"zoom out\"\n    }, Icon(IconName.PLUS)));\n  };\n\n  return ViewPortViewer;\n}(BaseWidget);\n\nvar templateObject_1$f, templateObject_2$9, templateObject_3$4;\nvar DescEditorWrapper = styled.div(templateObject_1$g || (templateObject_1$g = __makeTemplateObject([\"\\n  overflow: auto;\\n  padding: 0px 0px 0px 20px;\\n  background: #88888850;\\n\"], [\"\\n  overflow: auto;\\n  padding: 0px 0px 0px 20px;\\n  background: #88888850;\\n\"])));\n\nfunction renderDrawer(props) {\n  var controller = props.controller,\n      model = props.model,\n      topicKey = props.topicKey;\n\n  if (model.focusMode === FocusMode.EDITING_DESC) {\n    var onDescEditorClose = function onDescEditorClose(e) {\n      e.stopPropagation();\n      var key = \"topic-desc-data-\" + topicKey;\n      var descData = controller.run('deleteTempValue', {\n        key: key\n      });\n      controller.run('operation', _assign(_assign({}, props), {\n        opType: OpType.SET_TOPIC_BLOCK,\n        topicKey: topicKey,\n        blockType: BlockType.DESC,\n        data: descData,\n        focusMode: FocusMode.NORMAL\n      }));\n    };\n\n    var descEditor = controller.run('renderTopicDescEditor', props);\n    return createElement(Drawer, {\n      key: \"drawer\",\n      title: \"Edit Notes\",\n      icon: Icon('note'),\n      isOpen: true,\n      hasBackdrop: true,\n      backdropProps: {\n        onMouseDown: cancelEvent\n      },\n      isCloseButtonShown: false,\n      onClose: onDescEditorClose,\n      size: \"70%\"\n    }, createElement(DescEditorWrapper, null, descEditor));\n  }\n}\n\nvar templateObject_1$g; //TODO themeProvider\n\nfunction Theme(_a) {\n  var theme = _a.theme,\n      children = _a.children;\n  return (//@ts-ignore\n    createElement(ThemeProvider, {\n      theme: theme\n    }, createElement(Fragment, null, children))\n  );\n}\n\nvar log$e = debug('plugin:rendering');\n\nfunction RenderingPlugin() {\n  var DiagramRoot = styled.div(templateObject_1$h || (templateObject_1$h = __makeTemplateObject([\"\\n    width: 100%;\\n    height: 100%;\\n    background: \", \";\\n    position: relative;\\n  \"], [\"\\n    width: 100%;\\n    height: 100%;\\n    background: \", \";\\n    position: relative;\\n  \"])), function (props) {\n    return props.theme.background;\n  });\n  var diagramProps;\n  return {\n    getDiagramProps: function getDiagramProps() {\n      return diagramProps;\n    },\n    renderDiagram: function renderDiagram(props) {\n      var model = props.model,\n          controller = props.controller;\n      return createElement(SaveRef, null, function (saveRef, getRef, deleteRef) {\n        diagramProps = _assign(_assign({}, props), {\n          saveRef: saveRef,\n          getRef: getRef,\n          deleteRef: deleteRef\n        });\n        log$e('renderDiagram', model);\n        return createElement(Theme, {\n          theme: model.config.theme\n        }, createElement(DiagramRoot, {\n          ref: saveRef(RefKey.DIAGRAM_ROOT_KEY)\n        }, createElement(MindDragScrollWidget, _assign({}, diagramProps)), controller.run('renderDiagramCustomize', diagramProps)));\n      });\n    },\n    renderDrawer: renderDrawer,\n    renderDiagramCustomize: function renderDiagramCustomize(props) {\n      var controller = props.controller,\n          model = props.model;\n      var zIndex = controller.getValue(PropKey.DIAGRAM_CUSTOMIZE_BASE_Z_INDEX);\n\n      var nProps = _assign(_assign({}, props), {\n        zIndex: zIndex,\n        topicKey: model.focusKey\n      });\n\n      var breadcrumbs = controller.run('renderEditorRootBreadcrumbs', nProps); // const styleEditor = controller.run('renderStyleEditor', nProps);\n\n      var rightTopPanel = controller.run('renderRightTopPanel', nProps);\n      var modals = controller.run('renderModals', _assign(_assign({}, nProps), {\n        zIndex: zIndex + 1\n      }));\n      var drawer = controller.run('renderDrawer', _assign(_assign({}, nProps), {\n        zIndex: zIndex + 1\n      }));\n      var viewportViewer = controller.run('renderViewPortViewer', nProps);\n      return [breadcrumbs, rightTopPanel, modals, drawer, viewportViewer];\n    },\n    renderEditorRootBreadcrumbs: function renderEditorRootBreadcrumbs(props) {\n      return createElement(EditorRootBreadcrumbs, _assign({\n        key: \"EditorRootBreadcrumbs\"\n      }, props));\n    },\n    renderModals: function renderModals(props) {\n      return createElement(Modals, _assign({\n        key: \"modals\"\n      }, props));\n    },\n    renderModal: function renderModal(props) {\n      return null;\n    },\n    getActiveModalProps: function getActiveModalProps(props) {\n      return null;\n    },\n    renderDoc: function renderDoc(_a) {\n      var children = _a.children;\n      return children;\n    },\n    renderRootWidget: function renderRootWidget(props) {\n      return createElement(RootWidget, _assign({}, props));\n    },\n    renderTopicWidget: function renderTopicWidget(props) {\n      return createElement(TopicWidget, _assign({}, props));\n    },\n    renderTopicContent: function renderTopicContent(props) {\n      return createElement(TopicContentWidget, _assign({}, props));\n    },\n    renderTopicCollapseIcon: function renderTopicCollapseIcon(props) {\n      return createElement(TopicCollapseIcon, _assign({}, props));\n    },\n    renderTopicContentOthers: function renderTopicContentOthers(props) {\n      return [];\n    },\n    renderTopicBlocks: function renderTopicBlocks(props) {\n      var model = props.model,\n          topicKey = props.topicKey,\n          controller = props.controller;\n      var topic = model.getTopic(topicKey);\n      var blocks = topic.blocks;\n      var res = [];\n      var i = 0;\n      blocks.forEach(function (block) {\n        var b = controller.run('renderTopicBlock', _assign(_assign({}, props), {\n          block: block,\n          blockKey: \"block-\" + i\n        }));\n\n        if (b) {\n          res.push(createElement(Fragment, {\n            key: \"block-\" + i\n          }, b));\n          i++;\n        }\n      });\n      return res;\n    },\n    renderTopicBlock: function renderTopicBlock(props) {\n      var controller = props.controller,\n          block = props.block;\n\n      switch (block.type) {\n        case BlockType.CONTENT:\n          return controller.run('renderTopicBlockContent', props);\n\n        case BlockType.DESC:\n          return controller.run('renderTopicBlockDesc', props);\n      }\n\n      return null;\n    },\n    renderTopicBlockContent: function renderTopicBlockContent(props) {\n      return createElement(TopicContent, _assign({}, props));\n    },\n    renderTopicBlockDesc: function renderTopicBlockDesc(props) {\n      return createElement(TopicDesc, _assign({}, props));\n    },\n    renderSubLinks: function renderSubLinks(props) {\n      var saveRef = props.saveRef,\n          topicKey = props.topicKey,\n          model = props.model;\n      var topic = model.getTopic(topicKey);\n      if (topic.subKeys.size === 0 || topic.collapse) return null;\n      return createElement(TopicSubLinks, _assign({\n        ref: saveRef(linksRefKey(topicKey))\n      }, props));\n    },\n    renderRootSubLinks: function renderRootSubLinks(props) {\n      // log('renderRootSubLinks');\n      var saveRef = props.saveRef,\n          topicKey = props.topicKey; // ,layout \n      // const topic = model.getTopic(topicKey);\n      // if (topic.subKeys.size === 0) return null;\n\n      return createElement(RootSubLinks, _assign({\n        ref: saveRef(linksRefKey(topicKey))\n      }, props));\n    },\n    renderFocusItemHighlight: function renderFocusItemHighlight(props) {\n      var saveRef = props.saveRef;\n      return createElement(TopicHighlight, _assign({\n        ref: saveRef(RefKey.FOCUS_HIGHLIGHT_KEY)\n      }, props));\n    },\n    renderRootWidgetOtherChildren: function renderRootWidgetOtherChildren(props) {\n      var controller = props.controller;\n      var zoomFactor = controller.run('getZoomFactor', props);\n      props = _assign(_assign({}, props), {\n        zoomFactor: zoomFactor\n      });\n      return createElement(Fragment, null, controller.run('renderRootSubLinks', props), controller.run('renderFocusItemHighlight', props), controller.run('renderDragAndDropEffect', props));\n    },\n    renderViewPortViewer: function renderViewPortViewer(props) {\n      return createElement(ViewPortViewer, _assign({\n        key: \"view-port-viewer\"\n      }, props));\n    }\n  };\n}\n\nvar templateObject_1$h;\nvar PanelRoot = styled(ZIndex)(templateObject_1$i || (templateObject_1$i = __makeTemplateObject([\"\\n  position: absolute;\\n  background: white;\\n  right: 30px;\\n  top: 20px;\\n  border-radius: 2px;\\n  user-select: none;\\n\"], [\"\\n  position: absolute;\\n  background: white;\\n  right: 30px;\\n  top: 20px;\\n  border-radius: 2px;\\n  user-select: none;\\n\"])));\nvar StyledTabs = styled(Tabs)(templateObject_2$a || (templateObject_2$a = __makeTemplateObject([\"\\n  padding: 0px 10px;\\n\"], [\"\\n  padding: 0px 10px;\\n\"])));\n\nfunction RightTopPanel(props) {\n  var controller = props.controller,\n      zIndex = props.zIndex,\n      selectedTabId = props.selectedTabId,\n      handleTabIdChange = props.handleTabIdChange;\n\n  var _a = __read(useState(false), 2),\n      expand = _a[0],\n      setExpand = _a[1];\n\n  if (!expand) {\n    return createElement(PanelRoot, {\n      zIndex: zIndex\n    }, createElement(IconBg, {\n      onClick: function onClick() {\n        return setExpand(true);\n      }\n    }, createElement(ShowMenuIcon, {\n      className: iconClassName(IconName.SHOW_MENU)\n    })));\n  }\n\n  return createElement(PanelRoot, {\n    zIndex: zIndex\n  }, createElement(Title, null, createElement(CloseIcon, {\n    className: iconClassName(IconName.CLOSE),\n    onClick: function onClick() {\n      return setExpand(false);\n    }\n  })), createElement(StyledTabs, {\n    id: selectedTabId,\n    onChange: handleTabIdChange\n  }, controller.run('renderRightTopPanelTabs', props)));\n}\n\nvar templateObject_1$i, templateObject_2$a;\nvar SettingTitle = styled.div(templateObject_1$j || (templateObject_1$j = __makeTemplateObject([\"\\n  margin-top: 10px;\\n  margin-bottom: 5px;\\n  font-weight: bold;\\n\"], [\"\\n  margin-top: 10px;\\n  margin-bottom: 5px;\\n  font-weight: bold;\\n\"])));\nvar SettingItem = styled.span(templateObject_2$b || (templateObject_2$b = __makeTemplateObject([\"\\n  margin: 0px 10px 0px 0px;\\n\"], [\"\\n  margin: 0px 10px 0px 0px;\\n\"])));\nvar SettingBoxContainer = styled.div(templateObject_3$5 || (templateObject_3$5 = __makeTemplateObject([\"\\n  padding: 10px;\\n  margin: 0 0 10px 0;\\n  border: rgba(16, 22, 26, 0.15) solid 1px;\\n  border-radius: 5px;\\n\"], [\"\\n  padding: 10px;\\n  margin: 0 0 10px 0;\\n  border: rgba(16, 22, 26, 0.15) solid 1px;\\n  border-radius: 5px;\\n\"])));\nvar SettingLabel = styled(SettingItem)(templateObject_4$1 || (templateObject_4$1 = __makeTemplateObject([\"\"], [\"\"])));\nvar SettingRow = styled.div(templateObject_5$1 || (templateObject_5$1 = __makeTemplateObject([\"\\n  display: flex;\\n  align-items: center;\\n  //justify-content: center;\\n  margin: 5px 0;\\n\"], [\"\\n  display: flex;\\n  align-items: center;\\n  //justify-content: center;\\n  margin: 5px 0;\\n\"])));\nvar ColorBar = styled.div(templateObject_6$1 || (templateObject_6$1 = __makeTemplateObject([\"\\n  height: 3px;\\n  width: 80%;\\n  margin-left: 10%;\\n  margin-right: 10%;\\n  margin-bottom: 2px;\\n  background: \", \";\\n\"], [\"\\n  height: 3px;\\n  width: 80%;\\n  margin-left: 10%;\\n  margin-right: 10%;\\n  margin-bottom: 2px;\\n  background: \", \";\\n\"])), function (props) {\n  return props.color;\n});\nvar WithBorder = styled.div(templateObject_7$1 || (templateObject_7$1 = __makeTemplateObject([\"\\n  border: 1px solid grey;\\n  cursor: pointer;\\n  font-weight: bold;\\n\"], [\"\\n  border: 1px solid grey;\\n  cursor: pointer;\\n  font-weight: bold;\\n\"])));\nvar templateObject_1$j, templateObject_2$b, templateObject_3$5, templateObject_4$1, templateObject_5$1, templateObject_6$1, templateObject_7$1;\n\nfunction SettingGroup(props) {\n  return createElement(\"div\", null, props.children, createElement(Divider, {\n    style: {\n      margin: '10px 0'\n    }\n  }));\n}\n\nfunction SettingItemColorPicker(props) {\n  var color = props.color,\n      handleColorChange = props.handleColorChange;\n  return createElement(SettingItem, null, createElement(Popover, null, createElement(WithBorder, null, createElement(\"div\", {\n    className: iconClassName(IconName.COLOR_PICKER)\n  }), createElement(ColorBar, {\n    color: color\n  })), createElement(\"div\", null, createElement(SketchPicker, {\n    color: color,\n    onChangeComplete: function onChangeComplete(color) {\n      return handleColorChange(color.hex);\n    }\n  }))));\n}\n\nfunction SettingItemButton(props) {\n  var title = props.title,\n      handleClick = props.handleClick;\n  return createElement(SettingItem, null, createElement(Button, {\n    onClick: handleClick\n  }, title));\n}\n\nfunction SettingItemNumericInput(props) {\n  var _a = props.layout,\n      layout = _a === void 0 ? 'h' : _a,\n      title = props.title,\n      restProps = __rest(props, [\"layout\", \"title\"]);\n\n  var flexProps = {\n    flexDirection: layout === 'h' ? 'row' : 'column',\n    alignItems: 'center'\n  };\n  return createElement(SettingItem, null, createElement(Flex, _assign({}, flexProps), createElement(Margin, {\n    margin: \"0 5px 0 0\"\n  }, title), createElement(NumericInput, _assign({}, restProps))));\n}\n\nfunction SettingItemSelect(props) {\n  var text = props.text,\n      items = props.items,\n      itemRenderer = props.itemRenderer,\n      onItemSelect = props.onItemSelect;\n  var PxSelect = Select.ofType();\n  var pxProps = {\n    items: items,\n    itemRenderer: itemRenderer,\n    onItemSelect: onItemSelect,\n    filterable: false\n  };\n  return createElement(SettingItem, null, createElement(PxSelect, _assign({}, pxProps), createElement(Button, {\n    text: text\n  })));\n}\n\nvar renderItem = function renderItem(unit) {\n  return function (width, _a) {\n    var handleClick = _a.handleClick;\n    return createElement(MenuItem, {\n      text: \"\" + width + unit,\n      key: width,\n      onClick: handleClick\n    });\n  };\n};\n\nvar PxSelect = Select.ofType();\n\nvar borderWidthItems = __spread(Array(7).keys());\n\nvar borderWidthItems$1 = __spread(Array(7).keys());\n\nvar borderRadiusItems = [0, 5, 10, 15, 20, 25, 30, 35];\nvar borderStyleItems = ['none', 'solid', 'dotted', 'dashed', 'double'];\n\nfunction BorderStyleEditor(props) {\n  var contentStyle = props.contentStyle,\n      setContentStyle = props.setContentStyle;\n\n  var handleBorderWidthChange = function handleBorderWidthChange(value) {\n    // log('handleBorderWithChange:', value);\n    setContentStyle({\n      borderWidth: value + \"px\"\n    });\n  };\n\n  var handleBorderStyleChange = function handleBorderStyleChange(value) {\n    setContentStyle({\n      borderStyle: value\n    });\n  };\n\n  var handleBorderRadiusChange = function handleBorderRadiusChange(value) {\n    // log('handleBorderRadiusChange:', value);\n    setContentStyle({\n      borderRadius: value + \"px\"\n    });\n  };\n\n  var handleBorderColorChange = function handleBorderColorChange(color) {\n    setContentStyle({\n      borderColor: color\n    });\n  };\n\n  return createElement(SettingGroup, null, createElement(SettingTitle, null, \"Border\"), createElement(\"div\", null, createElement(SettingItemSelect, {\n    text: \"width: \" + (contentStyle.borderWidth ? contentStyle.borderWidth : '0px'),\n    items: borderWidthItems$1,\n    itemRenderer: renderItem('px'),\n    onItemSelect: handleBorderWidthChange\n  }), createElement(SettingItemSelect, {\n    text: \"style: \" + (contentStyle.borderStyle ? contentStyle.borderStyle : 'none'),\n    items: borderStyleItems,\n    itemRenderer: renderItem(''),\n    onItemSelect: handleBorderStyleChange\n  }), createElement(SettingItemSelect, {\n    text: \"radius: \" + contentStyle.borderRadius,\n    items: borderRadiusItems,\n    itemRenderer: renderItem('px'),\n    onItemSelect: handleBorderRadiusChange\n  }), createElement(SettingItemColorPicker, {\n    color: contentStyle.borderColor,\n    handleColorChange: handleBorderColorChange\n  })));\n}\n\nfunction ClearAllCustomStyle(props) {\n  var controller = props.controller;\n\n  var handleClearAllCustomStyle = function handleClearAllCustomStyle(e) {\n    controller.run('clearAllCustomStyle', props);\n  };\n\n  return createElement(SettingGroup, null, createElement(SettingItem, null, createElement(Button, {\n    onClick: handleClearAllCustomStyle\n  }, \"Clear All Custom Styles\")));\n}\n\nvar lineTypes = ['curve', 'round', 'line'];\n\nvar renderLineTypeItem = function renderLineTypeItem(lineType, _a) {\n  var handleClick = _a.handleClick,\n      modifiers = _a.modifiers,\n      query = _a.query;\n  return createElement(MenuItem, {\n    text: \"\" + lineType,\n    key: lineType,\n    onClick: handleClick\n  });\n};\n\nfunction LinkStyleEditor(props) {\n  var _a = props.showLinkStyle,\n      showLinkStyle = _a === void 0 ? true : _a,\n      _b = props.showSubLinkStyle,\n      showSubLinkStyle = _b === void 0 ? true : _b,\n      _c = props.linkStyle,\n      linkStyle = _c === void 0 ? {} : _c,\n      _d = props.subLinkStyle,\n      subLinkStyle = _d === void 0 ? {} : _d,\n      setLinkStyle = props.setLinkStyle,\n      setSubLinkStyle = props.setSubLinkStyle;\n\n  var handleLinkWidthChange = function handleLinkWidthChange(value) {\n    setLinkStyle({\n      lineWidth: value + \"px\"\n    });\n  };\n\n  var handleLinkTypeChange = function handleLinkTypeChange(value) {\n    setLinkStyle({\n      lineType: value\n    });\n  };\n\n  var handleLinkColorChange = function handleLinkColorChange(color) {\n    setLinkStyle({\n      lineColor: color\n    });\n  };\n\n  var handleSubLinkWidthChange = function handleSubLinkWidthChange(value) {\n    setSubLinkStyle({\n      lineWidth: value + \"px\"\n    });\n  };\n\n  var handleSubLinkTypeChange = function handleSubLinkTypeChange(value) {\n    setSubLinkStyle({\n      lineType: value\n    });\n  };\n\n  var handleSubLinkColorChange = function handleSubLinkColorChange(color) {\n    setSubLinkStyle({\n      lineColor: color\n    });\n  };\n\n  return createElement(SettingGroup, null, createElement(SettingTitle, null, \"Link\"), showLinkStyle && createElement(SettingRow, {\n    alignItems: \"center\"\n  }, createElement(Margin, {\n    margin: \"0 5px 0 0\"\n  }, \"LinkToParent: \"), createElement(SettingItemSelect, {\n    text: \"width: \" + (linkStyle ? linkStyle.lineWidth : '0px'),\n    items: borderWidthItems,\n    itemRenderer: renderItem('px'),\n    onItemSelect: handleLinkWidthChange\n  }), createElement(SettingItemSelect, {\n    text: \"lineType: \" + linkStyle.lineType,\n    items: lineTypes,\n    itemRenderer: renderLineTypeItem,\n    onItemSelect: handleLinkTypeChange\n  }), createElement(SettingItemColorPicker, {\n    color: linkStyle.lineColor,\n    handleColorChange: handleLinkColorChange\n  })), showSubLinkStyle && createElement(SettingRow, {\n    alignItems: \"center\"\n  }, createElement(Margin, {\n    margin: \"0 5px 0 0\"\n  }, \"SubLinks: \"), createElement(SettingItemSelect, {\n    text: \"width: \" + (subLinkStyle ? subLinkStyle.lineWidth : '0px'),\n    items: borderWidthItems,\n    itemRenderer: renderItem('px'),\n    onItemSelect: handleSubLinkWidthChange\n  }), createElement(SettingItemSelect, {\n    text: \"lineType: \" + subLinkStyle.lineType,\n    items: lineTypes,\n    itemRenderer: renderLineTypeItem,\n    onItemSelect: handleSubLinkTypeChange\n  }), createElement(SettingItemColorPicker, {\n    color: subLinkStyle.lineColor,\n    handleColorChange: handleSubLinkColorChange\n  })));\n}\n\nfunction TextStyleEditor(props) {\n  var contentStyle = props.contentStyle,\n      setContentStyle = props.setContentStyle;\n\n  var handleFontSizeChange = function handleFontSizeChange(value) {\n    // log('handleFontSizeChange:', value);\n    setContentStyle({\n      fontSize: value\n    });\n  };\n\n  var handleLineHeightChange = function handleLineHeightChange(e) {\n    // log('handleLineHeightChange:', e.target.value);\n    setContentStyle({\n      lineHeight: e.target.value\n    });\n  };\n\n  var handleColorChange = function handleColorChange(color) {\n    setContentStyle({\n      color: color\n    });\n  };\n\n  var fontSizeNumInputProps = {\n    title: 'FontSize:',\n    min: 12,\n    max: 100,\n    value: parseInt(contentStyle.fontSize),\n    style: {\n      width: 50\n    },\n    onValueChange: handleFontSizeChange\n  };\n  var lineHeightInputProps = {\n    style: {\n      width: 50\n    },\n    value: contentStyle.lineHeight || '',\n    onChange: handleLineHeightChange\n  };\n  return createElement(SettingGroup, null, createElement(SettingTitle, null, \"Text Editor\"), createElement(Flex, null, createElement(SettingItemNumericInput, _assign({}, fontSizeNumInputProps)), createElement(SettingItem, null, createElement(Flex, {\n    alignItems: \"center\"\n  }, createElement(Margin, {\n    margin: \"0 5px 0 0\"\n  }, \"LineHeight: \"), createElement(InputGroup, _assign({}, lineHeightInputProps)))), createElement(SettingItemColorPicker, {\n    color: contentStyle.color,\n    handleColorChange: handleColorChange\n  })));\n}\n\nvar log$f = debug('node:style-editor');\nvar copiedStyle;\n\nfunction StyleEditor(props) {\n  var controller = props.controller,\n      model = props.model,\n      topicKey = props.topicKey;\n  var topic = model.getTopic(topicKey);\n\n  var setContentStyle = function setContentStyle(style) {\n    controller.run('setTopicContentStyle', _assign(_assign({}, props), {\n      style: style\n    }));\n  };\n\n  var handleBackgroundColorChange = function handleBackgroundColorChange(color) {\n    setContentStyle({\n      background: color\n    });\n  };\n\n  var handleClearStyle = function handleClearStyle() {\n    if (topic.style) {\n      controller.run('operation', _assign(_assign({}, props), {\n        opType: OpType.SET_STYLE,\n        style: null\n      }));\n    }\n  };\n\n  var handleCopyStyle = function handleCopyStyle() {\n    copiedStyle = controller.run('getTopicStyle', props);\n    log$f(copiedStyle);\n  };\n\n  var handlePasteStyle = function handlePasteStyle() {\n    if (copiedStyle) {\n      controller.run('operation', _assign(_assign({}, props), {\n        opType: OpType.SET_STYLE,\n        style: JSON.stringify(copiedStyle)\n      }));\n    }\n  };\n\n  if (!model.focusKey) return null;\n  var contentStyle = controller.run('getTopicContentStyle', props);\n  var linkStyle = controller.run('getLinkStyle', props);\n  var subLinkStyle = controller.run('getSubLinkStyle', props);\n\n  var setLinkStyle = function setLinkStyle(linkStyle) {\n    controller.run('setLinkStyle', _assign(_assign({}, props), {\n      linkStyle: linkStyle\n    }));\n  };\n\n  var setSubLinkStyle = function setSubLinkStyle(subLinkStyle) {\n    controller.run('setSubLinkStyle', _assign(_assign({}, props), {\n      subLinkStyle: subLinkStyle\n    }));\n  };\n\n  var linkStyleEditorProps = {\n    linkStyle: linkStyle,\n    subLinkStyle: subLinkStyle,\n    setLinkStyle: setLinkStyle,\n    setSubLinkStyle: setSubLinkStyle\n  };\n  var contentStyleEditorPros = {\n    contentStyle: contentStyle,\n    setContentStyle: setContentStyle\n  };\n  return createElement(PanelTabRoot, null, createElement(BorderStyleEditor, _assign({}, contentStyleEditorPros)), createElement(TextStyleEditor, _assign({}, contentStyleEditorPros)), createElement(SettingGroup, null, createElement(SettingTitle, null, \"Background\"), createElement(SettingItemColorPicker, {\n    color: contentStyle.background,\n    handleColorChange: handleBackgroundColorChange\n  })), createElement(LinkStyleEditor, _assign({}, linkStyleEditorProps)), createElement(SettingGroup, null, createElement(SettingItemButton, {\n    title: \"Clear Topic Style\",\n    handleClick: handleClearStyle\n  }), createElement(SettingItemButton, {\n    title: \"Copy Style\",\n    handleClick: handleCopyStyle\n  }), createElement(SettingItemButton, {\n    title: \"Paste Style\",\n    handleClick: handlePasteStyle\n  })), ClearAllCustomStyle(props));\n}\n/** Event handler that exposes the target element's value as a boolean. */\n\n\nfunction handleBooleanChange(handler) {\n  return function (event) {\n    return handler(event.target.checked);\n  };\n}\n\nvar expand = require('css-shorthand-expand');\n\nfunction PaddingStyleEditor(props) {\n  var contentStyle = props.contentStyle,\n      setContentStyle = props.setContentStyle;\n  var padding = expand('padding', contentStyle.padding || '0');\n  var commonProps = {\n    layout: 'v',\n    min: 0,\n    max: 99,\n    style: {\n      width: 38\n    }\n  };\n  var top = parseInt(padding['padding-top']);\n  var right = parseInt(padding['padding-right']);\n  var bottom = parseInt(padding['padding-bottom']);\n  var left = parseInt(padding['padding-left']);\n  var p = {\n    top: top,\n    right: right,\n    bottom: bottom,\n    left: left\n  };\n\n  var setPadding = function setPadding(dir) {\n    return function (v) {\n      var _a;\n\n      setContentStyle({\n        padding: paddingCss(_assign(_assign({}, p), (_a = {}, _a[dir] = v, _a)))\n      });\n    };\n  };\n\n  var topProps = _assign(_assign({}, commonProps), {\n    title: 'top',\n    value: top,\n    onValueChange: setPadding('top')\n  });\n\n  var rightProps = _assign(_assign({}, commonProps), {\n    title: 'right',\n    value: right,\n    onValueChange: setPadding('right')\n  });\n\n  var bottomProps = _assign(_assign({}, commonProps), {\n    title: 'bottom',\n    value: bottom,\n    onValueChange: setPadding('bottom')\n  });\n\n  var leftProps = _assign(_assign({}, commonProps), {\n    title: 'left',\n    value: left,\n    onValueChange: setPadding('left')\n  });\n\n  return createElement(SettingGroup, null, createElement(SettingTitle, null, \"Padding\"), createElement(SettingRow, null, createElement(SettingItemNumericInput, _assign({}, topProps)), createElement(SettingItemNumericInput, _assign({}, rightProps)), createElement(SettingItemNumericInput, _assign({}, bottomProps)), createElement(SettingItemNumericInput, _assign({}, leftProps))));\n}\n\nvar TopicThemeEditorRoot = styled.div(templateObject_1$k || (templateObject_1$k = __makeTemplateObject([\"\\n  height: 250px;\\n  overflow: auto;\\n\"], [\"\\n  height: 250px;\\n  overflow: auto;\\n\"])));\n\nfunction TopicThemeEditor(props) {\n  var topicStyle = props.topicStyle,\n      setTopicStyle = props.setTopicStyle;\n  var _a = topicStyle.contentStyle,\n      contentStyle = _a === void 0 ? {} : _a,\n      _b = topicStyle.linkStyle,\n      linkStyle = _b === void 0 ? {} : _b,\n      _c = topicStyle.subLinkStyle,\n      subLinkStyle = _c === void 0 ? {} : _c;\n\n  var setContentStyle = function setContentStyle(contentStyle) {\n    setTopicStyle({\n      contentStyle: contentStyle\n    });\n  };\n\n  var nProps = {\n    contentStyle: contentStyle,\n    setContentStyle: setContentStyle\n  };\n\n  var setLinkStyle = function setLinkStyle(linkStyle) {\n    setTopicStyle({\n      linkStyle: linkStyle\n    });\n  };\n\n  var setSubLinkStyle = function setSubLinkStyle(subLinkStyle) {\n    setTopicStyle({\n      subLinkStyle: subLinkStyle\n    });\n  };\n\n  var linkStyleEditorProps = {\n    showLinkStyle: false,\n    linkStyle: linkStyle,\n    subLinkStyle: subLinkStyle,\n    setLinkStyle: setLinkStyle,\n    setSubLinkStyle: setSubLinkStyle\n  };\n  return createElement(TopicThemeEditorRoot, null, createElement(BorderStyleEditor, _assign({}, nProps)), createElement(PaddingStyleEditor, _assign({}, nProps)), createElement(TextStyleEditor, _assign({}, nProps)), createElement(SettingGroup, null, createElement(SettingTitle, null, \"Background\"), createElement(SettingItemColorPicker, {\n    color: contentStyle.background,\n    handleColorChange: function handleColorChange(color) {\n      setContentStyle({\n        background: color\n      });\n    }\n  })), createElement(LinkStyleEditor, _assign({}, linkStyleEditorProps)));\n}\n\nvar templateObject_1$k;\nvar tabId = 'normal';\n\nfunction ThemeEditor(props) {\n  var _a = __read(useState(false), 2),\n      showExportDialog = _a[0],\n      setShowExportDialog = _a[1];\n\n  var _b = __read(useState(false), 2),\n      alertThemeError = _b[0],\n      setAlertThemeError = _b[1];\n\n  var model = props.model,\n      controller = props.controller;\n  var theme = model.config.theme;\n  var rootTopic = theme.rootTopic,\n      primaryTopic = theme.primaryTopic,\n      normalTopic = theme.normalTopic;\n\n  var setTheme = function setTheme(theme) {\n    controller.run('operation', _assign(_assign({}, props), {\n      opType: OpType.SET_THEME,\n      theme: clone(theme)\n    }));\n  };\n\n  var handleBackgroundColorChange = function handleBackgroundColorChange(background) {\n    setTheme(merge(theme, {\n      background: background\n    }));\n  };\n\n  var handleHighlightColorChange = function handleHighlightColorChange(highlightColor) {\n    setTheme(merge(theme, {\n      highlightColor: highlightColor\n    }));\n  };\n\n  var handleRandomColorChange = handleBooleanChange(function (randomColor) {\n    setTheme(merge(theme, {\n      randomColor: randomColor\n    }));\n  });\n\n  var setRootTopicStyle = function setRootTopicStyle(style) {\n    setTheme(merge(theme, {\n      rootTopic: style\n    }));\n  };\n\n  var setPrimaryTopicStyle = function setPrimaryTopicStyle(style) {\n    setTheme(merge(theme, {\n      primaryTopic: style\n    }));\n  };\n\n  var setNormalTopicStyle = function setNormalTopicStyle(style) {\n    setTheme(merge(theme, {\n      normalTopic: style\n    }));\n  };\n\n  var rootTopicEditorProps = {\n    topicStyle: rootTopic,\n    setTopicStyle: setRootTopicStyle\n  };\n  var rootTopicEditor = createElement(TopicThemeEditor, _assign({}, rootTopicEditorProps));\n  var primaryTopicEditorProps = {\n    topicStyle: primaryTopic,\n    setTopicStyle: setPrimaryTopicStyle\n  };\n  var primaryTopicEditor = createElement(TopicThemeEditor, _assign({}, primaryTopicEditorProps));\n  var normalTopicEditorProps = {\n    topicStyle: normalTopic,\n    setTopicStyle: setNormalTopicStyle\n  };\n  var normalTopicEditor = createElement(TopicThemeEditor, _assign({}, normalTopicEditorProps));\n  var tabsProps = {\n    id: tabId,\n    handleTabIdChange: function handleTabIdChange(id) {\n      tabId = id;\n    }\n  };\n  var topicThemes = createElement(SettingBoxContainer, null, createElement(Tabs, _assign({}, tabsProps), createElement(Tab, {\n    id: \"normal\",\n    title: \"NormalTopic\",\n    panel: normalTopicEditor\n  }), createElement(Tab, {\n    id: \"primary\",\n    title: \"PrimaryTopic\",\n    panel: primaryTopicEditor\n  }), createElement(Tab, {\n    id: \"root\",\n    title: \"RootTopic\",\n    panel: rootTopicEditor\n  })));\n\n  var handleExportTheme = function handleExportTheme(e) {\n    // setShowExportDialog(true);\n    var text = JSON.stringify(theme);\n    browserDownloadText(text, 'blink-mind-theme.json');\n  };\n\n  var handleImportTheme = function handleImportTheme(e) {\n    browserOpenFile('.json,.txt').then(function (txt) {\n      var t = JSON.parse(txt);\n\n      if (!isThemeType(t)) {\n        setAlertThemeError(true);\n        return;\n      }\n\n      setTheme(t);\n    });\n  };\n\n  var alertProps = {\n    isOpen: alertThemeError,\n    onClose: function onClose(e) {\n      setAlertThemeError(false);\n    }\n  };\n  var alert = createElement(Alert, _assign({}, alertProps), createElement(\"p\", null, \"File format error\"));\n  return createElement(PanelTabRoot, null, createElement(SettingGroup, null, createElement(SettingTitle, null, \"Global\"), createElement(SettingRow, null, createElement(SettingLabel, null, \"Background:\"), createElement(SettingItemColorPicker, {\n    color: theme.background,\n    handleColorChange: handleBackgroundColorChange\n  }), createElement(SettingLabel, null, \"Highlight:\"), createElement(SettingItemColorPicker, {\n    color: theme.highlightColor,\n    handleColorChange: handleHighlightColorChange\n  }), createElement(SettingLabel, null, \"Random Color:\"), createElement(StyledCheckbox, {\n    checked: theme.randomColor,\n    onChange: handleRandomColorChange\n  }))), topicThemes, createElement(SettingGroup, null, createElement(SettingItemButton, {\n    title: \"Export Theme\",\n    handleClick: handleExportTheme\n  }), createElement(SettingItemButton, {\n    title: \"Import Theme\",\n    handleClick: handleImportTheme\n  })), alert);\n}\n\nfunction RightTopPanelPlugin() {\n  var selectedTabId = 'topic-style';\n\n  var handleTabIdChange = function handleTabIdChange(tabId) {\n    selectedTabId = tabId;\n  };\n\n  return {\n    renderRightTopPanel: function renderRightTopPanel(props) {\n      var nProps = _assign(_assign({}, props), {\n        key: 'right-top-panel',\n        selectedTabId: selectedTabId,\n        handleTabIdChange: handleTabIdChange\n      });\n\n      return createElement(RightTopPanel, _assign({}, nProps));\n    },\n    renderRightTopPanelTabs: function renderRightTopPanelTabs(props) {\n      var controller = props.controller;\n      var styleEditorTab = controller.run('renderTopicStyleEditor', props);\n      var themeEditorTab = controller.run('renderThemeEditor', props);\n      return [styleEditorTab, themeEditorTab];\n    },\n    renderTopicStyleEditor: function renderTopicStyleEditor(props) {\n      var tProps = {\n        id: 'topic-style',\n        key: 'topic-style',\n        title: 'TopicStyle',\n        panel: createElement(StyleEditor, _assign({}, props))\n      };\n      return createElement(Tab, _assign({}, tProps));\n    },\n    renderThemeEditor: function renderThemeEditor(props) {\n      var tProps = {\n        id: 'theme-editor',\n        key: 'theme-editor',\n        title: 'Theme',\n        panel: createElement(ThemeEditor, _assign({}, props))\n      };\n      return createElement(Tab, _assign({}, tProps));\n    }\n  };\n}\n\nvar log$g = debug('plugin:utils');\n\nfunction UtilsPlugin() {\n  var tempValueMap = new Map();\n  var eventListenerMap = new Map();\n  return {\n    addTempValueChangeListener: function addTempValueChangeListener(props) {\n      var key = props.key,\n          listener = props.listener;\n\n      if (!eventListenerMap.has(key)) {\n        eventListenerMap.set(key, []);\n      }\n\n      eventListenerMap.get(key).push(listener);\n    },\n    removeTempValueChangeListener: function removeTempValueChangeListener(props) {\n      var key = props.key,\n          listener = props.listener;\n\n      if (eventListenerMap.has(key)) {\n        eventListenerMap[key] = eventListenerMap.get(key).filter(function (l) {\n          return l !== listener;\n        });\n      }\n    },\n    getTempValue: function getTempValue(props) {\n      var key = props.key;\n      log$g('getTempValue', key);\n      return tempValueMap.get(key);\n    },\n    setTempValue: function setTempValue(props) {\n      var e_1, _a;\n\n      var key = props.key,\n          value = props.value;\n      log$g('setTempValue', key);\n      tempValueMap.set(key, value);\n\n      if (eventListenerMap.has(key)) {\n        var listeners = eventListenerMap.get(key);\n\n        try {\n          for (var listeners_1 = __values(listeners), listeners_1_1 = listeners_1.next(); !listeners_1_1.done; listeners_1_1 = listeners_1.next()) {\n            var listener = listeners_1_1.value;\n            listener(value);\n          }\n        } catch (e_1_1) {\n          e_1 = {\n            error: e_1_1\n          };\n        } finally {\n          try {\n            if (listeners_1_1 && !listeners_1_1.done && (_a = listeners_1.return)) _a.call(listeners_1);\n          } finally {\n            if (e_1) throw e_1.error;\n          }\n        }\n      }\n    },\n    deleteTempValue: function deleteTempValue(props) {\n      var key = props.key;\n      log$g('deleteTempValue', key);\n      var value = tempValueMap.get(key);\n      tempValueMap.delete(key);\n      return value;\n    }\n  };\n}\n\nfunction ReactPlugin(options) {\n  return [RenderingPlugin(), UtilsPlugin(), ContextMenuPlugin(), RightTopPanelPlugin(), DragAndDropPlugin()];\n}\n\nvar log$h = debug('plugin:StylePlugin');\n\nfunction StylePlugin() {\n  var colorMap = new Map();\n  var colorIndex = 0;\n  return {\n    getTopicStyle: function getTopicStyle(props) {\n      var controller = props.controller;\n      return {\n        contentStyle: controller.run('getTopicContentStyle', props),\n        linkStyle: controller.run('getLinkStyle', props),\n        subLinkStyle: controller.run('getSubLinkStyle', props)\n      };\n    },\n    getTopicContentStyle: function getTopicContentStyle(props) {\n      var topicKey = props.topicKey,\n          model = props.model,\n          controller = props.controller;\n      log$h('getTopicContentStyle:', topicKey, model);\n      var visualLevel = model.getTopicVisualLevel(topicKey);\n      var theme = model.config.theme;\n      var themeStyle;\n      if (visualLevel === TopicVisualLevel.ROOT) themeStyle = theme.rootTopic;else if (visualLevel === TopicVisualLevel.PRIMARY) themeStyle = theme.primaryTopic;else themeStyle = theme.normalTopic;\n      themeStyle = _assign(_assign({}, theme.contentStyle), themeStyle.contentStyle);\n\n      if (theme.randomColor) {\n        var randomColor = controller.run('getRandomColor', props);\n        themeStyle = _assign(_assign({}, themeStyle), {\n          background: randomColor,\n          borderColor: randomColor,\n          subLinkStyle: _assign(_assign({}, themeStyle.subLinkStyle), {\n            lineColor: randomColor\n          })\n        });\n      }\n\n      var topic = model.getTopic(topicKey);\n\n      if (!topic.style) {\n        return themeStyle;\n      }\n\n      var customStyle = JSON.parse(topic.style);\n      return _assign(_assign({}, themeStyle), customStyle.contentStyle);\n    },\n    getLinkStyle: function getLinkStyle(props) {\n      var topicKey = props.topicKey,\n          model = props.model,\n          controller = props.controller;\n      log$h('getLinkStyle', topicKey);\n      var visualLevel = model.getTopicVisualLevel(topicKey);\n      var theme = model.config.theme;\n      var linkStyle = theme.linkStyle;\n      var presetStyle;\n      if (visualLevel === TopicVisualLevel.ROOT) presetStyle = theme.rootTopic.linkStyle;else if (visualLevel === TopicVisualLevel.PRIMARY) presetStyle = theme.primaryTopic.linkStyle;else presetStyle = theme.normalTopic.linkStyle;\n      linkStyle = _assign(_assign({}, linkStyle), presetStyle);\n      var topic = model.getTopic(topicKey);\n\n      if (topic.parentKey != null) {\n        var parentSubLinkStyle = controller.run('getSubLinkStyle', _assign(_assign({}, props), {\n          topicKey: topic.parentKey\n        }));\n        linkStyle = _assign(_assign({}, linkStyle), parentSubLinkStyle);\n      }\n\n      if (!topic.style) {\n        return linkStyle;\n      }\n\n      var customStyle = JSON.parse(topic.style);\n      return _assign(_assign({}, linkStyle), customStyle.linkStyle);\n    },\n    getSubLinkStyle: function getSubLinkStyle(props) {\n      var topicKey = props.topicKey,\n          model = props.model,\n          controller = props.controller;\n      log$h('getLinkStyle', topicKey);\n      var visualLevel = model.getTopicVisualLevel(topicKey);\n      var theme = model.config.theme;\n      var subLinkStyle = theme.linkStyle;\n      var presetStyle;\n      if (visualLevel === TopicVisualLevel.ROOT) presetStyle = theme.rootTopic.subLinkStyle;else if (visualLevel === TopicVisualLevel.PRIMARY) presetStyle = theme.primaryTopic.subLinkStyle;else presetStyle = theme.normalTopic.subLinkStyle;\n      subLinkStyle = _assign(_assign({}, subLinkStyle), presetStyle);\n      var topic = model.getTopic(topicKey); // color\n\n      if (theme.randomColor) {\n        var randomColor = controller.run('getRandomColor', props);\n        log$h(randomColor);\n        subLinkStyle = _assign(_assign({}, subLinkStyle), {\n          lineColor: randomColor\n        });\n      }\n\n      if (!topic.style) {\n        return subLinkStyle;\n      }\n\n      var customStyle = JSON.parse(topic.style);\n\n      var res = _assign(_assign({}, subLinkStyle), customStyle.subLinkStyle); // if (res.lineRadius == null) res.lineRadius = 5;\n\n\n      return res;\n    },\n    setTopicContentStyle: function setTopicContentStyle(props) {\n      var topicKey = props.topicKey,\n          controller = props.controller,\n          style = props.style,\n          model = props.model;\n      var topic = model.getTopic(topicKey);\n      var topicStyle = topic.style;\n      var styleObj = topicStyle ? JSON.parse(topicStyle) : {};\n\n      var newStyleObj = _assign(_assign({}, styleObj), {\n        contentStyle: _assign(_assign({}, styleObj.contentStyle), style)\n      });\n\n      if (!isEqual(styleObj, newStyleObj)) {\n        var newStyleStr = JSON.stringify(newStyleObj);\n        controller.run('operation', _assign(_assign({}, props), {\n          opType: OpType.SET_STYLE,\n          style: newStyleStr\n        }));\n      }\n    },\n    setLinkStyle: function setLinkStyle(props) {\n      var topicKey = props.topicKey,\n          controller = props.controller,\n          linkStyle = props.linkStyle,\n          model = props.model;\n      var topic = model.getTopic(topicKey);\n      var style = topic.style;\n      var styleObj = style ? JSON.parse(style) : {};\n\n      var newStyleObj = _assign(_assign({}, styleObj), {\n        linkStyle: _assign(_assign({}, styleObj.linkStyle), linkStyle)\n      });\n\n      if (!isEqual(styleObj, newStyleObj)) {\n        var newStyleStr = JSON.stringify(newStyleObj);\n        controller.run('operation', _assign(_assign({}, props), {\n          opType: OpType.SET_STYLE,\n          style: newStyleStr\n        }));\n      }\n    },\n    setSubLinkStyle: function setSubLinkStyle(props) {\n      var topicKey = props.topicKey,\n          controller = props.controller,\n          subLinkStyle = props.subLinkStyle,\n          model = props.model;\n      var topic = model.getTopic(topicKey);\n      var style = topic.style;\n      var styleObj = style ? JSON.parse(style) : {};\n\n      var newStyleObj = _assign(_assign({}, styleObj), {\n        subLinkStyle: _assign(_assign({}, styleObj.subLinkStyle), subLinkStyle)\n      });\n\n      if (!isEqual(styleObj, newStyleObj)) {\n        var newStyleStr = JSON.stringify(newStyleObj);\n        controller.run('operation', _assign(_assign({}, props), {\n          opType: OpType.SET_STYLE,\n          style: newStyleStr\n        }));\n      }\n    },\n    getTopicThemeStyle: function getTopicThemeStyle(props) {\n      var topicKey = props.topicKey,\n          model = props.model;\n      var visualLevel = model.getTopicVisualLevel(topicKey);\n      var theme = model.config.theme;\n      if (visualLevel === TopicVisualLevel.ROOT) return theme.rootTopic;\n      if (visualLevel === TopicVisualLevel.PRIMARY) return theme.primaryTopic;\n      return theme.normalTopic;\n    },\n    getRandomColor: function getRandomColor(props) {\n      var topicKey = props.topicKey;\n      if (colorMap.has(topicKey)) return colorMap.get(topicKey);\n      var colors = ['#00CC99', '#FFEE88', '#A167A5', '#E5F993', '#F5C396', '#DB995A', '#83BCFF', '#ED7B84', '#739E82', '#D3BCC0', '#FFA0FD', '#EFD3D7', '#C6878F'];\n      var color = colors[++colorIndex % colors.length];\n      colorMap.set(topicKey, color);\n      log$h('getRandomColor', topicKey, color);\n      return color;\n    },\n    clearAllCustomStyle: function clearAllCustomStyle(props) {\n      var model = props.model,\n          controller = props.controller;\n      var newModel = model.withMutations(function (model) {\n        model.topics.keySeq().forEach(function (key) {\n          model.setIn(['topics', key, 'style'], null);\n        });\n      });\n      controller.change(newModel);\n    }\n  };\n}\n\nfunction DefaultPlugin() {\n  return [ReactPlugin(), LayoutPlugin(), OperationPlugin(), StylePlugin(), EventPlugin(), HotKeyPlugin(), GetValuePlugin(), SimpleTextEditorPlugin()];\n}\n\nvar log$i = debug('node:Diagram');\n\nvar Diagram =\n/** @class */\nfunction (_super) {\n  __extends(Diagram, _super);\n\n  function Diagram() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.resolveController = memoizeOne(function (plugins, TheDefaultPlugin) {\n      if (plugins === void 0) {\n        plugins = [];\n      }\n\n      var defaultPlugin = TheDefaultPlugin();\n      _this.controller = new Controller({\n        plugins: [plugins, defaultPlugin],\n        construct: false,\n        onChange: _this.props.onChange\n      }); // this.controller.run('onConstruct');\n    });\n    return _this;\n  }\n\n  Diagram.prototype.getDiagramProps = function () {\n    return this.controller.run('getDiagramProps');\n  };\n\n  Diagram.prototype.openNewModel = function (newModel) {\n    var _this = this;\n\n    var props = this.getDiagramProps();\n    var model = props.model,\n        controller = props.controller;\n    controller.run('deleteRefKey', _assign(_assign({}, props), {\n      topicKey: model.rootTopicKey\n    }));\n    controller.run('operation', _assign(_assign({}, props), {\n      opType: OpType.EXPAND_TO,\n      topicKey: newModel.focusKey,\n      model: newModel,\n      callback: function callback() {\n        var props = _this.getDiagramProps();\n\n        var model = props.model;\n        controller.run('moveTopicToCenter', _assign(_assign({}, props), {\n          topicKey: model.focusKey\n        }));\n      }\n    }));\n  };\n\n  Diagram.prototype.render = function () {\n    var plugins = this.props.plugins;\n    this.resolveController(plugins, DefaultPlugin);\n    this.diagramProps = _assign(_assign({}, this.props), {\n      controller: this.controller\n    });\n    return this.controller.run('renderDiagram', this.diagramProps);\n  };\n\n  return Diagram;\n}(Component);\n\nexport { BaseWidget, Btn, CloseIcon, DefaultPlugin, Diagram, DragScrollWidget, EventKey, Flex, HotKeyName, HotKeyPlugin, Icon, IconBg, IconName, Margin, PanelTabRoot, PropKey, RefKey, SaveRef, ShowMenuIcon, StyledCheckbox, Title, TopicBlockIcon, ZIndex, browserDownloadFile, browserDownloadText, browserOpenFile, cancelEvent, center, centerPointX, centerPointY, centerX, centerY, collapseRefKey, contentEditorRefKey, contentRefKey, descEditorRefKey, dropAreaRefKey, getLinkKey, _getRelativeRect as getRelativeRect, getRelativeVector, iconClassName, linksRefKey, linksSvgRefKey, paddingCss, topicRefKey, topicWidgetRefKey };","import { BlockType } from '@blink-mind/core';\nimport { createElement } from 'react';\nimport { BaseWidget, descEditorRefKey } from '@blink-mind/renderer-react';\nimport RichMarkDownEditor from 'awehook-rich-markdown-editor';\nimport debug from 'debug';\nimport styled from 'styled-components';\nimport MarkdownSerializer from 'slate-md-serializer';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar _extendStatics = function extendStatics(d, b) {\n  _extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) {\n      if (b.hasOwnProperty(p)) d[p] = b[p];\n    }\n  };\n\n  return _extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  _extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar _assign = function __assign() {\n  _assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return _assign.apply(this, arguments);\n};\n\nfunction __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n}\n\nvar log = debug('node:topic-content-editor');\nvar NodeContent = styled.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  \", \";\\n\"], [\"\\n  \", \";\\n\"])), function (props) {\n  return !props.readOnly && \"\\n    // padding: 75px\\n    // min-width: 150px\\n    // min-height: 150px\\n  \";\n});\n\nvar RichTextEditor =\n/** @class */\nfunction (_super) {\n  __extends(RichTextEditor, _super);\n\n  function RichTextEditor(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.onMouseDown = function (e) {\n      e.stopPropagation();\n    };\n\n    _this.onMouseMove = function (e) {\n      e.stopPropagation();\n    };\n\n    _this.rootRef = function (saveRef) {\n      return function (ref) {\n        saveRef(ref);\n        _this.root = ref;\n      };\n    };\n\n    _this._handleClick = function (event) {\n      var wasOutside = !_this.root.contains(event.target);\n      wasOutside && _this.onClickOutSide(event);\n    };\n\n    _this.initState();\n\n    return _this;\n  }\n\n  RichTextEditor.prototype.initState = function () {\n    this.state = {\n      content: this.getContent()\n    };\n  };\n\n  RichTextEditor.prototype.getContent = function () {\n    var block = this.getCustomizeProps().block;\n    return block.data;\n  };\n\n  RichTextEditor.prototype.onChange = function (value) {\n    this.setState({\n      content: value\n    });\n  };\n\n  RichTextEditor.prototype.getCustomizeProps = function () {\n    return null;\n  };\n\n  RichTextEditor.prototype.componentDidMount = function () {\n    document.addEventListener('click', this._handleClick);\n  };\n\n  RichTextEditor.prototype.componentWillUnmount = function () {\n    document.removeEventListener('click', this._handleClick);\n  };\n\n  RichTextEditor.prototype.onClickOutSide = function (e) {};\n\n  RichTextEditor.prototype.render = function () {\n    var _a = this.props,\n        topicKey = _a.topicKey,\n        saveRef = _a.saveRef;\n\n    var _b = this.getCustomizeProps(),\n        readOnly = _b.readOnly,\n        getRefKeyFunc = _b.getRefKeyFunc,\n        placeholder = _b.placeholder;\n\n    log('readOnly:', readOnly);\n    var content = readOnly ? this.getContent() : this.state.content;\n    if (content == null) return null;\n    var key = getRefKeyFunc(topicKey);\n\n    var _c = this,\n        onMouseDown = _c.onMouseDown,\n        onMouseMove = _c.onMouseMove;\n\n    var richEditorProps = {\n      editorValue: content,\n      readOnly: readOnly,\n      onChange: this.onChange.bind(this),\n      placeholder: placeholder\n    };\n    var nodeContentProps = {\n      key: key,\n      ref: this.rootRef(saveRef(key)),\n      readOnly: readOnly,\n      onMouseDown: onMouseDown,\n      onMouseMove: onMouseMove\n    };\n    return createElement(NodeContent, _assign({}, nodeContentProps), createElement(RichMarkDownEditor, _assign({}, richEditorProps)));\n  };\n\n  return RichTextEditor;\n}(BaseWidget);\n\nvar templateObject_1;\n\nvar TopicDescEditor =\n/** @class */\nfunction (_super) {\n  __extends(TopicDescEditor, _super);\n\n  function TopicDescEditor() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  TopicDescEditor.prototype.initState = function () {\n    _super.prototype.initState.call(this);\n\n    var _a = this.props,\n        controller = _a.controller,\n        topicKey = _a.topicKey;\n    var key = \"topic-desc-data-\" + topicKey;\n    var value = this.state.content;\n    controller.run('setTempValue', {\n      key: key,\n      value: value\n    });\n  };\n\n  TopicDescEditor.prototype.getCustomizeProps = function () {\n    var _a = this.props,\n        model = _a.model,\n        topicKey = _a.topicKey;\n    var block = model.getTopic(topicKey).getBlock(BlockType.DESC).block;\n    var readOnly = model.editingDescKey !== topicKey; //TODO\n\n    var getRefKeyFunc = descEditorRefKey;\n    return {\n      block: block,\n      readOnly: readOnly,\n      getRefKeyFunc: getRefKeyFunc,\n      placeholder: 'write topic notes here'\n    };\n  };\n\n  TopicDescEditor.prototype.onChange = function (value) {\n    var _a = this.props,\n        controller = _a.controller,\n        topicKey = _a.topicKey;\n    var key = \"topic-desc-data-\" + topicKey;\n    controller.run('setTempValue', {\n      key: key,\n      value: value\n    });\n    this.setState({\n      content: value\n    });\n  };\n\n  return TopicDescEditor;\n}(RichTextEditor);\n\nvar markdownSerializer = new MarkdownSerializer();\n\nfunction RichTextEditorPlugin() {\n  return {\n    renderTopicDescEditor: function renderTopicDescEditor(props) {\n      return createElement(TopicDescEditor, _assign({}, props));\n    },\n    isBlockEmpty: function isBlockEmpty(props, next) {\n      var block = props.block,\n          controller = props.controller;\n\n      if (block.type === BlockType.CONTENT || block.type === BlockType.DESC) {\n        return block.data == null || controller.run('serializeBlockData', props) === '';\n      }\n\n      return next();\n    },\n    serializeBlockData: function serializeBlockData(props, next) {\n      var block = props.block;\n\n      if (block.type === BlockType.DESC) {\n        return typeof block.data === 'string' ? block.data : markdownSerializer.serialize(block.data);\n      }\n\n      return next();\n    }\n  };\n}\n\nexport default RichTextEditorPlugin;","import { Model, FocusMode, Config, Topic, Block } from '@blink-mind/core';\nimport debug from 'debug';\nimport { Map, isImmutable, List } from 'immutable';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\nvar _assign = function __assign() {\n  _assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return _assign.apply(this, arguments);\n};\n\nvar log = debug('plugin:json-serializer');\n\nfunction JsonSerializerPlugin() {\n  return {\n    serializeModel: function serializeModel(props, next) {\n      var nextRes = next();\n      if (nextRes != null) return nextRes;\n      var model = props.model,\n          controller = props.controller;\n      var obj = {\n        rootTopicKey: model.rootTopicKey,\n        editorRootTopicKey: model.editorRootTopicKey,\n        focusKey: model.focusKey,\n        extData: controller.run('serializeExtData', _assign(_assign({}, props), {\n          extData: model.extData\n        })),\n        topics: model.topics.valueSeq().toArray().map(function (topic) {\n          return controller.run('serializeTopic', _assign(_assign({}, props), {\n            topic: topic\n          }));\n        }),\n        config: controller.run('serializeConfig', _assign(_assign({}, props), {\n          config: model.config\n        })),\n        formatVersion: model.formatVersion\n      };\n      return obj;\n    },\n    deserializeModel: function deserializeModel(props, next) {\n      var nextRes = next();\n      if (nextRes != null) return nextRes;\n      var obj = props.obj,\n          controller = props.controller;\n\n      if (obj.formatVersion == null) {\n        obj.formatVersion = '0.0';\n      }\n\n      var rootTopicKey = obj.rootTopicKey,\n          editorRootTopicKey = obj.editorRootTopicKey,\n          focusKey = obj.focusKey,\n          topics = obj.topics,\n          config = obj.config,\n          extData = obj.extData,\n          formatVersion = obj.formatVersion;\n      var res = new Model();\n      res = res.merge({\n        rootTopicKey: rootTopicKey,\n        editorRootTopicKey: editorRootTopicKey == null ? rootTopicKey : editorRootTopicKey,\n        focusKey: focusKey,\n        extData: controller.run('deserializeExtData', _assign(_assign({}, props), {\n          extData: extData,\n          formatVersion: formatVersion\n        })),\n        config: controller.run('deserializeConfig', _assign(_assign({}, props), {\n          config: config,\n          formatVersion: formatVersion\n        })),\n        topics: controller.run('deserializeTopics', _assign(_assign({}, props), {\n          topics: topics,\n          formatVersion: formatVersion\n        })),\n        formatVersion: obj.formatVersion\n      });\n\n      if (res.focusKey == null) {\n        res = res.set('focusKey', res.rootTopicKey);\n      }\n\n      if (res.focusMode == null) {\n        res = res.set('focusMode', FocusMode.NORMAL);\n      }\n\n      log('deserializeModel', res);\n      return res;\n    },\n    serializeExtData: function serializeExtData(props, next) {\n      var nextRes = next();\n      if (nextRes != null) return nextRes;\n      var extData = props.extData,\n          controller = props.controller;\n      var res = {};\n      extData.forEach(function (v, k) {\n        res[k] = controller.run('serializeExtDataItem', {\n          props: props,\n          extDataKey: k,\n          extDataItem: v\n        });\n      });\n      return res;\n    },\n    deserializeExtData: function deserializeExtData(props, next) {\n      var nextRes = next();\n      if (nextRes != null) return nextRes;\n      var extData = props.extData,\n          controller = props.controller;\n      var res = Map();\n\n      for (var extDataKey in extData) {\n        res = res.set(extDataKey, controller.run('deserializeExtDataItem', _assign(_assign({}, props), {\n          extDataKey: extDataKey,\n          extDataItem: extData[extDataKey]\n        })));\n      }\n\n      return res;\n    },\n    serializeExtDataItem: function serializeExtDataItem(props, next) {\n      var nextRes = next();\n      if (nextRes != null) return nextRes;\n      var extDataItem = props.extDataItem;\n\n      if (isImmutable(extDataItem)) {\n        return extDataItem.toJS();\n      }\n\n      return extDataItem;\n    },\n    deserializeExtDataItem: function deserializeExtDataItem(props, next) {\n      var nextRes = next();\n      if (nextRes != null) return nextRes;\n      var extDataItem = props.extDataItem;\n      return extDataItem;\n    },\n    serializeConfig: function serializeConfig(props, next) {\n      var nextRes = next();\n      if (nextRes != null) return nextRes;\n      var config = props.config;\n      return config.toJS();\n    },\n    deserializeConfig: function deserializeConfig(props, next) {\n      var nextRes = next();\n      if (nextRes != null) return nextRes;\n      var config = props.config;\n      return new Config(config);\n    },\n    serializeTopic: function serializeTopic(props, next) {\n      var nextRes = next();\n      if (nextRes != null) return nextRes;\n      var topic = props.topic,\n          controller = props.controller;\n      return {\n        key: topic.key,\n        parentKey: topic.parentKey,\n        subKeys: topic.subKeys.toArray(),\n        collapse: topic.collapse,\n        style: topic.style,\n        blocks: topic.blocks.map(function (block) {\n          return controller.run('serializeBlock', _assign(_assign({}, props), {\n            block: block\n          }));\n        })\n      };\n    },\n    deserializeTopic: function deserializeTopic(props, next) {\n      var nextRes = next();\n      if (nextRes != null) return nextRes;\n      var topic = props.topic,\n          controller = props.controller;\n      var key = topic.key,\n          parentKey = topic.parentKey,\n          subKeys = topic.subKeys,\n          blocks = topic.blocks,\n          style = topic.style,\n          collapse = topic.collapse;\n      var res = new Topic();\n      res = res.merge({\n        key: key,\n        parentKey: parentKey,\n        subKeys: List(subKeys),\n        style: style,\n        collapse: collapse,\n        blocks: controller.run('deserializeBlocks', _assign(_assign({}, props), {\n          blocks: blocks\n        }))\n      });\n      return res;\n    },\n    deserializeTopics: function deserializeTopics(props, next) {\n      var nextRes = next();\n      if (nextRes != null) return nextRes;\n      var topics = props.topics,\n          controller = props.controller;\n      var res = Map();\n      res = res.withMutations(function (r) {\n        topics.forEach(function (topic) {\n          return r.set(topic.key, controller.run('deserializeTopic', _assign(_assign({}, props), {\n            topic: topic\n          })));\n        });\n      });\n      return res;\n    },\n    serializeBlock: function serializeBlock(props, next) {\n      var nextRes = next();\n      if (nextRes != null) return nextRes;\n      var block = props.block,\n          controller = props.controller;\n      var res = {\n        type: block.type,\n        data: controller.run('serializeBlockData', _assign({}, props))\n      };\n      return res;\n    },\n    serializeBlockData: function serializeBlockData(props, next) {\n      var nextRes = next();\n      if (nextRes != null) return nextRes;\n      var block = props.block;\n      return block.data;\n    },\n    deserializeBlock: function deserializeBlock(props, next) {\n      var nextRes = next();\n      if (nextRes != null) return nextRes;\n      var block = props.block,\n          controller = props.controller;\n      var type = block.type;\n      return new Block({\n        type: type,\n        data: controller.run('deserializeBlockData', _assign(_assign({}, props), {\n          block: block\n        }))\n      });\n    },\n    deserializeBlockData: function deserializeBlockData(props, next) {\n      var nextRes = next();\n      if (nextRes != null) return nextRes;\n      var block = props.block;\n      return block.data;\n    },\n    deserializeBlocks: function deserializeBlocks(props, next) {\n      var nextRes = next();\n      if (nextRes != null) return nextRes;\n      var blocks = props.blocks,\n          controller = props.controller;\n      var res = List();\n      res = res.withMutations(function (res) {\n        blocks.forEach(function (block) {\n          return res.push(controller.run('deserializeBlock', _assign(_assign({}, props), {\n            block: block\n          })));\n        });\n      });\n      return res;\n    }\n  };\n}\n\nexport { JsonSerializerPlugin };","import { ModelModifier, defaultTheme } from '@blink-mind/core';\nvar themeRandomColorSquare = {\n  name: 'default',\n  randomColor: true,\n  background: 'rgb(57,60,65)',\n  highlightColor: '#50C9CE',\n  marginH: 60,\n  marginV: 20,\n  contentStyle: {\n    lineHeight: '1.5',\n    fontSize: '16px'\n  },\n  linkStyle: {\n    lineRadius: 5,\n    lineType: 'curve',\n    lineWidth: '3px'\n  },\n  rootTopic: {\n    contentStyle: {\n      fontSize: '36px'\n    },\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: '3px'\n    }\n  },\n  primaryTopic: {\n    contentStyle: {\n      fontSize: '24px'\n    },\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: '3px'\n    }\n  },\n  normalTopic: {\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: '3px'\n    }\n  }\n};\nvar theme1 = {\n  name: 'theme1',\n  randomColor: false,\n  background: 'rgb(250,245,205)',\n  highlightColor: '#50C9CE',\n  marginH: 50,\n  marginV: 30,\n  contentStyle: {\n    lineHeight: '1.5'\n  },\n  linkStyle: {\n    lineRadius: 5\n  },\n  rootTopic: {\n    contentStyle: {\n      background: 'rgb(221, 170, 68)',\n      color: '#fff',\n      fontSize: '34px',\n      borderRadius: '5px',\n      padding: '16px 18px 16px 18px'\n    },\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: '2px',\n      lineColor: 'rgb(221, 170, 68)'\n    }\n  },\n  primaryTopic: {\n    contentStyle: {\n      background: '#e8eaec',\n      borderWidth: '2px',\n      borderStyle: 'solid',\n      borderColor: 'rgb(221, 170, 68)',\n      borderRadius: '5px',\n      fontSize: '17px',\n      padding: '10px 15px 10px 15px'\n    },\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: '2px',\n      lineColor: 'rgb(221, 170, 68)'\n    }\n  },\n  normalTopic: {\n    contentStyle: {\n      background: '#fff',\n      border: '1px solid #e8eaec',\n      borderRadius: '20px',\n      color: 'rgb(187, 136, 34)',\n      fontSize: '13px',\n      padding: '4px 10px'\n    },\n    subLinkStyle: {\n      lineType: 'round',\n      lineRadius: 5,\n      lineWidth: '1px',\n      lineColor: 'rgb(187, 136, 34)'\n    }\n  }\n};\nvar theme2 = {\n  name: 'theme2',\n  randomColor: false,\n  background: '#f8f8f8',\n  highlightColor: '#50C9CE',\n  marginH: 45,\n  marginV: 10,\n  contentStyle: {\n    lineHeight: '1.5'\n  },\n  linkStyle: {\n    lineRadius: 5\n  },\n  rootTopic: {\n    contentStyle: {\n      background: '#50C18A',\n      color: '#fff',\n      fontSize: '34px',\n      borderRadius: '5px',\n      padding: '16px 18px 16px 18px'\n    },\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: '2px',\n      lineColor: '#43a9ff'\n    }\n  },\n  primaryTopic: {\n    contentStyle: {\n      background: '#ffffff',\n      borderWidth: '1px',\n      borderStyle: 'solid',\n      borderColor: 'rgb(221, 170, 68)',\n      borderRadius: '5px',\n      color: 'rgb(103,103,103)',\n      fontSize: '14px',\n      padding: '6px 10px 5px 10px'\n    },\n    subLinkStyle: {\n      lineType: 'round',\n      lineRadius: 5,\n      lineWidth: '2px',\n      lineColor: '#43a9ff'\n    }\n  },\n  normalTopic: {\n    contentStyle: {\n      background: '#fff',\n      borderRadius: '5px',\n      color: 'rgb(103,103,103)',\n      fontSize: '13px',\n      padding: '3px 9px 4px',\n      boxShadow: '1px 1px 1px #ccc'\n    },\n    subLinkStyle: {\n      lineType: 'round',\n      lineRadius: 5,\n      lineWidth: '1px',\n      lineColor: '#43a9ff'\n    }\n  }\n};\nvar theme3 = {\n  name: 'theme3',\n  randomColor: false,\n  background: '#A9DEF9',\n  highlightColor: '#50C9CE',\n  marginH: 50,\n  marginV: 20,\n  contentStyle: {\n    lineHeight: '1.5'\n  },\n  linkStyle: {\n    lineRadius: 5\n  },\n  rootTopic: {\n    contentStyle: {\n      background: '#FF99C8',\n      color: '#fff',\n      fontSize: '34px',\n      borderRadius: '5px',\n      padding: '16px 18px 16px 18px'\n    },\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: '2px',\n      lineColor: '#43a9ff'\n    }\n  },\n  primaryTopic: {\n    contentStyle: {\n      background: '#FCF6BD',\n      borderWidth: '1px',\n      borderStyle: 'solid',\n      borderColor: '#E4C1F9',\n      borderRadius: '5px',\n      color: 'rgb(103,103,103)',\n      fontSize: '14px',\n      padding: '6px 10px 5px 10px'\n    },\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: '2px',\n      lineColor: '#43a9ff'\n    }\n  },\n  normalTopic: {\n    contentStyle: {\n      background: '#E4FDE1',\n      borderRadius: '5px',\n      color: 'rgb(103,103,103)',\n      fontSize: '13px',\n      padding: '3px 9px 4px',\n      boxShadow: '1px 1px 1px #ccc'\n    },\n    subLinkStyle: {\n      lineType: 'round',\n      lineRadius: 5,\n      lineWidth: '1px',\n      lineColor: '#43a9ff'\n    }\n  }\n};\nvar theme4 = {\n  name: 'theme3',\n  randomColor: false,\n  background: '#CCFBFE',\n  highlightColor: '#50C9CE',\n  marginH: 50,\n  marginV: 20,\n  contentStyle: {\n    lineHeight: '1.5'\n  },\n  linkStyle: {\n    lineRadius: 5\n  },\n  rootTopic: {\n    contentStyle: {\n      background: '#CD8987',\n      color: '#fff',\n      fontSize: '34px',\n      borderRadius: '5px',\n      padding: '16px 18px 16px 18px'\n    },\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: '2px',\n      lineColor: '#43a9ff'\n    }\n  },\n  primaryTopic: {\n    contentStyle: {\n      background: '#CDACA1',\n      borderWidth: '1px',\n      borderStyle: 'solid',\n      borderColor: '#E4C1F9',\n      borderRadius: '5px',\n      color: 'rgb(103,103,103)',\n      fontSize: '14px',\n      padding: '6px 10px 5px 10px'\n    },\n    subLinkStyle: {\n      lineType: 'line',\n      lineWidth: '2px',\n      lineColor: '#43a9ff'\n    }\n  },\n  normalTopic: {\n    contentStyle: {\n      background: '#CDCACC',\n      borderRadius: '5px',\n      color: 'rgb(103,103,103)',\n      fontSize: '13px',\n      padding: '3px 9px 4px',\n      boxShadow: '1px 1px 1px #ccc'\n    },\n    subLinkStyle: {\n      lineType: 'line',\n      lineRadius: 5,\n      lineWidth: '1px',\n      lineColor: '#43a9ff'\n    }\n  }\n};\n\nfunction ThemeSelectorPlugin() {\n  var themeMap = new Map([['default', defaultTheme], ['random-color-square', themeRandomColorSquare], ['theme1', theme1], ['theme2', theme2], ['theme3', theme3], ['theme4', theme4]]);\n  return {\n    getAllThemes: function getAllThemes(props) {\n      return themeMap;\n    },\n    setTheme: function setTheme(props) {\n      var model = props.model,\n          controller = props.controller,\n          themeKey = props.themeKey;\n      var allTheme = controller.run('getAllThemes', props);\n\n      if (!allTheme.has(themeKey)) {\n        throw new Error('setTheme: the theme key is not correct!');\n      }\n\n      var theme = allTheme.get(themeKey);\n      var newModel = ModelModifier.setTheme({\n        model: model,\n        theme: theme\n      });\n      controller.change(newModel);\n    }\n  };\n}\n\nexport { ThemeSelectorPlugin, theme1, theme2, theme3, theme4, themeRandomColorSquare };","import { OpType, FocusMode, ModelModifier } from '@blink-mind/core';\nimport { iconClassName, TopicBlockIcon, BaseWidget, Btn, Icon, IconName, cancelEvent } from '@blink-mind/renderer-react';\nimport { Alert, Tooltip, Position, Classes, Drawer, MenuDivider, MenuItem } from '@blueprintjs/core';\nimport { createElement, Component, Fragment } from 'react';\nimport { Topology } from 'topology-core';\nimport { registerNode } from 'topology-core/middles';\nimport { flowData, flowDataAnchors, flowDataIconRect, flowDataTextRect, flowSubprocess, flowSubprocessIconRect, flowSubprocessTextRect, flowDb, flowDbIconRect, flowDbTextRect, flowDocument, flowDocumentAnchors, flowDocumentIconRect, flowDocumentTextRect, flowInternalStorage, flowInternalStorageIconRect, flowInternalStorageTextRect, flowExternStorage, flowExternStorageAnchors, flowExternStorageIconRect, flowExternStorageTextRect, flowQueue, flowQueueIconRect, flowQueueTextRect, flowManually, flowManuallyAnchors, flowManuallyIconRect, flowManuallyTextRect, flowDisplay, flowDisplayAnchors, flowDisplayIconRect, flowDisplayTextRect, flowParallel, flowParallelAnchors, flowComment, flowCommentAnchors } from 'topology-flow-diagram';\nimport '@blink-mind/icons/iconfont/topology';\nimport styled from 'styled-components';\nimport { activityFinal, activityFinalIconRect, activityFinalTextRect, swimlaneV, swimlaneVIconRect, swimlaneVTextRect, swimlaneH, swimlaneHIconRect, swimlaneHTextRect, fork, forkHAnchors, forkIconRect, forkTextRect, forkVAnchors } from 'topology-activity-diagram';\nimport { simpleClass, simpleClassIconRect, simpleClassTextRect, interfaceClass, interfaceClassIconRect, interfaceClassTextRect } from 'topology-class-diagram';\nimport { lifeline, lifelineAnchors, lifelineIconRect, lifelineTextRect, sequenceFocus, sequenceFocusAnchors, sequenceFocusIconRect, sequenceFocusTextRect } from 'topology-sequence-diagram';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar _extendStatics = function extendStatics(d, b) {\n  _extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) {\n      if (b.hasOwnProperty(p)) d[p] = b[p];\n    }\n  };\n\n  return _extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  _extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar _assign = function __assign() {\n  _assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return _assign.apply(this, arguments);\n};\n\nfunction __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n}\n\nvar FOCUS_MODE_EDITING_TOPOLOGY = 'FOCUS_MODE_EDITING_TOPOLOGY';\nvar OP_TYPE_START_EDITING_TOPOLOGY = 'OP_TYPE_START_EDITING_TOPOLOGY';\nvar BLOCK_TYPE_TOPOLOGY = 'TOPOLOGY';\nvar REF_KEY_TOPOLOGY_DIAGRAM = 'TOPOLOGY_DIAGRAM';\nvar REF_KEY_TOPOLOGY_DIAGRAM_UTIL = 'TOPOLOGY_DIAGRAM_UTIL';\n\nfunction TopicBlockTopology(props) {\n  var controller = props.controller,\n      model = props.model,\n      topicKey = props.topicKey;\n\n  var onClick = function onClick(e) {\n    e.stopPropagation();\n    controller.run('operation', _assign(_assign({}, props), {\n      opType: OP_TYPE_START_EDITING_TOPOLOGY\n    }));\n  };\n\n  var isEditing = model.focusKey === topicKey && model.focusMode === FOCUS_MODE_EDITING_TOPOLOGY;\n  var block = model.getTopic(topicKey).getBlock(BLOCK_TYPE_TOPOLOGY).block;\n  if (!isEditing && !block) return null;\n  var iconProps = {\n    className: iconClassName('topology'),\n    onClick: onClick,\n    tabIndex: -1\n  };\n  return createElement(TopicBlockIcon, _assign({}, iconProps));\n}\n\nvar ToolsConfig = [{\n  group: 'Basic',\n  children: [{\n    name: 'rectangle',\n    icon: 'icon-rect',\n    data: {\n      text: 'Topology',\n      rect: {\n        width: 100,\n        height: 100\n      },\n      paddingLeft: 10,\n      paddingRight: 10,\n      paddingTop: 10,\n      paddingBottom: 10,\n      name: 'rectangle',\n      icon: \"\\uE64D\",\n      iconFamily: 'topology',\n      iconColor: '#2f54eb'\n    }\n  }, {\n    name: 'rectangle',\n    icon: 'icon-rectangle',\n    data: {\n      text: 'rectangle',\n      rect: {\n        width: 200,\n        height: 50\n      },\n      paddingLeft: 10,\n      paddingRight: 10,\n      paddingTop: 10,\n      paddingBottom: 10,\n      borderRadius: 0.1,\n      name: 'rectangle'\n    }\n  }, {\n    name: 'circle',\n    icon: 'icon-circle',\n    data: {\n      text: 'circle',\n      rect: {\n        width: 100,\n        height: 100\n      },\n      name: 'circle',\n      textMaxLine: 1\n    }\n  }, {\n    name: 'triangle',\n    icon: 'icon-triangle',\n    data: {\n      text: 'triangle',\n      rect: {\n        width: 100,\n        height: 100\n      },\n      name: 'triangle'\n    }\n  }, {\n    name: 'diamond',\n    icon: 'icon-diamond',\n    data: {\n      text: 'diamond',\n      rect: {\n        width: 100,\n        height: 100\n      },\n      name: 'diamond'\n    }\n  }, {\n    name: 'pentagon',\n    icon: 'icon-pentagon',\n    data: {\n      text: 'pentagon',\n      rect: {\n        width: 100,\n        height: 100\n      },\n      name: 'pentagon'\n    }\n  }, {\n    name: 'hexagon',\n    icon: 'icon-hexagon',\n    data: {\n      text: 'hexagon',\n      rect: {\n        width: 100,\n        height: 100\n      },\n      paddingTop: 10,\n      paddingBottom: 10,\n      name: 'hexagon'\n    }\n  }, {\n    name: 'pentagram',\n    icon: 'icon-pentagram',\n    data: {\n      text: 'pentagram',\n      rect: {\n        width: 100,\n        height: 100\n      },\n      name: 'pentagram'\n    }\n  }, {\n    name: 'left arrow',\n    icon: 'icon-arrow-left',\n    data: {\n      text: '',\n      rect: {\n        width: 200,\n        height: 100\n      },\n      name: 'leftArrow'\n    }\n  }, {\n    name: 'right arrow',\n    icon: 'icon-arrow-right',\n    data: {\n      text: '',\n      rect: {\n        width: 200,\n        height: 100\n      },\n      name: 'rightArrow'\n    }\n  }, {\n    name: 'bidirectional arrow',\n    icon: 'icon-twoway-arrow',\n    data: {\n      text: '',\n      rect: {\n        width: 200,\n        height: 100\n      },\n      name: 'twowayArrow'\n    }\n  }, {\n    name: 'line',\n    icon: 'icon-line',\n    data: {\n      text: 'line',\n      rect: {\n        width: 100,\n        height: 100\n      },\n      name: 'line'\n    }\n  }, {\n    name: 'cloud',\n    icon: 'icon-cloud',\n    data: {\n      text: 'cloud',\n      rect: {\n        width: 100,\n        height: 100\n      },\n      name: 'cloud'\n    }\n  }, {\n    name: 'message',\n    icon: 'icon-msg',\n    data: {\n      text: 'message',\n      rect: {\n        width: 100,\n        height: 100\n      },\n      paddingLeft: 10,\n      paddingRight: 10,\n      paddingTop: 10,\n      paddingBottom: 10,\n      name: 'message'\n    }\n  }, {\n    name: 'file',\n    icon: 'icon-file',\n    data: {\n      text: 'file',\n      rect: {\n        width: 80,\n        height: 100\n      },\n      paddingLeft: 10,\n      paddingRight: 10,\n      paddingTop: 10,\n      paddingBottom: 10,\n      name: 'file'\n    }\n  }, {\n    name: 'text',\n    icon: 'icon-text',\n    data: {\n      text: 'text',\n      rect: {\n        width: 160,\n        height: 30\n      },\n      name: 'text'\n    }\n  }, {\n    name: 'image',\n    icon: 'icon-image',\n    data: {\n      text: '',\n      rect: {\n        width: 100,\n        height: 100\n      },\n      name: 'image',\n      image: '/assets/img/logo.png'\n    }\n  }, {\n    name: 'cube',\n    icon: 'icon-cube',\n    data: {\n      rect: {\n        width: 50,\n        height: 70\n      },\n      is3D: true,\n      z: 10,\n      zRotate: 15,\n      fillStyle: '#ddd',\n      name: 'cube',\n      icon: \"\\uE63C\",\n      iconFamily: 'topology',\n      iconColor: '#777',\n      iconSize: 30\n    }\n  }, {\n    name: 'people',\n    icon: 'icon-people',\n    data: {\n      rect: {\n        width: 70,\n        height: 100\n      },\n      name: 'people'\n    }\n  }, {\n    name: 'multi media',\n    icon: 'icon-pc',\n    data: {\n      text: 'multi media',\n      rect: {\n        width: 200,\n        height: 200\n      },\n      paddingLeft: 10,\n      paddingRight: 10,\n      paddingTop: 10,\n      paddingBottom: 10,\n      // strokeStyle: 'transparent',\n      name: 'div'\n    }\n  }]\n}, {\n  group: 'Flow Graph',\n  children: [{\n    name: 'start/end',\n    icon: 'icon-flow-start',\n    data: {\n      text: 'start',\n      rect: {\n        width: 120,\n        height: 40\n      },\n      borderRadius: 0.5,\n      name: 'rectangle'\n    }\n  }, {\n    name: 'flow',\n    icon: 'icon-rectangle',\n    data: {\n      text: 'flow',\n      rect: {\n        width: 120,\n        height: 40\n      },\n      name: 'rectangle'\n    }\n  }, {\n    name: 'judgement',\n    icon: 'icon-diamond',\n    data: {\n      text: 'judgement',\n      rect: {\n        width: 120,\n        height: 60\n      },\n      name: 'diamond'\n    }\n  }, {\n    name: 'data',\n    icon: 'icon-flow-data',\n    data: {\n      text: 'data',\n      rect: {\n        width: 120,\n        height: 50\n      },\n      name: 'flowData'\n    }\n  }, {\n    name: 'prepare',\n    icon: 'icon-flow-ready',\n    data: {\n      text: 'prepare',\n      rect: {\n        width: 120,\n        height: 50\n      },\n      name: 'hexagon'\n    }\n  }, {\n    name: 'sub flow',\n    icon: 'icon-flow-subprocess',\n    data: {\n      text: 'sub flow',\n      rect: {\n        width: 120,\n        height: 50\n      },\n      name: 'flowSubprocess'\n    }\n  }, {\n    name: 'database',\n    icon: 'icon-db',\n    data: {\n      text: 'database',\n      rect: {\n        width: 80,\n        height: 120\n      },\n      name: 'flowDb'\n    }\n  }, {\n    name: 'document',\n    icon: 'icon-flow-document',\n    data: {\n      text: 'document',\n      rect: {\n        width: 120,\n        height: 100\n      },\n      name: 'flowDocument'\n    }\n  }, {\n    name: 'internal storage',\n    icon: 'icon-internal-storage',\n    data: {\n      text: 'internal storage',\n      rect: {\n        width: 120,\n        height: 80\n      },\n      name: 'flowInternalStorage'\n    }\n  }, {\n    name: 'external storage',\n    icon: 'icon-extern-storage',\n    data: {\n      text: 'external storage',\n      rect: {\n        width: 120,\n        height: 80\n      },\n      name: 'flowExternStorage'\n    }\n  }, {\n    name: 'queue',\n    icon: 'icon-flow-queue',\n    data: {\n      text: 'queue',\n      rect: {\n        width: 100,\n        height: 100\n      },\n      name: 'flowQueue'\n    }\n  }, {\n    name: 'input manually',\n    icon: 'icon-flow-manually',\n    data: {\n      text: 'input manually',\n      rect: {\n        width: 120,\n        height: 80\n      },\n      name: 'flowManually'\n    }\n  }, {\n    name: 'display',\n    icon: 'icon-flow-display',\n    data: {\n      text: 'display',\n      rect: {\n        width: 120,\n        height: 80\n      },\n      name: 'flowDisplay'\n    }\n  }, {\n    name: 'parallel',\n    icon: 'icon-flow-parallel',\n    data: {\n      text: 'parallel',\n      rect: {\n        width: 120,\n        height: 50\n      },\n      name: 'flowParallel'\n    }\n  }, {\n    name: 'comment',\n    icon: 'icon-flow-comment',\n    data: {\n      text: 'comment',\n      rect: {\n        width: 100,\n        height: 100\n      },\n      name: 'flowComment'\n    }\n  }]\n}, {\n  group: 'Activity Diagram',\n  children: [{\n    name: 'start',\n    icon: 'icon-inital',\n    data: {\n      text: '',\n      rect: {\n        width: 30,\n        height: 30\n      },\n      name: 'circle',\n      fillStyle: '#555',\n      strokeStyle: 'transparent'\n    }\n  }, {\n    name: 'end',\n    icon: 'icon-final',\n    data: {\n      text: '',\n      rect: {\n        width: 30,\n        height: 30\n      },\n      name: 'activityFinal'\n    }\n  }, {\n    name: 'action',\n    icon: 'icon-action',\n    data: {\n      text: 'action',\n      rect: {\n        width: 120,\n        height: 50\n      },\n      borderRadius: 0.25,\n      name: 'rectangle'\n    }\n  }, {\n    name: 'decision/merge',\n    icon: 'icon-diamond',\n    data: {\n      text: '',\n      rect: {\n        width: 120,\n        height: 50\n      },\n      name: 'diamond'\n    }\n  }, {\n    name: 'vertical swimming lane',\n    icon: 'icon-swimlane-v',\n    data: {\n      text: 'vertical swimming lane',\n      rect: {\n        width: 200,\n        height: 500\n      },\n      name: 'swimlaneV'\n    }\n  }, {\n    name: 'horizontal swimming lane',\n    icon: 'icon-swimlane-h',\n    data: {\n      text: 'horizontal swimming lane',\n      rect: {\n        width: 500,\n        height: 200\n      },\n      name: 'swimlaneH'\n    }\n  }, {\n    name: 'vertical fork/merge',\n    icon: 'icon-fork-v',\n    data: {\n      text: '',\n      rect: {\n        width: 10,\n        height: 150\n      },\n      name: 'forkV',\n      fillStyle: '#555',\n      strokeStyle: 'transparent'\n    }\n  }, {\n    name: 'horizontal fork/merge',\n    icon: 'icon-fork',\n    data: {\n      text: '',\n      rect: {\n        width: 150,\n        height: 10\n      },\n      name: 'forkH',\n      fillStyle: '#555',\n      strokeStyle: 'transparent'\n    }\n  }]\n}, {\n  group: 'Sequence Diagram && Class Diagram',\n  children: [{\n    name: 'lifeline',\n    icon: 'icon-lifeline',\n    data: {\n      text: 'lifeline',\n      rect: {\n        width: 150,\n        height: 400\n      },\n      name: 'lifeline'\n    }\n  }, {\n    name: 'activation',\n    icon: 'icon-focus',\n    data: {\n      text: '',\n      rect: {\n        width: 12,\n        height: 200\n      },\n      name: 'sequenceFocus'\n    }\n  }, {\n    name: 'simple class',\n    icon: 'icon-simple-class',\n    data: {\n      text: 'Topolgoy',\n      rect: {\n        width: 270,\n        height: 200\n      },\n      paddingTop: 40,\n      font: {\n        fontFamily: 'Arial',\n        color: '#222',\n        fontWeight: 'bold'\n      },\n      fillStyle: '#ffffba',\n      strokeStyle: '#7e1212',\n      name: 'simpleClass',\n      children: [{\n        text: '- name: string\\n+ setName(name: string): void',\n        name: 'text',\n        paddingLeft: 10,\n        paddingRight: 10,\n        paddingTop: 10,\n        paddingBottom: 10,\n        rectInParent: {\n          x: 0,\n          y: 0,\n          width: '100%',\n          height: '100%',\n          rotate: 0\n        },\n        font: {\n          fontFamily: 'Arial',\n          color: '#222',\n          textAlign: 'left',\n          textBaseline: 'top'\n        }\n      }]\n    }\n  }, {\n    name: 'class',\n    icon: 'icon-class',\n    data: {\n      text: 'Topolgoy',\n      rect: {\n        width: 270,\n        height: 200\n      },\n      paddingTop: 40,\n      font: {\n        fontFamily: 'Arial',\n        color: '#222',\n        fontWeight: 'bold'\n      },\n      fillStyle: '#ffffba',\n      strokeStyle: '#7e1212',\n      name: 'interfaceClass',\n      children: [{\n        text: '- name: string',\n        name: 'text',\n        paddingLeft: 10,\n        paddingRight: 10,\n        paddingTop: 10,\n        paddingBottom: 10,\n        rectInParent: {\n          x: 0,\n          y: 0,\n          width: '100%',\n          height: '50%',\n          rotate: 0\n        },\n        font: {\n          fontFamily: 'Arial',\n          color: '#222',\n          textAlign: 'left',\n          textBaseline: 'top'\n        }\n      }, {\n        text: '+ setName(name: string): void',\n        name: 'text',\n        paddingLeft: 10,\n        paddingRight: 10,\n        paddingTop: 10,\n        paddingBottom: 10,\n        rectInParent: {\n          x: 0,\n          y: '50%',\n          width: '100%',\n          height: '50%',\n          rotate: 0\n        },\n        font: {\n          fontFamily: 'Arial',\n          color: '#222',\n          textAlign: 'left',\n          textBaseline: 'top'\n        }\n      }]\n    }\n  }]\n}];\nvar Root = styled.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  position: relative;\\n  display: flex;\\n  width: 100%;\\n  height: 100%;\\n\"], [\"\\n  position: relative;\\n  display: flex;\\n  width: 100%;\\n  height: 100%;\\n\"])));\nvar Canvas = styled.div(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  flex: 1;\\n  width: initial;\\n  position: relative;\\n  overflow: auto;\\n  background: #fff;\\n\"], [\"\\n  flex: 1;\\n  width: initial;\\n  position: relative;\\n  overflow: auto;\\n  background: #fff;\\n\"])));\nvar Tools = styled.div(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  flex-shrink: 0;\\n  width: 1.75rem;\\n  background-color: #f8f8f8;\\n  border-right: 1px solid #d9d9d9;\\n  overflow-y: auto;\\n\"], [\"\\n  flex-shrink: 0;\\n  width: 1.75rem;\\n  background-color: #f8f8f8;\\n  border-right: 1px solid #d9d9d9;\\n  overflow-y: auto;\\n\"])));\nvar ToolTitle = styled.div(templateObject_4 || (templateObject_4 = __makeTemplateObject([\"\\n  color: #0d1a26;\\n  font-weight: 600;\\n  font-size: 0.12rem;\\n  padding: 0.05rem 0.1rem;\\n  margin-top: 0.08rem;\\n  border-bottom: 1px solid #ddd;\\n\\n  &:first-child {\\n    border-top: none;\\n  }\\n\"], [\"\\n  color: #0d1a26;\\n  font-weight: 600;\\n  font-size: 0.12rem;\\n  padding: 0.05rem 0.1rem;\\n  margin-top: 0.08rem;\\n  border-bottom: 1px solid #ddd;\\n\\n  &:first-child {\\n    border-top: none;\\n  }\\n\"])));\nvar ToolbarButtons = styled.div(templateObject_5 || (templateObject_5 = __makeTemplateObject([\"\\n  padding: 0.1rem 0;\\n  a {\\n    display: inline-block;\\n    color: @text-color;\\n    line-height: 1;\\n    width: 0.4rem;\\n    height: 0.4rem;\\n    text-align: center;\\n    text-decoration: none !important;\\n\\n    .iconfont {\\n      font-size: 0.24rem;\\n    }\\n  }\\n\"], [\"\\n  padding: 0.1rem 0;\\n  a {\\n    display: inline-block;\\n    color: @text-color;\\n    line-height: 1;\\n    width: 0.4rem;\\n    height: 0.4rem;\\n    text-align: center;\\n    text-decoration: none !important;\\n\\n    .iconfont {\\n      font-size: 0.24rem;\\n    }\\n  }\\n\"])));\n\nvar TopologyDiagram =\n/** @class */\nfunction (_super) {\n  __extends(TopologyDiagram, _super);\n\n  function TopologyDiagram() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      id: '',\n      data: null,\n      toolsConfig: ToolsConfig,\n      iconfont: {\n        fontSize: '0.24rem'\n      }\n    };\n    _this.canvasOptions = {};\n\n    _this.handleContextMenu = function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n    };\n\n    _this.onMessage = function (event, data) {\n      var getRef = _this.props.getRef;\n      var diagramUtil = getRef(REF_KEY_TOPOLOGY_DIAGRAM_UTIL);\n\n      switch (event) {\n        case 'resize':\n        case 'scale':\n        case 'locked':\n          if (_this.topology && diagramUtil) {\n            diagramUtil.setCanvasData(_this.topology.data);\n          }\n\n          break;\n      }\n    };\n\n    return _this;\n  }\n\n  TopologyDiagram.prototype.canvasRegister = function () {\n    registerNode('flowData', flowData, flowDataAnchors, flowDataIconRect, flowDataTextRect);\n    registerNode('flowSubprocess', flowSubprocess, null, flowSubprocessIconRect, flowSubprocessTextRect);\n    registerNode('flowDb', flowDb, null, flowDbIconRect, flowDbTextRect);\n    registerNode('flowDocument', flowDocument, flowDocumentAnchors, flowDocumentIconRect, flowDocumentTextRect);\n    registerNode('flowInternalStorage', flowInternalStorage, null, flowInternalStorageIconRect, flowInternalStorageTextRect);\n    registerNode('flowExternStorage', flowExternStorage, flowExternStorageAnchors, flowExternStorageIconRect, flowExternStorageTextRect);\n    registerNode('flowQueue', flowQueue, null, flowQueueIconRect, flowQueueTextRect);\n    registerNode('flowManually', flowManually, flowManuallyAnchors, flowManuallyIconRect, flowManuallyTextRect);\n    registerNode('flowDisplay', flowDisplay, flowDisplayAnchors, flowDisplayIconRect, flowDisplayTextRect);\n    registerNode('flowParallel', flowParallel, flowParallelAnchors, null, null);\n    registerNode('flowComment', flowComment, flowCommentAnchors, null, null); // activity\n\n    registerNode('activityFinal', activityFinal, null, activityFinalIconRect, activityFinalTextRect);\n    registerNode('swimlaneV', swimlaneV, null, swimlaneVIconRect, swimlaneVTextRect);\n    registerNode('swimlaneH', swimlaneH, null, swimlaneHIconRect, swimlaneHTextRect);\n    registerNode('forkH', fork, forkHAnchors, forkIconRect, forkTextRect);\n    registerNode('forkV', fork, forkVAnchors, forkIconRect, forkTextRect); // class\n\n    registerNode('simpleClass', simpleClass, null, simpleClassIconRect, simpleClassTextRect);\n    registerNode('interfaceClass', interfaceClass, null, interfaceClassIconRect, interfaceClassTextRect); // sequence\n\n    registerNode('lifeline', lifeline, lifelineAnchors, lifelineIconRect, lifelineTextRect);\n    registerNode('sequenceFocus', sequenceFocus, sequenceFocusAnchors, sequenceFocusIconRect, sequenceFocusTextRect);\n  };\n\n  TopologyDiagram.prototype.componentDidMount = function () {\n    this.canvasRegister();\n    this.canvasOptions.on = this.onMessage;\n    this.topology = new Topology('topology-canvas', this.canvasOptions);\n    this.openData();\n  };\n\n  TopologyDiagram.prototype.componentDidUpdate = function () {\n    this.openData();\n  };\n\n  TopologyDiagram.prototype.openData = function () {\n    var _a = this.props,\n        model = _a.model,\n        topicKey = _a.topicKey;\n    var topic = model.getTopic(topicKey);\n    var block = topic.getBlock(BLOCK_TYPE_TOPOLOGY).block;\n\n    if (block && block.data && block.data !== '') {\n      this.setState({\n        data: block.data\n      });\n      this.topology.open(block.data);\n    }\n  };\n\n  TopologyDiagram.prototype.onDrag = function (event, node) {\n    event.dataTransfer.setData('Text', JSON.stringify(node.data));\n  };\n\n  TopologyDiagram.prototype.renderTools = function () {\n    var _this = this;\n\n    return createElement(Tools, null, this.state.toolsConfig.map(function (item, index) {\n      return createElement(\"div\", {\n        key: index\n      }, createElement(ToolTitle, null, item.group), createElement(ToolbarButtons, null, //TODO\n      //@ts-ignore\n      item.children.map(function (btn, i) {\n        return createElement(\"a\", {\n          key: i,\n          title: btn.name,\n          draggable: true,\n          onDragStart: function onDragStart(ev) {\n            _this.onDrag(ev, btn);\n          }\n        }, createElement(\"i\", {\n          className: 'iconfont ' + btn.icon,\n          style: _this.state.iconfont\n        }));\n      })));\n    }));\n  };\n\n  TopologyDiagram.prototype.render = function () {\n    return createElement(Root, null, this.renderTools(), createElement(Canvas, {\n      id: \"topology-canvas\",\n      onContextMenu: this.handleContextMenu\n    }));\n  };\n\n  return TopologyDiagram;\n}(BaseWidget);\n\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5;\nvar Root$1 = styled.div(templateObject_1$1 || (templateObject_1$1 = __makeTemplateObject([\"\\n  position: absolute;\\n  background: white;\\n  right: 30px;\\n  bottom: 20px;\\n  border-radius: 2px;\\n  z-index: 3;\\n  display: flex;\\n  flex-direction: row;\\n  user-select: none;\\n\"], [\"\\n  position: absolute;\\n  background: white;\\n  right: 30px;\\n  bottom: 20px;\\n  border-radius: 2px;\\n  z-index: 3;\\n  display: flex;\\n  flex-direction: row;\\n  user-select: none;\\n\"])));\nvar Item_ = styled(Btn)(templateObject_2$1 || (templateObject_2$1 = __makeTemplateObject([\"\\n  margin: 10px;\\n\"], [\"\\n  margin: 10px;\\n\"])));\n\nvar Item = function Item(props) {\n  return createElement(Tooltip, {\n    content: props.tooltip,\n    position: Position.TOP,\n    className: Classes.ICON\n  }, createElement(Item_, {\n    onClick: props.onClick\n  }, props.children));\n};\n\nvar ZoomFactorSpan = styled.span(templateObject_3$1 || (templateObject_3$1 = __makeTemplateObject([\"\\n  display: inline-block;\\n  width: 80px;\\n  height: 18px;\\n\"], [\"\\n  display: inline-block;\\n  width: 80px;\\n  height: 18px;\\n\"])));\n\nvar TopologyDiagramUtils =\n/** @class */\nfunction (_super) {\n  __extends(TopologyDiagramUtils, _super);\n\n  function TopologyDiagramUtils(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.setCanvasData = function (canvasData) {\n      _this.setState({\n        canvasData: canvasData\n      });\n    };\n\n    _this.onClickResetZoom = function (e) {\n      var topology = _this.getTopology();\n\n      topology.scaleTo(1);\n    };\n\n    _this.state = {\n      deleteConfirm: false,\n      canvasData: null\n    };\n    return _this;\n  }\n\n  TopologyDiagramUtils.prototype.getTopology = function () {\n    var getRef = this.props.getRef;\n    return getRef(REF_KEY_TOPOLOGY_DIAGRAM).topology;\n  };\n\n  TopologyDiagramUtils.prototype.render = function () {\n    var _this = this;\n\n    var props = this.props;\n    var controller = props.controller;\n\n    var onClickDelete = function onClickDelete(e) {\n      _this.setState({\n        deleteConfirm: true\n      });\n    };\n\n    var deleteAlertProps = {\n      isOpen: this.state.deleteConfirm,\n      cancelButtonText: 'cancel',\n      onConfirm: function onConfirm(e) {\n        controller.run('operation', _assign(_assign({}, props), {\n          opType: OpType.DELETE_TOPIC_BLOCK,\n          blockType: BLOCK_TYPE_TOPOLOGY\n        }));\n      },\n      onCancel: function onCancel(e) {\n        _this.setState({\n          deleteConfirm: false\n        });\n      },\n      onClose: function onClose(e) {\n        _this.setState({\n          deleteConfirm: false\n        });\n      }\n    };\n    var canvasData = this.state.canvasData;\n    var scale = canvasData ? canvasData.scale : 1;\n    return createElement(Root$1, null, createElement(Item, {\n      onClick: this.onClickResetZoom,\n      tooltip: \"reset zoom\"\n    }, createElement(ZoomFactorSpan, null, \"zoom:\" + Math.floor(scale * 100) + \"%\")), createElement(Item, {\n      onClick: onClickDelete,\n      tooltip: \"delete this diagram\"\n    }, Icon(IconName.TRASH)), createElement(Alert, _assign({}, deleteAlertProps), createElement(\"p\", null, \"Are you confirm to delete this topology diagram?\")));\n  };\n\n  return TopologyDiagramUtils;\n}(Component);\n\nvar templateObject_1$1, templateObject_2$1, templateObject_3$1;\nvar DiagramWrapper = styled.div(templateObject_1$2 || (templateObject_1$2 = __makeTemplateObject([\"\\n  position: relative;\\n  overflow: auto;\\n  padding: 0px 0px 0px 5px;\\n  background: #88888850;\\n  height: 100%;\\n\"], [\"\\n  position: relative;\\n  overflow: auto;\\n  padding: 0px 0px 0px 5px;\\n  background: #88888850;\\n  height: 100%;\\n\"])));\nvar Title = styled.span(templateObject_2$2 || (templateObject_2$2 = __makeTemplateObject([\"\\n  padding: 0px 20px;\\n\"], [\"\\n  padding: 0px 20px;\\n\"])));\n\nfunction TopologyDrawer(props) {\n  var controller = props.controller,\n      topicKey = props.topicKey,\n      getRef = props.getRef,\n      saveRef = props.saveRef;\n\n  var onDiagramClose = function onDiagramClose(e) {\n    e.stopPropagation(); // const key = `topic-topology-data-${topicKey}`;\n    // const topologyData = controller.run('deleteTempValue', { key });\n\n    var diagram = getRef(REF_KEY_TOPOLOGY_DIAGRAM);\n    var topologyData = diagram.topology.data;\n    controller.run('operation', _assign(_assign({}, props), {\n      opType: OpType.SET_TOPIC_BLOCK,\n      topicKey: topicKey,\n      blockType: BLOCK_TYPE_TOPOLOGY,\n      data: topologyData,\n      focusMode: FocusMode.NORMAL\n    }));\n  };\n\n  var diagramProps = _assign(_assign({}, props), {\n    ref: saveRef(REF_KEY_TOPOLOGY_DIAGRAM)\n  });\n\n  var utilProps = _assign(_assign({}, props), {\n    ref: saveRef(REF_KEY_TOPOLOGY_DIAGRAM_UTIL)\n  });\n\n  return createElement(Drawer, {\n    title: createElement(Title, null, \"Topology Diagram Editor\"),\n    icon: Icon('topology'),\n    isOpen: true,\n    hasBackdrop: true,\n    backdropClassName: \"backdrop\",\n    backdropProps: {\n      onMouseDown: cancelEvent\n    },\n    canOutsideClickClose: false,\n    isCloseButtonShown: true,\n    onClose: onDiagramClose,\n    size: \"100%\"\n  }, createElement(DiagramWrapper, {\n    onClick: cancelEvent,\n    onDoubleClick: cancelEvent\n  }, createElement(TopologyDiagram, _assign({}, diagramProps)), createElement(TopologyDiagramUtils, _assign({}, utilProps))));\n}\n\nvar templateObject_1$2, templateObject_2$2;\n\nfunction startEditingTopology(_a) {\n  var model = _a.model,\n      topicKey = _a.topicKey;\n  var topic = model.getTopic(topicKey);\n  var block = topic.getBlock(BLOCK_TYPE_TOPOLOGY).block;\n\n  if (block == null || block.data == null) {\n    model = ModelModifier.setBlockData({\n      model: model,\n      topicKey: topicKey,\n      blockType: BLOCK_TYPE_TOPOLOGY,\n      data: ''\n    });\n  }\n\n  model = ModelModifier.focusTopic({\n    model: model,\n    topicKey: topicKey,\n    focusMode: FOCUS_MODE_EDITING_TOPOLOGY\n  });\n  return model;\n}\n\nfunction TopologyDiagramPlugin() {\n  return {\n    renderTopicBlock: function renderTopicBlock(props, next) {\n      var controller = props.controller,\n          block = props.block;\n\n      if (block.type === BLOCK_TYPE_TOPOLOGY) {\n        return controller.run('renderTopicBlockTopology', props);\n      }\n\n      return next();\n    },\n    renderTopicBlockTopology: function renderTopicBlockTopology(props) {\n      return createElement(TopicBlockTopology, _assign({}, props));\n    },\n    renderDrawer: function renderDrawer(props, next) {\n      var model = props.model;\n\n      if (model.focusMode === FOCUS_MODE_EDITING_TOPOLOGY) {\n        var topoProps = _assign(_assign({}, props), {\n          topicKey: model.focusKey,\n          key: 'topology-drawer'\n        });\n\n        return createElement(TopologyDrawer, _assign({}, topoProps));\n      }\n\n      return next();\n    },\n    customizeTopicContextMenu: function customizeTopicContextMenu(props, next) {\n      var controller = props.controller;\n\n      function editTopology(e) {\n        controller.run('operation', _assign(_assign({}, props), {\n          opType: OP_TYPE_START_EDITING_TOPOLOGY\n        }));\n      }\n\n      return createElement(Fragment, null, next(), createElement(MenuDivider, null), createElement(MenuItem, {\n        icon: Icon('topology'),\n        text: \"Edit Topology Diagram\",\n        onClick: editTopology\n      }));\n    },\n    getOpMap: function getOpMap(props, next) {\n      var opMap = next();\n      opMap.set(OP_TYPE_START_EDITING_TOPOLOGY, startEditingTopology);\n      return opMap;\n    }\n  };\n}\n\nexport default TopologyDiagramPlugin;","import { OpType, FocusMode, getAllSubTopicKeys, ModelModifier } from '@blink-mind/core';\nimport { ZIndex, Flex, PropKey, cancelEvent, iconClassName, TopicBlockIcon, StyledCheckbox, Icon } from '@blink-mind/renderer-react';\nimport { Button, Alert, PopoverInteractionKind, Popover, MenuDivider, MenuItem } from '@blueprintjs/core';\nimport { createElement, useState, Fragment } from 'react';\nimport styled from 'styled-components';\nimport { List, Map, Record } from 'immutable';\nimport { Omnibar } from '@blueprintjs/select';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar _extendStatics = function extendStatics(d, b) {\n  _extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) {\n      if (b.hasOwnProperty(p)) d[p] = b[p];\n    }\n  };\n\n  return _extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  _extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar _assign = function __assign() {\n  _assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return _assign.apply(this, arguments);\n};\n\nfunction __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n}\n\nfunction __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n}\n\nvar FOCUS_MODE_SET_REFERENCE_TOPICS = 'FOCUS_MODE_SET_REFERENCE_TOPICS'; // Topic\n\nvar OP_TYPE_START_SET_REFERENCE_TOPICS = 'OP_TYPE_START_SET_REFERENCE_TOPICS';\nvar OP_TYPE_SET_REFERENCE_TOPICS = 'OP_TYPE_SET_REFERENCE_TOPICS';\nvar EXT_DATA_KEY_TOPIC_REFERENCE = 'TOPIC_REFERENCE';\nvar EXT_KEY_TOPIC_REFERENCE = 'EXT_KEY_TOPIC_REFERENCE';\nvar Root = styled(ZIndex)(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  position: absolute;\\n  left: calc(50% - 150px);\\n  top: 30px;\\n  width: 300px;\\n  background: white;\\n  padding: 10px;\\n  user-select: none;\\n\"], [\"\\n  position: absolute;\\n  left: calc(50% - 150px);\\n  top: 30px;\\n  width: 300px;\\n  background: white;\\n  padding: 10px;\\n  user-select: none;\\n\"])));\nvar Title = styled.div(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  margin-bottom: 10px;\\n\"], [\"\\n  margin-bottom: 10px;\\n\"])));\n\nfunction AddReferenceTopicPanel(props) {\n  var zIndex = props.zIndex,\n      controller = props.controller,\n      topicKey = props.topicKey;\n\n  var onClickCancel = function onClickCancel(e) {\n    controller.run('clearSelectedReferenceKeys', props);\n    controller.run('enableOperation', props);\n    controller.run('operation', _assign(_assign({}, props), {\n      opType: OpType.SET_FOCUS_MODE,\n      focusMode: FocusMode.NORMAL\n    }));\n  };\n\n  var onClickConfirm = function onClickConfirm(e) {\n    var referenceKeys = controller.run('getSelectedReferenceKeys', props);\n    controller.run('enableOperation', props);\n    controller.run('operation', _assign(_assign({}, props), {\n      opArray: [{\n        opType: OP_TYPE_SET_REFERENCE_TOPICS,\n        topicKey: topicKey,\n        referenceKeys: referenceKeys\n      }, {\n        opType: OpType.FOCUS_TOPIC,\n        topicKey: topicKey,\n        focusMode: FocusMode.NORMAL\n      }]\n    }));\n    controller.run('clearSelectedReferenceKeys', props);\n  };\n\n  return createElement(Root, {\n    zIndex: zIndex\n  }, createElement(Title, null, \"Please select the topics you want to reference. After selection, click the confirm button.\"), createElement(Flex, {\n    justifyContent: 'space-around'\n  }, createElement(Button, {\n    onClick: onClickConfirm\n  }, \"Confirm\"), createElement(Button, {\n    onClick: onClickCancel\n  }, \"Cancel\")));\n}\n\nvar templateObject_1, templateObject_2;\nvar defaultReferenceRecord = {\n  keyList: List(),\n  dataMap: Map()\n};\n\nvar ReferenceRecord =\n/** @class */\nfunction (_super) {\n  __extends(ReferenceRecord, _super);\n\n  function ReferenceRecord() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Object.defineProperty(ReferenceRecord.prototype, \"keyList\", {\n    get: function get() {\n      return this.get('keyList');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ReferenceRecord.prototype, \"dataMap\", {\n    get: function get() {\n      return this.get('dataMap');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return ReferenceRecord;\n}(Record(defaultReferenceRecord));\n\nvar defaultExtDataReferenceRecord = {\n  reference: Map()\n};\n\nvar ExtDataReference =\n/** @class */\nfunction (_super) {\n  __extends(ExtDataReference, _super);\n\n  function ExtDataReference() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Object.defineProperty(ExtDataReference.prototype, \"reference\", {\n    get: function get() {\n      return this.get('reference');\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ExtDataReference.prototype.getReferenceKeys = function (topicKey) {\n    if (this.reference.has(topicKey)) {\n      return this.reference.get(topicKey).keyList.toArray();\n    }\n\n    return [];\n  };\n\n  ExtDataReference.prototype.getReferencedKeys = function (topicKey) {\n    var res = [];\n    this.reference.forEach(function (v, k) {\n      if (v.keyList.includes(topicKey)) {\n        res.push(k);\n      }\n    });\n    return res;\n  };\n\n  return ExtDataReference;\n}(Record(defaultExtDataReferenceRecord)); // TODO \n\n\nfunction setReferenceTopicKeys(_a) {\n  var model = _a.model,\n      topicKey = _a.topicKey,\n      referenceKeys = _a.referenceKeys;\n  var extData = model.getExtDataItem(EXT_DATA_KEY_TOPIC_REFERENCE, ExtDataReference);\n  var referenceRecord = extData.reference.get(topicKey) || new ReferenceRecord();\n  referenceRecord = referenceRecord.set('keyList', List(referenceKeys));\n  extData = extData.setIn(['reference', topicKey], referenceRecord);\n  model = model.setIn(['extData', EXT_DATA_KEY_TOPIC_REFERENCE], extData);\n  return model;\n}\n\nvar Root$1 = styled.div(templateObject_1$1 || (templateObject_1$1 = __makeTemplateObject([\"\\n  display: flex;\\n  width: 380px;\\n  margin: 10px;\\n  justify-content: center;\\n  align-items: center;\\n\"], [\"\\n  display: flex;\\n  width: 380px;\\n  margin: 10px;\\n  justify-content: center;\\n  align-items: center;\\n\"])));\nvar Content = styled.div(templateObject_2$1 || (templateObject_2$1 = __makeTemplateObject([\"\\n  width: 300px;\\n  text-decoration: underline;\\n  cursor: pointer;\\n\"], [\"\\n  width: 300px;\\n  text-decoration: underline;\\n  cursor: pointer;\\n\"])));\nvar ButtonPlace = styled.div(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  width: 80px;\\n\"], [\"\\n  width: 80px;\\n\"])));\n\nfunction ReferenceTopicThumbnail(props) {\n  var controller = props.controller,\n      refKey = props.refKey,\n      refType = props.refType,\n      removeHandler = props.removeHandler;\n\n  var _a = __read(useState(false), 2),\n      deleteConfirm = _a[0],\n      setDeleteConfirm = _a[1];\n\n  var onClick = function onClick(e) {\n    e.stopPropagation();\n    controller.run('focusTopicAndMoveToCenter', _assign(_assign({}, props), {\n      topicKey: refKey\n    }));\n  };\n\n  var onClickRemove = function onClickRemove(e) {\n    setDeleteConfirm(true);\n  };\n\n  var content = controller.getValue(PropKey.TOPIC_TITLE, _assign(_assign({}, props), {\n    topicKey: refKey,\n    maxLength: 100\n  }));\n  var deleteAlertProps = {\n    isOpen: deleteConfirm,\n    cancelButtonText: 'cancel',\n    onConfirm: function onConfirm(e) {\n      removeHandler(e);\n    },\n    onCancel: function onCancel(e) {\n      setDeleteConfirm(false);\n    },\n    onClose: function onClose(e) {\n      setDeleteConfirm(false);\n    }\n  };\n  return createElement(Root$1, null, createElement(Content, {\n    onClick: onClick\n  }, content), createElement(ButtonPlace, null, refType === 'reference' && createElement(Fragment, null, createElement(Button, {\n    onClick: onClickRemove\n  }, \"Remove\"), createElement(Alert, _assign({}, deleteAlertProps), createElement(\"p\", null, \"Are you confirm to remove this reference?\")))));\n}\n\nvar templateObject_1$1, templateObject_2$1, templateObject_3;\nvar Root$2 = styled.div(templateObject_1$2 || (templateObject_1$2 = __makeTemplateObject([\"\"], [\"\"])));\nvar Group = styled.div(templateObject_2$2 || (templateObject_2$2 = __makeTemplateObject([\"\\n  padding: 10px;\\n\"], [\"\\n  padding: 10px;\\n\"])));\nvar GroupList = styled.div(templateObject_3$1 || (templateObject_3$1 = __makeTemplateObject([\"\\n  max-height: 200px;\\n  overflow: auto;\\n\"], [\"\\n  max-height: 200px;\\n  overflow: auto;\\n\"])));\nvar GroupTitle = styled.div(templateObject_4 || (templateObject_4 = __makeTemplateObject([\"\\n  font-size: 20px;\\n  color: #106ba3;\\n\"], [\"\\n  font-size: 20px;\\n  color: #106ba3;\\n\"])));\nvar GotoBtn = styled.div(templateObject_5 || (templateObject_5 = __makeTemplateObject([\"\\n  text-decoration: underline;\\n  color: #106ba3;\\n  cursor: pointer;\\n\"], [\"\\n  text-decoration: underline;\\n  color: #106ba3;\\n  cursor: pointer;\\n\"])));\n\nfunction ReferenceTopicList(props) {\n  var topicKey = props.topicKey,\n      controller = props.controller,\n      model = props.model;\n  var extData = model.extData.get(EXT_DATA_KEY_TOPIC_REFERENCE);\n\n  var removeReference = function removeReference(refKey) {\n    return function (e) {\n      e.stopPropagation();\n      var keyList = extData.reference.get(topicKey).keyList;\n      controller.run('operation', _assign(_assign({}, props), {\n        opArray: [{\n          opType: OP_TYPE_SET_REFERENCE_TOPICS,\n          topicKey: topicKey,\n          focusMode: FocusMode.NORMAL,\n          referenceKeys: keyList.delete(keyList.indexOf(refKey)).toArray()\n        }]\n      }));\n    };\n  };\n\n  var referenceKeys = extData.getReferenceKeys(topicKey);\n  var referenceGroup = referenceKeys.length === 0 ? null : createElement(Group, null, createElement(GroupTitle, null, \"Reference Topics:\"), createElement(GroupList, null, referenceKeys.map(function (key) {\n    var thumbProps = _assign(_assign({}, props), {\n      key: key,\n      refKey: key,\n      refType: 'reference',\n      removeHandler: removeReference(key)\n    }); //@ts-ignore\n\n\n    return createElement(ReferenceTopicThumbnail, _assign({}, thumbProps));\n  })));\n  var referencedKeys = extData.getReferencedKeys(topicKey);\n  var referencedGroup = referencedKeys.length === 0 ? null : createElement(Group, null, createElement(GroupTitle, null, \"Referenced Topics:\"), createElement(GroupList, null, referencedKeys.map(function (key) {\n    var thumbProps = _assign(_assign({}, props), {\n      key: key,\n      refKey: key,\n      refType: 'referenced'\n    }); //@ts-ignore\n\n\n    return createElement(ReferenceTopicThumbnail, _assign({}, thumbProps));\n  })));\n\n  var onClickGotoOriginTopic = function onClickGotoOriginTopic(e) {\n    e.stopPropagation();\n    controller.run('focusTopicAndMoveToCenter', props);\n  };\n\n  var currentTopic = model.focusKey !== topicKey && createElement(Group, null, createElement(GotoBtn, {\n    onClick: onClickGotoOriginTopic\n  }, \"Goto Origin Topic\"));\n  return createElement(Root$2, {\n    onMouseDown: cancelEvent\n  }, referenceGroup, referencedGroup, currentTopic);\n}\n\nvar templateObject_1$2, templateObject_2$2, templateObject_3$1, templateObject_4, templateObject_5;\n\nfunction TopicExtReference(props) {\n  var model = props.model,\n      topicKey = props.topicKey;\n  var extData = model.extData.get(EXT_DATA_KEY_TOPIC_REFERENCE) || new ExtDataReference();\n  var refRecord = extData.reference.get(topicKey);\n  var referencedKeys = [];\n  extData.reference.forEach(function (v, k) {\n    if (v.keyList.includes(topicKey)) referencedKeys.push(k);\n  });\n  if ((refRecord == null || refRecord.keyList.size === 0) && referencedKeys.length === 0) return null;\n  var iconProps = {\n    className: iconClassName('reference'),\n    tabIndex: -1\n  };\n  var icon = createElement(TopicBlockIcon, _assign({}, iconProps));\n  var tooltipContent = createElement(ReferenceTopicList, _assign({}, props));\n  var tooltipProps = {\n    autoFocus: false,\n    content: tooltipContent,\n    target: icon,\n    interactionKind: PopoverInteractionKind.CLICK,\n    hoverOpenDelay: 500\n  };\n  return createElement(Popover, _assign({}, tooltipProps));\n}\n\nfunction TopicReferenceCheckbox(props) {\n  var topicKey = props.topicKey,\n      selectedTopicKeys = props.selectedTopicKeys;\n  var a = selectedTopicKeys.has(topicKey);\n\n  var _a = __read(useState(a), 2),\n      checked = _a[0],\n      setChecked = _a[1];\n\n  var checkboxProps = {\n    checked: checked,\n    onChange: function onChange() {\n      if (selectedTopicKeys.has(topicKey)) {\n        selectedTopicKeys.delete(topicKey);\n      } else {\n        selectedTopicKeys.add(topicKey);\n      }\n\n      setChecked(!checked);\n    }\n  };\n  return createElement(StyledCheckbox, _assign({}, checkboxProps));\n}\n\nfunction TopicReferencePlugin() {\n  var selectedTopicKeys = new Set();\n\n  function startSetReferenceTopics(_a) {\n    var model = _a.model,\n        topicKey = _a.topicKey;\n    var extData = model.getExtDataItem(EXT_DATA_KEY_TOPIC_REFERENCE, ExtDataReference);\n    selectedTopicKeys = new Set(extData.getReferenceKeys(topicKey));\n    model = ModelModifier.focusTopic({\n      model: model,\n      topicKey: topicKey,\n      focusMode: FOCUS_MODE_SET_REFERENCE_TOPICS\n    });\n    return model;\n  }\n\n  return {\n    customizeTopicContextMenu: function customizeTopicContextMenu(props, next) {\n      var controller = props.controller;\n\n      function onClickSetReferenceTopics(e) {\n        controller.run('operation', _assign(_assign({}, props), {\n          opType: OP_TYPE_START_SET_REFERENCE_TOPICS\n        }));\n        controller.run('disableOperation', _assign(_assign({}, props), {\n          whiteList: [OpType.TOGGLE_COLLAPSE]\n        }));\n      }\n\n      return createElement(Fragment, null, next(), createElement(MenuDivider, null), createElement(MenuItem, {\n        key: EXT_KEY_TOPIC_REFERENCE,\n        icon: Icon('reference'),\n        text: \"Set Reference Topics\",\n        onClick: onClickSetReferenceTopics\n      }));\n    },\n    getOpMap: function getOpMap(props, next) {\n      var opMap = next();\n      opMap.set(OP_TYPE_START_SET_REFERENCE_TOPICS, startSetReferenceTopics);\n      opMap.set(OP_TYPE_SET_REFERENCE_TOPICS, setReferenceTopicKeys);\n      return opMap;\n    },\n    beforeOpFunction: function beforeOpFunction(props, next) {\n      var model = next();\n      var opType = props.opType,\n          topicKey = props.topicKey; // beforeOpFunction\n\n      if (opType === OpType.DELETE_TOPIC && topicKey !== model.editorRootTopicKey) {\n        var allDeleteKeys = getAllSubTopicKeys(model, topicKey);\n        allDeleteKeys.push(topicKey);\n        var extData_1 = model.getExtDataItem(EXT_DATA_KEY_TOPIC_REFERENCE, ExtDataReference);\n        var reference_1 = extData_1.reference; // Key\n\n        allDeleteKeys.forEach(function (deleteKey) {\n          var referencedKeys = extData_1.getReferencedKeys(deleteKey); // \n\n          reference_1 = reference_1.withMutations(function (reference) {\n            referencedKeys.forEach(function (v) {\n              reference.updateIn([v, 'keyList'], function (keyList) {\n                return keyList.delete(keyList.indexOf(deleteKey));\n              });\n            });\n          }); // \n\n          if (reference_1.has(deleteKey)) {\n            reference_1 = reference_1.delete(deleteKey);\n          }\n        });\n        extData_1 = extData_1.set('reference', reference_1);\n        model = model.setIn(['extData', EXT_DATA_KEY_TOPIC_REFERENCE], extData_1);\n      }\n\n      return model;\n    },\n    renderDiagramCustomize: function renderDiagramCustomize(props, next) {\n      var model = props.model,\n          controller = props.controller;\n      var zIndex = controller.getValue(PropKey.DIAGRAM_CUSTOMIZE_BASE_Z_INDEX) + 2;\n      var res = next();\n\n      if (model.focusMode === FOCUS_MODE_SET_REFERENCE_TOPICS) {\n        var panelProps = _assign(_assign({}, props), {\n          zIndex: zIndex,\n          topicKey: model.focusKey,\n          key: 'AddReferenceTopicPanel'\n        });\n\n        res.push(createElement(AddReferenceTopicPanel, _assign({}, panelProps)));\n      }\n\n      return res;\n    },\n    renderTopicContentOthers: function renderTopicContentOthers(props, next) {\n      var model = props.model,\n          topicKey = props.topicKey,\n          controller = props.controller;\n      var res = next();\n      res.push(controller.run('renderTopicExtReference', _assign(_assign({}, props), {\n        key: EXT_KEY_TOPIC_REFERENCE + '-icon'\n      })));\n\n      if (model.focusMode === FOCUS_MODE_SET_REFERENCE_TOPICS && model.focusKey !== topicKey) {\n        var checkBoxProps = _assign(_assign({}, props), {\n          key: 'checkbox',\n          selectedTopicKeys: selectedTopicKeys\n        });\n\n        var checkbox = createElement(TopicReferenceCheckbox, _assign({}, checkBoxProps));\n        res.push(checkbox);\n      }\n\n      return res;\n    },\n    renderTopicExtReference: function renderTopicExtReference(props, next) {\n      return createElement(TopicExtReference, _assign({}, props));\n    },\n    clearSelectedReferenceKeys: function clearSelectedReferenceKeys() {\n      selectedTopicKeys.clear();\n    },\n    getSelectedReferenceKeys: function getSelectedReferenceKeys() {\n      return Array.from(selectedTopicKeys);\n    },\n    //TODO\n    deserializeExtDataItem: function deserializeExtDataItem(props, next) {\n      var extDataKey = props.extDataKey,\n          extDataItem = props.extDataItem;\n\n      if (extDataKey === EXT_DATA_KEY_TOPIC_REFERENCE) {\n        var extDataReference = new ExtDataReference();\n\n        var _loop_1 = function _loop_1(key) {\n          var item = extDataItem.reference[key];\n          var referenceRecord = new ReferenceRecord({\n            keyList: List(item.keyList),\n            dataMap: Map(item.dataMap)\n          });\n          extDataReference = extDataReference.update('reference', function (reference) {\n            return reference.set(key, referenceRecord);\n          });\n        };\n\n        for (var key in extDataItem.reference) {\n          _loop_1(key);\n        }\n\n        return extDataReference;\n      }\n\n      return next();\n    }\n  };\n}\n\nvar NavOmniBar = Omnibar.ofType();\nvar StyledNavOmniBar = styled(NavOmniBar)(templateObject_1$3 || (templateObject_1$3 = __makeTemplateObject([\"\\n  top: 20%;\\n  left: 25% !important;\\n  width: 50% !important;\\n\"], [\"\\n  top: 20%;\\n  left: 25% !important;\\n  width: 50% !important;\\n\"])));\nvar TopicTitle = styled.div(templateObject_2$3 || (templateObject_2$3 = __makeTemplateObject([\"\\n  margin: 0 5px;\\n  padding: 10px 5px;\\n  width: 100%;\\n  font-size: 16px;\\n  cursor: pointer;\\n  &:hover {\\n    background: #e3e8ec;\\n  }\\n\"], [\"\\n  margin: 0 5px;\\n  padding: 10px 5px;\\n  width: 100%;\\n  font-size: 16px;\\n  cursor: pointer;\\n  &:hover {\\n    background: #e3e8ec;\\n  }\\n\"])));\nvar StyledPopover = styled(Popover)(templateObject_3$2 || (templateObject_3$2 = __makeTemplateObject([\"\\n  display: block;\\n\"], [\"\\n  display: block;\\n\"])));\nvar Tip = styled.div(templateObject_4$1 || (templateObject_4$1 = __makeTemplateObject([\"\\n  padding: 10px;\\n  font-size: 16px;\\n  //max-width: 800px;\\n  //max-height: 600px;\\n  overflow: auto;\\n\"], [\"\\n  padding: 10px;\\n  font-size: 16px;\\n  //max-width: 800px;\\n  //max-height: 600px;\\n  overflow: auto;\\n\"])));\nvar TipContent = styled.div(templateObject_5$1 || (templateObject_5$1 = __makeTemplateObject([\"\\n  white-space: break-spaces;\\n\"], [\"\\n  white-space: break-spaces;\\n\"])));\nvar INPUT_PROPS = {\n  placeholder: 'Search'\n};\n\nfunction SearchPanel(props) {\n  var model = props.model,\n      setSearchWord = props.setSearchWord,\n      controller = props.controller;\n\n  var onClose = function onClose() {\n    controller.run('operation', _assign(_assign({}, props), {\n      opType: OpType.SET_FOCUS_MODE,\n      focusMode: FocusMode.NORMAL\n    }));\n  };\n\n  var getAllSections = function getAllSections() {\n    var res = [];\n    model.topics.forEach(function (topic, topicKey) {\n      res.push({\n        key: topicKey,\n        title: controller.run('getTopicTitle', _assign(_assign({}, props), {\n          topicKey: topicKey\n        }))\n      });\n    });\n    return res;\n  };\n\n  var navigateToTopic = function navigateToTopic(topicKey) {\n    return function (e) {\n      controller.run('focusTopicAndMoveToCenter', _assign(_assign({}, props), {\n        topicKey: topicKey\n      }));\n    };\n  };\n\n  var renderItem = function renderItem(section, props) {\n    // const pathElements = section.path.reduce<React.ReactChild[]>(\n    //   (elems, el) => {\n    //     elems.push(el, <Icon key={el} icon=\"caret-right\" />);\n    //     return elems;\n    //   },\n    //   []\n    // );\n    var key = section.key,\n        sectionTitle = section.title;\n    var maxLength = 100;\n    var needTip = sectionTitle.length > maxLength;\n    var title = needTip ? sectionTitle.substr(0, maxLength) + '...' : sectionTitle;\n    var titleProps = {\n      key: key,\n      onClick: navigateToTopic(key)\n    };\n    var titleEl = createElement(TopicTitle, _assign({}, titleProps), title);\n    var tip = createElement(Tip, null, createElement(TipContent, null, sectionTitle));\n    var popoverProps = {\n      key: key,\n      target: titleEl,\n      content: tip,\n      fill: true,\n      interactionKind: PopoverInteractionKind.HOVER_TARGET_ONLY,\n      hoverOpenDelay: 1000\n    };\n    return needTip ? createElement(StyledPopover, _assign({}, popoverProps)) : titleEl;\n  };\n\n  var filterMatches = function filterMatches(query, items) {\n    return items.filter(function (item) {\n      return item.title.toLowerCase().includes(query.toLowerCase());\n    });\n  };\n\n  var sections = getAllSections();\n  return createElement(StyledNavOmniBar, {\n    inputProps: INPUT_PROPS,\n    itemListPredicate: filterMatches,\n    isOpen: true,\n    items: sections,\n    itemRenderer: renderItem,\n    // onItemSelect={handleItemSelect}\n    onClose: onClose,\n    resetOnSelect: true\n  });\n}\n\nvar templateObject_1$3, templateObject_2$3, templateObject_3$2, templateObject_4$1, templateObject_5$1;\nvar HOT_KEY_NAME_SEARCH = 'DEFAULT_SEARCH';\nvar FOCUS_MODE_SEARCH = 'FOCUS_MODE_SEARCH';\n\nfunction SearchPlugin() {\n  var setSearchWorld = function setSearchWorld(s) {};\n\n  return {\n    customizeHotKeys: function customizeHotKeys(props, next) {\n      var controller = props.controller,\n          model = props.model;\n      var hotKeys = next();\n      hotKeys.globalHotKeys.set(HOT_KEY_NAME_SEARCH, {\n        label: 'search',\n        combo: 'ctrl + f',\n        onKeyDown: function onKeyDown() {\n          controller.run('operation', _assign(_assign({}, props), {\n            opType: OpType.FOCUS_TOPIC,\n            topicKey: model.focusKey,\n            focusMode: FOCUS_MODE_SEARCH\n          }));\n        }\n      });\n      return hotKeys;\n    },\n    renderDiagramCustomize: function renderDiagramCustomize(props, next) {\n      var res = next();\n      var model = props.model;\n\n      if (model.focusMode === FOCUS_MODE_SEARCH) {\n        var searchPanelProps = _assign(_assign({\n          key: 'search-panel'\n        }, props), {\n          setSearchWorld: setSearchWorld\n        });\n\n        res.push(createElement(SearchPanel, _assign({}, searchPanelProps)));\n      }\n\n      return res;\n    }\n  };\n}\n\nexport { FOCUS_MODE_SEARCH, HOT_KEY_NAME_SEARCH, SearchPlugin, TopicReferencePlugin };","import React from \"react\";\nimport { iconClassName, browserOpenFile } from \"@blink-mind/renderer-react\";\n\nexport function ToolbarItemOpen(props) {\n  const onClickOpenFile = e => {\n    const { diagram } = props;\n    const diagramProps = diagram.getDiagramProps();\n    const { controller } = diagramProps;\n    browserOpenFile(\".json,.blinkmind,.bm\").then(txt => {\n      let obj = JSON.parse(txt);\n      let model = controller.run(\"deserializeModel\", { controller, obj });\n      diagram.openNewModel(model);\n    });\n  };\n  return (\n    <div\n      className={`bm-toolbar-item ${iconClassName(\"openfile\")}`}\n      onClick={onClickOpenFile}\n    />\n  );\n}\n","import React from \"react\";\nimport { DiagramLayoutType } from \"@blink-mind/core\";\nimport cx from \"classnames\";\nimport { Icon, iconClassName } from \"@blink-mind/renderer-react\";\nimport { Menu, MenuItem, Popover } from \"@blueprintjs/core\";\n\nexport function ToolbarItemLayout(props) {\n  const layoutDirs = [\n    [\n      DiagramLayoutType.LEFT_AND_RIGHT,\n      \"Left And Right\",\n      \"layout-left-and-right\"\n    ],\n    [DiagramLayoutType.LEFT_TO_RIGHT, \"Only Right\", \"layout-right\"],\n    [DiagramLayoutType.RIGHT_TO_LEFT, \"Only Left\", \"layout-left\"]\n  ];\n\n  const onClickSetLayout = layoutDir => e => {\n    const { diagram } = props;\n    const diagramProps = diagram.getDiagramProps();\n    const { controller } = diagramProps;\n    controller.run(\"setLayoutDir\", { ...diagramProps, layoutDir });\n  };\n\n  return (\n    <div\n      className={cx(\"bm-toolbar-item\", iconClassName(\"layout-left-and-right\"))}\n    >\n      <Popover enforceFocus={false}>\n        <div className=\"bm-toolbar-popover-target\" />\n        <Menu>\n          {layoutDirs.map(dir => (\n            <MenuItem\n              key={dir[1]}\n              icon={Icon(dir[2])}\n              text={dir[1]}\n              onClick={onClickSetLayout(dir[0])}\n            />\n          ))}\n        </Menu>\n      </Popover>\n    </div>\n  );\n};\n","import defaultThemeImg from \"../../images/default.jpg\";\nimport theme1Img from \"../../images/theme1.jpg\";\nimport theme2Img from \"../../images/theme2.jpg\";\nimport theme3Img from \"../../images/theme3.jpg\";\nimport theme4Img from \"../../images/theme4.jpg\";\nimport cx from \"classnames\";\nimport { iconClassName } from \"@blink-mind/renderer-react\";\nimport { Popover } from \"@blueprintjs/core\";\nimport React from \"react\";\n\nexport function ToolbarItemTheme(props) {\n  const onClickSetTheme = themeKey => e => {\n    const { diagram } = props;\n    const diagramProps = diagram.getDiagramProps();\n    const { controller } = diagramProps;\n    controller.run(\"setTheme\", { ...diagramProps, themeKey });\n  };\n  const themes = [\n    [\"default\", defaultThemeImg],\n    [\"theme1\", theme1Img],\n    [\"theme2\", theme2Img],\n    [\"theme3\", theme3Img],\n    [\"theme4\", theme4Img]\n  ];\n\n  return (\n    <div className={cx(\"bm-toolbar-item\", iconClassName(\"theme\"))}>\n      <Popover enforceFocus={false}>\n        <div className=\"bm-toolbar-popover-target\" />\n        <div className=\"bm-popover-theme\">\n          {themes.map(theme => (\n            <div\n              key={theme[0]}\n              className=\"bm-theme-item\"\n              onClick={onClickSetTheme(theme[0])}\n            >\n              <img className=\"bm-theme-img\" src={theme[1]} alt={theme[0]} />\n            </div>\n          ))}\n        </div>\n      </Popover>\n    </div>\n  );\n}\n","import { Model, createKey } from \"@blink-mind/core\";\n\nexport const downloadFile = (url, filename) => {\n  const link = document.createElement(\"a\");\n  link.href = url;\n  link.download = filename;\n  link.click();\n};\n\nexport function generateSimpleModel() {\n  const rootKey = createKey();\n\n  return Model.create({\n    rootTopicKey: rootKey,\n    topics: [\n      {\n        key: rootKey,\n        blocks: [{ type: \"CONTENT\", data: \"MainTopic\" }]\n      }\n    ]\n  });\n}\n","import cx from \"classnames\";\nimport { iconClassName } from \"@blink-mind/renderer-react\";\nimport { Menu, MenuDivider, MenuItem, Popover } from \"@blueprintjs/core\";\nimport React from \"react\";\nimport { downloadFile } from \"../../utils\";\n\nexport function ToolbarItemExport(props) {\n  const onClickExportJson = e => {\n    const { diagram } = props;\n    const diagramProps = diagram.getDiagramProps();\n    const { controller, model } = diagramProps;\n\n    const json = controller.run(\"serializeModel\", diagramProps);\n    const jsonStr = JSON.stringify(json);\n    const url = `data:text/plain,${encodeURIComponent(jsonStr)}`;\n    const title = controller.run(\"getTopicTitle\", {\n      ...diagramProps,\n      topicKey: model.rootTopicKey\n    });\n    downloadFile(url, `${title}.blinkmind`);\n  };\n\n  return (\n    <div className={cx(\"bm-toolbar-item\", iconClassName(\"export\"))}>\n      <Popover enforceFocus={false}>\n        <div className=\"bm-toolbar-popover-target\" />\n        <Menu>\n          <MenuItem text=\"JSON(.json)\" onClick={onClickExportJson} />\n          <MenuDivider />\n        </Menu>\n      </Popover>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { OpType } from \"@blink-mind/core\";\nimport { FOCUS_MODE_SEARCH } from \"@blink-mind/plugins\";\nimport { iconClassName, IconName } from \"@blink-mind/renderer-react\";\n\nexport function ToolbarItemSearch(props) {\n  const onClickSearch = e => {\n    const { diagram } = props;\n    const diagramProps = diagram.getDiagramProps();\n    const { controller } = diagramProps;\n\n    controller.run(\"operation\", {\n      ...diagramProps,\n      opType: OpType.SET_FOCUS_MODE,\n      focusMode: FOCUS_MODE_SEARCH\n    });\n  };\n  return (\n    <div\n      className={`bm-toolbar-item ${iconClassName(IconName.SEARCH)}`}\n      onClick={onClickSearch}\n    />\n  );\n}\n","import React from \"react\";\nimport cx from \"classnames\";\nimport \"./Toolbar.css\";\nimport { iconClassName } from \"@blink-mind/renderer-react\";\nimport { ToolbarItemOpen } from \"./toolbar-item-open\";\nimport { ToolbarItemLayout } from \"./toolbar-item-layout\";\nimport { ToolbarItemTheme } from \"./toolbar-item-theme\";\nimport { ToolbarItemExport } from \"./toolbar-item-export\";\nimport { ToolbarItemSearch } from \"./toolbar-item-search\";\n\n// import debug from \"debug\";\n// const log = debug(\"app\");\n\nexport class Toolbar extends React.PureComponent {\n  render() {\n    const props = this.props;\n\n    const { onClickUndo, onClickRedo, canUndo, canRedo } = props;\n\n    return (\n      <div className=\"bm-toolbar\">\n        <ToolbarItemOpen {...props} />\n        <ToolbarItemExport {...props} />\n        <ToolbarItemTheme {...props} />\n        <ToolbarItemLayout {...props} />\n        <ToolbarItemSearch {...props} />\n\n        <div\n          className={cx(\"bm-toolbar-item\", iconClassName(\"undo\"), {\n            \"bm-toolbar-item-disabled\": !canUndo\n          })}\n          onClick={onClickUndo}\n        />\n\n        <div\n          className={cx(\"bm-toolbar-item\", iconClassName(\"redo\"), {\n            \"bm-toolbar-item-disabled\": !canRedo\n          })}\n          onClick={onClickRedo}\n        />\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport { Diagram } from \"@blink-mind/renderer-react\";\nimport RichTextEditorPlugin from \"@blink-mind/plugin-rich-text-editor\";\nimport { JsonSerializerPlugin } from \"@blink-mind/plugin-json-serializer\";\nimport { ThemeSelectorPlugin } from \"@blink-mind/plugin-theme-selector\";\nimport TopologyDiagramPlugin from \"@blink-mind/plugin-topology-diagram\";\nimport { TopicReferencePlugin, SearchPlugin } from \"@blink-mind/plugins\";\nimport { Toolbar } from \"./toolbar/toolbar\";\nimport { generateSimpleModel } from \"../utils\";\nimport \"@blink-mind/renderer-react/lib/main.css\";\nimport debug from \"debug\";\n\nconst log = debug(\"app\");\n\nconst plugins = [\n  RichTextEditorPlugin(),\n  ThemeSelectorPlugin(),\n  TopicReferencePlugin(),\n  SearchPlugin(),\n  TopologyDiagramPlugin(),\n  JsonSerializerPlugin()\n];\n\nexport class Mindmap extends React.Component {\n  constructor(props) {\n    super(props);\n    this.initModel();\n  }\n\n  diagram;\n  diagramRef = ref => {\n    this.diagram = ref;\n    this.setState({});\n  };\n\n  initModel() {\n    const model = generateSimpleModel();\n    this.state = { model };\n  }\n\n  onClickUndo = e => {\n    const props = this.diagram.getDiagramProps();\n    const { controller } = props;\n    controller.run(\"undo\", props);\n  };\n\n  onClickRedo = e => {\n    const props = this.diagram.getDiagramProps();\n    const { controller } = props;\n    controller.run(\"redo\", props);\n  };\n\n  renderDiagram() {\n    return (\n      <Diagram\n        ref={this.diagramRef}\n        model={this.state.model}\n        onChange={this.onChange}\n        plugins={plugins}\n      />\n    );\n  }\n\n  renderToolbar() {\n    const props = this.diagram.getDiagramProps();\n    const { controller } = props;\n    const canUndo = controller.run(\"canUndo\", props);\n    const canRedo = controller.run(\"canRedo\", props);\n    const toolbarProps = {\n      diagram: this.diagram,\n      onClickUndo: this.onClickUndo,\n      onClickRedo: this.onClickRedo,\n      canUndo,\n      canRedo\n    };\n    return <Toolbar {...toolbarProps} />;\n  }\n\n  onChange = (model, callback) => {\n    this.setState(\n      {\n        model\n      },\n      callback\n    );\n  };\n\n  render() {\n    return (\n      <div className=\"mindmap\">\n        {this.diagram && this.renderToolbar()}\n        {this.renderDiagram()}\n      </div>\n    );\n  }\n}\n\nexport default Mindmap;\n","import React from \"react\";\nimport Mindmap from \"./component/mindmap\";\nimport \"./App.css\";\n\nfunction App() {\n  return <Mindmap />;\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nlet debugNameSpaces = [\n  \"app\",\n  // \"node:*\",\n  'plugin:layout'\n];\n\nlocalStorage.debug = debugNameSpaces.join(\",\");\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isModKey;\n/**\n * Detect Cmd or Ctrl by platform for keyboard shortcuts\n */\n\nfunction isModKey(event) {\n  var isMac = typeof window !== \"undefined\" && /Mac|iPod|iPhone|iPad/.test(window.navigator.platform);\n  return isMac ? event.metaKey : event.ctrlKey;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _styledComponents = require(\"styled-components\");\n\nvar _styledComponents2 = _interopRequireDefault(_styledComponents);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nexports.default = _styledComponents2.default.button.withConfig({\n  displayName: \"ToolbarButton\",\n  componentId: \"pb68dp-0\"\n})([\"display:inline-block;flex:0;width:24px;height:24px;cursor:pointer;margin-left:10px;border:none;background:none;transition:opacity 100ms ease-in-out;padding:0;opacity:0.7;&:first-child{margin-left:0;}&:hover{opacity:1;}\", \";\"], function (_ref) {\n  var active = _ref.active;\n  return active && \"opacity: 1;\";\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _escape2 = require(\"lodash/escape\");\n\nvar _escape3 = _interopRequireDefault(_escape2);\n\nexports.default = headingToSlug;\n\nvar _slate = require(\"slate\");\n\nvar _slugify = require(\"slugify\");\n\nvar _slugify2 = _interopRequireDefault(_slugify);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n} // Slugify, escape, and remove periods from headings so that they are\n// compatible with url hashes AND dom selectors\n\n\nfunction safeSlugify(text) {\n  return \"h-\" + (0, _escape3.default)((0, _slugify2.default)(text, {\n    lower: true\n  }).replace(\".\", \"-\"));\n} // finds the index of this heading in the document compared to other headings\n// with the same slugified text\n\n\nfunction indexOfType(document, heading) {\n  var slugified = safeSlugify(heading.text);\n  var headings = document.nodes.filter(function (node) {\n    if (!node.text) return false;\n    return node.type.match(/^heading/) && slugified === safeSlugify(node.text);\n  });\n  return headings.indexOf(heading);\n} // calculates a unique slug for this heading based on it's text and position\n// in the document that is as stable as possible\n\n\nfunction headingToSlug(document, node) {\n  var slugified = safeSlugify(node.text);\n  var index = indexOfType(document, node);\n  if (index === 0) return slugified;\n  return slugified + \"-\" + index;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = getDataTransferFiles;\n\nfunction getDataTransferFiles(event) {\n  var dataTransferItemsList = [];\n\n  if (event.dataTransfer) {\n    var dt = event.dataTransfer;\n\n    if (dt.files && dt.files.length) {\n      dataTransferItemsList = dt.files;\n    } else if (dt.items && dt.items.length) {\n      // During the drag even the dataTransfer.files is null\n      // but Chrome implements some drag store, which is accesible via dataTransfer.items\n      dataTransferItemsList = dt.items;\n    }\n  } else if (event.target && event.target.files) {\n    dataTransferItemsList = event.target.files;\n  } // Convert from DataTransferItemsList to the native Array\n\n\n  return Array.prototype.slice.call(dataTransferItemsList);\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = require(\"react\");\n\nvar React = _interopRequireWildcard(_react);\n\nvar _styledComponents = require(\"styled-components\");\n\nvar _styledComponents2 = _interopRequireDefault(_styledComponents);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nvar Flex = function Flex(props) {\n  var children = props.children,\n      restProps = _objectWithoutProperties(props, [\"children\"]);\n\n  return React.createElement(Container, restProps, children);\n};\n\nvar Container = _styledComponents2.default.div.withConfig({\n  displayName: \"Flex__Container\",\n  componentId: \"uv96gk-0\"\n})([\"display:flex;flex:\", \";flex-direction:\", \";align-items:\", \";justify-content:\", \";\"], function (_ref) {\n  var auto = _ref.auto;\n  return auto ? \"1 1 auto\" : \"initial\";\n}, function (_ref2) {\n  var column = _ref2.column;\n  return column ? \"column\" : \"row\";\n}, function (_ref3) {\n  var align = _ref3.align;\n  return align;\n}, function (_ref4) {\n  var justify = _ref4.justify;\n  return justify;\n});\n\nexports.default = Flex;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slateMdSerializer = require(\"slate-md-serializer\");\n\nvar _slateMdSerializer2 = _interopRequireDefault(_slateMdSerializer);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nexports.default = new _slateMdSerializer2.default();","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slateEditList = require(\"@tommoor/slate-edit-list\");\n\nvar _slateEditList2 = _interopRequireDefault(_slateEditList);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nexports.default = (0, _slateEditList2.default)({\n  types: [\"ordered-list\", \"bulleted-list\", \"todo-list\"],\n  typeItem: \"list-item\",\n  typeDefault: \"paragraph\"\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Menu = exports.default = undefined;\n\nvar _debounce2 = require(\"lodash/debounce\");\n\nvar _debounce3 = _interopRequireDefault(_debounce2);\n\nvar _isEqual2 = require(\"lodash/isEqual\");\n\nvar _isEqual3 = _interopRequireDefault(_isEqual2);\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require(\"react\");\n\nvar React = _interopRequireWildcard(_react);\n\nvar _reactPortal = require(\"react-portal\");\n\nvar _slateReact = require(\"slate-react\");\n\nvar _slate = require(\"slate\");\n\nvar _styledComponents = require(\"styled-components\");\n\nvar _styledComponents2 = _interopRequireDefault(_styledComponents);\n\nvar _FormattingToolbar = require(\"./FormattingToolbar\");\n\nvar _FormattingToolbar2 = _interopRequireDefault(_FormattingToolbar);\n\nvar _LinkToolbar = require(\"./LinkToolbar\");\n\nvar _LinkToolbar2 = _interopRequireDefault(_LinkToolbar);\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar Toolbar = function (_React$Component) {\n  _inherits(Toolbar, _React$Component);\n\n  function Toolbar() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Toolbar);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Toolbar.__proto__ || Object.getPrototypeOf(Toolbar)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n      active: false,\n      mouseDown: false,\n      link: undefined,\n      top: \"\",\n      left: \"\"\n    }, _this.componentDidMount = function () {\n      _this.update();\n\n      if (typeof window !== \"undefined\") {\n        window.addEventListener(\"mousedown\", _this.handleMouseDown);\n        window.addEventListener(\"mouseup\", _this.handleMouseUp);\n      }\n    }, _this.componentWillUnmount = function () {\n      if (typeof window !== \"undefined\") {\n        window.removeEventListener(\"mousedown\", _this.handleMouseDown);\n        window.removeEventListener(\"mouseup\", _this.handleMouseUp);\n      }\n    }, _this.componentWillReceiveProps = (0, _debounce3.default)(function () {\n      _this.update();\n    }, 100), _this.hideLinkToolbar = function () {\n      _this.setState({\n        link: undefined\n      });\n\n      _this.update();\n    }, _this.handleMouseDown = function () {\n      _this.setState({\n        mouseDown: true\n      });\n\n      _this.update();\n    }, _this.handleMouseUp = function () {\n      _this.setState({\n        mouseDown: false\n      });\n\n      _this.update();\n    }, _this.showLinkToolbar = function (ev) {\n      ev.preventDefault();\n      ev.stopPropagation();\n\n      var link = _this.props.editor.getLinkInSelection();\n\n      _this.setState({\n        link: link\n      });\n    }, _this.update = function () {\n      var _this$props = _this.props,\n          value = _this$props.value,\n          editor = _this$props.editor;\n      var link = editor.getLinkInSelection();\n      var selection = window.getSelection(); // value.isCollapsed is not correct when the user clicks outside of the Slate bounds\n      // checking the window selection collapsed state as a fallback for this case\n\n      var isCollapsed = value.selection.isCollapsed || selection.isCollapsed;\n\n      if (isCollapsed && !link) {\n        if (_this.state.active) {\n          var _newState = {\n            mouseDown: _this.state.mouseDown,\n            active: false,\n            link: undefined,\n            top: \"\",\n            left: \"\"\n          };\n\n          if (!(0, _isEqual3.default)(_this.state, _newState)) {\n            _this.setState(_newState);\n          }\n        }\n\n        return;\n      }\n\n      var active = true;\n      if (!value.startBlock) return; // don't display toolbar for document title\n\n      if (value.startBlock.type === \"heading1\") active = false; // don't display toolbar for code blocks, code-lines or inline code\n\n      if (value.startBlock.type.match(/code/)) active = false; // don't show until user has released pointing device button\n\n      if (_this.state.mouseDown && !link) active = false;\n      var newState = {\n        active: active,\n        mouseDown: _this.state.mouseDown,\n        link: _this.state.link || link,\n        top: undefined,\n        left: undefined\n      };\n      var padding = 16;\n      var rect = void 0;\n\n      if (link) {\n        try {\n          rect = (0, _slateReact.findDOMNode)(link).getBoundingClientRect();\n        } catch (err) {// TODO\n        }\n      } else if (selection.rangeCount > 0) {\n        var range = selection.getRangeAt(0);\n        rect = range.getBoundingClientRect();\n      }\n\n      if (!rect || !_this.menu || rect.top === 0 && rect.left === 0) {\n        return;\n      }\n\n      var left = rect.left + window.scrollX - _this.menu.offsetWidth / 2 + rect.width / 2;\n      newState.top = Math.round(rect.top + window.scrollY - _this.menu.offsetHeight) + \"px\";\n      newState.left = Math.round(Math.max(padding, left)) + \"px\";\n\n      if (!(0, _isEqual3.default)(_this.state, newState)) {\n        _this.setState(newState);\n      }\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(Toolbar, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var style = {\n        top: this.state.top,\n        left: this.state.left\n      };\n      return React.createElement(_reactPortal.Portal, null, React.createElement(Menu, {\n        active: this.state.active,\n        ref: function ref(_ref2) {\n          return _this2.menu = _ref2;\n        },\n        style: style\n      }, this.state.link ? React.createElement(_LinkToolbar2.default, _extends({}, this.props, {\n        link: this.state.link,\n        onBlur: this.hideLinkToolbar\n      })) : React.createElement(_FormattingToolbar2.default, _extends({\n        onCreateLink: this.showLinkToolbar\n      }, this.props))));\n    }\n  }]);\n\n  return Toolbar;\n}(React.Component);\n\nexports.default = Toolbar;\n\nvar Menu = exports.Menu = _styledComponents2.default.div.withConfig({\n  displayName: \"Toolbar__Menu\",\n  componentId: \"sc-1hmxd6h-0\"\n})([\"padding:8px 16px;position:absolute;z-index:\", \";top:-10000px;left:-10000px;opacity:0;background-color:\", \";border-radius:4px;transform:scale(0.95);transition:opacity 150ms cubic-bezier(0.175,0.885,0.32,1.275),transform 150ms cubic-bezier(0.175,0.885,0.32,1.275);transition-delay:150ms;line-height:0;height:40px;box-sizing:border-box;pointer-events:none;white-space:nowrap;&::before{content:\\\"\\\";display:block;width:24px;height:24px;transform:translateX(-50%) rotate(45deg);background:\", \";border-radius:3px;z-index:-1;position:absolute;bottom:-2px;left:50%;}*{box-sizing:border-box;}\", \";@media print{display:none;}\"], function (props) {\n  return props.theme.zIndex + 100;\n}, function (props) {\n  return props.theme.toolbarBackground;\n}, function (props) {\n  return props.theme.toolbarBackground;\n}, function (_ref3) {\n  var active = _ref3.active;\n  return active && \"\\n    transform: translateY(-6px) scale(1);\\n    pointer-events: all;\\n    opacity: 1;\\n  \";\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _styledComponents = require(\"styled-components\");\n\nvar _styledComponents2 = _interopRequireDefault(_styledComponents);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar Separator = _styledComponents2.default.div.withConfig({\n  displayName: \"Separator\",\n  componentId: \"sc-1h4fmhy-0\"\n})([\"height:100%;width:1px;background:\", \";opacity:0.2;display:inline-block;margin-left:10px;\"], function (props) {\n  return props.theme.toolbarItem;\n});\n\nexports.default = Separator;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require(\"react\");\n\nvar React = _interopRequireWildcard(_react);\n\nvar _copyToClipboard = require(\"copy-to-clipboard\");\n\nvar _copyToClipboard2 = _interopRequireDefault(_copyToClipboard);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar CopyToClipboard = function (_React$Component) {\n  _inherits(CopyToClipboard, _React$Component);\n\n  function CopyToClipboard() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, CopyToClipboard);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = CopyToClipboard.__proto__ || Object.getPrototypeOf(CopyToClipboard)).call.apply(_ref, [this].concat(args))), _this), _this.onClick = function (ev) {\n      var _this$props = _this.props,\n          text = _this$props.text,\n          onCopy = _this$props.onCopy,\n          children = _this$props.children;\n      var elem = React.Children.only(children);\n      (0, _copyToClipboard2.default)(text);\n      if (onCopy) onCopy();\n\n      if (elem && elem.props && typeof elem.props.onClick === \"function\") {\n        elem.props.onClick(ev);\n      }\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(CopyToClipboard, [{\n    key: \"render\",\n    value: function render() {\n      var _props = this.props,\n          _text = _props.text,\n          _onCopy = _props.onCopy,\n          children = _props.children,\n          rest = _objectWithoutProperties(_props, [\"text\", \"onCopy\", \"children\"]);\n\n      var elem = React.Children.only(children);\n      return React.cloneElement(elem, _extends({}, rest, {\n        onClick: this.onClick\n      }));\n    }\n  }]);\n\n  return CopyToClipboard;\n}(React.Component);\n\nexports.default = CopyToClipboard;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.GripColumn = exports.GripRow = exports.GripTable = undefined;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require(\"react\");\n\nvar React = _interopRequireWildcard(_react);\n\nvar _styledComponents = require(\"styled-components\");\n\nvar _styledComponents2 = _interopRequireDefault(_styledComponents);\n\nvar _Toolbar = require(\"./Toolbar\");\n\nvar _Toolbar2 = _interopRequireDefault(_Toolbar);\n\nvar _Grip = require(\"./Grip\");\n\nvar _Grip2 = _interopRequireDefault(_Grip);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar Cell = function (_React$Component) {\n  _inherits(Cell, _React$Component);\n\n  function Cell() {\n    _classCallCheck(this, Cell);\n\n    return _possibleConstructorReturn(this, (Cell.__proto__ || Object.getPrototypeOf(Cell)).apply(this, arguments));\n  }\n\n  _createClass(Cell, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _props = this.props,\n          children = _props.children,\n          editor = _props.editor,\n          readOnly = _props.readOnly,\n          attributes = _props.attributes,\n          node = _props.node;\n      var document = editor.value.document;\n      var position = editor.getPositionByKey(document, node.key);\n      var isFirstRow = position.isFirstRow();\n      var isFirstColumn = position.isFirstColumn();\n      var isLastRow = position.isLastRow();\n      var isLastColumn = position.isLastColumn();\n      var isSelected = node.data.get(\"selected\");\n      var isTableSelected = position.table.data.get(\"selectedTable\");\n      var isActive = editor.isSelectionInTable() && !isTableSelected;\n      var selectedRows = position.table.data.get(\"selectedRows\");\n      var selectedColumns = position.table.data.get(\"selectedColumns\");\n      var isRowSelected = selectedRows && selectedRows.includes(position.getRowIndex());\n      var isColumnSelected = selectedColumns && selectedColumns.includes(position.getColumnIndex());\n      return React.createElement(StyledTd, _extends({\n        ref: function ref(_ref) {\n          return _this2.cell = _ref;\n        },\n        isFirstRow: isFirstRow,\n        isFirstColumn: isFirstColumn,\n        isSelected: isSelected,\n        onClick: function onClick() {\n          return editor.clearSelected(position.table);\n        }\n      }, attributes), !readOnly && React.createElement(React.Fragment, null, isFirstColumn && isFirstRow && React.createElement(React.Fragment, null, React.createElement(GripTable, {\n        contentEditable: false,\n        isSelected: isTableSelected,\n        onClick: function onClick(ev) {\n          ev.preventDefault();\n          ev.stopPropagation();\n\n          if (isTableSelected) {\n            editor.clearSelected(position.table);\n          } else {\n            editor.selectAll().blur();\n          }\n        }\n      }), React.createElement(_Toolbar2.default, {\n        editor: editor,\n        cell: this.cell,\n        active: isTableSelected,\n        type: \"table\"\n      })), isFirstColumn && React.createElement(React.Fragment, null, React.createElement(GripRow, {\n        isFirstRow: isFirstRow,\n        isLastRow: isLastRow,\n        isSelected: isRowSelected,\n        contentEditable: false,\n        onClick: function onClick(ev) {\n          ev.preventDefault();\n          ev.stopPropagation();\n          editor.selectRow(!isSelected || isTableSelected).blur();\n        }\n      }), isActive && React.createElement(_Toolbar2.default, {\n        editor: editor,\n        cell: this.cell,\n        active: isRowSelected,\n        type: \"row\"\n      })), isFirstRow && React.createElement(React.Fragment, null, React.createElement(GripColumn, {\n        isFirstColumn: isFirstColumn,\n        isLastColumn: isLastColumn,\n        isSelected: isColumnSelected,\n        contentEditable: false,\n        onClick: function onClick(ev) {\n          ev.preventDefault();\n          ev.stopPropagation();\n          editor.selectColumn(!isSelected || isTableSelected).blur();\n        }\n      }), isActive && React.createElement(_Toolbar2.default, {\n        editor: editor,\n        cell: this.cell,\n        active: isColumnSelected,\n        type: \"column\"\n      }))), React.createElement(RowContent, {\n        align: node.data.get(\"align\")\n      }, children));\n    }\n  }]);\n\n  return Cell;\n}(React.Component);\n\nvar GripTable = exports.GripTable = (0, _styledComponents2.default)(_Grip2.default).withConfig({\n  displayName: \"Cell__GripTable\",\n  componentId: \"sc-1potl98-0\"\n})([\"width:13px;height:13px;border-radius:13px;border:2px solid \", \";position:absolute;top:-18px;left:-18px;\"], function (props) {\n  return props.theme.background;\n});\nvar GripRow = exports.GripRow = (0, _styledComponents2.default)(_Grip2.default).withConfig({\n  displayName: \"Cell__GripRow\",\n  componentId: \"sc-1potl98-1\"\n})([\"left:-16px;top:0px;height:100%;width:12px;border-right:3px solid \", \";\", \" \", \"\"], function (props) {\n  return props.theme.background;\n}, function (props) {\n  return props.isFirstRow && \"\\n    border-top-left-radius: 3px;\\n    border-top-right-radius: 3px;\\n  \";\n}, function (props) {\n  return props.isLastRow && \"\\n    border-bottom-left-radius: 3px;\\n    border-bottom-right-radius: 3px;\\n  \";\n});\nvar GripColumn = exports.GripColumn = (0, _styledComponents2.default)(_Grip2.default).withConfig({\n  displayName: \"Cell__GripColumn\",\n  componentId: \"sc-1potl98-2\"\n})([\"top:-16px;left:0px;width:100%;height:12px;border-bottom:3px solid \", \";\", \" \", \"\"], function (props) {\n  return props.theme.background;\n}, function (props) {\n  return props.isFirstColumn && \"\\n  border-top-left-radius: 3px;\\n  border-bottom-left-radius: 3px;\\n\";\n}, function (props) {\n  return props.isLastColumn && \"\\n  border-top-right-radius: 3px;\\n  border-bottom-right-radius: 3px;\\n\";\n});\n\nvar RowContent = _styledComponents2.default.div.withConfig({\n  displayName: \"Cell__RowContent\",\n  componentId: \"sc-1potl98-3\"\n})([\"padding:4px 12px;text-align:\", \";\"], function (props) {\n  return props.align;\n});\n\nvar StyledTd = _styledComponents2.default.td.withConfig({\n  displayName: \"Cell__StyledTd\",\n  componentId: \"sc-1potl98-4\"\n})([\"vertical-align:top;border-right:1px solid \", \";position:relative;background:\", \";\", \"\"], function (props) {\n  return props.theme.tableDivider;\n}, function (props) {\n  return props.isSelected ? props.theme.tableSelectedBackground : props.theme.background;\n}, function (props) {\n  return props.isFirstRow && \"\\n  min-width: 100px;\\n  \";\n});\n\nexports.default = Cell;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.schema = exports.theme = undefined;\n\nvar _regenerator = require(\"babel-runtime/regenerator\");\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _class, _temp;\n\nvar _react = require(\"react\");\n\nvar React = _interopRequireWildcard(_react);\n\nvar _slate = require(\"slate\");\n\nvar _slateReact = require(\"slate-react\");\n\nvar _styledComponents = require(\"styled-components\");\n\nvar _styledComponents2 = _interopRequireDefault(_styledComponents);\n\nvar _theme = require(\"./theme\");\n\nvar _schema = require(\"./schema\");\n\nvar _schema2 = _interopRequireDefault(_schema);\n\nvar _getDataTransferFiles = require(\"./lib/getDataTransferFiles\");\n\nvar _getDataTransferFiles2 = _interopRequireDefault(_getDataTransferFiles);\n\nvar _isModKey = require(\"./lib/isModKey\");\n\nvar _isModKey2 = _interopRequireDefault(_isModKey);\n\nvar _Flex = require(\"./components/Flex\");\n\nvar _Flex2 = _interopRequireDefault(_Flex);\n\nvar _serializer = require(\"./serializer\");\n\nvar _serializer2 = _interopRequireDefault(_serializer);\n\nvar _plugins = require(\"./plugins\");\n\nvar _plugins2 = _interopRequireDefault(_plugins);\n\nvar _commands = require(\"./commands\");\n\nvar _commands2 = _interopRequireDefault(_commands);\n\nvar _queries = require(\"./queries\");\n\nvar _queries2 = _interopRequireDefault(_queries);\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var gen = fn.apply(this, arguments);\n    return new Promise(function (resolve, reject) {\n      function step(key, arg) {\n        try {\n          var info = gen[key](arg);\n          var value = info.value;\n        } catch (error) {\n          reject(error);\n          return;\n        }\n\n        if (info.done) {\n          resolve(value);\n        } else {\n          return Promise.resolve(value).then(function (value) {\n            step(\"next\", value);\n          }, function (err) {\n            step(\"throw\", err);\n          });\n        }\n      }\n\n      return step(\"next\");\n    });\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar theme = exports.theme = _theme.light;\nvar schema = exports.schema = _schema2.default;\nvar defaultOptions = {};\nvar RichMarkdownEditor = (_temp = _class = function (_React$PureComponent) {\n  _inherits(RichMarkdownEditor, _React$PureComponent);\n\n  function RichMarkdownEditor(props) {\n    var _this2 = this;\n\n    _classCallCheck(this, RichMarkdownEditor);\n\n    var _this = _possibleConstructorReturn(this, (RichMarkdownEditor.__proto__ || Object.getPrototypeOf(RichMarkdownEditor)).call(this, props));\n\n    _this.prevSchema = null;\n    _this.schema = null;\n\n    _this.setEditorRef = function (ref) {\n      _this.editor = ref;\n    };\n\n    _this.value = function () {\n      // return Markdown.serialize(this.props.editorValue);\n      return _this.props.editorValue;\n    };\n\n    _this.handleChange = function (_ref) {\n      var value = _ref.value;\n\n      if (_this.props.onChange && !_this.props.readOnly) {\n        _this.props.onChange(value);\n      }\n    };\n\n    _this.handleDrop = function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regenerator2.default.mark(function _callee(ev) {\n        var files, i, _file;\n\n        return _regenerator2.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!_this.props.readOnly) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 2:\n                if (_this.editor.props.uploadImage) {\n                  _context.next = 4;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 4:\n                if (!ev.isDefaultPrevented()) {\n                  _context.next = 6;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 6:\n                // otherwise we'll handle this\n                ev.preventDefault();\n                ev.stopPropagation();\n                files = (0, _getDataTransferFiles2.default)(ev);\n                i = 0;\n\n              case 10:\n                if (!(i < files.length)) {\n                  _context.next = 18;\n                  break;\n                }\n\n                _file = files[i];\n\n                if (!_file.type.startsWith(\"image/\")) {\n                  _context.next = 15;\n                  break;\n                }\n\n                _context.next = 15;\n                return _this.insertImageFile(_file);\n\n              case 15:\n                i++;\n                _context.next = 10;\n                break;\n\n              case 18:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, _this2);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.insertImageFile = function (file) {\n      _this.editor.insertImageFile(file);\n    };\n\n    _this.cancelEvent = function (ev) {\n      ev.preventDefault();\n    };\n\n    _this.handleKeyDown = function (ev, editor) {\n      var next = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {};\n      if (_this.props.readOnly) return next();\n\n      switch (ev.key) {\n        case \"s\":\n          if ((0, _isModKey2.default)(ev)) return _this.onSave(ev);\n          break;\n\n        case \"Enter\":\n          if ((0, _isModKey2.default)(ev)) return _this.onSaveAndExit(ev);\n          break;\n\n        case \"Escape\":\n          if ((0, _isModKey2.default)(ev)) return _this.onCancel(ev);\n          break;\n\n        default:\n      }\n\n      return next();\n    };\n\n    _this.focusAtStart = function () {\n      var editor = _this.editor;\n      editor.moveToStartOfDocument().focus();\n    };\n\n    _this.focusAtEnd = function () {\n      var editor = _this.editor;\n      editor.moveToEndOfDocument().focus();\n    };\n\n    _this.getSchema = function () {\n      if (_this.prevSchema !== _this.props.schema) {\n        _this.schema = _extends({}, _schema2.default, _this.props.schema || {});\n        _this.prevSchema = _this.props.schema;\n      }\n\n      return _this.schema;\n    };\n\n    _this.render = function () {\n      var _this$props = _this.props,\n          readOnly = _this$props.readOnly,\n          pretitle = _this$props.pretitle,\n          placeholder = _this$props.placeholder,\n          onSave = _this$props.onSave,\n          onChange = _this$props.onChange,\n          onCancel = _this$props.onCancel,\n          uploadImage = _this$props.uploadImage,\n          onSearchLink = _this$props.onSearchLink,\n          onClickLink = _this$props.onClickLink,\n          onImageUploadStart = _this$props.onImageUploadStart,\n          onImageUploadStop = _this$props.onImageUploadStop,\n          onShowToast = _this$props.onShowToast,\n          className = _this$props.className,\n          style = _this$props.style,\n          dark = _this$props.dark,\n          defaultValue = _this$props.defaultValue,\n          autoFocus = _this$props.autoFocus,\n          plugins = _this$props.plugins,\n          rest = _objectWithoutProperties(_this$props, [\"readOnly\", \"pretitle\", \"placeholder\", \"onSave\", \"onChange\", \"onCancel\", \"uploadImage\", \"onSearchLink\", \"onClickLink\", \"onImageUploadStart\", \"onImageUploadStop\", \"onShowToast\", \"className\", \"style\", \"dark\", \"defaultValue\", \"autoFocus\", \"plugins\"]);\n\n      var theme = _this.props.theme || (dark ? _theme.dark : _theme.light);\n      var editorValue = _this.props.editorValue;\n\n      if (typeof _this.props.editorValue === \"string\") {\n        editorValue = _serializer2.default.deserialize(_this.props.editorValue);\n      }\n\n      return React.createElement(_Flex2.default, {\n        style: style,\n        className: className,\n        onDrop: _this.handleDrop,\n        onDragOver: _this.cancelEvent,\n        onDragEnter: _this.cancelEvent,\n        align: \"flex-start\",\n        justify: \"center\",\n        column: true,\n        auto: true\n      }, React.createElement(_styledComponents.ThemeProvider, {\n        theme: theme\n      }, React.createElement(StyledEditor, _extends({\n        ref: _this.setEditorRef,\n        plugins: _this.plugins,\n        value: editorValue,\n        commands: _commands2.default,\n        queries: _queries2.default,\n        placeholder: placeholder,\n        schema: _this.getSchema(),\n        onKeyDown: _this.handleKeyDown,\n        onChange: _this.handleChange,\n        onSave: onSave,\n        onSearchLink: onSearchLink,\n        onClickLink: onClickLink,\n        onImageUploadStart: onImageUploadStart,\n        onImageUploadStop: onImageUploadStop,\n        onShowToast: onShowToast,\n        readOnly: readOnly,\n        spellCheck: !readOnly,\n        uploadImage: uploadImage,\n        pretitle: pretitle,\n        options: defaultOptions\n      }, rest))));\n    };\n\n    var builtInPlugins = (0, _plugins2.default)({\n      placeholder: props.placeholder,\n      getLinkComponent: props.getLinkComponent\n    }); // in Slate plugins earlier in the stack can opt not to continue\n    // to later ones. By adding overrides first we give more control\n\n    _this.plugins = [].concat(_toConsumableArray(props.plugins), _toConsumableArray(builtInPlugins));\n    return _this;\n  }\n\n  _createClass(RichMarkdownEditor, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.scrollToAnchor();\n      if (this.props.readOnly) return;\n\n      if (typeof window !== \"undefined\") {\n        window.addEventListener(\"keydown\", this.handleKeyDown);\n      }\n\n      if (this.props.autoFocus) {\n        this.focusAtEnd();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.readOnly && !this.props.readOnly && this.props.autoFocus) {\n        this.focusAtEnd();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (typeof window !== \"undefined\") {\n        window.removeEventListener(\"keydown\", this.handleKeyDown);\n      }\n    }\n  }, {\n    key: \"scrollToAnchor\",\n    value: function scrollToAnchor() {\n      var hash = window.location.hash;\n      if (!hash) return;\n\n      try {\n        var element = document.querySelector(hash);\n        if (element) element.scrollIntoView({\n          behavior: \"smooth\"\n        });\n      } catch (err) {\n        // querySelector will throw an error if the hash begins with a number\n        // or contains a period. This is protected against now by safeSlugify\n        // however previous links may be in the wild.\n        console.warn(\"Attempted to scroll to invalid hash\", err);\n      }\n    }\n  }, {\n    key: \"onSave\",\n    value: function onSave(ev) {\n      var onSave = this.props.onSave;\n\n      if (onSave) {\n        ev.preventDefault();\n        ev.stopPropagation();\n        onSave({\n          done: false\n        });\n      }\n    }\n  }, {\n    key: \"onSaveAndExit\",\n    value: function onSaveAndExit(ev) {\n      var onSave = this.props.onSave;\n\n      if (onSave) {\n        ev.preventDefault();\n        ev.stopPropagation();\n        onSave({\n          done: true\n        });\n      }\n    }\n  }, {\n    key: \"onCancel\",\n    value: function onCancel(ev) {\n      var onCancel = this.props.onCancel;\n\n      if (onCancel) {\n        ev.preventDefault();\n        ev.stopPropagation();\n        onCancel();\n      }\n    }\n  }]);\n\n  return RichMarkdownEditor;\n}(React.PureComponent), _class.defaultProps = {\n  editorValue: \"\",\n  placeholder: \"Write something nice\",\n  onImageUploadStart: function onImageUploadStart() {},\n  onImageUploadStop: function onImageUploadStop() {},\n  plugins: [],\n  tooltip: \"span\"\n}, _temp);\nvar StyledEditor = (0, _styledComponents2.default)(_slateReact.Editor).withConfig({\n  displayName: \"src__StyledEditor\",\n  componentId: \"sc-1d306fq-0\"\n})([\"color:\", \";background:\", \";font-family:\", \";font-weight:\", \";font-size:1em;line-height:1.7em;width:100%;h1,h2,h3,h4,h5,h6{font-weight:500;}ul,ol{margin:0 0.1em;padding-left:1em;ul,ol{margin:0.1em;}}p{position:relative;margin:0;}a{color:\", \";}a:hover{text-decoration:\", \";}li p{display:inline;margin:0;}.todoList{list-style:none;padding-left:0;.todoList{padding-left:1em;}}.todo{span:last-child:focus{outline:none;}}blockquote{border-left:3px solid \", \";margin:0;padding-left:10px;font-style:italic;}b,strong{font-weight:600;}\"], function (props) {\n  return props.theme.text;\n}, function (props) {\n  return props.theme.background;\n}, function (props) {\n  return props.theme.fontFamily;\n}, function (props) {\n  return props.theme.fontWeight;\n}, function (props) {\n  return props.theme.link;\n}, function (props) {\n  return props.readOnly ? \"underline\" : \"none\";\n}, function (props) {\n  return props.theme.quote;\n});\nexports.default = RichMarkdownEditor;","module.exports = __webpack_public_path__ + \"static/media/default.4f8c4983.jpg\";","module.exports = __webpack_public_path__ + \"static/media/theme1.2f59f00b.jpg\";","module.exports = __webpack_public_path__ + \"static/media/theme2.b18193fb.jpg\";","module.exports = __webpack_public_path__ + \"static/media/theme3.61c97910.jpg\";","module.exports = __webpack_public_path__ + \"static/media/theme4.1e21408c.jpg\";","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar colors = {\n  almostBlack: \"#181A1B\",\n  lightBlack: \"#2F3336\",\n  almostWhite: \"#E6E6E6\",\n  white: \"#FFF\",\n  white10: \"rgba(255, 255, 255, 0.1)\",\n  black: \"#000\",\n  black10: \"rgba(0, 0, 0, 0.1)\",\n  primary: \"#1AB6FF\",\n  greyLight: \"#F4F7FA\",\n  grey: \"#E8EBED\",\n  greyMid: \"#9BA6B2\",\n  greyDark: \"#DAE1E9\"\n};\n\nvar base = exports.base = _extends({}, colors, {\n  fontFamily: \"-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen, Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif\",\n  fontFamilyMono: \"'SFMono-Regular',Consolas,'Liberation Mono', Menlo, Courier,monospace\",\n  fontWeight: 400,\n  zIndex: 100,\n  link: colors.primary,\n  placeholder: \"#B1BECC\",\n  textSecondary: \"#4E5C6E\",\n  textLight: colors.white,\n  selected: colors.primary,\n  codeComment: \"#6a737d\",\n  codePunctuation: \"#5e6687\",\n  codeNumber: \"#d73a49\",\n  codeProperty: \"#c08b30\",\n  codeTag: \"#3d8fd1\",\n  codeString: \"#032f62\",\n  codeSelector: \"#6679cc\",\n  codeAttr: \"#c76b29\",\n  codeEntity: \"#22a2c9\",\n  codeKeyword: \"#d73a49\",\n  codeFunction: \"#6f42c1\",\n  codeStatement: \"#22a2c9\",\n  codePlaceholder: \"#3d8fd1\",\n  codeInserted: \"#202746\",\n  codeImportant: \"#c94922\"\n});\n\nvar light = exports.light = _extends({}, base, {\n  background: colors.white,\n  text: colors.almostBlack,\n  code: colors.lightBlack,\n  toolbarBackground: colors.lightBlack,\n  toolbarInput: colors.white10,\n  toolbarItem: colors.white,\n  blockToolbarBackground: colors.greyLight,\n  blockToolbarTrigger: colors.greyMid,\n  blockToolbarTriggerIcon: colors.white,\n  blockToolbarItem: colors.almostBlack,\n  tableDivider: colors.grey,\n  tableSelected: colors.primary,\n  tableSelectedBackground: \"#E5F7FF\",\n  quote: colors.greyDark,\n  codeBackground: colors.greyLight,\n  codeBorder: colors.grey,\n  horizontalRule: colors.grey,\n  imageErrorBackground: colors.greyLight\n});\n\nvar dark = exports.dark = _extends({}, base, {\n  background: colors.almostBlack,\n  text: colors.almostWhite,\n  code: colors.almostWhite,\n  toolbarBackground: colors.white,\n  toolbarInput: colors.black10,\n  toolbarItem: colors.lightBlack,\n  blockToolbarBackground: colors.white,\n  blockToolbarTrigger: colors.almostWhite,\n  blockToolbarTriggerIcon: colors.almostBlack,\n  blockToolbarItem: colors.lightBlack,\n  tableDivider: colors.lightBlack,\n  tableSelected: colors.primary,\n  tableSelectedBackground: \"#002333\",\n  quote: colors.almostWhite,\n  codeBackground: colors.almostBlack,\n  codeBorder: colors.lightBlack,\n  codeString: \"#3d8fd1\",\n  horizontalRule: colors.lightBlack,\n  imageErrorBackground: \"rgba(0, 0, 0, 0.5)\"\n});\n\nexports.default = light;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar schema = {\n  blocks: {\n    heading1: {\n      nodes: [{\n        match: {\n          object: \"text\"\n        }\n      }],\n      marks: [\"\"]\n    },\n    heading2: {\n      nodes: [{\n        match: {\n          object: \"text\"\n        }\n      }],\n      marks: [\"\"]\n    },\n    heading3: {\n      nodes: [{\n        match: {\n          object: \"text\"\n        }\n      }],\n      marks: [\"\"]\n    },\n    heading4: {\n      nodes: [{\n        match: {\n          object: \"text\"\n        }\n      }],\n      marks: [\"\"]\n    },\n    heading5: {\n      nodes: [{\n        match: {\n          object: \"text\"\n        }\n      }],\n      marks: [\"\"]\n    },\n    heading6: {\n      nodes: [{\n        match: {\n          object: \"text\"\n        }\n      }],\n      marks: [\"\"]\n    },\n    \"block-quote\": {\n      marks: [\"\"]\n    },\n    \"horizontal-rule\": {\n      isVoid: true\n    },\n    image: {\n      isVoid: true\n    },\n    link: {\n      nodes: [{\n        objects: [\"text\"]\n      }]\n    },\n    \"block-toolbar\": {\n      isVoid: true\n    }\n  },\n  document: {\n    nodes: [{\n      match: [{\n        type: \"paragraph\"\n      }, {\n        type: \"heading1\"\n      }, {\n        type: \"heading2\"\n      }, {\n        type: \"heading3\"\n      }, {\n        type: \"heading4\"\n      }, {\n        type: \"heading5\"\n      }, {\n        type: \"heading6\"\n      }, {\n        type: \"block-quote\"\n      }, {\n        type: \"code\"\n      }, {\n        type: \"horizontal-rule\"\n      }, {\n        type: \"image\"\n      }, {\n        type: \"bulleted-list\"\n      }, {\n        type: \"ordered-list\"\n      }, {\n        type: \"todo-list\"\n      }, {\n        type: \"block-toolbar\"\n      }, {\n        type: \"table\"\n      }, {\n        type: \"link\"\n      }],\n      min: 1\n    }]\n  }\n};\nexports.default = schema;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = require(\"react\");\n\nvar React = _interopRequireWildcard(_react);\n\nvar _slate = require(\"slate\");\n\nvar _slateTrailingBlock = require(\"@wikifactory/slate-trailing-block\");\n\nvar _slateTrailingBlock2 = _interopRequireDefault(_slateTrailingBlock);\n\nvar _slateEditCode = require(\"@wikifactory/slate-edit-code\");\n\nvar _slateEditCode2 = _interopRequireDefault(_slateEditCode);\n\nvar _slateEditBlockquote = require(\"@wikifactory/slate-edit-blockquote\");\n\nvar _slateEditBlockquote2 = _interopRequireDefault(_slateEditBlockquote);\n\nvar _slateEditTable = require(\"@domoinc/slate-edit-table\");\n\nvar _slateEditTable2 = _interopRequireDefault(_slateEditTable);\n\nvar _slateDropOrPasteImages = require(\"slate-drop-or-paste-images\");\n\nvar _slateDropOrPasteImages2 = _interopRequireDefault(_slateDropOrPasteImages);\n\nvar _slatePasteLinkify = require(\"slate-paste-linkify\");\n\nvar _slatePasteLinkify2 = _interopRequireDefault(_slatePasteLinkify);\n\nvar _slateCollapseOnEscape = require(\"slate-collapse-on-escape\");\n\nvar _slateCollapseOnEscape2 = _interopRequireDefault(_slateCollapseOnEscape);\n\nvar _golerySlatePrism = require(\"golery-slate-prism\");\n\nvar _golerySlatePrism2 = _interopRequireDefault(_golerySlatePrism);\n\nvar _Placeholder = require(\"./plugins/Placeholder\");\n\nvar _Placeholder2 = _interopRequireDefault(_Placeholder);\n\nvar _EditList = require(\"./plugins/EditList\");\n\nvar _EditList2 = _interopRequireDefault(_EditList);\n\nvar _CollapsableHeadings = require(\"./plugins/CollapsableHeadings\");\n\nvar _CollapsableHeadings2 = _interopRequireDefault(_CollapsableHeadings);\n\nvar _KeyboardBehavior = require(\"./plugins/KeyboardBehavior\");\n\nvar _KeyboardBehavior2 = _interopRequireDefault(_KeyboardBehavior);\n\nvar _KeyboardShortcuts = require(\"./plugins/KeyboardShortcuts\");\n\nvar _KeyboardShortcuts2 = _interopRequireDefault(_KeyboardShortcuts);\n\nvar _MarkdownShortcuts = require(\"./plugins/MarkdownShortcuts\");\n\nvar _MarkdownShortcuts2 = _interopRequireDefault(_MarkdownShortcuts);\n\nvar _MarkdownPaste = require(\"./plugins/MarkdownPaste\");\n\nvar _MarkdownPaste2 = _interopRequireDefault(_MarkdownPaste);\n\nvar _Ellipsis = require(\"./plugins/Ellipsis\");\n\nvar _Ellipsis2 = _interopRequireDefault(_Ellipsis);\n\nvar _Embeds = require(\"./plugins/Embeds\");\n\nvar _Embeds2 = _interopRequireDefault(_Embeds);\n\nvar _Chrome = require(\"./plugins/Chrome\");\n\nvar _Chrome2 = _interopRequireDefault(_Chrome);\n\nvar _Table = require(\"./plugins/Table\");\n\nvar _Table2 = _interopRequireDefault(_Table);\n\nvar _nodes = require(\"./nodes.js\");\n\nvar _nodes2 = _interopRequireDefault(_nodes);\n\nvar _marks = require(\"./marks.js\");\n\nvar _marks2 = _interopRequireDefault(_marks);\n\nrequire(\"prismjs/components/prism-ruby\");\n\nrequire(\"prismjs/components/prism-typescript\");\n\nrequire(\"prismjs/components/prism-csharp\");\n\nrequire(\"prismjs/components/prism-powershell\");\n\nrequire(\"prismjs/components/prism-php\");\n\nrequire(\"prismjs/components/prism-python\");\n\nrequire(\"prismjs/components/prism-java\");\n\nrequire(\"prismjs/components/prism-bash\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n} // additional language support based on the most popular programming languages\n\n\nvar createPlugins = function createPlugins(_ref) {\n  var placeholder = _ref.placeholder,\n      getLinkComponent = _ref.getLinkComponent;\n  return [_nodes2.default, _marks2.default, (0, _slatePasteLinkify2.default)({\n    type: \"link\",\n    collapseTo: \"end\"\n  }), (0, _Placeholder2.default)({\n    placeholder: placeholder,\n    when: function when(editor, node) {\n      if (editor.readOnly) return false;\n      if (node.object !== \"block\") return false;\n      if (node.type !== \"paragraph\") return false;\n      if (node.text !== \"\") return false;\n      if (editor.value.document.getBlocks().size > 1) return false;\n      return true;\n    }\n  }), (0, _slateDropOrPasteImages2.default)({\n    extensions: [\"png\", \"jpg\", \"jpeg\", \"gif\", \"webp\"],\n    insertImage: function insertImage(editor, file) {\n      return editor.insertImageFile(file);\n    }\n  }), (0, _slateEditCode2.default)({\n    containerType: \"code\",\n    lineType: \"code-line\",\n    exitBlocktype: \"paragraph\",\n    allowMarks: false,\n    selectAll: true\n  }), (0, _slateEditBlockquote2.default)({\n    type: \"block-quote\",\n    typeDefault: \"paragraph\"\n  }), (0, _slateEditTable2.default)({\n    typeTable: \"table\",\n    typeRow: \"table-row\",\n    typeCell: \"table-cell\",\n    typeContent: \"paragraph\"\n  }), (0, _Table2.default)(), (0, _golerySlatePrism2.default)({\n    onlyIn: function onlyIn(node) {\n      return node.type === \"code\";\n    },\n    getSyntax: function getSyntax(node) {\n      return node.data.get(\"language\") || \"javascript\";\n    }\n  }), (0, _Embeds2.default)({\n    getComponent: getLinkComponent\n  }), (0, _slateCollapseOnEscape2.default)({\n    toEdge: \"end\"\n  }), (0, _CollapsableHeadings2.default)(), _EditList2.default, (0, _KeyboardBehavior2.default)(), (0, _KeyboardShortcuts2.default)(), (0, _MarkdownShortcuts2.default)(), (0, _MarkdownPaste2.default)(), (0, _Ellipsis2.default)(), (0, _slateTrailingBlock2.default)({\n    type: \"paragraph\"\n  }), (0, _Chrome2.default)()];\n};\n\nexports.default = createPlugins;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _invariant = require(\"invariant\");\n\nvar _invariant2 = _interopRequireDefault(_invariant);\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _slate = require(\"slate\");\n\nvar _Placeholder = require(\"../components/Placeholder\");\n\nvar _Placeholder2 = _interopRequireDefault(_Placeholder);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction PlaceholderPlugin() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var placeholder = options.placeholder,\n      when = options.when;\n  (0, _invariant2.default)(placeholder, \"You must pass `PlaceholderPlugin` an `options.placeholder` string.\");\n  (0, _invariant2.default)(when, \"You must pass `PlaceholderPlugin` an `options.when` query.\");\n  /**\n   * Decorate a match node with a placeholder mark when it fits the query.\n   */\n\n  function decorateNode(node, editor, next) {\n    if (!editor.query(when, node)) {\n      return next();\n    }\n\n    var others = next() || [];\n    var first = node.getFirstText();\n    if (!first) return next();\n    var decoration = {\n      anchor: {\n        key: first.key,\n        offset: 0\n      },\n      focus: {\n        key: first.key,\n        offset: 0\n      },\n      mark: {\n        type: \"placeholder\",\n        data: {\n          placeholder: placeholder\n        }\n      }\n    };\n    return [].concat(_toConsumableArray(others), [decoration]);\n  }\n  /**\n   * Render an inline placeholder for the placeholder mark.\n   */\n\n\n  function renderMark(props, editor, next) {\n    var children = props.children,\n        mark = props.mark;\n\n    if (mark.type === \"placeholder\") {\n      var content = mark.data.get(\"placeholder\");\n      return _react2.default.createElement(\"span\", null, _react2.default.createElement(_Placeholder2.default, null, content), children);\n    }\n\n    return next();\n  }\n\n  return {\n    decorateNode: decorateNode,\n    renderMark: renderMark\n  };\n}\n\nexports.default = PlaceholderPlugin;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _styledComponents = require(\"styled-components\");\n\nvar _styledComponents2 = _interopRequireDefault(_styledComponents);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar Placeholder = _styledComponents2.default.span.attrs({\n  contentEditable: false\n}).withConfig({\n  displayName: \"Placeholder\",\n  componentId: \"mx6118-0\"\n})([\"pointer-events:none;display:inline-block;width:0;max-width:100%;white-space:nowrap;line-height:1.2em;color:\", \";\"], function (props) {\n  return props.theme.placeholder;\n});\n\nexports.default = Placeholder;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nexports.default = CollapsableHeadings;\n\nvar _slate = require(\"slate\");\n\nvar _headingToSlug = require(\"../lib/headingToSlug\");\n\nvar _headingToSlug2 = _interopRequireDefault(_headingToSlug);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction CollapsableHeadings() {\n  var queries = {\n    getPathForHeadingNode: function getPathForHeadingNode(editor, node) {\n      var slugish = (0, _headingToSlug2.default)(editor.value.document, node);\n      return (editor.props.id || window.location.pathname) + \"#\" + slugish;\n    }\n  };\n  var commands = {\n    showContentBelow: function showContentBelow(editor, node) {\n      return editor.updateContentBelow(node, false);\n    },\n    hideContentBelow: function hideContentBelow(editor, node) {\n      return editor.updateContentBelow(node, true);\n    },\n    toggleContentBelow: function toggleContentBelow(editor, node) {\n      var collapsed = node.data.get(\"collapsed\");\n      var persistKey = editor.getPathForHeadingNode(node);\n\n      if (collapsed) {\n        localStorage.removeItem(persistKey);\n        return editor.showContentBelow(node);\n      } else {\n        localStorage.setItem(persistKey, \"collapsed\");\n        return editor.hideContentBelow(node);\n      }\n    },\n    updateContentBelow: function updateContentBelow(editor, node, hidden) {\n      var document = editor.value.document;\n      editor.setNodeByKey(node.key, {\n        data: {\n          collapsed: hidden\n        }\n      });\n      var headingLevel = parseInt(node.type.replace(/^heading/, \"\"), 10);\n      var headingLevels = [];\n\n      for (var level = headingLevel; level > 0; level--) {\n        headingLevels.push(\"heading\" + level);\n      }\n\n      var active = void 0;\n      document.nodes.forEach(function (n) {\n        if (active && headingLevels.includes(n.type)) {\n          active = false;\n          return;\n        }\n\n        if (active) {\n          editor.setNodeByKey(n.key, {\n            data: _extends({}, n.data.toJS(), {\n              hidden: hidden\n            })\n          });\n        }\n\n        if (n === node) active = true;\n      });\n    }\n  };\n\n  function onKeyDown(ev, editor, next) {\n    var startBlock = editor.value.startBlock;\n    if (!startBlock || !startBlock.type || !startBlock.type.match(/heading/) || !startBlock.data.get(\"collapsed\")) return next(); // editing a heading will always uncollapse the contents beneath as the persist\n    // key is based on the slug which is based on the heading contents\n\n    editor.toggleContentBelow(startBlock);\n    return next();\n  }\n\n  function normalizeNode(node, editor, next) {\n    if (node.object !== \"block\") return next();\n\n    if (node.type.match(/heading/)) {\n      var collapsed = node.data.get(\"collapsed\");\n      var persistKey = editor.getPathForHeadingNode(node);\n      var persistedState = localStorage.getItem(persistKey);\n      var shouldBeCollapsed = persistedState === \"collapsed\"; // ensures that on load content under collapsed headings is correctly hidden\n\n      if (shouldBeCollapsed && !collapsed) {\n        return function (editor) {\n          return editor.updateContentBelow(node, shouldBeCollapsed).setNodeByKey(node.key, {\n            data: {\n              collapsed: shouldBeCollapsed\n            }\n          });\n        };\n      }\n    }\n\n    return next();\n  }\n\n  return {\n    queries: queries,\n    commands: commands,\n    normalizeNode: normalizeNode,\n    onKeyDown: onKeyDown\n  };\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = KeyboardBehavior;\n\nvar _slate = require(\"slate\");\n\nvar _isModKey = require(\"../lib/isModKey\");\n\nvar _isModKey2 = _interopRequireDefault(_isModKey);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction KeyboardBehavior() {\n  function onKeyDown(ev, editor, next) {\n    if ((0, _isModKey2.default)(ev)) return next();\n\n    switch (ev.key) {\n      case \"Enter\":\n        return onEnter(ev, editor, next);\n\n      case \"Tab\":\n        return onTab(ev, editor, next);\n\n      case \"Backspace\":\n        return onBackspace(ev, editor, next);\n\n      default:\n        return next();\n    }\n  }\n\n  function onEnter(ev, editor, next) {\n    var value = editor.value;\n    var startBlock = value.startBlock,\n        selection = value.selection;\n    if (selection.isExpanded) return next();\n    if (!startBlock) return next();\n    var endOffset = selection.end.offset; // Hitting enter while an image is selected should jump caret below and\n    // insert a new paragraph\n\n    if (startBlock.type === \"image\") {\n      ev.preventDefault();\n      return editor.splitBlock(10).setBlocks({\n        type: \"paragraph\",\n        text: \"\",\n        isVoid: false\n      });\n    }\n\n    if (startBlock.type.match(/(heading|block-quote)/)) {\n      ev.preventDefault(); // if the heading is collapsed then show everything now so the user\n      // isn't editing in a weird state with some content hidden\n\n      editor.showContentBelow(startBlock); // Hitting enter in a heading or blockquote will split the node at that\n      // point and make the new node a paragraph\n\n      if (endOffset > 0) {\n        return editor.splitBlock().setBlocks(\"paragraph\");\n      } else {\n        return editor.splitBlock().moveToStartOfPreviousBlock().setBlocks(\"paragraph\");\n      }\n    }\n\n    return next();\n  }\n\n  function onTab(ev, editor, next) {\n    var value = editor.value;\n    var startBlock = value.startBlock;\n    if (!startBlock) return next(); // On tab, if at the end of the heading jump to the main body content\n    // as if it is another input field (act the same as enter).\n\n    if (startBlock.type === \"heading1\") {\n      ev.preventDefault();\n      return editor.splitBlock().setBlocks(\"paragraph\");\n    }\n\n    return next();\n  }\n\n  function onBackspace(ev, editor, next) {\n    var value = editor.value;\n    var startBlock = value.startBlock,\n        selection = value.selection;\n    if (!startBlock) return next(); // If image or embed is selected go ahead and delete the whole block\n\n    if (startBlock.type === \"image\" || startBlock.type === \"link\") {\n      ev.preventDefault();\n      return editor.removeNodeByKey(startBlock.key).moveToStartOfNextBlock();\n    }\n\n    if (selection.isExpanded) {\n      // If we're about to remove a heading then ensure that its not collapsed\n      if (selection.start.offset === 0 && selection.end.offset === startBlock.text.length && startBlock.type.match(/heading/)) {\n        editor.showContentBelow(startBlock);\n      }\n\n      return next();\n    } // If at the start of a non-paragraph, convert it back into a paragraph\n\n\n    if (selection.start.offset === 0) {\n      if (startBlock.type === \"paragraph\" || startBlock.type === \"code-line\") return next();\n      ev.preventDefault(); // If we're about to remove a heading then ensure that its not collapsed\n\n      if (startBlock.type.match(/heading/)) {\n        editor.showContentBelow(startBlock);\n      }\n\n      editor.setBlocks(\"paragraph\");\n\n      if (startBlock.type === \"list-item\") {\n        editor.unwrapBlock(\"bulleted-list\");\n      }\n\n      return;\n    }\n\n    if (selection.isCollapsed) {\n      var marksAtCursor = startBlock.getMarksAtRange(selection);\n      var codeMarksAtCursor = marksAtCursor.filter(function (mark) {\n        return mark.type === \"code\";\n      }); // If at the end of a code mark hitting backspace should remove the mark\n\n      if (codeMarksAtCursor.size > 0) {\n        ev.preventDefault();\n        var iterationOffset = 0;\n        var startOffset = selection.start.offset;\n        var textNode = startBlock.getTextAtOffset(startOffset);\n        var leavesUntilCode = textNode.leaves.takeUntil(function (v) {\n          iterationOffset += v.text.length;\n          return iterationOffset > startOffset;\n        });\n        var textUntilCode = leavesUntilCode.map(function (l) {\n          return l.text;\n        }).join(\"\");\n        var codeLeaf = leavesUntilCode.reverse().first();\n        if (!codeLeaf) return next();\n        if (startOffset !== textUntilCode.length) return next();\n        return editor.removeMarkByKey(textNode.key, startOffset - codeLeaf.text.length, startOffset, \"code\");\n      }\n    }\n\n    return next();\n  }\n\n  return {\n    onKeyDown: onKeyDown\n  };\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = KeyboardShortcuts;\n\nvar _slate = require(\"slate\");\n\nvar _isModKey = require(\"../lib/isModKey\");\n\nvar _isModKey2 = _interopRequireDefault(_isModKey);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction KeyboardShortcuts() {\n  function onKeyDown(ev, editor, next) {\n    if (!(0, _isModKey2.default)(ev)) return next();\n\n    switch (ev.key) {\n      case \"b\":\n        ev.preventDefault();\n        return toggleMark(editor, \"bold\", next);\n\n      case \"i\":\n        ev.preventDefault();\n        return toggleMark(editor, \"italic\", next);\n\n      case \"u\":\n        ev.preventDefault();\n        return toggleMark(editor, \"underlined\", next);\n\n      case \"d\":\n        ev.preventDefault();\n        return toggleMark(editor, \"deleted\", next);\n\n      case \"k\":\n        ev.preventDefault();\n        return editor.wrapLink(\"\");\n\n      default:\n        return next();\n    }\n  }\n\n  function toggleMark(editor, type, next) {\n    var value = editor.value; // don't allow formatting of main document title\n\n    if (value.startBlock.type === \"heading1\") return next();\n    editor.removeMark(\"code\").toggleMark(type);\n  }\n\n  return {\n    onKeyDown: onKeyDown\n  };\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = MarkdownShortcuts;\n\nvar _slate = require(\"slate\");\n\nvar inlineShortcuts = [{\n  mark: \"bold\",\n  shortcut: \"**\"\n}, {\n  mark: \"bold\",\n  shortcut: \"__\"\n}, {\n  mark: \"italic\",\n  shortcut: \"*\"\n}, {\n  mark: \"italic\",\n  shortcut: \"_\"\n}, {\n  mark: \"code\",\n  shortcut: \"`\"\n}, {\n  mark: \"inserted\",\n  shortcut: \"++\"\n}, {\n  mark: \"deleted\",\n  shortcut: \"~~\"\n}];\n\nfunction MarkdownShortcuts() {\n  function onKeyDown(ev, editor, next) {\n    var value = editor.value;\n    var startBlock = value.startBlock;\n    if (!startBlock) return next(); // markdown shortcuts should not be parsed in code\n\n    if (startBlock.type.match(/code/)) return next();\n\n    switch (ev.key) {\n      case \"-\":\n        return onDash(ev, editor, next);\n\n      case \"`\":\n        return onBacktick(ev, editor, next);\n\n      case \" \":\n        return onSpace(ev, editor, next);\n\n      default:\n        return next();\n    }\n  }\n  /**\n   * On space, if it was after an auto-markdown shortcut, convert the current\n   * node into the shortcut's corresponding type.\n   */\n\n\n  function onSpace(ev, editor, next) {\n    var value = editor.value;\n    var selection = value.selection,\n        startBlock = value.startBlock;\n    if (selection.isExpanded) return next();\n    var chars = startBlock.text.slice(0, selection.start.offset).trim();\n    var type = getType(chars);\n\n    if (type && !editor.isSelectionInTable()) {\n      // only shortcuts to change heading size should work in headings\n      if (startBlock.type.match(/heading/) && !type.match(/heading/)) {\n        return next();\n      } // don't allow doubling up a list item\n\n\n      if (type === \"list-item\" && startBlock.type === \"list-item\") {\n        return next();\n      }\n\n      ev.preventDefault();\n      var checked = void 0;\n      if (chars === \"[x]\") checked = true;\n      if (chars === \"[ ]\") checked = false;\n      editor.withoutNormalizing(function (c) {\n        c.moveFocusToStartOfNode(startBlock).delete().setBlocks({\n          type: type,\n          data: {\n            checked: checked\n          }\n        });\n\n        if (type === \"list-item\") {\n          if (checked !== undefined) {\n            return c.wrapBlock(\"todo-list\");\n          } else if (chars === \"1.\") {\n            return c.wrapBlock(\"ordered-list\");\n          } else {\n            return c.wrapBlock(\"bulleted-list\");\n          }\n        }\n\n        return next();\n      });\n    }\n\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = inlineShortcuts[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var key = _step.value; // find all inline characters\n\n        var mark = key.mark,\n            shortcut = key.shortcut;\n        var inlineTags = []; // only add tags if they have spaces around them or the tag is beginning\n        // or the end of the block\n\n        for (var i = 0; i < startBlock.text.length; i++) {\n          var text = startBlock.text;\n          var start = i;\n          var end = i + shortcut.length;\n          var beginningOfBlock = start === 0;\n          var endOfBlock = end === text.length;\n          var surroundedByWhitespaces = [text.slice(start - 1, start), text.slice(end, end + 1)].includes(\" \");\n\n          if (text.slice(start, end) === shortcut && (beginningOfBlock || endOfBlock || surroundedByWhitespaces)) {\n            inlineTags.push(i);\n          }\n        } // if we have multiple tags then mark the text between\n\n\n        if (inlineTags.length > 1) {\n          var firstText = startBlock.getFirstText();\n          var firstCodeTagIndex = inlineTags[0];\n          var lastCodeTagIndex = inlineTags[inlineTags.length - 1];\n          return editor.removeTextByKey(firstText.key, lastCodeTagIndex, shortcut.length).removeTextByKey(firstText.key, firstCodeTagIndex, shortcut.length).moveAnchorTo(firstCodeTagIndex, lastCodeTagIndex - shortcut.length).addMark(mark).moveToEnd().removeMark(mark);\n        }\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    return next();\n  }\n\n  function onDash(ev, editor, next) {\n    var value = editor.value;\n    var startBlock = value.startBlock,\n        selection = value.selection;\n    if (selection.isExpanded) return next();\n    if (startBlock.type.match(/heading/)) return next();\n    if (editor.isSelectionInTable()) return next();\n    var chars = startBlock.text.slice(0, selection.start.offset).replace(/\\s*/g, \"\");\n\n    if (chars === \"--\") {\n      ev.preventDefault();\n      return editor.moveFocusToStartOfNode(startBlock).delete().setBlocks({\n        type: \"horizontal-rule\",\n        isVoid: true\n      }, {\n        normalize: false\n      }).insertBlock(\"paragraph\").moveToStart();\n    }\n\n    return next();\n  }\n\n  function onBacktick(ev, editor, next) {\n    var value = editor.value;\n    var startBlock = value.startBlock,\n        selection = value.selection;\n    if (selection.isExpanded) return next();\n    if (startBlock.type.match(/heading/)) return next();\n    var chars = startBlock.text.slice(0, selection.start.offset).replace(/\\s*/g, \"\");\n\n    if (chars === \"``\") {\n      ev.preventDefault();\n      return editor.moveFocusToStartOfNode(startBlock).delete().setBlocks({\n        type: \"code\"\n      });\n    }\n\n    return next();\n  }\n  /**\n   * Get the block type for a series of auto-markdown shortcut `chars`.\n   */\n\n\n  function getType(chars) {\n    switch (chars) {\n      case \"*\":\n      case \"-\":\n      case \"+\":\n      case \"1.\":\n      case \"[ ]\":\n      case \"[x]\":\n        return \"list-item\";\n\n      case \">\":\n        return \"block-quote\";\n\n      case \"#\":\n        return \"heading1\";\n\n      case \"##\":\n        return \"heading2\";\n\n      case \"###\":\n        return \"heading3\";\n\n      case \"####\":\n        return \"heading4\";\n\n      case \"#####\":\n        return \"heading5\";\n\n      case \"######\":\n        return \"heading6\";\n\n      default:\n        return null;\n    }\n  }\n\n  return {\n    onKeyDown: onKeyDown\n  };\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = MarkdownPaste;\n\nvar _slate = require(\"slate\");\n\nvar _slateReact = require(\"slate-react\");\n\nvar _serializer = require(\"../serializer\");\n\nvar _serializer2 = _interopRequireDefault(_serializer);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction MarkdownPaste() {\n  return {\n    onPaste: function onPaste(ev, editor, next) {\n      var transfer = (0, _slateReact.getEventTransfer)(ev);\n      var text = transfer.text;\n      if (transfer.type !== \"text\" && transfer.type !== \"html\") return next();\n\n      var fragment = _serializer2.default.deserialize(text || \"\");\n\n      if (!fragment) return;\n      return editor.insertFragment(fragment.document);\n    }\n  };\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = Ellipsis;\n\nvar _slate = require(\"slate\");\n\nvar _isModKey = require(\"../lib/isModKey\");\n\nvar _isModKey2 = _interopRequireDefault(_isModKey);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction Ellipsis() {\n  return {\n    onKeyDown: function onKeyDown(ev, editor, next) {\n      if ((0, _isModKey2.default)(ev) || ev.key !== \" \") return next();\n      var value = editor.value;\n      var startBlock = value.startBlock,\n          selection = value.selection;\n      if (selection.isExpanded) return next();\n      if (!startBlock || startBlock.type.match(/code/)) return next();\n      var startOffset = value.selection.start.offset - 3;\n      var textNode = startBlock.getFirstText();\n      if (!textNode) return next();\n      var chars = textNode.text.slice(startOffset, startOffset + 3); // replaces three periods with a real ellipsis character\n\n      if (chars === \"...\") {\n        return editor.removeTextByKey(textNode.key, startOffset, 3).insertTextByKey(textNode.key, startOffset, \"\");\n      }\n\n      return next();\n    }\n  };\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nexports.default = Embeds;\n\nvar _react = require(\"react\");\n\nvar React = _interopRequireWildcard(_react);\n\nvar _slate = require(\"slate\");\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction findTopParent(document, node) {\n  var parent = void 0;\n\n  while (node !== document) {\n    parent = document.getParent(node.key);\n    if (parent === document) return node;\n    node = parent;\n  }\n}\n\nfunction Embeds(_ref) {\n  var getComponent = _ref.getComponent;\n  return {\n    normalizeNode: function normalizeNode(node, editor, next) {\n      if (!getComponent || node.type === \"block\" || node.type !== \"link\" || node.text !== node.data.get(\"href\")) return next();\n      var component = getComponent(node);\n      if (!component) return next();\n      var parent = findTopParent(editor.value.document, node);\n      if (!parent) return next();\n      if (parent.type !== \"paragraph\" || parent.text !== node.text) return next();\n      return function (editor) {\n        return editor.replaceNodeByKey(parent.key, {\n          object: \"block\",\n          type: \"link\",\n          isVoid: true,\n          nodes: [{\n            object: \"text\",\n            leaves: [{\n              text: \"\"\n            }]\n          }],\n          data: _extends({}, node.data.toJS(), {\n            embed: true,\n            component: component\n          })\n        });\n      };\n    }\n  };\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = require(\"react\");\n\nvar React = _interopRequireWildcard(_react);\n\nvar _slate = require(\"slate\");\n\nvar _Contents = require(\"../components/Contents\");\n\nvar _Contents2 = _interopRequireDefault(_Contents);\n\nvar _Toolbar = require(\"../components/Toolbar\");\n\nvar _Toolbar2 = _interopRequireDefault(_Toolbar);\n\nvar _BlockInsert = require(\"../components/BlockInsert\");\n\nvar _BlockInsert2 = _interopRequireDefault(_BlockInsert);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction ChromePlugin() {\n  function renderEditor(props, editor, next) {\n    var children = next();\n    return React.createElement(React.Fragment, null, !props.readOnly && React.createElement(_Toolbar2.default, {\n      value: editor.value,\n      editor: editor\n    }), !props.readOnly && React.createElement(_BlockInsert2.default, {\n      editor: editor\n    }), props.toc && React.createElement(_Contents2.default, {\n      editor: editor\n    }), children);\n  }\n\n  return {\n    renderEditor: renderEditor\n  };\n}\n\nexports.default = ChromePlugin;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require(\"react\");\n\nvar React = _interopRequireWildcard(_react);\n\nvar _styledComponents = require(\"styled-components\");\n\nvar _styledComponents2 = _interopRequireDefault(_styledComponents);\n\nvar _slateReact = require(\"slate-react\");\n\nvar _slate = require(\"slate\");\n\nvar _immutable = require(\"immutable\");\n\nvar _headingToSlug = require(\"../lib/headingToSlug\");\n\nvar _headingToSlug2 = _interopRequireDefault(_headingToSlug);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar Contents = function (_React$Component) {\n  _inherits(Contents, _React$Component);\n\n  function Contents() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Contents);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Contents.__proto__ || Object.getPrototypeOf(Contents)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n      activeHeading: undefined\n    }, _this.updateActiveHeading = function () {\n      var elements = _this.getHeadingElements();\n\n      if (!elements.length) return;\n      var activeHeading = elements[0].id;\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = elements[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var element = _step.value;\n          var bounds = element.getBoundingClientRect();\n          if (bounds.top <= 0) activeHeading = element.id;\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      if (_this.state.activeHeading !== activeHeading) {\n        _this.setState({\n          activeHeading: activeHeading\n        });\n      }\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(Contents, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (typeof window !== \"undefined\") {\n        window.addEventListener(\"scroll\", this.updateActiveHeading);\n      }\n\n      setImmediate(this.updateActiveHeading);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (typeof window !== \"undefined\") {\n        window.removeEventListener(\"scroll\", this.updateActiveHeading);\n      }\n    }\n  }, {\n    key: \"getHeadingElements\",\n    value: function getHeadingElements() {\n      var elements = [];\n      var tagNames = [\"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\"];\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = tagNames[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var tagName = _step2.value;\n          var _iteratorNormalCompletion3 = true;\n          var _didIteratorError3 = false;\n          var _iteratorError3 = undefined;\n\n          try {\n            for (var _iterator3 = document.getElementsByTagName(tagName)[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n              var ele = _step3.value;\n              elements.push(ele);\n            }\n          } catch (err) {\n            _didIteratorError3 = true;\n            _iteratorError3 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion3 && _iterator3.return) {\n                _iterator3.return();\n              }\n            } finally {\n              if (_didIteratorError3) {\n                throw _iteratorError3;\n              }\n            }\n          }\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      return elements;\n    }\n  }, {\n    key: \"getHeadings\",\n    value: function getHeadings() {\n      var editor = this.props.editor;\n      return editor.value.document.nodes.filter(function (node) {\n        if (!node.text) return false;\n        return node.type.match(/^heading/);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var editor = this.props.editor;\n      var headings = this.getHeadings(); // If there are one or less headings in the document no need for a minimap\n\n      if (headings.size <= 1) return null;\n      return React.createElement(Wrapper, null, React.createElement(Sections, null, headings.map(function (heading) {\n        var slug = (0, _headingToSlug2.default)(editor.value.document, heading);\n        var active = _this2.state.activeHeading === slug;\n        return React.createElement(ListItem, {\n          type: heading.type,\n          active: active,\n          key: slug\n        }, React.createElement(Anchor, {\n          href: \"#\" + slug,\n          active: active\n        }, heading.text));\n      })));\n    }\n  }]);\n\n  return Contents;\n}(React.Component);\n\nvar Wrapper = _styledComponents2.default.div.withConfig({\n  displayName: \"Contents__Wrapper\",\n  componentId: \"sc-1x41345-0\"\n})([\"font-family:\", \";font-weight:\", \";font-size:1em;line-height:1.4;position:fixed;right:0;top:150px;z-index:\", \";@media print{display:none;}\"], function (props) {\n  return props.theme.fontFamily;\n}, function (props) {\n  return props.theme.fontWeight;\n}, function (props) {\n  return props.theme.zIndex;\n});\n\nvar Anchor = _styledComponents2.default.a.withConfig({\n  displayName: \"Contents__Anchor\",\n  componentId: \"sc-1x41345-1\"\n})([\"color:\", \";font-weight:\", \";opacity:0;transition:all 100ms ease-in-out;margin-right:-5px;padding:2px 0;pointer-events:none;text-overflow:ellipsis;text-decoration:none;&:hover{color:\", \";}\"], function (props) {\n  return props.active ? props.theme.text : props.theme.textSecondary;\n}, function (props) {\n  return props.active ? 500 : 400;\n}, function (props) {\n  return props.theme.primary;\n});\n\nvar ListItem = _styledComponents2.default.li.withConfig({\n  displayName: \"Contents__ListItem\",\n  componentId: \"sc-1x41345-2\"\n})([\"position:relative;margin-left:\", \";text-align:right;color:\", \";padding-right:16px;white-space:nowrap;&:after{color:\", \";content:\\\"\", \"\\\";position:absolute;right:0;}\"], function (props) {\n  return props.type.match(/heading[12]/) ? \"8px\" : \"16px\";\n}, function (props) {\n  return props.theme.textSecondary;\n}, function (props) {\n  return props.active ? props.theme.text : props.theme.textSecondary;\n}, function (props) {\n  return props.type.match(/heading[12]/) ? \"\" : \"\";\n});\n\nvar Sections = _styledComponents2.default.ol.withConfig({\n  displayName: \"Contents__Sections\",\n  componentId: \"sc-1x41345-3\"\n})([\"margin:0 0 0 -8px;padding:0;list-style:none;font-size:13px;width:100px;transition-delay:1s;transition:width 100ms ease-in-out;&:hover{width:300px;transition-delay:0s;\", \"{opacity:1;margin-right:0;background:\", \";pointer-events:all;}}\"], Anchor, function (props) {\n  return props.theme.background;\n});\n\nexports.default = Contents;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require(\"react\");\n\nvar React = _interopRequireWildcard(_react);\n\nvar _styledComponents = require(\"styled-components\");\n\nvar _slateReact = require(\"slate-react\");\n\nvar _outlineIcons = require(\"outline-icons\");\n\nvar _ToolbarButton = require(\"./ToolbarButton\");\n\nvar _ToolbarButton2 = _interopRequireDefault(_ToolbarButton);\n\nvar _Separator = require(\"./Separator\");\n\nvar _Separator2 = _interopRequireDefault(_Separator);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar FormattingToolbar = function (_React$Component) {\n  _inherits(FormattingToolbar, _React$Component);\n\n  function FormattingToolbar() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, FormattingToolbar);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = FormattingToolbar.__proto__ || Object.getPrototypeOf(FormattingToolbar)).call.apply(_ref, [this].concat(args))), _this), _this.hasMark = function (type) {\n      try {\n        return _this.props.editor.value.marks.some(function (mark) {\n          return mark.type === type;\n        });\n      } catch (_err) {\n        return false;\n      }\n    }, _this.isBlock = function (type) {\n      var _this$props$editor$va = _this.props.editor.value,\n          startBlock = _this$props$editor$va.startBlock,\n          document = _this$props$editor$va.document; // accounts for blocks with an inner paragraph tag\n\n      var parent = startBlock && document.getParent(startBlock.key);\n      return startBlock && startBlock.type === type || parent && parent.type === type;\n    }, _this.onClickMark = function (ev, type) {\n      ev.preventDefault();\n      ev.stopPropagation();\n      var editor = _this.props.editor;\n      editor.toggleMark(type); // ensure we remove any other marks on inline code\n      // we don't allow bold / italic / strikethrough code.\n\n      var isInlineCode = _this.hasMark(\"code\") || type === \"code\";\n\n      if (isInlineCode) {\n        editor.value.marks.forEach(function (mark) {\n          if (mark.type !== \"code\") editor.removeMark(mark);\n        });\n      }\n    }, _this.onClickBlock = function (ev, type) {\n      ev.preventDefault();\n      ev.stopPropagation();\n      var editor = _this.props.editor;\n      var _editor$value = editor.value,\n          startBlock = _editor$value.startBlock,\n          document = _editor$value.document;\n      var parent = document.getParent(startBlock.key);\n      editor.setNodeByKey(startBlock.key, type); // accounts for blocks with an inner paragraph tag\n\n      if (parent && parent.type && type === \"paragraph\") {\n        editor.setNodeByKey(parent.key, type);\n      }\n    }, _this.handleCreateLink = function (ev) {\n      ev.preventDefault();\n      ev.stopPropagation();\n      var selection = window.getSelection().toString();\n      selection = selection.trim();\n\n      if (selection.length) {\n        var data = {\n          href: \"\"\n        };\n\n        _this.props.editor.wrapInline({\n          type: \"link\",\n          data: data\n        });\n\n        _this.props.onCreateLink(ev);\n      }\n    }, _this.renderMarkButton = function (type, IconClass, tooltip) {\n      var hiddenToolbarButtons = _this.props.theme.hiddenToolbarButtons;\n      var Tooltip = _this.props.editor.props.tooltip;\n\n      if (hiddenToolbarButtons && hiddenToolbarButtons.marks && hiddenToolbarButtons.marks.includes(type)) {\n        return null;\n      }\n\n      var isActive = _this.hasMark(type);\n\n      var onMouseDown = function onMouseDown(ev) {\n        return _this.onClickMark(ev, type);\n      };\n\n      return React.createElement(_ToolbarButton2.default, {\n        onMouseDown: onMouseDown,\n        active: isActive\n      }, React.createElement(Tooltip, {\n        tooltip: tooltip,\n        placement: \"top\"\n      }, React.createElement(IconClass, {\n        color: _this.props.theme.toolbarItem\n      })));\n    }, _this.renderBlockButton = function (type, IconClass, tooltip) {\n      var hiddenToolbarButtons = _this.props.theme.hiddenToolbarButtons;\n      var Tooltip = _this.props.editor.props.tooltip;\n      if (hiddenToolbarButtons && hiddenToolbarButtons.blocks && hiddenToolbarButtons.blocks.includes(type)) return null;\n\n      var isActive = _this.isBlock(type);\n\n      var onMouseDown = function onMouseDown(ev) {\n        return _this.onClickBlock(ev, isActive ? \"paragraph\" : type);\n      };\n\n      return React.createElement(_ToolbarButton2.default, {\n        onMouseDown: onMouseDown,\n        active: isActive\n      }, React.createElement(Tooltip, {\n        tooltip: tooltip,\n        placement: \"top\"\n      }, React.createElement(IconClass, {\n        color: _this.props.theme.toolbarItem\n      })));\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n  /**\n   * Check if the current selection has a mark with `type` in it.\n   *\n   * @param {String} type\n   * @return {Boolean}\n   */\n\n  /**\n   * When a mark button is clicked, toggle the current mark.\n   *\n   * @param {Event} ev\n   * @param {String} type\n   */\n\n\n  _createClass(FormattingToolbar, [{\n    key: \"render\",\n    value: function render() {\n      var isSelectionInTable = this.props.editor.isSelectionInTable();\n      var Tooltip = this.props.editor.props.tooltip;\n      return React.createElement(React.Fragment, null, this.renderMarkButton(\"bold\", _outlineIcons.BoldIcon, \"Bold\"), this.renderMarkButton(\"italic\", _outlineIcons.ItalicIcon, \"Italic\"), this.renderMarkButton(\"deleted\", _outlineIcons.StrikethroughIcon, \"Strikethrough\"), this.renderMarkButton(\"code\", _outlineIcons.CodeIcon, \"Code\"), !isSelectionInTable && React.createElement(React.Fragment, null, React.createElement(_Separator2.default, null), this.renderBlockButton(\"heading2\", _outlineIcons.Heading1Icon, \"Heading\"), this.renderBlockButton(\"heading3\", _outlineIcons.Heading2Icon, \"Subheading\"), this.renderBlockButton(\"block-quote\", _outlineIcons.BlockQuoteIcon, \"Quote\")), React.createElement(_Separator2.default, null), React.createElement(_ToolbarButton2.default, {\n        onMouseDown: this.handleCreateLink\n      }, React.createElement(Tooltip, {\n        tooltip: \"Create link\",\n        placement: \"top\"\n      }, React.createElement(_outlineIcons.LinkIcon, {\n        color: this.props.theme.toolbarItem\n      }))));\n    }\n  }]);\n\n  return FormattingToolbar;\n}(React.Component);\n\nexports.default = (0, _styledComponents.withTheme)(FormattingToolbar);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _regenerator = require(\"babel-runtime/regenerator\");\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _class;\n\nvar _react = require(\"react\");\n\nvar React = _interopRequireWildcard(_react);\n\nvar _reactDom = require(\"react-dom\");\n\nvar _slate = require(\"slate\");\n\nvar _slateReact = require(\"slate-react\");\n\nvar _build = require(\"boundless-arrow-key-navigation/build\");\n\nvar _build2 = _interopRequireDefault(_build);\n\nvar _styledComponents = require(\"styled-components\");\n\nvar _styledComponents2 = _interopRequireDefault(_styledComponents);\n\nvar _reactKeydown = require(\"react-keydown\");\n\nvar _reactKeydown2 = _interopRequireDefault(_reactKeydown);\n\nvar _outlineIcons = require(\"outline-icons\");\n\nvar _Flex = require(\"../Flex\");\n\nvar _Flex2 = _interopRequireDefault(_Flex);\n\nvar _LinkSearchResult = require(\"./LinkSearchResult\");\n\nvar _LinkSearchResult2 = _interopRequireDefault(_LinkSearchResult);\n\nvar _ToolbarButton = require(\"./ToolbarButton\");\n\nvar _ToolbarButton2 = _interopRequireDefault(_ToolbarButton);\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var gen = fn.apply(this, arguments);\n    return new Promise(function (resolve, reject) {\n      function step(key, arg) {\n        try {\n          var info = gen[key](arg);\n          var value = info.value;\n        } catch (error) {\n          reject(error);\n          return;\n        }\n\n        if (info.done) {\n          resolve(value);\n        } else {\n          return Promise.resolve(value).then(function (value) {\n            step(\"next\", value);\n          }, function (err) {\n            step(\"throw\", err);\n          });\n        }\n      }\n\n      return step(\"next\");\n    });\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar LinkToolbar = (0, _reactKeydown2.default)(_class = function (_React$Component) {\n  _inherits(LinkToolbar, _React$Component);\n\n  function LinkToolbar() {\n    var _ref,\n        _this2 = this;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, LinkToolbar);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = LinkToolbar.__proto__ || Object.getPrototypeOf(LinkToolbar)).call.apply(_ref, [this].concat(args))), _this), _this.originalValue = \"\", _this.state = {\n      isEditing: false,\n      isFetching: false,\n      results: []\n    }, _this.handleOutsideMouseClick = function (ev) {\n      // check if we're clicking inside the link toolbar\n      var element = (0, _reactDom.findDOMNode)(_this.wrapper);\n\n      if (!element || ev.target instanceof HTMLElement && element.contains(ev.target) || ev.button && ev.button !== 0) {\n        return;\n      } // check if we're clicking inside the link text\n\n\n      try {\n        var linkElement = (0, _slateReact.findDOMNode)(_this.props.link);\n\n        if (!linkElement || ev.target instanceof HTMLElement && linkElement.contains(ev.target) || ev.button && ev.button !== 0) {\n          return;\n        }\n      } catch (err) {} // errors finding dom node result in toolbar closing\n      // otherwise, we're clicking outside\n\n\n      ev.preventDefault();\n\n      _this.save(_this.input ? _this.input.value : \"\");\n    }, _this.search = function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regenerator2.default.mark(function _callee(term) {\n        var editor, _results;\n\n        return _regenerator2.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                editor = _this.props.editor;\n\n                if (editor.props.onSearchLink) {\n                  _context.next = 3;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 3:\n                _this.setState({\n                  isFetching: true\n                });\n\n                if (!term) {\n                  _context.next = 17;\n                  break;\n                }\n\n                _context.prev = 5;\n                _context.next = 8;\n                return editor.props.onSearchLink(term);\n\n              case 8:\n                _results = _context.sent;\n\n                _this.setState({\n                  results: _results\n                });\n\n                _context.next = 15;\n                break;\n\n              case 12:\n                _context.prev = 12;\n                _context.t0 = _context[\"catch\"](5);\n                console.error(_context.t0);\n\n              case 15:\n                _context.next = 18;\n                break;\n\n              case 17:\n                _this.setState({\n                  results: []\n                });\n\n              case 18:\n                _this.setState({\n                  isFetching: false\n                });\n\n              case 19:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, _this2, [[5, 12]]);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }(), _this.selectSearchResult = function (ev, url) {\n      ev.preventDefault();\n\n      _this.save(url);\n    }, _this.cancel = function () {\n      _this.save(_this.originalValue);\n    }, _this.onKeyDown = function (ev) {\n      switch (ev.key) {\n        case \"Enter\":\n          ev.preventDefault();\n          if (!(ev.target instanceof HTMLInputElement)) return;\n          return _this.save(ev.target.value);\n\n        case \"Escape\":\n          ev.preventDefault();\n          ev.stopPropagation();\n          return _this.cancel();\n\n        case \"ArrowDown\":\n          ev.preventDefault();\n\n          if (_this.firstDocument) {\n            var element = (0, _reactDom.findDOMNode)(_this.firstDocument);\n            if (element instanceof HTMLElement) element.focus();\n          }\n\n          break;\n\n        default:\n      }\n    }, _this.onChange = function (ev) {\n      if (!_this.props.editor.props.onSearchLink) return;\n\n      try {\n        new URL(ev.target.value);\n      } catch (err) {\n        // this is not a valid url, show search suggestions\n        _this.search(ev.target.value);\n\n        return;\n      }\n\n      _this.setState({\n        results: []\n      });\n    }, _this.onResultKeyDown = function (ev) {\n      if (ev.key === \"Escape\") {\n        ev.preventDefault();\n        ev.stopPropagation();\n\n        _this.cancel();\n      }\n    }, _this.removeLink = function () {\n      _this.save(\"\");\n    }, _this.openLink = function (ev) {\n      var _this$props = _this.props,\n          link = _this$props.link,\n          editor = _this$props.editor;\n      var href = link.data.get(\"href\");\n\n      if (editor.props.onClickLink) {\n        ev.preventDefault();\n        editor.props.onClickLink(href);\n      } else {\n        window.open(href, \"_blank\");\n      }\n    }, _this.save = function (href) {\n      var _this$props2 = _this.props,\n          editor = _this$props2.editor,\n          link = _this$props2.link;\n      href = href.trim();\n\n      if (href) {\n        editor.setNodeByKey(link.key, {\n          type: \"link\",\n          data: {\n            href: href\n          }\n        });\n      } else if (link) {\n        editor.unwrapInlineByKey(link.key);\n      }\n\n      editor.deselect();\n\n      _this.props.onBlur();\n    }, _this.setFirstResultRef = function (ref) {\n      _this.firstDocument = ref;\n    }, _this.setWrapperRef = function (ref) {\n      _this.wrapper = ref;\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(LinkToolbar, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this3 = this;\n\n      this.originalValue = this.props.link.data.get(\"href\");\n      this.setState({\n        isEditing: !!this.originalValue\n      });\n\n      if (typeof window !== \"undefined\") {\n        setImmediate(function () {\n          return window.addEventListener(\"mousedown\", _this3.handleOutsideMouseClick);\n        });\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (typeof window !== \"undefined\") {\n        window.removeEventListener(\"mousedown\", this.handleOutsideMouseClick);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var href = this.props.link.data.get(\"href\");\n      var hasResults = this.state.results.length > 0;\n      var Tooltip = this.props.editor.props.tooltip;\n      return React.createElement(\"span\", {\n        ref: this.setWrapperRef\n      }, React.createElement(LinkEditor, null, React.createElement(Input, {\n        ref: function ref(_ref3) {\n          return _this4.input = _ref3;\n        },\n        defaultValue: href,\n        placeholder: \"Search or paste a link\\u2026\",\n        onKeyDown: this.onKeyDown,\n        onChange: this.onChange,\n        autoFocus: href === \"\"\n      }), this.state.isEditing && React.createElement(_ToolbarButton2.default, {\n        onMouseDown: this.openLink\n      }, React.createElement(Tooltip, {\n        tooltip: \"Open link\",\n        placement: \"top\"\n      }, React.createElement(_outlineIcons.OpenIcon, {\n        color: this.props.theme.toolbarItem\n      }))), React.createElement(_ToolbarButton2.default, {\n        onMouseDown: this.removeLink\n      }, this.state.isEditing ? React.createElement(Tooltip, {\n        tooltip: \"Remove link\",\n        placement: \"top\"\n      }, React.createElement(_outlineIcons.TrashIcon, {\n        color: this.props.theme.toolbarItem\n      })) : React.createElement(Tooltip, {\n        tooltip: \"Discard link\",\n        placement: \"top\"\n      }, React.createElement(_outlineIcons.CloseIcon, {\n        color: this.props.theme.toolbarItem\n      })))), hasResults && React.createElement(SearchResults, null, React.createElement(_build2.default, {\n        mode: _build2.default.mode.VERTICAL,\n        defaultActiveChildIndex: 0\n      }, this.state.results.map(function (result, index) {\n        return React.createElement(_LinkSearchResult2.default, {\n          ref: function ref(_ref4) {\n            return index === 0 && _this4.setFirstResultRef(_ref4);\n          },\n          title: result.title,\n          key: result.url,\n          onClick: function onClick(ev) {\n            return _this4.selectSearchResult(ev, result.url);\n          },\n          onKeyDown: _this4.onResultKeyDown\n        });\n      }))));\n    }\n  }]);\n\n  return LinkToolbar;\n}(React.Component)) || _class;\n\nvar SearchResults = _styledComponents2.default.div.withConfig({\n  displayName: \"LinkToolbar__SearchResults\",\n  componentId: \"pbs8fd-0\"\n})([\"background:\", \";position:absolute;top:100%;width:100%;height:auto;left:0;padding:8px;margin-top:-3px;margin-bottom:0;border-radius:0 0 4px 4px;\"], function (props) {\n  return props.theme.toolbarBackground;\n});\n\nvar LinkEditor = (0, _styledComponents2.default)(_Flex2.default).withConfig({\n  displayName: \"LinkToolbar__LinkEditor\",\n  componentId: \"pbs8fd-1\"\n})([\"margin-left:-8px;margin-right:-8px;min-width:300px;\"]);\n\nvar Input = _styledComponents2.default.input.withConfig({\n  displayName: \"LinkToolbar__Input\",\n  componentId: \"pbs8fd-2\"\n})([\"font-size:15px;background:\", \";color:\", \";border-radius:2px;padding:4px 8px;border:0;margin:0;outline:none;flex-grow:1;\"], function (props) {\n  return props.theme.toolbarInput;\n}, function (props) {\n  return props.theme.toolbarItem;\n});\n\nexports.default = (0, _styledComponents.withTheme)(LinkToolbar);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require(\"react\");\n\nvar React = _interopRequireWildcard(_react);\n\nvar _styledComponents = require(\"styled-components\");\n\nvar _styledComponents2 = _interopRequireDefault(_styledComponents);\n\nvar _outlineIcons = require(\"outline-icons\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar LinkSearchResult = function (_React$Component) {\n  _inherits(LinkSearchResult, _React$Component);\n\n  function LinkSearchResult() {\n    _classCallCheck(this, LinkSearchResult);\n\n    return _possibleConstructorReturn(this, (LinkSearchResult.__proto__ || Object.getPrototypeOf(LinkSearchResult)).apply(this, arguments));\n  }\n\n  _createClass(LinkSearchResult, [{\n    key: \"render\",\n    value: function render() {\n      var _props = this.props,\n          title = _props.title,\n          rest = _objectWithoutProperties(_props, [\"title\"]);\n\n      return React.createElement(ListItem, _extends({}, rest, {\n        href: \"\"\n      }), React.createElement(\"i\", null, React.createElement(_outlineIcons.NextIcon, {\n        light: true\n      })), title);\n    }\n  }]);\n\n  return LinkSearchResult;\n}(React.Component);\n\nvar ListItem = _styledComponents2.default.a.withConfig({\n  displayName: \"LinkSearchResult__ListItem\",\n  componentId: \"d0io2b-0\"\n})([\"display:flex;align-items:center;height:28px;padding:6px 8px 6px 0;color:\", \";font-family:\", \";font-size:15px;text-decoration:none;overflow:hidden;white-space:nowrap;i{visibility:hidden;}&:hover,&:focus,&:active{font-weight:500;outline:none;i{visibility:visible;}}\"], function (props) {\n  return props.theme.toolbarItem;\n}, function (props) {\n  return props.theme.fontFamily;\n});\n\nexports.default = LinkSearchResult;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _isEqual2 = require(\"lodash/isEqual\");\n\nvar _isEqual3 = _interopRequireDefault(_isEqual2);\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require(\"react\");\n\nvar React = _interopRequireWildcard(_react);\n\nvar _reactPortal = require(\"react-portal\");\n\nvar _slate = require(\"slate\");\n\nvar _slateReact = require(\"slate-react\");\n\nvar _styledComponents = require(\"styled-components\");\n\nvar _styledComponents2 = _interopRequireDefault(_styledComponents);\n\nvar _outlineIcons = require(\"outline-icons\");\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nfunction findClosestRootNode(value, ev) {\n  var previous = void 0;\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = value.document.nodes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var node = _step.value;\n      var element = (0, _slateReact.findDOMNode)(node);\n      var bounds = element.getBoundingClientRect();\n      if (bounds.top > ev.clientY) return previous;\n      previous = {\n        node: node,\n        element: element,\n        bounds: bounds\n      };\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return previous;\n}\n\nvar BlockInsert = function (_React$Component) {\n  _inherits(BlockInsert, _React$Component);\n\n  function BlockInsert() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, BlockInsert);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = BlockInsert.__proto__ || Object.getPrototypeOf(BlockInsert)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n      top: -1000,\n      left: -1000,\n      active: false,\n      closestRootNode: undefined\n    }, _this.componentDidMount = function () {\n      if (typeof window !== \"undefined\") {\n        window.addEventListener(\"mousemove\", _this.handleMouseMove);\n      }\n    }, _this.componentWillUnmount = function () {\n      if (_this.mouseMoveTimeout) clearTimeout(_this.mouseMoveTimeout);\n\n      if (typeof window !== \"undefined\") {\n        window.removeEventListener(\"mousemove\", _this.handleMouseMove);\n      }\n    }, _this.setInactive = function () {\n      _this.setState({\n        active: false\n      });\n    }, _this.handleMouseMove = function (ev) {\n      var triggerPoint = _this.ref ? _this.ref.getBoundingClientRect().left + 300 : window.innerWidth;\n      var result = findClosestRootNode(_this.props.editor.value, ev);\n\n      var newState = _extends({}, _this.state);\n\n      newState.active = ev.clientX < triggerPoint;\n\n      if (result) {\n        newState.closestRootNode = result.node; // do not show block menu when it's open, the paragraph isn't empty\n        // or the current node is an embed.\n\n        var hideToolbar = result.node.type !== \"paragraph\" || !!result.node.text.trim() || result.node.isVoid;\n\n        if (hideToolbar) {\n          newState.left = -1000;\n          newState.active = false;\n        } else {\n          newState.left = Math.round(result.bounds.left - 20);\n          newState.top = Math.round(result.bounds.top + window.scrollY);\n        }\n      }\n\n      if (_this.state.active) {\n        if (_this.mouseMoveTimeout) clearTimeout(_this.mouseMoveTimeout);\n        _this.mouseMoveTimeout = setTimeout(_this.setInactive, 2000);\n      }\n\n      if (!(0, _isEqual3.default)(newState, _this.state)) {\n        _this.setState(newState);\n      }\n    }, _this.handleClick = function (ev) {\n      ev.preventDefault();\n      ev.stopPropagation();\n\n      _this.setState({\n        active: false\n      });\n\n      var editor = _this.props.editor; // remove any existing toolbars in the document as a fail safe\n\n      editor.value.document.nodes.forEach(function (node) {\n        if (node.type === \"block-toolbar\") {\n          editor.setNodeByKey(node.key, {\n            type: \"paragraph\",\n            isVoid: false\n          });\n        }\n      });\n      var node = _this.state.closestRootNode;\n      if (!node) return; // we're on an empty paragraph. just replace it with the block toolbar\n\n      if (!node.text.trim() && node.type === \"paragraph\") {\n        editor.setNodeByKey(node.key, {\n          type: \"block-toolbar\",\n          isVoid: true\n        });\n      }\n    }, _this.setRef = function (ref) {\n      _this.ref = ref;\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(BlockInsert, [{\n    key: \"render\",\n    value: function render() {\n      var theme = this.props.theme;\n      var style = {\n        top: this.state.top + \"px\",\n        left: this.state.left + \"px\"\n      };\n      return React.createElement(React.Fragment, null, React.createElement(\"span\", {\n        ref: this.setRef\n      }), React.createElement(_reactPortal.Portal, null, React.createElement(Trigger, {\n        active: this.state.active,\n        style: style\n      }, React.createElement(_outlineIcons.PlusIcon, {\n        onClick: this.handleClick,\n        color: theme.blockToolbarTrigger\n      }))));\n    }\n  }]);\n\n  return BlockInsert;\n}(React.Component);\n\nvar Trigger = _styledComponents2.default.div.withConfig({\n  displayName: \"BlockInsert__Trigger\",\n  componentId: \"sc-9hcx4i-0\"\n})([\"position:absolute;z-index:\", \";opacity:0;background-color:\", \";transition:opacity 150ms cubic-bezier(0.175,0.885,0.32,1.275),transform 150ms cubic-bezier(0.175,0.885,0.32,1.275);line-height:0;margin-left:-10px;box-shadow:inset 0 0 0 2px \", \";border-radius:100%;transform:scale(0.9);cursor:pointer;&:hover{background-color:\", \";svg{fill:\", \";}}\", \";\"], function (props) {\n  return props.theme.zIndex + 99;\n}, function (props) {\n  return props.theme.background;\n}, function (props) {\n  return props.theme.blockToolbarTrigger;\n}, function (props) {\n  return props.theme.blockToolbarTrigger;\n}, function (props) {\n  return props.theme.blockToolbarTriggerIcon;\n}, function (_ref2) {\n  var active = _ref2.active;\n  return active && \"\\n    transform: scale(1);\\n    opacity: .9;\\n  \";\n});\n\nexports.default = (0, _styledComponents.withTheme)(BlockInsert);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nfunction TablePlugin() {\n  return {\n    schema: {\n      blocks: {\n        \"table-cell\": {\n          data: {\n            align: function align(_align) {\n              return [\"left\", \"center\", \"right\"].includes(_align);\n            }\n          },\n          normalize: function normalize(change, error) {\n            if (error.code === \"node_data_invalid\") {\n              change.setNodeByKey(error.node.key, {\n                data: error.node.data.set(\"align\", \"left\")\n              });\n            }\n          }\n        }\n      }\n    },\n    commands: {\n      setColumnAlign: function setColumnAlign(editor, align) {\n        var pos = editor.getPosition(editor.value);\n        var columnCells = editor.getCellsAtColumn(pos.table, pos.getColumnIndex());\n        columnCells.forEach(function (cell) {\n          var data = cell.data.toObject();\n          editor.setNodeByKey(cell.key, {\n            data: _extends({}, data, {\n              align: align\n            })\n          });\n        });\n        return editor;\n      },\n      clearSelectedColumn: function clearSelectedColumn(editor, table, columnIndex) {\n        var cells = editor.getCellsAtColumn(table, columnIndex);\n        cells.forEach(function (cell) {\n          if (!cell) return;\n          var data = cell.data.toObject();\n          editor.setNodeByKey(cell.key, {\n            data: _extends({}, data, {\n              selected: undefined\n            })\n          });\n        });\n      },\n      clearSelectedRow: function clearSelectedRow(editor, table, rowIndex) {\n        var cells = editor.getCellsAtRow(table, rowIndex);\n        cells.forEach(function (cell) {\n          if (!cell) return;\n          var data = cell.data.toObject();\n          editor.setNodeByKey(cell.key, {\n            data: _extends({}, data, {\n              selected: undefined\n            })\n          });\n        });\n      },\n      resetAlign: function resetAlign(editor, table, rowIndex) {\n        var headCells = editor.getCellsAtRow(table, 0); // we need to re-query position as the table has been edited\n        // since it was originally queried (pre-insert)\n\n        var position = editor.getPositionByKey(editor.value.document, table.key);\n        var cells = editor.getCellsAtRow(position.table, rowIndex); // take the alignment data from the head cells and map onto\n        // the individual data cells\n\n        cells.forEach(function (cell, index) {\n          var headCell = headCells.get(index);\n          var data = headCell.data.toObject();\n          editor.setNodeByKey(cell.key, {\n            data: _extends({}, data, {\n              selected: undefined\n            })\n          });\n        });\n      },\n      clearSelected: function clearSelected(editor, table) {\n        var previouslySelectedRows = table.data.get(\"selectedRows\") || [];\n        var previouslySelectedColumns = table.data.get(\"selectedColumns\") || [];\n        editor.withoutSaving(function () {\n          previouslySelectedRows.forEach(function (rowIndex) {\n            editor.clearSelectedRow(table, rowIndex);\n          });\n          previouslySelectedColumns.forEach(function (columnIndex) {\n            editor.clearSelectedColumn(table, columnIndex);\n          });\n\n          if (previouslySelectedRows.length || previouslySelectedColumns.length) {\n            editor.setNodeByKey(table.key, {\n              data: {\n                selectedTable: false,\n                selectedColumns: [],\n                selectedRows: []\n              }\n            });\n          }\n        });\n        return editor;\n      },\n      selectColumn: function selectColumn(editor, selected) {\n        var pos = editor.getPosition(editor.value);\n        var selectedColumn = pos.getColumnIndex();\n        editor.withoutSaving(function () {\n          editor.clearSelected(pos.table);\n          editor.setNodeByKey(pos.table.key, {\n            data: {\n              selectedColumns: selected ? [selectedColumn] : [],\n              selectedRows: []\n            }\n          });\n          var cells = editor.getCellsAtColumn(pos.table, selectedColumn);\n          cells.forEach(function (cell) {\n            var data = cell.data.toObject();\n            editor.setNodeByKey(cell.key, {\n              data: _extends({}, data, {\n                selected: selected\n              })\n            });\n          });\n        });\n        return editor;\n      },\n      selectRow: function selectRow(editor, selected) {\n        var pos = editor.getPosition(editor.value);\n        var selectedRow = pos.getRowIndex();\n        editor.withoutSaving(function () {\n          editor.clearSelected(pos.table);\n          editor.setNodeByKey(pos.table.key, {\n            data: {\n              selectedColumns: [],\n              selectedRows: selected ? [selectedRow] : []\n            }\n          });\n          var cells = editor.getCellsAtRow(pos.table, selectedRow);\n          cells.forEach(function (cell) {\n            var data = cell.data.toObject();\n            editor.setNodeByKey(cell.key, {\n              data: _extends({}, data, {\n                selected: selected\n              })\n            });\n          });\n        });\n        return editor;\n      },\n      selectAll: function selectAll(editor) {\n        var selected = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n        var pos = editor.getPosition(editor.value);\n        editor.withoutSaving(function () {\n          editor.withoutNormalizing(function () {\n            var width = pos.getWidth();\n            var height = pos.getHeight();\n            var data = {\n              selectedTable: true,\n              selectedColumns: Array.from(Array(width).keys()),\n              selectedRows: Array.from(Array(height).keys())\n            };\n            editor.setNodeByKey(pos.table.key, {\n              data: data\n            });\n\n            for (var y = 0; y < pos.getHeight(); y++) {\n              var cells = editor.getCellsAtRow(pos.table, y);\n              cells.forEach(function (cell) {\n                var data = cell.data.toObject();\n                editor.setNodeByKey(cell.key, {\n                  data: _extends({}, data, {\n                    selected: selected\n                  })\n                });\n              });\n            }\n          });\n        });\n      }\n    }\n  };\n}\n\nexports.default = TablePlugin;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = require(\"react\");\n\nvar React = _interopRequireWildcard(_react);\n\nvar _slate = require(\"slate\");\n\nvar _Code = require(\"./components/Code\");\n\nvar _Code2 = _interopRequireDefault(_Code);\n\nvar _BlockToolbar = require(\"./components/Toolbar/BlockToolbar\");\n\nvar _BlockToolbar2 = _interopRequireDefault(_BlockToolbar);\n\nvar _HorizontalRule = require(\"./components/HorizontalRule\");\n\nvar _HorizontalRule2 = _interopRequireDefault(_HorizontalRule);\n\nvar _Image = require(\"./components/Image\");\n\nvar _Image2 = _interopRequireDefault(_Image);\n\nvar _Link = require(\"./components/Link\");\n\nvar _Link2 = _interopRequireDefault(_Link);\n\nvar _Table = require(\"./components/Table\");\n\nvar _Table2 = _interopRequireDefault(_Table);\n\nvar _Cell = require(\"./components/Table/Cell\");\n\nvar _Cell2 = _interopRequireDefault(_Cell);\n\nvar _Row = require(\"./components/Table/Row\");\n\nvar _Row2 = _interopRequireDefault(_Row);\n\nvar _ListItem = require(\"./components/ListItem\");\n\nvar _ListItem2 = _interopRequireDefault(_ListItem);\n\nvar _TodoList = require(\"./components/TodoList\");\n\nvar _TodoList2 = _interopRequireDefault(_TodoList);\n\nvar _Heading = require(\"./components/Heading\");\n\nvar _Paragraph = require(\"./components/Paragraph\");\n\nvar _Paragraph2 = _interopRequireDefault(_Paragraph);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction renderNode(props, editor, next) {\n  var attributes = props.attributes;\n  var hidden = props.node.data.get(\"hidden\");\n  if (hidden) attributes.style = {\n    display: \"none\"\n  };\n\n  switch (props.node.type) {\n    case \"paragraph\":\n      return React.createElement(_Paragraph2.default, props);\n\n    case \"block-toolbar\":\n      return React.createElement(_BlockToolbar2.default, props);\n\n    case \"block-quote\":\n      return React.createElement(\"blockquote\", attributes, props.children);\n\n    case \"bulleted-list\":\n      return React.createElement(\"ul\", attributes, props.children);\n\n    case \"ordered-list\":\n      return React.createElement(\"ol\", attributes, props.children);\n\n    case \"todo-list\":\n      return React.createElement(_TodoList2.default, attributes, props.children);\n\n    case \"table\":\n      return React.createElement(_Table2.default, props, props.children);\n\n    case \"table-row\":\n      return React.createElement(_Row2.default, props);\n\n    case \"table-cell\":\n      return React.createElement(_Cell2.default, props);\n\n    case \"list-item\":\n      return React.createElement(_ListItem2.default, props);\n\n    case \"horizontal-rule\":\n      return React.createElement(_HorizontalRule2.default, props);\n\n    case \"code\":\n      return React.createElement(_Code2.default, props);\n\n    case \"code-line\":\n      return React.createElement(\"pre\", attributes, props.children);\n\n    case \"image\":\n      return React.createElement(_Image2.default, props);\n\n    case \"link\":\n      return React.createElement(_Link2.default, props);\n\n    case \"heading1\":\n      return React.createElement(_Heading.Heading1, props);\n\n    case \"heading2\":\n      return React.createElement(_Heading.Heading2, props);\n\n    case \"heading3\":\n      return React.createElement(_Heading.Heading3, props);\n\n    case \"heading4\":\n      return React.createElement(_Heading.Heading4, props);\n\n    case \"heading5\":\n      return React.createElement(_Heading.Heading5, props);\n\n    case \"heading6\":\n      return React.createElement(_Heading.Heading6, props);\n\n    default:\n      return next();\n  }\n}\n\nexports.default = {\n  renderNode: renderNode\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _map2 = require(\"lodash/map\");\n\nvar _map3 = _interopRequireDefault(_map2);\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nexports.default = CodeBlock;\n\nvar _react = require(\"react\");\n\nvar React = _interopRequireWildcard(_react);\n\nvar _styledComponents = require(\"styled-components\");\n\nvar _styledComponents2 = _interopRequireDefault(_styledComponents);\n\nvar _CopyButton = require(\"./CopyButton\");\n\nvar _CopyButton2 = _interopRequireDefault(_CopyButton);\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction getCopyText(node) {\n  return node.nodes.reduce(function (memo, line) {\n    return \"\" + memo + line.text + \"\\n\";\n  }, \"\");\n}\n\nvar languages = {\n  none: \"None\",\n  bash: \"Bash\",\n  css: \"CSS\",\n  clike: \"C\",\n  csharp: \"C#\",\n  markup: \"HTML\",\n  java: \"Java\",\n  javascript: \"JavaScript\",\n  php: \"PHP\",\n  powershell: \"Powershell\",\n  python: \"Python\",\n  ruby: \"Ruby\",\n  typescript: \"TypeScript\"\n};\n\nfunction CodeBlock(_ref) {\n  var children = _ref.children,\n      node = _ref.node,\n      readOnly = _ref.readOnly,\n      attributes = _ref.attributes,\n      editor = _ref.editor;\n  var data = node.data;\n  var language = data.get(\"language\") || \"javascript\";\n\n  var onSelectLanguage = function onSelectLanguage(ev) {\n    editor.setNodeByKey(node.key, {\n      data: _extends({}, data, {\n        language: ev.target.value\n      })\n    });\n  };\n\n  return React.createElement(Container, _extends({}, attributes, {\n    spellCheck: false\n  }), readOnly && React.createElement(_CopyButton2.default, {\n    text: getCopyText(node)\n  }), React.createElement(Code, null, children), !readOnly && React.createElement(Language, {\n    onChange: onSelectLanguage,\n    value: language,\n    contentEditable: false\n  }, (0, _map3.default)(languages, function (name, value) {\n    return React.createElement(\"option\", {\n      key: value,\n      value: value\n    }, name);\n  })));\n}\n/*\n  Based on Prism template by Bram de Haan (http://atelierbram.github.io/syntax-highlighting/prism/)\n  Original Base16 color scheme by Chris Kempson (https://github.com/chriskempson/base16)\n*/\n\n\nvar Code = _styledComponents2.default.code.withConfig({\n  displayName: \"Code\",\n  componentId: \"hfpue9-0\"\n})([\"display:block;overflow-x:auto;padding:0.5em 1em;line-height:1.4em;pre{-webkit-font-smoothing:initial;font-family:\", \" font-size:13px;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;color:\", \";margin:0;}.token.comment,.token.prolog,.token.doctype,.token.cdata{color:\", \";}.token.punctuation{color:\", \";}.token.namespace{opacity:.7;}.token.operator,.token.boolean,.token.number{color:\", \";}.token.property{color:\", \";}.token.tag{color:\", \";}.token.string{color:\", \";}.token.selector{color:\", \";}.token.attr-name{color:\", \";}.token.entity,.token.url,.language-css .token.string,.style .token.string{color:\", \";}.token.attr-value,.token.keyword,.token.control,.token.directive,.token.unit{color:\", \";}.token.function{color:\", \";}.token.statement,.token.regex,.token.atrule{color:\", \";}.token.placeholder,.token.variable{color:\", \";}.token.deleted{text-decoration:line-through;}.token.inserted{border-bottom:1px dotted \", \";text-decoration:none;}.token.italic{font-style:italic;}.token.important,.token.bold{font-weight:bold;}.token.important{color:\", \";}.token.entity{cursor:help;}\"], function (props) {\n  return props.theme.fontFamilyMono;\n}, function (props) {\n  return props.theme.code;\n}, function (props) {\n  return props.theme.codeComment;\n}, function (props) {\n  return props.theme.codePunctuation;\n}, function (props) {\n  return props.theme.codeNumber;\n}, function (props) {\n  return props.theme.codeProperty;\n}, function (props) {\n  return props.theme.codeTag;\n}, function (props) {\n  return props.theme.codeString;\n}, function (props) {\n  return props.theme.codeSelector;\n}, function (props) {\n  return props.theme.codeAttr;\n}, function (props) {\n  return props.theme.codeEntity;\n}, function (props) {\n  return props.theme.codeKeyword;\n}, function (props) {\n  return props.theme.codeFunction;\n}, function (props) {\n  return props.theme.codeStatement;\n}, function (props) {\n  return props.theme.codePlaceholder;\n}, function (props) {\n  return props.theme.codeInserted;\n}, function (props) {\n  return props.theme.codeImportant;\n});\n\nvar Language = _styledComponents2.default.select.withConfig({\n  displayName: \"Code__Language\",\n  componentId: \"hfpue9-1\"\n})([\"position:absolute;bottom:2px;right:2px;opacity:0;\"]);\n\nvar Container = _styledComponents2.default.div.withConfig({\n  displayName: \"Code__Container\",\n  componentId: \"hfpue9-2\"\n})([\"position:relative;background:\", \";border-radius:4px;border:1px solid \", \";&:hover{> span{opacity:1;}\", \"{opacity:1;}}\"], function (props) {\n  return props.theme.codeBackground;\n}, function (props) {\n  return props.theme.codeBorder;\n}, Language);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require(\"react\");\n\nvar React = _interopRequireWildcard(_react);\n\nvar _styledComponents = require(\"styled-components\");\n\nvar _styledComponents2 = _interopRequireDefault(_styledComponents);\n\nvar _CopyToClipboard = require(\"./CopyToClipboard\");\n\nvar _CopyToClipboard2 = _interopRequireDefault(_CopyToClipboard);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar CopyButton = function (_React$Component) {\n  _inherits(CopyButton, _React$Component);\n\n  function CopyButton() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, CopyButton);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = CopyButton.__proto__ || Object.getPrototypeOf(CopyButton)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n      copied: false\n    }, _this.handleCopy = function () {\n      _this.setState({\n        copied: true\n      });\n\n      _this.copiedTimeout = setTimeout(function () {\n        return _this.setState({\n          copied: false\n        });\n      }, 3000);\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(CopyButton, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.copiedTimeout) clearTimeout(this.copiedTimeout);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(StyledCopyToClipboard, _extends({\n        onCopy: this.handleCopy\n      }, this.props), React.createElement(\"span\", null, this.state.copied ? \"Copied\" : \"Copy\"));\n    }\n  }]);\n\n  return CopyButton;\n}(React.Component);\n\nvar StyledCopyToClipboard = (0, _styledComponents2.default)(_CopyToClipboard2.default).withConfig({\n  displayName: \"CopyButton__StyledCopyToClipboard\",\n  componentId: \"sc-12wurb0-0\"\n})([\"position:absolute;top:0;right:0;opacity:0;transition:opacity 50ms ease-in-out;z-index:\", \";font-size:12px;font-weight:500;color:\", \";background:\", \";border-radius:0 4px 0 0;padding:2px 6px;cursor:pointer;\"], function (props) {\n  return props.theme.zIndex + 99;\n}, function (props) {\n  return props.theme.text;\n}, function (props) {\n  return props.theme.codeBorder;\n});\nexports.default = CopyButton;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _regenerator = require(\"babel-runtime/regenerator\");\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _dec, _desc, _value, _class;\n\nvar _react = require(\"react\");\n\nvar React = _interopRequireWildcard(_react);\n\nvar _reactDom = require(\"react-dom\");\n\nvar _reactKeydown = require(\"react-keydown\");\n\nvar _reactKeydown2 = _interopRequireDefault(_reactKeydown);\n\nvar _styledComponents = require(\"styled-components\");\n\nvar _styledComponents2 = _interopRequireDefault(_styledComponents);\n\nvar _outlineIcons = require(\"outline-icons\");\n\nvar _getDataTransferFiles = require(\"../../lib/getDataTransferFiles\");\n\nvar _getDataTransferFiles2 = _interopRequireDefault(_getDataTransferFiles);\n\nvar _EditList = require(\"../../plugins/EditList\");\n\nvar _EditList2 = _interopRequireDefault(_EditList);\n\nvar _ToolbarButton = require(\"./ToolbarButton\");\n\nvar _ToolbarButton2 = _interopRequireDefault(_ToolbarButton);\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var gen = fn.apply(this, arguments);\n    return new Promise(function (resolve, reject) {\n      function step(key, arg) {\n        try {\n          var info = gen[key](arg);\n          var value = info.value;\n        } catch (error) {\n          reject(error);\n          return;\n        }\n\n        if (info.done) {\n          resolve(value);\n        } else {\n          return Promise.resolve(value).then(function (value) {\n            step(\"next\", value);\n          }, function (err) {\n            step(\"throw\", err);\n          });\n        }\n      }\n\n      return step(\"next\");\n    });\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nfunction _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n  var desc = {};\n  Object['ke' + 'ys'](descriptor).forEach(function (key) {\n    desc[key] = descriptor[key];\n  });\n  desc.enumerable = !!desc.enumerable;\n  desc.configurable = !!desc.configurable;\n\n  if ('value' in desc || desc.initializer) {\n    desc.writable = true;\n  }\n\n  desc = decorators.slice().reverse().reduce(function (desc, decorator) {\n    return decorator(target, property, desc) || desc;\n  }, desc);\n\n  if (context && desc.initializer !== void 0) {\n    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n    desc.initializer = undefined;\n  }\n\n  if (desc.initializer === void 0) {\n    Object['define' + 'Property'](target, property, desc);\n    desc = null;\n  }\n\n  return desc;\n}\n\nvar changes = _EditList2.default.changes;\nvar BlockToolbar = (_dec = (0, _reactKeydown2.default)(\"esc\"), (_class = function (_React$Component) {\n  _inherits(BlockToolbar, _React$Component);\n\n  function BlockToolbar() {\n    var _ref,\n        _this2 = this;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, BlockToolbar);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = BlockToolbar.__proto__ || Object.getPrototypeOf(BlockToolbar)).call.apply(_ref, [this].concat(args))), _this), _this.handleOutsideMouseClick = function (ev) {\n      var element = (0, _reactDom.findDOMNode)(_this.bar);\n\n      if (!element || ev.target instanceof Node && element.contains(ev.target) || ev.button && ev.button !== 0) {\n        return;\n      }\n\n      _this.removeSelf(ev);\n    }, _this.insertBlock = function (options) {\n      var cursorPosition = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"on\";\n      var editor = _this.props.editor;\n      editor.moveToEndOfNode(_this.props.node);\n\n      if (options.type === \"table\") {\n        editor.insertTable(3, 3);\n      } else {\n        editor.insertBlock(options.type);\n      }\n\n      editor.removeNodeByKey(_this.props.node.key).moveToEnd();\n      if (cursorPosition === \"before\") editor.moveToStartOfPreviousBlock();\n      if (cursorPosition === \"after\") editor.moveToStartOfNextBlock();\n      return editor.focus();\n    }, _this.insertList = function (type) {\n      var editor = _this.props.editor;\n      var checked = type === \"todo-list\" ? false : undefined;\n      editor.moveToEndOfNode(_this.props.node).command(changes.wrapInList, type, undefined, {\n        type: \"list-item\",\n        data: {\n          checked: checked\n        }\n      });\n      return editor.removeNodeByKey(_this.props.node.key).moveToEndOfNextBlock().focus();\n    }, _this.handleClickBlock = function (ev, type) {\n      ev.preventDefault();\n      ev.stopPropagation();\n\n      switch (type) {\n        case \"heading1\":\n        case \"heading2\":\n        case \"block-quote\":\n        case \"table\":\n        case \"code\":\n          return _this.insertBlock({\n            type: type\n          });\n\n        case \"horizontal-rule\":\n          return _this.insertBlock({\n            type: {\n              type: \"horizontal-rule\",\n              isVoid: true\n            }\n          }, \"after\");\n\n        case \"bulleted-list\":\n          return _this.insertList(\"bulleted-list\");\n\n        case \"ordered-list\":\n          return _this.insertList(\"ordered-list\");\n\n        case \"todo-list\":\n          return _this.insertList(\"todo-list\");\n\n        case \"image\":\n          return _this.onPickImage();\n\n        default:\n      }\n    }, _this.onPickImage = function () {\n      // simulate a click on the file upload input element\n      if (_this.file) _this.file.click();\n    }, _this.onImagePicked = function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regenerator2.default.mark(function _callee(ev) {\n        var files, editor, i, file;\n        return _regenerator2.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                files = (0, _getDataTransferFiles2.default)(ev);\n                editor = _this.props.editor;\n\n                for (i = 0; i < files.length; i++) {\n                  file = files[i];\n                  editor.insertImageFile(file);\n                }\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, _this2);\n      }));\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }(), _this.renderBlockButton = function (type, IconClass, tooltip) {\n      var hiddenToolbarButtons = _this.props.theme.hiddenToolbarButtons;\n      var Tooltip = _this.props.editor.props.tooltip;\n\n      if (hiddenToolbarButtons && hiddenToolbarButtons.blocks && hiddenToolbarButtons.blocks.includes(type)) {\n        return null;\n      }\n\n      return React.createElement(_ToolbarButton2.default, {\n        onMouseDown: function onMouseDown(ev) {\n          return _this.handleClickBlock(ev, type);\n        }\n      }, React.createElement(Tooltip, {\n        tooltip: tooltip,\n        placement: \"top\"\n      }, React.createElement(IconClass, {\n        color: _this.props.theme.blockToolbarItem\n      })));\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(BlockToolbar, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (typeof window !== \"undefined\") {\n        window.addEventListener(\"click\", this.handleOutsideMouseClick);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (typeof window !== \"undefined\") {\n        window.removeEventListener(\"click\", this.handleOutsideMouseClick);\n      }\n    }\n  }, {\n    key: \"removeSelf\",\n    value: function removeSelf(ev) {\n      ev.preventDefault();\n      ev.stopPropagation();\n      this.props.editor.setNodeByKey(this.props.node.key, {\n        type: \"paragraph\",\n        text: \"\",\n        isVoid: false\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _props = this.props,\n          editor = _props.editor,\n          attributes = _props.attributes;\n      var hasImageUpload = !!editor.props.uploadImage;\n      return React.createElement(Bar, _extends({}, attributes, {\n        ref: function ref(_ref4) {\n          return _this3.bar = _ref4;\n        }\n      }), React.createElement(HiddenInput, {\n        type: \"file\",\n        ref: function ref(_ref3) {\n          return _this3.file = _ref3;\n        },\n        onChange: this.onImagePicked,\n        accept: \"image/*\"\n      }), this.renderBlockButton(\"heading1\", _outlineIcons.Heading1Icon, \"Add heading\"), this.renderBlockButton(\"heading2\", _outlineIcons.Heading2Icon, \"Add subheading\"), React.createElement(Separator, null), this.renderBlockButton(\"bulleted-list\", _outlineIcons.BulletedListIcon, \"Start bulleted list\"), this.renderBlockButton(\"ordered-list\", _outlineIcons.OrderedListIcon, \"Start numbered List\"), this.renderBlockButton(\"todo-list\", _outlineIcons.TodoListIcon, \"Start checklist\"), React.createElement(Separator, null), this.renderBlockButton(\"table\", _outlineIcons.TableIcon, \"Create table\"), this.renderBlockButton(\"block-quote\", _outlineIcons.BlockQuoteIcon, \"Add quote\"), this.renderBlockButton(\"code\", _outlineIcons.CodeIcon, \"Add code\"), this.renderBlockButton(\"horizontal-rule\", _outlineIcons.HorizontalRuleIcon, \"Add break\"), hasImageUpload && this.renderBlockButton(\"image\", _outlineIcons.ImageIcon, \"Add image\"));\n    }\n  }]);\n\n  return BlockToolbar;\n}(React.Component), _applyDecoratedDescriptor(_class.prototype, \"removeSelf\", [_dec], Object.getOwnPropertyDescriptor(_class.prototype, \"removeSelf\"), _class.prototype), _class));\n\nvar Separator = _styledComponents2.default.div.withConfig({\n  displayName: \"BlockToolbar__Separator\",\n  componentId: \"sc-1bzrnp2-0\"\n})([\"height:100%;width:1px;background:rgba(0,0,0,0.1);display:inline-block;margin-left:10px;\"]);\n\nvar Bar = _styledComponents2.default.div.withConfig({\n  displayName: \"BlockToolbar__Bar\",\n  componentId: \"sc-1bzrnp2-1\"\n})([\"display:flex;z-index:\", \";position:relative;align-items:center;background:\", \";height:44px;&:before,&:after{content:\\\"\\\";position:absolute;left:-100%;width:100%;height:44px;background:\", \";}&:after{left:auto;right:-100%;}@media print{display:none;}\"], function (props) {\n  return props.theme.zIndex;\n}, function (props) {\n  return props.theme.blockToolbarBackground;\n}, function (props) {\n  return props.theme.blockToolbarBackground;\n});\n\nvar HiddenInput = _styledComponents2.default.input.withConfig({\n  displayName: \"BlockToolbar__HiddenInput\",\n  componentId: \"sc-1bzrnp2-2\"\n})([\"position:absolute;top:-100px;left:-100px;visibility:hidden;\"]);\n\nexports.default = (0, _styledComponents.withTheme)(BlockToolbar);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _styledComponents = require(\"styled-components\");\n\nvar _styledComponents2 = _interopRequireDefault(_styledComponents);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction HorizontalRule(props) {\n  var isSelected = props.isSelected,\n      attributes = props.attributes;\n  return _react2.default.createElement(StyledHr, _extends({\n    isSelected: isSelected\n  }, attributes));\n}\n\nvar StyledHr = _styledComponents2.default.hr.withConfig({\n  displayName: \"HorizontalRule__StyledHr\",\n  componentId: \"sc-14nxlq1-0\"\n})([\"padding-top:0.75em;margin:0;border:0;border-bottom:1px solid \", \";\"], function (props) {\n  return props.isSelected ? props.theme.selected : props.theme.horizontalRule;\n});\n\nexports.default = HorizontalRule;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require(\"react\");\n\nvar React = _interopRequireWildcard(_react);\n\nvar _reactMediumImageZoom = require(\"react-medium-image-zoom\");\n\nvar _reactMediumImageZoom2 = _interopRequireDefault(_reactMediumImageZoom);\n\nvar _reactAutosizeTextarea = require(\"react-autosize-textarea\");\n\nvar _reactAutosizeTextarea2 = _interopRequireDefault(_reactAutosizeTextarea);\n\nvar _styledComponents = require(\"styled-components\");\n\nvar _styledComponents2 = _interopRequireDefault(_styledComponents);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar Image = function (_React$Component) {\n  _inherits(Image, _React$Component);\n\n  function Image() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Image);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Image.__proto__ || Object.getPrototypeOf(Image)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n      hasError: false\n    }, _this.handleKeyDown = function (ev) {\n      if (ev.key === \"Enter\" || ev.key === \"ArrowDown\") {\n        ev.preventDefault();\n        var _this$props = _this.props,\n            editor = _this$props.editor,\n            node = _this$props.node;\n        return editor.moveToRangeOfNode(node).moveToStartOfNextBlock().focus();\n      }\n    }, _this.handleChange = function (ev) {\n      ev.stopPropagation();\n      var alt = ev.target.value;\n      var _this$props2 = _this.props,\n          editor = _this$props2.editor,\n          node = _this$props2.node;\n      var data = node.data.toObject();\n      editor.setNodeByKey(node.key, {\n        data: _extends({}, data, {\n          alt: alt\n        })\n      });\n    }, _this.handleClick = function (ev) {\n      ev.stopPropagation();\n    }, _this.handleError = function () {\n      _this.setState({\n        hasError: true\n      });\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(Image, [{\n    key: \"render\",\n    value: function render() {\n      var _props = this.props,\n          attributes = _props.attributes,\n          node = _props.node,\n          isSelected = _props.isSelected,\n          readOnly = _props.readOnly;\n      var isLoading = node.data.get(\"loading\");\n      var caption = node.data.get(\"alt\") || \"\";\n      var src = node.data.get(\"src\");\n      var showCaption = !readOnly || caption;\n      return React.createElement(CenteredImage, {\n        contentEditable: false\n      }, this.state.hasError ? React.createElement(React.Fragment, null, React.createElement(ErrorImg, {\n        as: \"div\",\n        isSelected: isSelected\n      }), React.createElement(ErrorMessage, null, \"Could not load image\")) : React.createElement(React.Fragment, null, React.createElement(HiddenImg, {\n        src: src,\n        onError: this.handleError\n      }), !readOnly ? React.createElement(StyledImg, _extends({}, attributes, {\n        src: src,\n        alt: caption,\n        isSelected: isSelected,\n        isLoading: isLoading,\n        loading: \"lazy\"\n      })) : React.createElement(_reactMediumImageZoom2.default, {\n        image: _extends({\n          src: src,\n          alt: caption,\n          style: {\n            maxWidth: \"100%\"\n          }\n        }, attributes),\n        shouldRespectMaxDimension: true\n      }), showCaption && React.createElement(Caption, {\n        type: \"text\",\n        placeholder: \"Write a caption\",\n        onKeyDown: this.handleKeyDown,\n        onChange: this.handleChange,\n        onClick: this.handleClick,\n        defaultValue: caption,\n        contentEditable: false,\n        disabled: readOnly,\n        tabIndex: -1,\n        async: true\n      })));\n    }\n  }]);\n\n  return Image;\n}(React.Component);\n\nvar ErrorMessage = _styledComponents2.default.div.withConfig({\n  displayName: \"Image__ErrorMessage\",\n  componentId: \"sc-77wqjk-0\"\n})([\"position:absolute;text-align:center;transform:translate3d(-50%,-50%,0);top:50%;left:50%;color:\", \";background:\", \";display:block;margin:0 auto;padding:4px 8px;border-radius:4px;font-size:14px;\"], function (props) {\n  return props.theme.text;\n}, function (props) {\n  return props.theme.imageErrorBackground;\n}); // This wrapper allows us to pass non-standard HTML attributes through to the DOM element\n// https://www.styled-components.com/docs/basics#passed-props\n\n\nvar Img = function Img(props) {\n  return React.createElement(\"img\", props);\n};\n\nvar HiddenImg = (0, _styledComponents2.default)(Img).withConfig({\n  displayName: \"Image__HiddenImg\",\n  componentId: \"sc-77wqjk-1\"\n})([\"display:none;\"]);\nvar StyledImg = (0, _styledComponents2.default)(Img).withConfig({\n  displayName: \"Image__StyledImg\",\n  componentId: \"sc-77wqjk-2\"\n})([\"max-width:100%;box-shadow:\", \";border-radius:\", \";opacity:\", \";\"], function (props) {\n  return props.isSelected ? \"0 0 0 2px \" + props.theme.selected : \"none\";\n}, function (props) {\n  return props.isSelected ? \"2px\" : \"0\";\n}, function (props) {\n  return props.isLoading ? 0.5 : 1;\n});\nvar ErrorImg = (0, _styledComponents2.default)(StyledImg).withConfig({\n  displayName: \"Image__ErrorImg\",\n  componentId: \"sc-77wqjk-3\"\n})([\"width:200px;height:100px;margin:0 auto;\"]);\n\nvar CenteredImage = _styledComponents2.default.span.withConfig({\n  displayName: \"Image__CenteredImage\",\n  componentId: \"sc-77wqjk-4\"\n})([\"display:block;text-align:center;position:relative;\"]);\n\nvar Caption = (0, _styledComponents2.default)(_reactAutosizeTextarea2.default).withConfig({\n  displayName: \"Image__Caption\",\n  componentId: \"sc-77wqjk-5\"\n})([\"border:0;display:block;font-size:13px;font-style:italic;color:\", \";padding:2px 0;line-height:16px;text-align:center;width:100%;outline:none;background:none;resize:none;&::placeholder{color:\", \";}\"], function (props) {\n  return props.theme.textSecondary;\n}, function (props) {\n  return props.theme.placeholder;\n});\nexports.default = Image;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nexports.default = Link;\n\nvar _react = require(\"react\");\n\nvar React = _interopRequireWildcard(_react);\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction Link(props) {\n  var attributes = props.attributes,\n      node = props.node,\n      children = props.children,\n      editor = props.editor,\n      readOnly = props.readOnly;\n  var embed = node.data.get(\"embed\");\n  var Component = node.data.get(\"component\");\n  var href = node.data.get(\"href\");\n\n  if (embed && Component) {\n    return React.createElement(Component, props);\n  }\n\n  return React.createElement(\"a\", _extends({}, attributes, {\n    href: readOnly ? href : undefined,\n    onClick: readOnly ? function (ev) {\n      if (editor.props.onClickLink) {\n        ev.preventDefault();\n        editor.props.onClickLink(href);\n      }\n    } : undefined,\n    target: \"_blank\"\n  }), children);\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require(\"react\");\n\nvar React = _interopRequireWildcard(_react);\n\nvar _reactDom = require(\"react-dom\");\n\nvar _styledComponents = require(\"styled-components\");\n\nvar _styledComponents2 = _interopRequireDefault(_styledComponents);\n\nvar _Cell = require(\"./Cell\");\n\nvar _Scrollable = require(\"./Scrollable\");\n\nvar _Scrollable2 = _interopRequireDefault(_Scrollable);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n} // Looking for logic for the table controls and toolbars?\n// It mostly lives in the \"Cell\" component and the Table plugin\n\n\nvar Table = function (_React$Component) {\n  _inherits(Table, _React$Component);\n\n  function Table() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Table);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Table.__proto__ || Object.getPrototypeOf(Table)).call.apply(_ref, [this].concat(args))), _this), _this.handleOutsideMouseClick = function (ev) {\n      var element = (0, _reactDom.findDOMNode)(_this.table);\n\n      if (!element || ev.target instanceof Node && element.contains(ev.target)) {\n        return;\n      }\n\n      _this.props.editor.clearSelected(_this.props.node);\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(Table, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (typeof window !== \"undefined\") {\n        window.addEventListener(\"click\", this.handleOutsideMouseClick);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (typeof window !== \"undefined\") {\n        window.removeEventListener(\"click\", this.handleOutsideMouseClick);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _props = this.props,\n          children = _props.children,\n          attributes = _props.attributes;\n      return React.createElement(_Scrollable2.default, null, React.createElement(StyledTable, _extends({\n        ref: function ref(_ref2) {\n          return _this2.table = _ref2;\n        }\n      }, attributes), React.createElement(\"tbody\", null, children)));\n    }\n  }]);\n\n  return Table;\n}(React.Component);\n\nvar StyledTable = _styledComponents2.default.table.withConfig({\n  displayName: \"Table__StyledTable\",\n  componentId: \"sc-1q8gax3-0\"\n})([\"width:100%;border-collapse:collapse;border-radius:4px;border:1px solid \", \";margin-top:1em;*{box-sizing:initial;}\", \",\", \",\", \"{opacity:0;transition:opacity 100ms ease-in-out;}&:hover{\", \",\", \",\", \"{opacity:1;}}\"], function (props) {\n  return props.theme.tableDivider;\n}, _Cell.GripColumn, _Cell.GripRow, _Cell.GripTable, _Cell.GripColumn, _Cell.GripRow, _Cell.GripTable);\n\nexports.default = Table;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require(\"react\");\n\nvar React = _interopRequireWildcard(_react);\n\nvar _slate = require(\"slate\");\n\nvar _reactPortal = require(\"react-portal\");\n\nvar _reactDom = require(\"react-dom\");\n\nvar _TableToolbar = require(\"../Toolbar/TableToolbar\");\n\nvar _TableToolbar2 = _interopRequireDefault(_TableToolbar);\n\nvar _Toolbar = require(\"../Toolbar\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n} // These widths should be updated whenever the toolbar styles change\n\n\nvar MENU_WIDTHS = {\n  row: 148,\n  column: 248,\n  table: 68\n};\nvar MENU_ALIGN = {\n  row: \"left\",\n  column: \"center\",\n  table: \"left\"\n};\n\nvar Toolbar = function (_React$Component) {\n  _inherits(Toolbar, _React$Component);\n\n  function Toolbar() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Toolbar);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Toolbar.__proto__ || Object.getPrototypeOf(Toolbar)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n      top: 0,\n      left: 0\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(Toolbar, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps() {\n      if (!this.props.cell) return;\n      var element = (0, _reactDom.findDOMNode)(this.props.cell);\n      if (!(element instanceof HTMLElement)) return;\n      var rect = element.getBoundingClientRect();\n      var menuWidth = MENU_WIDTHS[this.props.type];\n      var menuHeight = 40; // Position the menu correctly depending on the type, cell and scroll position\n\n      var left = MENU_ALIGN[this.props.type] === \"center\" ? Math.round(rect.left + window.scrollX + rect.width / 2 - menuWidth / 2) : Math.round(rect.left + window.scrollX - menuWidth / 2);\n      var top = Math.round(rect.top + window.scrollY - menuHeight - 12);\n      this.setState(function (state) {\n        if (state.left !== left || state.top !== top) {\n          return {\n            left: left,\n            top: top\n          };\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _props = this.props,\n          editor = _props.editor,\n          type = _props.type,\n          active = _props.active;\n      if (!this.state.top && !this.state.left) return null;\n      return React.createElement(_reactPortal.Portal, null, React.createElement(_Toolbar.Menu, {\n        active: active,\n        style: this.state\n      }, React.createElement(_TableToolbar2.default, {\n        editor: editor,\n        isTableSelected: type === \"table\",\n        isRowSelected: type === \"row\",\n        isColumnSelected: type === \"column\"\n      })));\n    }\n  }]);\n\n  return Toolbar;\n}(React.Component);\n\nexports.default = Toolbar;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require(\"react\");\n\nvar React = _interopRequireWildcard(_react);\n\nvar _styledComponents = require(\"styled-components\");\n\nvar _slateReact = require(\"slate-react\");\n\nvar _outlineIcons = require(\"outline-icons\");\n\nvar _ToolbarButton = require(\"./ToolbarButton\");\n\nvar _ToolbarButton2 = _interopRequireDefault(_ToolbarButton);\n\nvar _Separator = require(\"./Separator\");\n\nvar _Separator2 = _interopRequireDefault(_Separator);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar TableToolbar = function (_React$Component) {\n  _inherits(TableToolbar, _React$Component);\n\n  function TableToolbar() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, TableToolbar);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = TableToolbar.__proto__ || Object.getPrototypeOf(TableToolbar)).call.apply(_ref, [this].concat(args))), _this), _this.hasAlign = function (align) {\n      try {\n        var _editor = _this.props.editor;\n        var _editor$value = _editor.value,\n            startBlock = _editor$value.startBlock,\n            document = _editor$value.document;\n\n        var position = _editor.getPositionByKey(document, startBlock.key);\n\n        return position.cell.data.get(\"align\") === align || startBlock.data.get(\"align\") === align;\n      } catch (_err) {\n        return false;\n      }\n    }, _this.onClickAlign = function (ev, align) {\n      ev.preventDefault();\n      ev.stopPropagation();\n      var editor = _this.props.editor;\n      var _editor$value2 = editor.value,\n          startBlock = _editor$value2.startBlock,\n          document = _editor$value2.document;\n      var position = editor.getPositionByKey(document, startBlock.key);\n      editor.moveSelection(position.getColumnIndex(), position.getRowIndex());\n      editor.setColumnAlign(align);\n    }, _this.renderAlignButton = function (align, IconClass) {\n      var isActive = _this.hasAlign(align);\n\n      var Tooltip = _this.props.editor.props.tooltip;\n\n      var onMouseDown = function onMouseDown(ev) {\n        return _this.onClickAlign(ev, align);\n      };\n\n      return React.createElement(_ToolbarButton2.default, {\n        onMouseDown: onMouseDown,\n        active: isActive\n      }, React.createElement(Tooltip, {\n        tooltip: \"Align \" + align,\n        placement: \"top\"\n      }, React.createElement(IconClass, {\n        color: _this.props.theme.toolbarItem\n      })));\n    }, _this.removeTable = function (ev) {\n      ev.preventDefault();\n\n      _this.props.editor.removeTable().blur();\n    }, _this.addRowBelow = function (ev) {\n      ev.preventDefault();\n      var editor = _this.props.editor;\n      var _editor$value3 = editor.value,\n          startBlock = _editor$value3.startBlock,\n          document = _editor$value3.document;\n      var position = editor.getPositionByKey(document, startBlock.key);\n      editor.clearSelected(position.table).insertRow(position.getRowIndex() + 1).resetAlign(position.table, position.getRowIndex() + 1).blur();\n    }, _this.addRowAbove = function (ev) {\n      ev.preventDefault();\n      var editor = _this.props.editor;\n      var _editor$value4 = editor.value,\n          startBlock = _editor$value4.startBlock,\n          document = _editor$value4.document;\n      var position = editor.getPositionByKey(document, startBlock.key);\n      editor.clearSelected(position.table).insertRow(position.getRowIndex()).resetAlign(position.table, position.getRowIndex()).blur();\n    }, _this.removeRow = function (ev) {\n      ev.preventDefault();\n\n      _this.props.editor.removeRow().blur();\n    }, _this.addColumnRight = function (ev) {\n      ev.preventDefault();\n      var editor = _this.props.editor;\n      var _editor$value5 = editor.value,\n          startBlock = _editor$value5.startBlock,\n          document = _editor$value5.document;\n      var position = editor.getPositionByKey(document, startBlock.key);\n\n      _this.props.editor.clearSelected(position.table).insertColumn();\n    }, _this.addColumnLeft = function (ev) {\n      ev.preventDefault();\n      var editor = _this.props.editor;\n      var _editor$value6 = editor.value,\n          startBlock = _editor$value6.startBlock,\n          document = _editor$value6.document;\n      var position = editor.getPositionByKey(document, startBlock.key);\n      editor.insertColumn(position.getColumnIndex()).clearSelected(position.table).moveSelectionBy(-1, 0);\n    }, _this.removeColumn = function (ev) {\n      ev.preventDefault();\n\n      _this.props.editor.removeColumn().blur();\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(TableToolbar, [{\n    key: \"render\",\n    value: function render() {\n      var _props = this.props,\n          isRowSelected = _props.isRowSelected,\n          isColumnSelected = _props.isColumnSelected,\n          isTableSelected = _props.isTableSelected;\n      var Tooltip = this.props.editor.props.tooltip;\n      return React.createElement(React.Fragment, null, isTableSelected && React.createElement(_ToolbarButton2.default, {\n        onMouseDown: this.removeTable\n      }, React.createElement(Tooltip, {\n        tooltip: \"Delete table\",\n        placement: \"top\"\n      }, React.createElement(_outlineIcons.TrashIcon, {\n        color: this.props.theme.toolbarItem\n      }))), isColumnSelected && React.createElement(React.Fragment, null, this.renderAlignButton(\"left\", _outlineIcons.AlignLeftIcon), this.renderAlignButton(\"center\", _outlineIcons.AlignCenterIcon), this.renderAlignButton(\"right\", _outlineIcons.AlignRightIcon), React.createElement(_Separator2.default, null), React.createElement(_ToolbarButton2.default, {\n        onMouseDown: this.removeColumn\n      }, React.createElement(Tooltip, {\n        tooltip: \"Delete column\",\n        placement: \"top\"\n      }, React.createElement(_outlineIcons.TrashIcon, {\n        color: this.props.theme.toolbarItem\n      }))), React.createElement(_Separator2.default, null), React.createElement(_ToolbarButton2.default, {\n        onMouseDown: this.addColumnLeft\n      }, React.createElement(Tooltip, {\n        tooltip: \"Insert column left\",\n        placement: \"top\"\n      }, React.createElement(_outlineIcons.InsertLeftIcon, {\n        color: this.props.theme.toolbarItem\n      }))), React.createElement(_ToolbarButton2.default, {\n        onMouseDown: this.addColumnRight\n      }, React.createElement(Tooltip, {\n        tooltip: \"Insert column right\",\n        placement: \"top\"\n      }, React.createElement(_outlineIcons.InsertRightIcon, {\n        color: this.props.theme.toolbarItem\n      })))), isRowSelected && React.createElement(React.Fragment, null, React.createElement(_ToolbarButton2.default, {\n        onMouseDown: this.removeRow\n      }, React.createElement(Tooltip, {\n        tooltip: \"Delete row\",\n        placement: \"top\"\n      }, React.createElement(_outlineIcons.TrashIcon, {\n        color: this.props.theme.toolbarItem\n      }))), React.createElement(_Separator2.default, null), React.createElement(_ToolbarButton2.default, {\n        onMouseDown: this.addRowAbove\n      }, React.createElement(Tooltip, {\n        tooltip: \"Insert row above\",\n        placement: \"top\"\n      }, React.createElement(_outlineIcons.InsertAboveIcon, {\n        color: this.props.theme.toolbarItem\n      }))), React.createElement(_ToolbarButton2.default, {\n        onMouseDown: this.addRowBelow\n      }, React.createElement(Tooltip, {\n        tooltip: \"Insert row below\",\n        placement: \"top\"\n      }, React.createElement(_outlineIcons.InsertBelowIcon, {\n        color: this.props.theme.toolbarItem\n      })))));\n    }\n  }]);\n\n  return TableToolbar;\n}(React.Component);\n\nexports.default = (0, _styledComponents.withTheme)(TableToolbar);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _styledComponents = require(\"styled-components\");\n\nvar _styledComponents2 = _interopRequireDefault(_styledComponents);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar Grip = _styledComponents2.default.a.withConfig({\n  displayName: \"Grip\",\n  componentId: \"j9idwb-0\"\n})([\"position:absolute;cursor:pointer;background:\", \";\", \" &:hover{background:\", \";}\"], function (props) {\n  return props.isSelected ? props.theme.tableSelected : props.theme.tableDivider;\n}, function (props) {\n  return props.isSelected && \"opacity: 1 !important;\";\n}, function (props) {\n  return props.isSelected ? props.theme.tableSelected : props.theme.toolbarBackground;\n});\n\nexports.default = Grip;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require(\"react\");\n\nvar React = _interopRequireWildcard(_react);\n\nvar _styledComponents = require(\"styled-components\");\n\nvar _styledComponents2 = _interopRequireDefault(_styledComponents);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar Scrollable = function (_React$Component) {\n  _inherits(Scrollable, _React$Component);\n\n  function Scrollable() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Scrollable);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Scrollable.__proto__ || Object.getPrototypeOf(Scrollable)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n      shadowLeft: false,\n      shadowRight: false\n    }, _this.handleScroll = function (ev) {\n      var shadowLeft = ev.currentTarget.scrollLeft > 0;\n\n      if (_this.state.shadowLeft !== shadowLeft) {\n        _this.setState({\n          shadowLeft: shadowLeft\n        });\n      }\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(Scrollable, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.updateRightShadow();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.updateRightShadow();\n    }\n  }, {\n    key: \"updateRightShadow\",\n    value: function updateRightShadow() {\n      var shadowRight = !!(this.element && this.element.scrollWidth > this.element.clientWidth);\n\n      if (this.state.shadowRight !== shadowRight) {\n        this.setState({\n          shadowRight: shadowRight\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _props = this.props,\n          children = _props.children,\n          rest = _objectWithoutProperties(_props, [\"children\"]);\n\n      return React.createElement(Wrapper, null, React.createElement(Scrolling, _extends({\n        ref: function ref(_ref2) {\n          return _this2.element = _ref2;\n        },\n        onScroll: this.handleScroll\n      }, rest), children), React.createElement(Shadow, {\n        left: this.state.shadowLeft\n      }), React.createElement(Shadow, {\n        right: this.state.shadowRight\n      }));\n    }\n  }]);\n\n  return Scrollable;\n}(React.Component);\n\nvar Wrapper = _styledComponents2.default.div.withConfig({\n  displayName: \"Scrollable__Wrapper\",\n  componentId: \"sc-1r73oj6-0\"\n})([\"position:relative;margin:0.5em 0;\"]);\n\nvar Scrolling = _styledComponents2.default.div.withConfig({\n  displayName: \"Scrollable__Scrolling\",\n  componentId: \"sc-1r73oj6-1\"\n})([\"overflow-y:hidden;overflow-x:scroll;padding-left:1em;border-left:1px solid transparent;border-right:1px solid transparent;transition:border 250ms ease-in-out;margin-left:-1em;\"]);\n\nvar Shadow = _styledComponents2.default.div.withConfig({\n  displayName: \"Scrollable__Shadow\",\n  componentId: \"sc-1r73oj6-2\"\n})([\"position:absolute;top:0;bottom:0;left:-1em;width:16px;transition:box-shadow 250ms ease-in-out;border:0px solid transparent;border-left-width:1em;pointer-events:none;\", \" \", \"\"], function (props) {\n  return props.left && \"\\n     box-shadow: 16px 0 16px -16px inset rgba(0,0,0,0.25);\\n     border-left: 1em solid \" + props.theme.background + \";\\n  \";\n}, function (props) {\n  return props.right && \"right: 0;\\n     left: auto;\\n     box-shadow: -16px 0 16px -16px inset rgba(0,0,0,0.25);\\n  \";\n});\n\nexports.default = Scrollable;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = require(\"react\");\n\nvar React = _interopRequireWildcard(_react);\n\nvar _styledComponents = require(\"styled-components\");\n\nvar _styledComponents2 = _interopRequireDefault(_styledComponents);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nvar StyledTr = _styledComponents2.default.tr.withConfig({\n  displayName: \"Row__StyledTr\",\n  componentId: \"sc-1s45kbv-0\"\n})([\"position:relative;border-bottom:1px solid \", \";\"], function (props) {\n  return props.theme.tableDivider;\n});\n\nvar Row = function Row(_ref) {\n  var children = _ref.children,\n      attributes = _ref.attributes;\n  return React.createElement(StyledTr, attributes, children);\n};\n\nexports.default = Row;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nexports.default = ListItem;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _TodoItem = require(\"./TodoItem\");\n\nvar _TodoItem2 = _interopRequireDefault(_TodoItem);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction ListItem(_ref) {\n  var children = _ref.children,\n      node = _ref.node,\n      attributes = _ref.attributes,\n      props = _objectWithoutProperties(_ref, [\"children\", \"node\", \"attributes\"]);\n\n  var checked = node.data.get(\"checked\");\n\n  if (checked !== undefined) {\n    return _react2.default.createElement(_TodoItem2.default, _extends({\n      node: node,\n      attributes: attributes\n    }, props), children);\n  }\n\n  return _react2.default.createElement(\"li\", attributes, children);\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = undefined;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require(\"react\");\n\nvar React = _interopRequireWildcard(_react);\n\nvar _styledComponents = require(\"styled-components\");\n\nvar _styledComponents2 = _interopRequireDefault(_styledComponents);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar TodoItem = function (_React$Component) {\n  _inherits(TodoItem, _React$Component);\n\n  function TodoItem() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, TodoItem);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = TodoItem.__proto__ || Object.getPrototypeOf(TodoItem)).call.apply(_ref, [this].concat(args))), _this), _this.handleChange = function (ev) {\n      var checked = ev.target.checked;\n      var _this$props = _this.props,\n          editor = _this$props.editor,\n          node = _this$props.node;\n      editor.setNodeByKey(node.key, {\n        data: {\n          checked: checked\n        }\n      });\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(TodoItem, [{\n    key: \"render\",\n    value: function render() {\n      var _props = this.props,\n          children = _props.children,\n          node = _props.node,\n          attributes = _props.attributes,\n          readOnly = _props.readOnly;\n      var checked = node.data.get(\"checked\");\n      return React.createElement(ListItem, _extends({\n        checked: checked\n      }, attributes), React.createElement(\"span\", {\n        contentEditable: false\n      }, React.createElement(Input, {\n        type: \"checkbox\",\n        checked: checked,\n        onChange: this.handleChange,\n        disabled: readOnly\n      })), children);\n    }\n  }]);\n\n  return TodoItem;\n}(React.Component);\n\nexports.default = TodoItem;\n\nvar ListItem = _styledComponents2.default.li.withConfig({\n  displayName: \"TodoItem__ListItem\",\n  componentId: \"sc-9rkc5q-0\"\n})([\"padding-left:1.4em;position:relative;> p > span{color:\", \";text-decoration:\", \";}\"], function (props) {\n  return props.checked ? props.theme.textSecondary : \"inherit\";\n}, function (props) {\n  return props.checked ? \"line-through\" : \"none\";\n});\n\nvar Input = _styledComponents2.default.input.withConfig({\n  displayName: \"TodoItem__Input\",\n  componentId: \"sc-9rkc5q-1\"\n})([\"position:absolute;left:0;top:0.4em;\"]);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _styledComponents = require(\"styled-components\");\n\nvar _styledComponents2 = _interopRequireDefault(_styledComponents);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar TodoList = _styledComponents2.default.ul.withConfig({\n  displayName: \"TodoList\",\n  componentId: \"l5tb79-0\"\n})([\"list-style:none;padding:0 !important;ul{padding-left:1em;}\"]);\n\nexports.default = TodoList;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Heading6 = exports.Heading5 = exports.Heading4 = exports.Heading3 = exports.Heading2 = exports.Heading1 = exports.StyledHeading = undefined;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _react = require(\"react\");\n\nvar React = _interopRequireWildcard(_react);\n\nvar _styledComponents = require(\"styled-components\");\n\nvar _styledComponents2 = _interopRequireDefault(_styledComponents);\n\nvar _outlineIcons = require(\"outline-icons\");\n\nvar _headingToSlug = require(\"../lib/headingToSlug\");\n\nvar _headingToSlug2 = _interopRequireDefault(_headingToSlug);\n\nvar _CopyToClipboard = require(\"./CopyToClipboard\");\n\nvar _CopyToClipboard2 = _interopRequireDefault(_CopyToClipboard);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction Heading(props) {\n  var node = props.node,\n      editor = props.editor,\n      readOnly = props.readOnly,\n      children = props.children,\n      _props$component = props.component,\n      component = _props$component === undefined ? \"h1\" : _props$component,\n      attributes = props.attributes,\n      className = props.className;\n  var firstNode = editor.value.document.nodes.first() === node;\n  var slugish = (0, _headingToSlug2.default)(editor.value.document, node);\n  var showHash = readOnly && !!slugish;\n  var Component = component;\n  var pretitle = editor.props.pretitle || \"\";\n  var title = node.text.trim();\n  var startsWithPretitleAndSpace = pretitle && title.match(new RegExp(\"^\" + pretitle + \"\\\\s\"));\n  var pathName = typeof window !== \"undefined\" ? window.location.pathname : \"\";\n  var origin = typeof window !== \"undefined\" ? window.location.origin : \"\";\n  var pathToHeading = pathName + \"#\" + slugish;\n  var collapsed = node.data.get(\"collapsed\");\n  return React.createElement(Component, _extends({}, attributes, {\n    className: className\n  }), React.createElement(HiddenAnchor, {\n    id: slugish\n  }), React.createElement(CollapseToggle, {\n    onClick: function onClick() {\n      return editor.toggleContentBelow(node);\n    },\n    contentEditable: false,\n    collapsed: collapsed,\n    disabled: firstNode || !title\n  }, React.createElement(_outlineIcons.CollapsedIcon, null)), React.createElement(Wrapper, {\n    hasPretitle: firstNode && startsWithPretitleAndSpace\n  }, children), showHash && React.createElement(Anchor, {\n    name: slugish,\n    onCopy: function onCopy() {\n      return editor.props.onShowToast && editor.props.onShowToast(\"Link copied to clipboard\");\n    },\n    text: \"\" + origin + pathToHeading\n  }, React.createElement(\"span\", null, \"#\")));\n}\n\nvar CollapseToggle = _styledComponents2.default.a.withConfig({\n  displayName: \"Heading__CollapseToggle\",\n  componentId: \"h5m87l-0\"\n})([\"opacity:\", \";pointer-events:\", \";visibility:\", \";user-select:none;cursor:pointer;width:24px;height:24px;svg{\", \";fill:\", \";transition:transform 100ms ease-in-out;}&:hover{svg{fill:\", \";}}\"], function (props) {\n  return props.disabled ? \"0\" : \"1\";\n}, function (props) {\n  return props.disabled ? \"none\" : \"all\";\n}, function (props) {\n  return props.collapsed ? \"visible\" : \"hidden\";\n}, function (props) {\n  return props.collapsed && \"transform: rotate(-90deg);\";\n}, function (props) {\n  return props.collapsed ? props.theme.text : props.theme.placeholder;\n}, function (props) {\n  return props.theme.text;\n});\n\nvar Wrapper = _styledComponents2.default.div.withConfig({\n  displayName: \"Heading__Wrapper\",\n  componentId: \"h5m87l-1\"\n})([\"display:inline;margin-left:\", \";\"], function (props) {\n  return props.hasPretitle ? \"-1.2em\" : 0;\n});\n\nvar HiddenAnchor = _styledComponents2.default.a.withConfig({\n  displayName: \"Heading__HiddenAnchor\",\n  componentId: \"h5m87l-2\"\n})([\"visibility:hidden;display:block;position:relative;top:-50px;\"]);\n\nvar Anchor = (0, _styledComponents2.default)(_CopyToClipboard2.default).withConfig({\n  displayName: \"Heading__Anchor\",\n  componentId: \"h5m87l-3\"\n})([\"visibility:hidden;padding-left:0.25em;\"]);\nvar StyledHeading = exports.StyledHeading = (0, _styledComponents2.default)(Heading).withConfig({\n  displayName: \"Heading__StyledHeading\",\n  componentId: \"h5m87l-4\"\n})([\"display:flex;align-items:center;position:relative;margin-left:-24px;&:hover{\", \"{visibility:visible;}\", \"{color:\", \";visibility:visible;text-decoration:none;cursor:pointer;&:hover{color:\", \";}}}\"], CollapseToggle, Anchor, function (props) {\n  return props.theme.placeholder;\n}, function (props) {\n  return props.theme.text;\n});\n\nvar Heading1 = exports.Heading1 = function Heading1(props) {\n  return React.createElement(StyledHeading, _extends({\n    component: \"h1\"\n  }, props));\n};\n\nvar Heading2 = exports.Heading2 = function Heading2(props) {\n  return React.createElement(StyledHeading, _extends({\n    component: \"h2\"\n  }, props));\n};\n\nvar Heading3 = exports.Heading3 = function Heading3(props) {\n  return React.createElement(StyledHeading, _extends({\n    component: \"h3\"\n  }, props));\n};\n\nvar Heading4 = exports.Heading4 = function Heading4(props) {\n  return React.createElement(StyledHeading, _extends({\n    component: \"h4\"\n  }, props));\n};\n\nvar Heading5 = exports.Heading5 = function Heading5(props) {\n  return React.createElement(StyledHeading, _extends({\n    component: \"h5\"\n  }, props));\n};\n\nvar Heading6 = exports.Heading6 = function Heading6(props) {\n  return React.createElement(StyledHeading, _extends({\n    component: \"h6\"\n  }, props));\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = Paragraph;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction Paragraph(_ref) {\n  var attributes = _ref.attributes,\n      children = _ref.children;\n  return _react2.default.createElement(\"p\", attributes, children);\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = require(\"react\");\n\nvar React = _interopRequireWildcard(_react);\n\nvar _slate = require(\"slate\");\n\nvar _InlineCode = require(\"./components/InlineCode\");\n\nvar _InlineCode2 = _interopRequireDefault(_InlineCode);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction renderMark(props, editor, next) {\n  switch (props.mark.type) {\n    case \"bold\":\n      return React.createElement(\"strong\", null, props.children);\n\n    case \"code\":\n      return React.createElement(_InlineCode2.default, null, props.children);\n\n    case \"italic\":\n      return React.createElement(\"em\", null, props.children);\n\n    case \"underlined\":\n      return React.createElement(\"u\", null, props.children);\n\n    case \"deleted\":\n      return React.createElement(\"del\", null, props.children);\n\n    case \"inserted\":\n      return React.createElement(\"mark\", null, props.children);\n\n    default:\n      return next();\n  }\n}\n\nexports.default = {\n  renderMark: renderMark\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _styledComponents = require(\"styled-components\");\n\nvar _styledComponents2 = _interopRequireDefault(_styledComponents);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar InlineCode = _styledComponents2.default.code.attrs({\n  spellCheck: false\n}).withConfig({\n  displayName: \"InlineCode\",\n  componentId: \"sc-14p8r0u-0\"\n})([\"background:\", \";border-radius:4px;border:1px solid \", \";padding:3px 6px;font-family:\\\"Source Code Pro\\\",Menlo,monospace;font-size:85%;\"], function (props) {\n  return props.theme.codeBackground;\n}, function (props) {\n  return props.theme.codeBorder;\n});\n\nexports.default = InlineCode;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slate = require(\"slate\");\n\nvar commands = {\n  wrapLink: function wrapLink(editor, href) {\n    if (!editor.isLinkActive()) {\n      editor.wrapInline({\n        type: \"link\",\n        data: {\n          href: href\n        }\n      });\n    }\n  },\n  unwrapLink: function unwrapLink(editor) {\n    editor.unwrapInline(\"link\");\n  },\n  insertImageFile: function insertImageFile(editor, file) {\n    var _editor$props = editor.props,\n        uploadImage = _editor$props.uploadImage,\n        onImageUploadStart = _editor$props.onImageUploadStart,\n        onShowToast = _editor$props.onShowToast,\n        onImageUploadStop = _editor$props.onImageUploadStop;\n\n    if (!uploadImage) {\n      console.warn(\"uploadImage callback must be defined to handle image uploads.\");\n    }\n\n    if (onImageUploadStart) onImageUploadStart();\n\n    var key = _slate.KeyUtils.create();\n\n    var alt = \"\"; // load the file as a data URL\n\n    var placeholderSrc = URL.createObjectURL(file);\n\n    var node = _slate.Block.create({\n      key: key,\n      type: \"image\",\n      isVoid: true,\n      data: {\n        src: placeholderSrc,\n        alt: alt,\n        loading: true\n      }\n    });\n\n    editor.insertBlock(node).insertBlock(\"paragraph\").onChange(editor); // withoutSaving prevents this op from being added to the history, so you can't\n    // undo back to showing the upload placeholder. 'onChange' addition is a hack\n    // to get around a bug in slate-drop-or-paste-images\n\n    editor.withoutSaving(function (editor) {\n      // now we have a placeholder, start the image upload. This could be very fast\n      // or take multiple seconds. The user may further edit the content during this time.\n      uploadImage(file).then(function (src) {\n        if (!src) {\n          throw new Error(\"No image url returned from uploadImage callback\");\n        } // replace the placeholder with the final image if we can. The user may have\n        // removed it during upload so we need to take that into account.\n\n\n        try {\n          editor.setNodeByKey(key, {\n            data: {\n              src: src,\n              alt: alt,\n              loading: false\n            }\n          });\n        } catch (err) {\n          console.warn(\"Image placeholder could not be found\", err);\n        }\n      }).catch(function (err) {\n        // if there was an error during upload, remove the placeholder image\n        editor.removeNodeByKey(key);\n\n        if (onShowToast) {\n          onShowToast(\"Sorry, an error occurred uploading the image\");\n        }\n\n        throw err;\n      }).finally(function () {\n        if (onImageUploadStop) onImageUploadStop();\n      });\n    });\n  }\n};\nexports.default = commands;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slate = require(\"slate\");\n\nvar queries = {\n  isLinkActive: function isLinkActive(editor) {\n    var value = editor.value;\n    var inlines = value.inlines;\n    return inlines.some(function (i) {\n      return i.type === \"link\";\n    });\n  },\n  getLinkInSelection: function getLinkInSelection(editor) {\n    try {\n      var value = editor.value;\n      var selectedLinks = value.document.getLeafInlinesAtRange(value.selection).filter(function (node) {\n        return node.type === \"link\";\n      });\n\n      if (selectedLinks.size) {\n        var link = selectedLinks.first();\n        var selection = value.selection;\n\n        if (selection.anchor.isInNode(link) || selection.focus.isInNode(link)) {\n          return link;\n        }\n      }\n    } catch (err) {\n      // It's okay.\n      console.error(err);\n    }\n  }\n};\nexports.default = queries;"],"sourceRoot":""}