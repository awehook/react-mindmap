{"version":3,"sources":["../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/common/utils.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/common/errors.js","../node_modules/@blink-mind/plugin-topology-diagram/node_modules/@blueprintjs/core/lib/esm/common/utils.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/common/utils/compareUtils.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/common/utils/safeInvokeMember.js","../node_modules/@blink-mind/plugin-topology-diagram/node_modules/@blueprintjs/core/lib/esm/common/errors.js","../node_modules/@blink-mind/plugin-topology-diagram/node_modules/@blueprintjs/core/lib/esm/common/utils/compareUtils.js","../node_modules/@blink-mind/plugin-topology-diagram/node_modules/@blueprintjs/core/lib/esm/common/utils/safeInvokeMember.js","images/default.jpg","images/theme1.jpg","images/theme2.jpg","images/theme3.jpg","images/theme4.jpg","../node_modules/@blink-mind/core/node_modules/tiny-warning/dist/tiny-warning.esm.js","../node_modules/@blink-mind/core/node_modules/is-plain-object/index.js","../node_modules/@blink-mind/core/node_modules/isobject/index.js","../node_modules/@blink-mind/core/lib/main.es.js","../node_modules/@blink-mind/renderer-react/node_modules/tslib/tslib.es6.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/common/position.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/components/popover/popoverSharedProps.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/common/alignment.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/common/elevation.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/common/intent.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/common/classes.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/common/keys.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/common/props.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/common/abstractPureComponent2.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/components/icon/icon.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/components/breadcrumbs/breadcrumb.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/components/portal/portal.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/components/overlay/overlay.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/components/resize-sensor/resizeSensor.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/components/popover/popperUtils.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/components/popover/popoverArrow.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/components/popover/popoverMigrationUtils.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/components/popover/popover.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/components/tooltip/tooltip.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/common/boundary.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/components/html/html.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/components/overflow-list/overflowList.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/components/menu/menuDivider.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/components/text/text.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/components/menu/menuItem.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/components/menu/menu.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/components/breadcrumbs/breadcrumbs.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/components/spinner/spinner.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/components/button/abstractButton.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/components/button/buttons.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/components/dialog/dialog.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/components/divider/divider.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/components/button/buttonGroup.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/components/forms/controlGroup.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/components/forms/inputGroup.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/components/forms/numericInputUtils.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/components/forms/numericInput.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/components/context-menu/contextMenu.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/components/context-menu/contextMenuTarget.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/common/utils/isDarkTheme.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/components/hotkeys/hotkeyParser.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/components/drawer/drawer.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/components/hotkeys/keyCombo.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/components/hotkeys/hotkey.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/components/hotkeys/hotkeys.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/components/hotkeys/hotkeysDialog.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/components/hotkeys/hotkeysEvents.js","../node_modules/@blink-mind/renderer-react/node_modules/@blueprintjs/core/lib/esm/components/hotkeys/hotkeysTarget.js","../node_modules/@blink-mind/plugin-simple-text-editor/lib/main.es.js","../node_modules/@blink-mind/renderer-react/lib/main.es.js","../node_modules/@blink-mind/plugin-rich-text-editor/lib/main.es.js","../node_modules/@blink-mind/plugin-json-serializer/lib/main.es.js","../node_modules/@blink-mind/plugin-theme-selector/lib/main.es.js","../node_modules/@blink-mind/plugin-topology-diagram/node_modules/tslib/tslib.es6.js","../node_modules/@blink-mind/plugin-topology-diagram/node_modules/@blueprintjs/core/lib/esm/common/alignment.js","../node_modules/@blink-mind/plugin-topology-diagram/node_modules/@blueprintjs/core/lib/esm/common/elevation.js","../node_modules/@blink-mind/plugin-topology-diagram/node_modules/@blueprintjs/core/lib/esm/common/intent.js","../node_modules/@blink-mind/plugin-topology-diagram/node_modules/@blueprintjs/core/lib/esm/common/position.js","../node_modules/@blink-mind/plugin-topology-diagram/node_modules/@blueprintjs/core/lib/esm/common/classes.js","../node_modules/@blink-mind/plugin-topology-diagram/node_modules/@blueprintjs/core/lib/esm/common/keys.js","../node_modules/@blink-mind/plugin-topology-diagram/node_modules/@blueprintjs/core/lib/esm/common/abstractPureComponent2.js","../node_modules/@blink-mind/plugin-topology-diagram/node_modules/@blueprintjs/core/lib/esm/common/props.js","../node_modules/@blink-mind/plugin-topology-diagram/node_modules/@blueprintjs/core/lib/esm/components/portal/portal.js","../node_modules/@blink-mind/plugin-topology-diagram/node_modules/@blueprintjs/core/lib/esm/components/overlay/overlay.js","../node_modules/@blink-mind/plugin-topology-diagram/node_modules/@blueprintjs/core/lib/esm/components/resize-sensor/resizeSensor.js","../node_modules/@blink-mind/plugin-topology-diagram/node_modules/@blueprintjs/core/lib/esm/components/popover/popperUtils.js","../node_modules/@blink-mind/plugin-topology-diagram/node_modules/@blueprintjs/core/lib/esm/components/popover/popoverArrow.js","../node_modules/@blink-mind/plugin-topology-diagram/node_modules/@blueprintjs/core/lib/esm/components/popover/popoverMigrationUtils.js","../node_modules/@blink-mind/plugin-topology-diagram/node_modules/@blueprintjs/core/lib/esm/components/popover/popover.js","../node_modules/@blink-mind/plugin-topology-diagram/node_modules/@blueprintjs/core/lib/esm/components/tooltip/tooltip.js","../node_modules/@blink-mind/plugin-topology-diagram/node_modules/@blueprintjs/core/lib/esm/components/icon/icon.js","../node_modules/@blink-mind/plugin-topology-diagram/node_modules/@blueprintjs/core/lib/esm/components/spinner/spinner.js","../node_modules/@blink-mind/plugin-topology-diagram/node_modules/@blueprintjs/core/lib/esm/components/button/abstractButton.js","../node_modules/@blink-mind/plugin-topology-diagram/node_modules/@blueprintjs/core/lib/esm/components/button/buttons.js","../node_modules/@blink-mind/plugin-topology-diagram/node_modules/@blueprintjs/core/lib/esm/components/html/html.js","../node_modules/@blink-mind/plugin-topology-diagram/node_modules/@blueprintjs/core/lib/esm/components/dialog/dialog.js","../node_modules/@blink-mind/plugin-topology-diagram/node_modules/@blueprintjs/core/lib/esm/components/alert/alert.js","../node_modules/@blink-mind/plugin-topology-diagram/node_modules/@blueprintjs/core/lib/esm/components/drawer/drawer.js","../node_modules/@blink-mind/plugin-topology-diagram/node_modules/@blueprintjs/core/lib/esm/components/menu/menuDivider.js","../node_modules/@blink-mind/plugin-topology-diagram/node_modules/@blueprintjs/core/lib/esm/components/text/text.js","../node_modules/@blink-mind/plugin-topology-diagram/node_modules/@blueprintjs/core/lib/esm/components/menu/menu.js","../node_modules/@blink-mind/plugin-topology-diagram/node_modules/@blueprintjs/core/lib/esm/components/menu/menuItem.js","../node_modules/@blink-mind/plugin-topology-diagram/lib/main.es.js","component/toolbar/toolbar-item-open.js","component/toolbar/toolbar-item-layout.js","component/toolbar/toolbar-item-theme.js","utils/index.js","component/toolbar/toolbar-item-export.js","component/toolbar/toolbar.js","component/mindmap.js","App.js","serviceWorker.js","index.js"],"names":["isNodeEnv","env","process","isFunction","value","isReactNodeEmpty","node","skipArray","Array","isArray","length","every","n","ensureElement","child","tagName","trim","undefined","type","isReactElement","props","getDisplayName","ComponentClass","displayName","name","isElementOfType","element","ComponentType","safeInvoke","func","args","_i","arguments","apply","safeInvokeOrValue","funcOrValue","elementIsOrContains","testElement","contains","arrayLengthCompare","a","b","approxEqual","tolerance","Math","abs","clamp","val","min","max","Error","countDecimalPlaces","num","isFinite","e","p","round","throttleEvent","target","eventName","newEventName","throttledFunc","_throttleHelper","event","dispatchEvent","CustomEvent","addEventListener","throttleReactEventCallback","callback","options","event2","preventDefault","persist","throttle","method","onAnimationFrameRequested","onBeforeIsRunningCheck","onAfterIsRunningCheck","isRunning","requestAnimationFrame","ns","CLAMP_MIN_MAX","CONTEXTMENU_WARN_DECORATOR_NO_METHOD","CONTEXTMENU_WARN_DECORATOR_NEEDS_REACT_ELEMENT","HOTKEYS_HOTKEY_CHILDREN","HOTKEYS_WARN_DECORATOR_NO_METHOD","HOTKEYS_WARN_DECORATOR_NEEDS_REACT_ELEMENT","NUMERIC_INPUT_MIN_MAX","NUMERIC_INPUT_MINOR_STEP_SIZE_BOUND","NUMERIC_INPUT_MAJOR_STEP_SIZE_BOUND","NUMERIC_INPUT_MINOR_STEP_SIZE_NON_POSITIVE","NUMERIC_INPUT_MAJOR_STEP_SIZE_NON_POSITIVE","NUMERIC_INPUT_STEP_SIZE_NON_POSITIVE","NUMERIC_INPUT_STEP_SIZE_NULL","OVERFLOW_LIST_OBSERVE_PARENTS_CHANGED","POPOVER_REQUIRES_TARGET","POPOVER_HAS_BACKDROP_INTERACTION","POPOVER_WARN_TOO_MANY_CHILDREN","POPOVER_WARN_DOUBLE_CONTENT","POPOVER_WARN_DOUBLE_TARGET","POPOVER_WARN_EMPTY_CONTENT","POPOVER_WARN_HAS_BACKDROP_INLINE","POPOVER_WARN_UNCONTROLLED_ONINTERACTION","PORTAL_CONTEXT_CLASS_NAME_STRING","SPINNER_WARN_CLASSES_SIZE","DIALOG_WARN_NO_HEADER_ICON","DIALOG_WARN_NO_HEADER_CLOSE_BUTTON","DRAWER_VERTICAL_IS_IGNORED","DRAWER_ANGLE_POSITIONS_ARE_CASTED","arraysEqual","arrA","arrB","compare","i","shallowCompareKeys","objA","objB","keys","_shallowCompareKeys","keysA","Object","keysB","include","deepCompareKeys","_isSimplePrimitiveType","_deepCompareKeys","constructor","getDeepUnequalKeyValues","compareFn","filter","key","map","valueA","valueB","_getUnequalKeyValues","keySet","_arrayToObject","concat","_unionKeys","_isWhitelist","exclude","_isBlacklist","keySet_1","forEach","_filterKeys","hasOwnProperty","arr","reduce","obj","safeInvokeMember","member","ALERT_WARN_CANCEL_PROPS","ALERT_WARN_CANCEL_ESCAPE_KEY","ALERT_WARN_CANCEL_OUTSIDE_CLICK","module","exports","isProduction","condition","message","text","console","warn","x","isObjectObject","o","prototype","toString","call","isPlainObject","ctor","prot","_extendStatics","d","setPrototypeOf","__proto__","__extends","__","this","create","__read","m","Symbol","iterator","r","ar","next","done","push","error","__spread","compose","middleware","e_1","_a","TypeError","middleware_1","__values","middleware_1_1","e_1_1","return","context","index","dispatch","fn","bind","err","DiagramLayoutType","Controller","diagram","_b","plugins","onChange","readOnly","Map","registerPlugin","controller","plugin","CorePlugin","run","fns","composedFn","change","model","_super","Block","defineProperty","get","enumerable","configurable","createList","isList","data","defaultTheme","randomColor","background","highlightColor","marginH","marginV","contentStyle","lineHeight","linkStyle","lineRadius","lineType","lineWidth","rootTopic","fontSize","borderRadius","padding","subLinkStyle","lineColor","primaryTopic","borderWidth","borderStyle","normalTopic","border","TopicDirection","TopicVisualLevel","ROOT","PRIMARY","NORMAL","BlockType","CONTENT","DESC","FocusMode","EDITING_CONTENT","EDITING_DESC","SHOW_POPUP","DRAGGING","TopicRelationship","ANCESTOR","DESCENDANT","SIBLING","NONE","OpType","TOGGLE_COLLAPSE","COLLAPSE_ALL","EXPAND_ALL","ADD_CHILD","ADD_SIBLING","DELETE_TOPIC","FOCUS_TOPIC","SET_STYLE","SET_TOPIC_BLOCK","DELETE_TOPIC_BLOCK","START_EDITING_CONTENT","START_EDITING_DESC","DRAG_AND_DROP","SET_EDITOR_ROOT","defaultConfigRecord","allowUndo","layoutDir","LEFT_AND_RIGHT","theme","Config","fromJSON","Data","attrs","isMap","object","createKey","replace","c","random","Topic","getBlock","blocks","findIndex","block","parentKey","subKeys","_c","collapse","content","_d","_e","relations","style","defaultModelRecord","topics","config","rootTopicKey","editorRootTopicKey","focusKey","focusMode","formatVersion","zoomFactor","Model","isModel","createEmpty","update","set","merge","withMutations","topic","toJS","values","getTopic","getParentTopic","getTopicVisualLevel","level","getAllSubTopicKeys","topicKey","item","res","size","toArray","acc","log$1","focusTopic","addChild","child_1","addSibling","pItem","idx_1","indexOf","sibling_1","updateIn","insert","toggleCollapse","collapseAll","topicKeys","setIn","expandAll","deleteTopic","delete","deleteKeys","t","dKey","setBlockData","blockType","dt","deleteBlock","index_1","setContent","setDesc","setStyle","s","setTheme","setLayoutDir","setEditorRootTopicKey","setZoomFactor","_assign","assign","__rest","getOwnPropertySymbols","__decorate","decorators","desc","getOwnPropertyDescriptor","Reflect","decorate","Position","BOTTOM","BOTTOM_LEFT","BOTTOM_RIGHT","LEFT","LEFT_BOTTOM","LEFT_TOP","RIGHT","RIGHT_BOTTOM","RIGHT_TOP","TOP","TOP_LEFT","TOP_RIGHT","getPositionIgnoreAngles","position","PopoverPosition","AUTO","AUTO_END","AUTO_START","Alignment","CENTER","Elevation","Intent","SUCCESS","WARNING","DANGER","NS","BLUEPRINT_NAMESPACE","REACT_APP_BLUEPRINT_NAMESPACE","ACTIVE","ALIGN_LEFT","ALIGN_RIGHT","DARK","DISABLED","FILL","FIXED","FIXED_TOP","INLINE","INTERACTIVE","LARGE","LOADING","MINIMAL","MULTILINE","ROUND","SMALL","VERTICAL","POSITION_TOP","positionClass","POSITION_BOTTOM","POSITION_LEFT","POSITION_RIGHT","ELEVATION_0","elevationClass","ELEVATION_1","ELEVATION_2","ELEVATION_3","ELEVATION_4","INTENT_PRIMARY","INTENT_SUCCESS","INTENT_WARNING","INTENT_DANGER","FOCUS_DISABLED","UI_TEXT","RUNNING_TEXT","MONOSPACE_TEXT","TEXT_LARGE","TEXT_SMALL","TEXT_MUTED","TEXT_DISABLED","TEXT_OVERFLOW_ELLIPSIS","BLOCKQUOTE","CODE","CODE_BLOCK","HEADING","LIST","LIST_UNSTYLED","RTL","ALERT","ALERT_BODY","ALERT_CONTENTS","ALERT_FOOTER","BREADCRUMB","BREADCRUMB_CURRENT","BREADCRUMBS","BREADCRUMBS_COLLAPSED","BUTTON","BUTTON_GROUP","BUTTON_SPINNER","BUTTON_TEXT","CALLOUT","CALLOUT_ICON","CARD","COLLAPSE","COLLAPSE_BODY","COLLAPSIBLE_LIST","CONTEXT_MENU","CONTEXT_MENU_POPOVER_TARGET","CONTROL_GROUP","DIALOG","DIALOG_CONTAINER","DIALOG_BODY","DIALOG_CLOSE_BUTTON","DIALOG_FOOTER","DIALOG_FOOTER_ACTIONS","DIALOG_HEADER","DIVIDER","DRAWER","DRAWER_BODY","DRAWER_FOOTER","DRAWER_HEADER","EDITABLE_TEXT","EDITABLE_TEXT_CONTENT","EDITABLE_TEXT_EDITING","EDITABLE_TEXT_INPUT","EDITABLE_TEXT_PLACEHOLDER","FLEX_EXPANDER","HTML_SELECT","SELECT","HTML_TABLE","HTML_TABLE_BORDERED","HTML_TABLE_CONDENSED","HTML_TABLE_STRIPED","INPUT","INPUT_GHOST","INPUT_GROUP","INPUT_ACTION","CONTROL","CONTROL_INDICATOR","CONTROL_INDICATOR_CHILD","CHECKBOX","RADIO","SWITCH","SWITCH_INNER_TEXT","FILE_INPUT","FILE_INPUT_HAS_SELECTION","FILE_UPLOAD_INPUT","FILE_UPLOAD_INPUT_CUSTOM_TEXT","KEY","KEY_COMBO","MODIFIER_KEY","HOTKEY","HOTKEY_LABEL","HOTKEY_COLUMN","HOTKEY_DIALOG","LABEL","FORM_GROUP","FORM_CONTENT","FORM_HELPER_TEXT","MENU","MENU_ITEM","MENU_ITEM_LABEL","MENU_SUBMENU","MENU_DIVIDER","MENU_HEADER","NAVBAR","NAVBAR_GROUP","NAVBAR_HEADING","NAVBAR_DIVIDER","NON_IDEAL_STATE","NON_IDEAL_STATE_VISUAL","NUMERIC_INPUT","OVERFLOW_LIST","OVERFLOW_LIST_SPACER","OVERLAY","OVERLAY_BACKDROP","OVERLAY_CONTAINER","OVERLAY_CONTENT","OVERLAY_INLINE","OVERLAY_OPEN","OVERLAY_SCROLL_CONTAINER","PANEL_STACK","PANEL_STACK_HEADER","PANEL_STACK_HEADER_BACK","PANEL_STACK_VIEW","POPOVER","POPOVER_ARROW","POPOVER_BACKDROP","POPOVER_CONTENT","POPOVER_CONTENT_SIZING","POPOVER_DISMISS","POPOVER_DISMISS_OVERRIDE","POPOVER_OPEN","POPOVER_TARGET","POPOVER_WRAPPER","TRANSITION_CONTAINER","PROGRESS_BAR","PROGRESS_METER","PROGRESS_NO_STRIPES","PROGRESS_NO_ANIMATION","PORTAL","SKELETON","SLIDER","SLIDER_AXIS","SLIDER_HANDLE","SLIDER_LABEL","SLIDER_TRACK","SLIDER_PROGRESS","START","END","SPINNER","SPINNER_ANIMATION","SPINNER_HEAD","SPINNER_NO_SPIN","SPINNER_TRACK","TAB","TAB_INDICATOR","TAB_INDICATOR_WRAPPER","TAB_LIST","TAB_PANEL","TABS","TAG","TAG_REMOVE","TAG_INPUT","TAG_INPUT_ICON","TAG_INPUT_VALUES","TOAST","TOAST_CONTAINER","TOAST_MESSAGE","TOOLTIP","TOOLTIP_INDICATOR","TREE","TREE_NODE","TREE_NODE_CARET","TREE_NODE_CARET_CLOSED","TREE_NODE_CARET_NONE","TREE_NODE_CARET_OPEN","TREE_NODE_CONTENT","TREE_NODE_EXPANDED","TREE_NODE_ICON","TREE_NODE_LABEL","TREE_NODE_LIST","TREE_NODE_SECONDARY_LABEL","TREE_NODE_SELECTED","TREE_ROOT","ICON","ICON_STANDARD","ICON_LARGE","getClassNamespace","alignmentClass","alignment","elevation","iconClass","iconName","intent","toLowerCase","BACKSPACE","ENTER","SHIFT","ESCAPE","SPACE","ARROW_LEFT","ARROW_UP","ARROW_RIGHT","ARROW_DOWN","DELETE","isKeyboardClick","keyCode","INVALID_PROPS","removeNonHTMLProps","invalidProps","shouldMerge","prev","curr","AbstractPureComponent2","_this","timeoutIds","clearTimeouts","timeoutId","window","clearTimeout","validateProps","componentDidUpdate","_prevProps","_prevState","_snapshot","componentWillUnmount","setTimeout","timeout","handle","_props","Icon","Icon_1","render","icon","className","color","htmlTitle","iconSize","SIZE_STANDARD","title","htmlprops","pixelGridSize","SIZE_LARGE","paths","renderSvgPaths","classes","intentClass","viewBox","fill","width","height","pathsSize","pathStrings","fillRule","DISPLAYNAME_PREFIX","breadcrumbProps","current","disabled","href","onClick","children","tabIndex","cannotCreatePortal","REACT_CONTEXT_TYPES","blueprintPortalClassName","Portal","state","hasMounted","document","portalElement","componentDidMount","container","createContainerElement","appendChild","setState","onChildrenMount","unstableRenderNoPortal","prevProps","classList","remove","maybeAddClass","createElement","add","contextTypes","defaultProps","body","split","Overlay","refHandlers","ref","containerElement","maybeRenderChild","decoratedChild","onOpening","onOpened","onClosing","onClosed","transitionDuration","transitionName","classNames","onEntering","onEntered","onExiting","onExited","handleBackdropMouseDown","backdropProps","canOutsideClickClose","enforceFocus","onClose","bringFocusInsideOverlay","onMouseDown","handleDocumentClick","isOpen","eventTarget","stackIndex","Overlay_1","openStack","isClickInThisOverlayOrDescendant","slice","some","elem","isSameNode","handleDocumentFocus","stopImmediatePropagation","handleKeyDown","canEscapeKeyClose","which","hasEverOpened","getDerivedStateFromProps","lazy","usePortal","childrenWithTransitions","unshift","maybeRenderBackdrop","containerClasses","transitionGroup","appear","component","onKeyDown","portalClassName","portalContainer","overlayWillOpen","overlayWillClose","activeElement","autofocusElement","querySelector","wrapperElement","focus","backdropClassName","hasBackdrop","removeEventListener","splice","lastOpenedOverlay","getLastOpened","autoFocus","ResizeSensor","observer","entries","onResize","only","observeElement","observeParents","disconnect","force","getElement","Element","observe","parent_1","parentElement","getPosition","placement","isVerticalPosition","side","getOppositePosition","getAlignment","getTransformOrigin","arrowElement","arrowSizeShift","clientHeight","arrow","offsets","top","left","arrowOffsetModifier","arrowSize","clientWidth","isVertical","len","offsetSide","arrowOffsetSize","sqrt","popper","getArrowAngle","arrowProps","isNaN","transform","positionToPlacement","assertNever","PopoverInteractionKind","CLICK","CLICK_TARGET_ONLY","HOVER","HOVER_TARGET_ONLY","Popover","hasDarkParent","getIsOpen","transformOrigin","isMouseInTargetOrPopover","lostFocusOnSamePage","popover","popoverElement","popoverRef","targetElement","reposition","popperScheduleUpdate","renderPopover","popperProps","interactionKind","scheduleUpdate","popoverHandlers","handlePopoverClick","onMouseEnter","handleMouseEnter","onMouseLeave","handleMouseLeave","popoverClasses","inheritDarkTheme","minimal","popoverClassName","isArrowEnabled","understandChildren","renderTarget","referenceProps","openOnTargetFocus","targetClassName","targetProps","isControlled","isHoverInteractionKind","targetTagName","finalTargetProps","onBlur","handleTargetBlur","onFocus","handleTargetFocus","handleTargetClick","rawTarget","rawTabIndex","clonedTarget","relatedTarget","isElementInPopover","setOpenState","hoverOpenDelay","hoverCloseDelay","dismissElement","closest","shouldDismiss","isDisabled","isDefaultPrevented","captureDismiss","handleOverlayClose","nativeEvent","KeyboardEvent","prevState","updatePopoverState","wrapperTagName","isContentEmpty","wrapperClasses","wrapper","Reference","innerRef","Popper","modifiers","getPopperModifiers","Manager","updateDarkParent","_","snapshot","nextIsOpen","onInteraction","childrenCount","count","hasContentProp","hasTargetProp","contentProp","targetProp","targetChild","contentChild","defaultIsOpen","boundary","flip","preventOverflow","arrowOffset","enabled","order","boundariesElement","cancelOpenTimeout","Tooltip","restProps","_ref","Boundary","htmlElement","tagClassName","elementRef","htmlProps","OverflowDirection","H4","H6","MenuDivider","Text","isContentOverflowing","textContent","textRef","ellipsize","newState","scrollWidth","MenuItem","active","labelElement","labelClassName","multiline","shouldDismissPopover","popoverProps","textClassName","hasSubmenu","anchorClasses","DISABLED_PROPS","maybeRenderLabel","liClasses","maybeRenderPopover","label","SUBMENU_POPOVER_MODIFIERS","offset","Menu","large","ulRef","Divider","Item","OverflowList","direction","lastOverflowCount","overflow","visible","items","previousWidths","spacer","resize","growing","entry","previousWidth","contentRect","repartition","ofType","shouldComponentUpdate","_nextProps","nextState","collapseFrom","minVisibleItems","overflowRenderer","visibleItemRenderer","GROW","onOverflow","maybeRenderOverflow","list","getBoundingClientRect","collapseFromStart","shift","pop","SHRINK","Breadcrumbs","renderOverflow","orderedItems","reverse","renderOverflowBreadcrumb","isClickable","renderBreadcrumbWrapper","isCurrent","renderBreadcrumb","overflowListProps","currentBreadcrumbRenderer","breadcrumbRenderer","R","Spinner","Spinner_1","forceUpdate","getSize","strokeWidth","strokeOffset","toFixed","getViewBox","pathLength","strokeDasharray","PATH_LENGTH","strokeDashoffset","SIZE_SMALL","radius","viewBoxX","viewBoxWidth","AbstractButton","isActive","button","buttonRef","currentKeyDown","handleKeyUp","click","onKeyUp","getCommonButtonProps","alignText","loading","small","renderChildren","rightIcon","Button","AnchorButton","commonProps","role","Dialog","maybeRenderHeader","isCloseButtonShown","maybeRenderCloseButton","ButtonGroup","vertical","buttonGroupClasses","ControlGroup","rootClasses","DEFAULT_RIGHT_ELEMENT_WIDTH","InputGroup","rightElementWidth","rightElement","leftIcon","paddingRight","inputRef","maybeRenderRightElement","getValueOrEmptyValue","IncrementDirection","FLOATING_POINT_NUMBER_CHARACTER_REGEX","isFloatingPointNumericCharacter","character","test","NON_HTML_PROPS","NumericInput","shouldSelectAfterUpdate","stepMaxPrecision","NumericInput_1","getStepMaxPrecision","didPasteEventJustOccur","delta","inputElement","intervalId","incrementButtonHandlers","getButtonEventHandlers","UP","decrementButtonHandlers","DOWN","input","handleButtonClick","updateDelta","nextValue","incrementValue","invokeValueCallback","onButtonClick","stopContinuousChange","clearInterval","handleContinuousChange","handleInputFocus","selectAllOnFocus","handleInputBlur","clampValueOnBlur","sanitizedValue","getSanitizedValue","handleInputKeyDown","handleInputKeyPress","allowNumericCharactersOnly","ctrlKey","altKey","metaKey","isValidNumericKeyboardEvent","onKeyPress","handleInputPaste","onPaste","handleInputChange","join","prevMinProp","prevMaxProp","prevValueProp","didMinChange","didMaxChange","didBoundsChange","VALUE_EMPTY","minorStepSize","stepSize","parseFloat","isValueNumeric","adjustedMin","Infinity","adjustedMax","clampValue","maxPrecision","scaleFactor","pow","toMaxPrecision","buttonPosition","buttons","renderButtons","renderInput","setSelectionRange","onValueChange","nextProps","majorStepSize","inputGroupHtmlProps","autoComplete","evt","startContinuousChange","setInterval","CONTINUOUS_CHANGE_INTERVAL","CONTINUOUS_CHANGE_DELAY","currValue","VALUE_ZERO","selectAllOnIncrement","getIncrementDelta","isShiftKeyPressed","isAltKeyPressed","shiftKey","contextMenuElement","contextMenu","POPPER_MODIFIERS","TRANSITION_DURATION","ContextMenu","isDarkTheme","menu","cancelContextMenu","handleBackdropContextMenu","elementFromPoint","clientX","clientY","MouseEvent","handlePopoverInteraction","nextOpenState","hide","onContextMenu","show","ContextMenuTarget","WrappedComponent","renderContextMenu","ContextMenuTargetClass","oldOnContextMenu","defaultPrevented","darkTheme","onContextMenuClose","Drawer","realPosition","styleProp","isPositionHorizontal","KeyCodes","8","9","13","20","27","32","33","34","35","36","37","38","39","40","45","46","48","49","50","51","52","53","54","55","56","57","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","106","107","109","110","111","186","187","188","189","190","191","192","219","220","221","222","Modifiers","16","17","18","91","93","224","ModifierBitMasks","alt","ctrl","meta","Aliases","cmd","command","escape","minus","mod","isMac","option","plus","win","ShiftKeys","$","comboMatches","parseKeyCombo","combo","pieces_1","piece","getKeyCombo","String","fromCharCode","platformOverride","platform","navigator","KeyIcons","down","enter","right","up","KeyCombo","renderKey","reactKey","renderMinimalKey","keyName","normalizeKeyCombo","toUpperCase","Hotkey","spreadableProps","global","group","allowInInput","stopPropagation","Hotkeys","hotkeys","sort","localeCompare","lastGroup","elems","hotkeys_1","hotkey","groupLabel","HOTKEYS_DIALOG","HotkeysDialog","componentProps","globalHotkeysGroup","hotkeysQueue","isDialogShowing","getContainer","renderComponent","unmount","enqueueHotkeysForDisplay","showTimeoutToken","hideAfterDelay","hideTimeoutToken","isShowing","renderHotkeys","elements","emptyHotkeyQueue","queued","isHotkeysDialogShowing","HotkeyScope","SHOW_DIALOG_KEY","HotkeysEvents","scope","actions","isTextInput","invokeNamedCallbackIfComboRecognized","action","clear","setHotkeys","isScope","callbackName","isPropagationStopped","GLOBAL","LOCAL","editable","inputType","HotkeysTarget","HotkeysTargetClass","globalHotkeysEvents","localHotkeysEvents","existingKeyDown_1","existingKeyUp_1","cooked","raw","templateObject_1","Content","div","SimpleTextEditor","onMouseMove","_handleClick","root","onClickOutSide","rootRef","saveRef","initState","getCustomizeProps","getContent","deserialize","refKeyPrefix","placeholder","editorProps","contentProps","TopicContentEditor","whiteSpace","editingContentKey","opType","log$2","TopicDescEditor","editingDescKey","getTopicTitle","renderTopicContentEditor","renderTopicDescEditor","isBlockEmpty","serializeBlockData","serialize","serializeBlock","deserializeBlock","templateObject_2","templateObject_1$1","templateObject_2$1","templateObject_3","templateObject_4","templateObject_5","templateObject_6","templateObject_7","templateObject_8","BaseWidget","operation","arg","DragScrollView","DragScrollContent","DragScrollWidget","contentResizeCallback","oldContentRect","widgetStyle","bigView","contentResizeObserver","contentRef","viewBoxRef","enableMouseWheel","passive","setViewBoxScroll","bigViewRef","setWidgetStyle","scrollLeft","scrollTop","setViewBoxScrollDelta","deltaLeft","deltaTop","mouseKey","needKeyPressed","canDragFunc","_lastCoordX","_lastCoordY","ele","onMouseUp","handleContextMenu","SaveRef","getRef","fireListener","observers","has","listeners","listeners_1","listeners_1_1","listener","registerRefListener","Flex","alignItems","Margin","margin","ShowMenuIcon","IconBg","Btn","CloseIcon","Title","TopicBlockIcon","span","IconName","SHOW_MENU","CLOSE","COLOR_PICKER","NOTES","PLUS","MINUS","TRASH","iconClassName","contentRefKey","topicWidgetRefKey","topicRefKey","linksRefKey","linksSvgRefKey","collapseRefKey","RefKey","DIAGRAM_ROOT_KEY","DRAG_SCROLL_WIDGET_KEY","SVG_HIGHLIGHT_KEY","FOCUS_HIGHLIGHT_KEY","DROP_EFFECT_KEY","EventKey","CENTER_ROOT_TOPIC","cancelEvent","centerY","rect","bottom","centerPointX","p1","p2","centerPointY","y","center","_getRelativeRect","el","rel","scale","relCenter","elCenter","getRelativeVector","templateObject_1$2","templateObject_1$3","DropEffectSvg","svg","TopicDropEffect","layout","dropDir","svgRect","stroke","DropArea","DragAndDrop","dragTargetKey","dragTargetDir","renderTopicDropArea","eventHandlers","onDragEnter","ev","onDragLeave","onDragOver","onDrop","renderDragAndDropEffect","getDragTargetProps","handleTopicDragStart","canDrop","srcKey","dstKey","srcTopic","dstTopic","pTopic","getRelationship","handleTopicDragEnter","handleTopicDragLeave","handleTopicDrop","log$3","EventPlugin","eventListeners","handleTopicClick","handleTopicDoubleClick","handleTopicContextMenu","handleActiveModalClose","activeModalProps","once","origin","fireEvent","HotKeyName","EDIT_CONTENT","EDIT_NOTES","HotKeyPlugin","customizeHotKeys","op","log$4","OperationPlugin","OpMap","srcParentKey","srcParentSubKeys","srcIndex","dstSubKeys_1","dstParentKey_1","dstParentSubKeys_1","dstIndex","newDstParentSubKeys_1","undoStack","redoStack","getOpMap","getAllowUndo","getUndoRedoStack","setUndoStack","setRedoStack","canUndo","canRedo","undo","newModel","peek","redo","beforeOperation","opArray","opMap","undoStack_1","cur","opFunc","afterOperation","templateObject_1$4","templateObject_2$2","templateObject_3$1","templateObject_1$5","templateObject_2$3","templateObject_1$6","templateObject_1$7","templateObject_2$4","templateObject_1$8","templateObject_2$5","templateObject_3$2","templateObject_4$1","templateObject_5$1","EditorRootBreadcrumbsRoot","TooltipContent","BreadcrumbTitle","EditorRootBreadcrumbs","breadProps","propertyIsEnumerable","needTooltip","substr","tooltipProps","breadcrumb","editingRootKey","NodeLayer","DIV","MindDragScrollWidget","dragScrollWidget","onWheel","deltaY","nodeLayer","rootTopicRect","nodeLayerRect","nodeKey","rootWidgetProps","Modals","handleClose","activeModal","minHeight","RootLinksSvg","RootSubLinks","curves","curve","vDir","hDir","log$6","LayerPart","topicDirection","RootWidget","renderPartTopics","dir","isRoot","subTopics","cxName","topicStyle","topicContent","partTopics","L","LEFT_TO_RIGHT","RIGHT_TO_LEFT","TOP_TO_BOTTOM","B","SettingTitle","SettingItem","SettingRow","ColorBar","WithBorder","unit","handleClick","query","PxSelect","borderWidthItems","borderWidthItems$1","borderRadiusItems","borderStyleItems","lineTypes","templateObject_1$9","templateObject_2$6","templateObject_1$a","templateObject_2$7","templateObject_3$3","log$7","StyleEditorRoot","PopRoot","StyleEditor","setShowPanel","showPanel","setTopicContentStyle","handleBackgroundColorChange","hex","handleClearStyle","handleCopyStyle","copiedStyle","handlePasteStyle","JSON","stringify","itemRenderer","filterable","onItemSelect","borderColor","onChangeComplete","BorderStyleEditor","fontSizeNumInputProps","parseInt","lineHeightInputProps","TextStyleEditor","LinkStyleEditor","ClearAllCustomStyle","Icon$1","TopicCollapseIcon","onClickCollapse","iconfont","templateObject_1$b","templateObject_2$8","log$8","EditingRoot","EditingWrapper","cancelEvent$1","TopicContent","editor","wrapper_1","rect_1","editorDiv","contentResizeObserver_1","templateObject_1$c","templateObject_2$9","templateObject_1$d","log$9","TopicContent$1","TopicContentWithDropArea","TopicContentWidget","onDragStart","handleTopicClickTimeout","onDoubleClick","needRelocation","oldCollapseIconVector","dragEnter","newRect","newVector","vector","draggable","collapseIcon","prevDropArea","nextDropArea","dropEventHandlers","TopicContextMenu","log$a","TooltipContentWrapper","TopicDesc","isEditing","descEditor","diagramRoot","maxWidth","maxHeight","dRect","classname","templateObject_1$e","templateObject_1$f","templateObject_1$g","templateObject_2$a","templateObject_3$4","templateObject_1$h","templateObject_2$b","templateObject_3$5","FocusHighlightSvg","TopicHighlight","TopicLinksSvg","log$b","TopicSubLinks","p3","z","collapseRect","log$c","Node","NodeChildren","NodeTopic","TopicWidget","renderSubTopics","subLinks","layoutLinks","links","propsMore","log$d","ViewerRoot","Item_","ZoomFactorSpan","tooltip","ViewPortViewer","zoomFactorChange","onClickResetZoom","onClickAddZoom","onClickMinusZoom","onClickCollapseAll","centerRootTopic","onClickExpandAll","dragScroll","floor","shortcut","rootCanUse","onClickItem","templateObject_1$i","DescEditorWrapper","descData","Theme","templateObject_1$j","log$e","RenderingPlugin","DiagramRoot","renderDiagram","widgetProps","renderDrawer","renderDiagramCustomize","nProps","renderEditorRootBreadcrumbs","renderModals","renderModal","getActiveModalProps","renderDoc","renderRootWidget","renderTopicWidget","renderTopicContent","renderTopicContextMenu","customizeTopicContextMenu","renderTopicCollapseIcon","renderTopicBlocks","blockKey","renderTopicBlock","renderTopicBlockContent","renderTopicBlockDesc","renderSubLinks","renderRootSubLinks","renderFocusItemHighlight","renderRootWidgetOtherChildren","renderStyleEditor","renderViewPortViewer","log$f","UtilsPlugin","tempValueMap","eventListenerMap","addTempValueChangeListener","removeTempValueChangeListener","l","getTempValue","setTempValue","deleteTempValue","log$g","StylePlugin","colorMap","colorIndex","getTopicStyle","getTopicContentStyle","themeStyle","visualLevel","customStyle","parse","getLinkStyle","presetStyle","parentSubLinkStyle","getSubLinkStyle","styleObj","newStyleObj","newStyleStr","setLinkStyle","setSubLinkStyle","getTopicThemeStyle","getRandomColor","colors","clearAllCustomStyle","keySeq","DefaultPlugin","getPartTopics","subTopicCount","ceil","createSubTopics","tKey","topicProps","highlight","dropEffect","layoutTopic","topicWidget","subKey","getRelativeRect","getRelativeRectFromViewPort","getRelativeVectorFromViewPort","addZoomFactorChangeEventListener","removeZoomFactorChangeEventListener","getZoomFactor","Diagram","resolveController","commands","TheDefaultPlugin","defaultPlugin","construct","getDiagramProps","diagramProps","hotKeys","children_1","v","k","NodeContent","RichTextEditor","richEditorProps","editorValue","nodeContentProps","markdownSerializer","DATA_VERSION","themeRandomColorSquare","theme1","theme2","boxShadow","theme3","theme4","Alert","handleCancel","internalHandleCallbacks","handleConfirm","canEscapeKeyCancel","canOutsideClickCancel","cancelButtonText","confirmButtonText","overlayProps","onCancel","hasCancelHandler","confirmed","onConfirm","FOCUS_MODE_EDITING_TOPOLOGY","OP_TYPE_START_EDITING_TOPOLOGY","BLOCK_TYPE_TOPOLOGY","REF_KEY_TOPOLOGY_DIAGRAM","REF_KEY_TOPOLOGY_DIAGRAM_UTIL","TopicBlockTopology","iconProps","ToolsConfig","paddingLeft","paddingTop","paddingBottom","iconFamily","iconColor","textMaxLine","image","is3D","zRotate","fillStyle","strokeStyle","font","fontFamily","fontWeight","rectInParent","rotate","textAlign","textBaseline","Root","Canvas","Tools","ToolTitle","ToolbarButtons","TopologyDiagram","id","toolsConfig","canvasOptions","onMessage","diagramUtil","topology","setCanvasData","canvasRegister","on","openData","open","onDrag","dataTransfer","setData","renderTools","btn","Root$1","TopologyDiagramUtils","canvasData","getTopology","scaleTo","deleteConfirm","deleteAlertProps","DiagramWrapper","TopologyDrawer","utilProps","topologyData","startEditingTopology","renderTopicBlockTopology","topoProps","ToolbarItemOpen","accept","file","files","fr","FileReader","onload","txt","result","readAsText","ToolbarItemLayout","layoutDirs","onClickSetLayout","cx","ToolbarItemTheme","onClickSetTheme","themeKey","themes","defaultThemeImg","theme1Img","theme2Img","theme3Img","theme4Img","src","downloadFile","url","filename","link","download","generateSimpleModel","rootKey","ToolbarItemExport","json","jsonStr","encodeURIComponent","Toolbar","onClickUndo","onClickRedo","React","PureComponent","debug","RichTextEditorPlugin","serializeModel","valueSeq","deserializeModel","serializeConfig","deserializeConfig","serializeTopic","deserializeTopic","deserializeTopics","deserializeBlocks","themeMap","getAllThemes","allTheme","ThemeSelectorPlugin","TopologyDiagramPlugin","Mindmap","diagramRef","initModel","toolbarProps","renderToolbar","Component","App","Boolean","location","hostname","match","localStorage","ReactDOM","getElementById","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/chunk-blinkmind.87ef5788.chunk.js","sourcesContent":["/*\n * Copyright 2015 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as React from \"react\";\nimport { CLAMP_MIN_MAX } from \"./errors\";\nexport * from \"./utils/compareUtils\";\nexport * from \"./utils/safeInvokeMember\";\n/** Returns whether `process.env.NODE_ENV` exists and equals `env`. */\n\nexport function isNodeEnv(env) {\n  return typeof process !== \"undefined\" && process.env && process.env.NODE_ENV === env;\n}\n/** Returns whether the value is a function. Acts as a type guard. */\n// tslint:disable-next-line:ban-types\n\nexport function isFunction(value) {\n  return typeof value === \"function\";\n}\n/**\n * Returns true if `node` is null/undefined, false, empty string, or an array\n * composed of those. If `node` is an array, only one level of the array is\n * checked, for performance reasons.\n */\n\nexport function isReactNodeEmpty(node, skipArray) {\n  if (skipArray === void 0) {\n    skipArray = false;\n  }\n\n  return node == null || node === \"\" || node === false || !skipArray && Array.isArray(node) && ( // only recurse one level through arrays, for performance\n  node.length === 0 || node.every(function (n) {\n    return isReactNodeEmpty(n, true);\n  }));\n}\n/**\n * Converts a React node to an element: non-empty string or number or\n * `React.Fragment` (React 16.3+) is wrapped in given tag name; empty strings\n * and booleans are discarded.\n */\n\nexport function ensureElement(child, tagName) {\n  if (tagName === void 0) {\n    tagName = \"span\";\n  }\n\n  if (child == null || typeof child === \"boolean\") {\n    return undefined;\n  } else if (typeof child === \"string\") {\n    // cull whitespace strings\n    return child.trim().length > 0 ? React.createElement(tagName, {}, child) : undefined;\n  } else if (typeof child === \"number\" || typeof child.type === \"symbol\" || Array.isArray(child)) {\n    // React.Fragment has a symbol type, ReactNodeArray extends from Array\n    return React.createElement(tagName, {}, child);\n  } else if (isReactElement(child)) {\n    return child;\n  } else {\n    // child is inferred as {}\n    return undefined;\n  }\n}\nexport function isReactElement(child) {\n  return typeof child === \"object\" && typeof child.type !== \"undefined\" && typeof child.props !== \"undefined\";\n}\nexport function getDisplayName(ComponentClass) {\n  return ComponentClass.displayName || ComponentClass.name || \"Unknown\";\n}\n/**\n * Returns true if the given JSX element matches the given component type.\n *\n * NOTE: This function only checks equality of `displayName` for performance and\n * to tolerate multiple minor versions of a component being included in one\n * application bundle.\n * @param element JSX element in question\n * @param ComponentType desired component type of element\n */\n\nexport function isElementOfType(element, ComponentType) {\n  return element != null && element.type != null && element.type.displayName != null && element.type.displayName === ComponentType.displayName;\n} // tslint:disable-next-line:ban-types\n\nexport function safeInvoke(func) {\n  var args = [];\n\n  for (var _i = 1; _i < arguments.length; _i++) {\n    args[_i - 1] = arguments[_i];\n  }\n\n  if (isFunction(func)) {\n    return func.apply(void 0, args);\n  }\n\n  return undefined;\n} // tslint:disable-next-line:ban-types\n\nexport function safeInvokeOrValue(funcOrValue) {\n  var args = [];\n\n  for (var _i = 1; _i < arguments.length; _i++) {\n    args[_i - 1] = arguments[_i];\n  }\n\n  return isFunction(funcOrValue) ? funcOrValue.apply(void 0, args) : funcOrValue;\n}\nexport function elementIsOrContains(element, testElement) {\n  return element === testElement || element.contains(testElement);\n}\n/**\n * Returns the difference in length between two arrays. A `null` argument is\n * considered an empty list. The return value will be positive if `a` is longer\n * than `b`, negative if the opposite is true, and zero if their lengths are\n * equal.\n */\n\nexport function arrayLengthCompare(a, b) {\n  if (a === void 0) {\n    a = [];\n  }\n\n  if (b === void 0) {\n    b = [];\n  }\n\n  return a.length - b.length;\n}\n/**\n * Returns true if the two numbers are within the given tolerance of each other.\n * This is useful to correct for floating point precision issues, less useful\n * for integers.\n */\n\nexport function approxEqual(a, b, tolerance) {\n  if (tolerance === void 0) {\n    tolerance = 0.00001;\n  }\n\n  return Math.abs(a - b) <= tolerance;\n}\n/**\n * Clamps the given number between min and max values. Returns value if within\n * range, or closest bound.\n */\n\nexport function clamp(val, min, max) {\n  if (val == null) {\n    return val;\n  }\n\n  if (max < min) {\n    throw new Error(CLAMP_MIN_MAX);\n  }\n\n  return Math.min(Math.max(val, min), max);\n}\n/** Returns the number of decimal places in the given number. */\n\nexport function countDecimalPlaces(num) {\n  if (!isFinite(num)) {\n    return 0;\n  }\n\n  var e = 1,\n      p = 0;\n\n  while (Math.round(num * e) / e !== num) {\n    e *= 10;\n    p++;\n  }\n\n  return p;\n}\n/**\n * Throttle an event on an EventTarget by wrapping it in a\n * `requestAnimationFrame` call. Returns the event handler that was bound to\n * given eventName so you can clean up after yourself.\n * @see https://developer.mozilla.org/en-US/docs/Web/Events/scroll\n */\n\nexport function throttleEvent(target, eventName, newEventName) {\n  var throttledFunc = _throttleHelper(function (event) {\n    target.dispatchEvent(new CustomEvent(newEventName, event));\n  });\n\n  target.addEventListener(eventName, throttledFunc);\n  return throttledFunc;\n}\n/**\n * Throttle a callback by wrapping it in a `requestAnimationFrame` call. Returns\n * the throttled function.\n * @see https://www.html5rocks.com/en/tutorials/speed/animations/\n */\n\nexport function throttleReactEventCallback(callback, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var throttledFunc = _throttleHelper(callback, function (event2) {\n    if (options.preventDefault) {\n      event2.preventDefault();\n    }\n  }, // prevent React from reclaiming the event object before we reference it\n  function (event2) {\n    return event2.persist();\n  });\n\n  return throttledFunc;\n}\n/**\n * Throttle a method by wrapping it in a `requestAnimationFrame` call. Returns\n * the throttled function.\n */\n// tslint:disable-next-line:ban-types\n\nexport function throttle(method) {\n  return _throttleHelper(method);\n} // tslint:disable-next-line:ban-types\n\nfunction _throttleHelper(onAnimationFrameRequested, onBeforeIsRunningCheck, onAfterIsRunningCheck) {\n  var isRunning = false;\n\n  var func = function func() {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    } // don't use safeInvoke, because we might have more than its max number\n    // of typed params\n\n\n    if (isFunction(onBeforeIsRunningCheck)) {\n      onBeforeIsRunningCheck.apply(void 0, args);\n    }\n\n    if (isRunning) {\n      return;\n    }\n\n    isRunning = true;\n\n    if (isFunction(onAfterIsRunningCheck)) {\n      onAfterIsRunningCheck.apply(void 0, args);\n    }\n\n    requestAnimationFrame(function () {\n      onAnimationFrameRequested.apply(void 0, args);\n      isRunning = false;\n    });\n  };\n\n  return func;\n}","/*\n * Copyright 2015 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar ns = \"[Blueprint]\";\nexport var CLAMP_MIN_MAX = ns + \" clamp: max cannot be less than min\";\nexport var ALERT_WARN_CANCEL_PROPS = ns + \" <Alert> cancelButtonText and onCancel should be set together.\";\nexport var ALERT_WARN_CANCEL_ESCAPE_KEY = ns + \" <Alert> canEscapeKeyCancel enabled without onCancel or onClose handler.\";\nexport var ALERT_WARN_CANCEL_OUTSIDE_CLICK = ns + \" <Alert> canOutsideClickCancel enbaled without onCancel or onClose handler.\";\nexport var COLLAPSIBLE_LIST_INVALID_CHILD = ns + \" <CollapsibleList> children must be <MenuItem>s\";\nexport var CONTEXTMENU_WARN_DECORATOR_NO_METHOD = ns + \" @ContextMenuTarget-decorated class should implement renderContextMenu.\";\nexport var CONTEXTMENU_WARN_DECORATOR_NEEDS_REACT_ELEMENT = ns + \" \\\"@ContextMenuTarget-decorated components must return a single JSX.Element or an empty render.\";\nexport var HOTKEYS_HOTKEY_CHILDREN = ns + \" <Hotkeys> only accepts <Hotkey> children.\";\nexport var HOTKEYS_WARN_DECORATOR_NO_METHOD = ns + \" @HotkeysTarget-decorated class should implement renderHotkeys.\";\nexport var HOTKEYS_WARN_DECORATOR_NEEDS_REACT_ELEMENT = ns + \" \\\"@HotkeysTarget-decorated components must return a single JSX.Element or an empty render.\";\nexport var NUMERIC_INPUT_MIN_MAX = ns + \" <NumericInput> requires min to be no greater than max if both are defined.\";\nexport var NUMERIC_INPUT_MINOR_STEP_SIZE_BOUND = ns + \" <NumericInput> requires minorStepSize to be no greater than stepSize.\";\nexport var NUMERIC_INPUT_MAJOR_STEP_SIZE_BOUND = ns + \" <NumericInput> requires stepSize to be no greater than majorStepSize.\";\nexport var NUMERIC_INPUT_MINOR_STEP_SIZE_NON_POSITIVE = ns + \" <NumericInput> requires minorStepSize to be strictly greater than zero.\";\nexport var NUMERIC_INPUT_MAJOR_STEP_SIZE_NON_POSITIVE = ns + \" <NumericInput> requires majorStepSize to be strictly greater than zero.\";\nexport var NUMERIC_INPUT_STEP_SIZE_NON_POSITIVE = ns + \" <NumericInput> requires stepSize to be strictly greater than zero.\";\nexport var NUMERIC_INPUT_STEP_SIZE_NULL = ns + \" <NumericInput> requires stepSize to be defined.\";\nexport var PANEL_STACK_INITIAL_PANEL_STACK_MUTEX = ns + \" <PanelStack> requires exactly one of initialPanel and stack prop\";\nexport var PANEL_STACK_REQUIRES_PANEL = ns + \" <PanelStack> requires at least one panel in the stack\";\nexport var OVERFLOW_LIST_OBSERVE_PARENTS_CHANGED = ns + \" <OverflowList> does not support changing observeParents after mounting.\"; // TODO (clewis): Migrate old Popover validation errors to the component formerly known as Popover2.\n// See: https://github.com/palantir/blueprint/issues/1940\n\nexport var POPOVER_REQUIRES_TARGET = ns + \" <Popover> requires target prop or at least one child element.\";\nexport var POPOVER_HAS_BACKDROP_INTERACTION = ns + \" <Popover hasBackdrop={true}> requires interactionKind={PopoverInteractionKind.CLICK}.\";\nexport var POPOVER_WARN_TOO_MANY_CHILDREN = ns + \" <Popover> supports one or two children; additional children are ignored.\" + \" First child is the target, second child is the content. You may instead supply these two as props.\";\nexport var POPOVER_WARN_DOUBLE_CONTENT = ns + \" <Popover> with two children ignores content prop; use either prop or children.\";\nexport var POPOVER_WARN_DOUBLE_TARGET = ns + \" <Popover> with children ignores target prop; use either prop or children.\";\nexport var POPOVER_WARN_EMPTY_CONTENT = ns + \" Disabling <Popover> with empty/whitespace content...\";\nexport var POPOVER_WARN_HAS_BACKDROP_INLINE = ns + \" <Popover usePortal={false}> ignores hasBackdrop\";\nexport var POPOVER_WARN_UNCONTROLLED_ONINTERACTION = ns + \" <Popover> onInteraction is ignored when uncontrolled.\";\nexport var PORTAL_CONTEXT_CLASS_NAME_STRING = ns + \" <Portal> context blueprintPortalClassName must be string\";\nexport var RADIOGROUP_WARN_CHILDREN_OPTIONS_MUTEX = ns + \" <RadioGroup> children and options prop are mutually exclusive, with options taking priority.\";\nexport var SLIDER_ZERO_STEP = ns + \" <Slider> stepSize must be greater than zero.\";\nexport var SLIDER_ZERO_LABEL_STEP = ns + \" <Slider> labelStepSize must be greater than zero.\";\nexport var RANGESLIDER_NULL_VALUE = ns + \" <RangeSlider> value prop must be an array of two non-null numbers.\";\nexport var MULTISLIDER_INVALID_CHILD = ns + \" <MultiSlider> children must be <SliderHandle>s or <SliderTrackStop>s\";\nexport var SPINNER_WARN_CLASSES_SIZE = ns + \" <Spinner> Classes.SMALL/LARGE are ignored if size prop is set.\";\nexport var TOASTER_CREATE_NULL = ns + \" Toaster.create() is not supported inside React lifecycle methods in React 16.\" + \" See usage example on the docs site.\";\nexport var TOASTER_WARN_INLINE = ns + \" Toaster.create() ignores inline prop as it always creates a new element.\";\nexport var DIALOG_WARN_NO_HEADER_ICON = ns + \" <Dialog> iconName is ignored if title is omitted.\";\nexport var DIALOG_WARN_NO_HEADER_CLOSE_BUTTON = ns + \" <Dialog> isCloseButtonShown prop is ignored if title is omitted.\";\nexport var DRAWER_VERTICAL_IS_IGNORED = ns + \" <Drawer> vertical is ignored if position is defined\";\nexport var DRAWER_ANGLE_POSITIONS_ARE_CASTED = ns + \" <Drawer> all angle positions are casted into pure position (TOP, BOTTOM, LEFT or RIGHT)\";\nexport var TOASTER_MAX_TOASTS_INVALID = ns + \" <Toaster> maxToasts is set to an invalid number, must be greater than 0\";","/*\n * Copyright 2015 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as React from \"react\";\nimport { CLAMP_MIN_MAX } from \"./errors\";\nexport * from \"./utils/compareUtils\";\nexport * from \"./utils/safeInvokeMember\";\n/** Returns whether `process.env.NODE_ENV` exists and equals `env`. */\n\nexport function isNodeEnv(env) {\n  return typeof process !== \"undefined\" && process.env && process.env.NODE_ENV === env;\n}\n/** Returns whether the value is a function. Acts as a type guard. */\n// tslint:disable-next-line:ban-types\n\nexport function isFunction(value) {\n  return typeof value === \"function\";\n}\n/**\n * Returns true if `node` is null/undefined, false, empty string, or an array\n * composed of those. If `node` is an array, only one level of the array is\n * checked, for performance reasons.\n */\n\nexport function isReactNodeEmpty(node, skipArray) {\n  if (skipArray === void 0) {\n    skipArray = false;\n  }\n\n  return node == null || node === \"\" || node === false || !skipArray && Array.isArray(node) && ( // only recurse one level through arrays, for performance\n  node.length === 0 || node.every(function (n) {\n    return isReactNodeEmpty(n, true);\n  }));\n}\n/**\n * Converts a React node to an element: non-empty string or number or\n * `React.Fragment` (React 16.3+) is wrapped in given tag name; empty strings\n * and booleans are discarded.\n */\n\nexport function ensureElement(child, tagName) {\n  if (tagName === void 0) {\n    tagName = \"span\";\n  }\n\n  if (child == null || typeof child === \"boolean\") {\n    return undefined;\n  } else if (typeof child === \"string\") {\n    // cull whitespace strings\n    return child.trim().length > 0 ? React.createElement(tagName, {}, child) : undefined;\n  } else if (typeof child === \"number\" || typeof child.type === \"symbol\" || Array.isArray(child)) {\n    // React.Fragment has a symbol type, ReactNodeArray extends from Array\n    return React.createElement(tagName, {}, child);\n  } else if (isReactElement(child)) {\n    return child;\n  } else {\n    // child is inferred as {}\n    return undefined;\n  }\n}\nexport function isReactElement(child) {\n  return typeof child === \"object\" && typeof child.type !== \"undefined\" && typeof child.props !== \"undefined\";\n}\nexport function getDisplayName(ComponentClass) {\n  return ComponentClass.displayName || ComponentClass.name || \"Unknown\";\n}\n/**\n * Returns true if the given JSX element matches the given component type.\n *\n * NOTE: This function only checks equality of `displayName` for performance and\n * to tolerate multiple minor versions of a component being included in one\n * application bundle.\n * @param element JSX element in question\n * @param ComponentType desired component type of element\n */\n\nexport function isElementOfType(element, ComponentType) {\n  return element != null && element.type != null && element.type.displayName != null && element.type.displayName === ComponentType.displayName;\n} // tslint:disable-next-line:ban-types\n\nexport function safeInvoke(func) {\n  var args = [];\n\n  for (var _i = 1; _i < arguments.length; _i++) {\n    args[_i - 1] = arguments[_i];\n  }\n\n  if (isFunction(func)) {\n    return func.apply(void 0, args);\n  }\n\n  return undefined;\n} // tslint:disable-next-line:ban-types\n\nexport function safeInvokeOrValue(funcOrValue) {\n  var args = [];\n\n  for (var _i = 1; _i < arguments.length; _i++) {\n    args[_i - 1] = arguments[_i];\n  }\n\n  return isFunction(funcOrValue) ? funcOrValue.apply(void 0, args) : funcOrValue;\n}\nexport function elementIsOrContains(element, testElement) {\n  return element === testElement || element.contains(testElement);\n}\n/**\n * Returns the difference in length between two arrays. A `null` argument is\n * considered an empty list. The return value will be positive if `a` is longer\n * than `b`, negative if the opposite is true, and zero if their lengths are\n * equal.\n */\n\nexport function arrayLengthCompare(a, b) {\n  if (a === void 0) {\n    a = [];\n  }\n\n  if (b === void 0) {\n    b = [];\n  }\n\n  return a.length - b.length;\n}\n/**\n * Returns true if the two numbers are within the given tolerance of each other.\n * This is useful to correct for floating point precision issues, less useful\n * for integers.\n */\n\nexport function approxEqual(a, b, tolerance) {\n  if (tolerance === void 0) {\n    tolerance = 0.00001;\n  }\n\n  return Math.abs(a - b) <= tolerance;\n}\n/**\n * Clamps the given number between min and max values. Returns value if within\n * range, or closest bound.\n */\n\nexport function clamp(val, min, max) {\n  if (val == null) {\n    return val;\n  }\n\n  if (max < min) {\n    throw new Error(CLAMP_MIN_MAX);\n  }\n\n  return Math.min(Math.max(val, min), max);\n}\n/** Returns the number of decimal places in the given number. */\n\nexport function countDecimalPlaces(num) {\n  if (!isFinite(num)) {\n    return 0;\n  }\n\n  var e = 1,\n      p = 0;\n\n  while (Math.round(num * e) / e !== num) {\n    e *= 10;\n    p++;\n  }\n\n  return p;\n}\n/**\n * Throttle an event on an EventTarget by wrapping it in a\n * `requestAnimationFrame` call. Returns the event handler that was bound to\n * given eventName so you can clean up after yourself.\n * @see https://developer.mozilla.org/en-US/docs/Web/Events/scroll\n */\n\nexport function throttleEvent(target, eventName, newEventName) {\n  var throttledFunc = _throttleHelper(function (event) {\n    target.dispatchEvent(new CustomEvent(newEventName, event));\n  });\n\n  target.addEventListener(eventName, throttledFunc);\n  return throttledFunc;\n}\n/**\n * Throttle a callback by wrapping it in a `requestAnimationFrame` call. Returns\n * the throttled function.\n * @see https://www.html5rocks.com/en/tutorials/speed/animations/\n */\n\nexport function throttleReactEventCallback(callback, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var throttledFunc = _throttleHelper(callback, function (event2) {\n    if (options.preventDefault) {\n      event2.preventDefault();\n    }\n  }, // prevent React from reclaiming the event object before we reference it\n  function (event2) {\n    return event2.persist();\n  });\n\n  return throttledFunc;\n}\n/**\n * Throttle a method by wrapping it in a `requestAnimationFrame` call. Returns\n * the throttled function.\n */\n// tslint:disable-next-line:ban-types\n\nexport function throttle(method) {\n  return _throttleHelper(method);\n} // tslint:disable-next-line:ban-types\n\nfunction _throttleHelper(onAnimationFrameRequested, onBeforeIsRunningCheck, onAfterIsRunningCheck) {\n  var isRunning = false;\n\n  var func = function func() {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    } // don't use safeInvoke, because we might have more than its max number\n    // of typed params\n\n\n    if (isFunction(onBeforeIsRunningCheck)) {\n      onBeforeIsRunningCheck.apply(void 0, args);\n    }\n\n    if (isRunning) {\n      return;\n    }\n\n    isRunning = true;\n\n    if (isFunction(onAfterIsRunningCheck)) {\n      onAfterIsRunningCheck.apply(void 0, args);\n    }\n\n    requestAnimationFrame(function () {\n      onAnimationFrameRequested.apply(void 0, args);\n      isRunning = false;\n    });\n  };\n\n  return func;\n}","/*\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Returns true if the arrays are equal. Elements will be shallowly compared by\n * default, or they will be compared using the custom `compare` function if one\n * is provided.\n */\nexport function arraysEqual(arrA, arrB, compare) {\n  if (compare === void 0) {\n    compare = function compare(a, b) {\n      return a === b;\n    };\n  } // treat `null` and `undefined` as the same\n\n\n  if (arrA == null && arrB == null) {\n    return true;\n  } else if (arrA == null || arrB == null || arrA.length !== arrB.length) {\n    return false;\n  } else {\n    return arrA.every(function (a, i) {\n      return compare(a, arrB[i]);\n    });\n  }\n}\n/**\n * Shallow comparison between objects. If `keys` is provided, just that subset\n * of keys will be compared; otherwise, all keys will be compared.\n * @returns true if items are equal.\n */\n\nexport function shallowCompareKeys(objA, objB, keys) {\n  // treat `null` and `undefined` as the same\n  if (objA == null && objB == null) {\n    return true;\n  } else if (objA == null || objB == null) {\n    return false;\n  } else if (Array.isArray(objA) || Array.isArray(objB)) {\n    return false;\n  } else if (keys != null) {\n    return _shallowCompareKeys(objA, objB, keys);\n  } else {\n    // shallowly compare all keys from both objects\n    var keysA = Object.keys(objA);\n    var keysB = Object.keys(objB);\n    return _shallowCompareKeys(objA, objB, {\n      include: keysA\n    }) && _shallowCompareKeys(objA, objB, {\n      include: keysB\n    });\n  }\n}\n/**\n * Deep comparison between objects. If `keys` is provided, just that subset of\n * keys will be compared; otherwise, all keys will be compared.\n * @returns true if items are equal.\n */\n\nexport function deepCompareKeys(objA, objB, keys) {\n  if (objA === objB) {\n    return true;\n  } else if (objA == null && objB == null) {\n    // treat `null` and `undefined` as the same\n    return true;\n  } else if (objA == null || objB == null) {\n    return false;\n  } else if (Array.isArray(objA) || Array.isArray(objB)) {\n    return arraysEqual(objA, objB, deepCompareKeys);\n  } else if (_isSimplePrimitiveType(objA) || _isSimplePrimitiveType(objB)) {\n    return objA === objB;\n  } else if (keys != null) {\n    return _deepCompareKeys(objA, objB, keys);\n  } else if (objA.constructor !== objB.constructor) {\n    return false;\n  } else {\n    var keysA = Object.keys(objA);\n    var keysB = Object.keys(objB);\n\n    if (keysA == null || keysB == null) {\n      return false;\n    }\n\n    if (keysA.length === 0 && keysB.length === 0) {\n      return true;\n    }\n\n    return arraysEqual(keysA, keysB) && _deepCompareKeys(objA, objB, keysA);\n  }\n}\n/**\n * Returns a descriptive object for each key whose values are deeply unequal\n * between two provided objects. Useful for debugging shouldComponentUpdate.\n */\n\nexport function getDeepUnequalKeyValues(objA, objB, keys) {\n  if (objA === void 0) {\n    objA = {};\n  }\n\n  if (objB === void 0) {\n    objB = {};\n  }\n\n  var filteredKeys = keys == null ? _unionKeys(objA, objB) : keys;\n  return _getUnequalKeyValues(objA, objB, filteredKeys, function (a, b, key) {\n    return deepCompareKeys(a, b, [key]);\n  });\n} // Private helpers\n// ===============\n\n/**\n * Partial shallow comparison between objects using the given list of keys.\n */\n\nfunction _shallowCompareKeys(objA, objB, keys) {\n  return _filterKeys(objA, objB, keys).every(function (key) {\n    return objA.hasOwnProperty(key) === objB.hasOwnProperty(key) && objA[key] === objB[key];\n  });\n}\n/**\n * Partial deep comparison between objects using the given list of keys.\n */\n\n\nfunction _deepCompareKeys(objA, objB, keys) {\n  return keys.every(function (key) {\n    return objA.hasOwnProperty(key) === objB.hasOwnProperty(key) && deepCompareKeys(objA[key], objB[key]);\n  });\n}\n\nfunction _isSimplePrimitiveType(value) {\n  return typeof value === \"number\" || typeof value === \"string\" || typeof value === \"boolean\";\n}\n\nfunction _filterKeys(objA, objB, keys) {\n  if (_isWhitelist(keys)) {\n    return keys.include;\n  } else if (_isBlacklist(keys)) {\n    var keysA = Object.keys(objA);\n    var keysB = Object.keys(objB); // merge keys from both objects into a big set for quick access\n\n    var keySet_1 = _arrayToObject(keysA.concat(keysB)); // delete blacklisted keys from the key set\n\n\n    keys.exclude.forEach(function (key) {\n      return delete keySet_1[key];\n    }); // return the remaining keys as an array\n\n    return Object.keys(keySet_1);\n  }\n\n  return [];\n}\n\nfunction _isWhitelist(keys) {\n  return keys != null && keys.include != null;\n}\n\nfunction _isBlacklist(keys) {\n  return keys != null && keys.exclude != null;\n}\n\nfunction _arrayToObject(arr) {\n  return arr.reduce(function (obj, element) {\n    obj[element] = true;\n    return obj;\n  }, {});\n}\n\nfunction _getUnequalKeyValues(objA, objB, keys, compareFn) {\n  var unequalKeys = keys.filter(function (key) {\n    return !compareFn(objA, objB, key);\n  });\n  var unequalKeyValues = unequalKeys.map(function (key) {\n    return {\n      key: key,\n      valueA: objA[key],\n      valueB: objB[key]\n    };\n  });\n  return unequalKeyValues;\n}\n\nfunction _unionKeys(objA, objB) {\n  var keysA = Object.keys(objA);\n  var keysB = Object.keys(objB);\n  var concatKeys = keysA.concat(keysB);\n\n  var keySet = _arrayToObject(concatKeys);\n\n  return Object.keys(keySet);\n}","/*\n * Copyright 2018 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { isFunction } from \"../utils\"; // tslint:disable-next-line:ban-types\n\nexport function safeInvokeMember(obj, key) {\n  var args = [];\n\n  for (var _i = 2; _i < arguments.length; _i++) {\n    args[_i - 2] = arguments[_i];\n  }\n\n  if (obj != null) {\n    var member = obj[key];\n\n    if (isFunction(member)) {\n      return member.apply(void 0, args);\n    }\n  }\n\n  return undefined;\n}","/*\n * Copyright 2015 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar ns = \"[Blueprint]\";\nexport var CLAMP_MIN_MAX = ns + \" clamp: max cannot be less than min\";\nexport var ALERT_WARN_CANCEL_PROPS = ns + \" <Alert> cancelButtonText and onCancel should be set together.\";\nexport var ALERT_WARN_CANCEL_ESCAPE_KEY = ns + \" <Alert> canEscapeKeyCancel enabled without onCancel or onClose handler.\";\nexport var ALERT_WARN_CANCEL_OUTSIDE_CLICK = ns + \" <Alert> canOutsideClickCancel enbaled without onCancel or onClose handler.\";\nexport var COLLAPSIBLE_LIST_INVALID_CHILD = ns + \" <CollapsibleList> children must be <MenuItem>s\";\nexport var CONTEXTMENU_WARN_DECORATOR_NO_METHOD = ns + \" @ContextMenuTarget-decorated class should implement renderContextMenu.\";\nexport var CONTEXTMENU_WARN_DECORATOR_NEEDS_REACT_ELEMENT = ns + \" \\\"@ContextMenuTarget-decorated components must return a single JSX.Element or an empty render.\";\nexport var HOTKEYS_HOTKEY_CHILDREN = ns + \" <Hotkeys> only accepts <Hotkey> children.\";\nexport var HOTKEYS_WARN_DECORATOR_NO_METHOD = ns + \" @HotkeysTarget-decorated class should implement renderHotkeys.\";\nexport var HOTKEYS_WARN_DECORATOR_NEEDS_REACT_ELEMENT = ns + \" \\\"@HotkeysTarget-decorated components must return a single JSX.Element or an empty render.\";\nexport var NUMERIC_INPUT_MIN_MAX = ns + \" <NumericInput> requires min to be no greater than max if both are defined.\";\nexport var NUMERIC_INPUT_MINOR_STEP_SIZE_BOUND = ns + \" <NumericInput> requires minorStepSize to be no greater than stepSize.\";\nexport var NUMERIC_INPUT_MAJOR_STEP_SIZE_BOUND = ns + \" <NumericInput> requires stepSize to be no greater than majorStepSize.\";\nexport var NUMERIC_INPUT_MINOR_STEP_SIZE_NON_POSITIVE = ns + \" <NumericInput> requires minorStepSize to be strictly greater than zero.\";\nexport var NUMERIC_INPUT_MAJOR_STEP_SIZE_NON_POSITIVE = ns + \" <NumericInput> requires majorStepSize to be strictly greater than zero.\";\nexport var NUMERIC_INPUT_STEP_SIZE_NON_POSITIVE = ns + \" <NumericInput> requires stepSize to be strictly greater than zero.\";\nexport var NUMERIC_INPUT_STEP_SIZE_NULL = ns + \" <NumericInput> requires stepSize to be defined.\";\nexport var PANEL_STACK_INITIAL_PANEL_STACK_MUTEX = ns + \" <PanelStack> requires exactly one of initialPanel and stack prop\";\nexport var PANEL_STACK_REQUIRES_PANEL = ns + \" <PanelStack> requires at least one panel in the stack\";\nexport var OVERFLOW_LIST_OBSERVE_PARENTS_CHANGED = ns + \" <OverflowList> does not support changing observeParents after mounting.\"; // TODO (clewis): Migrate old Popover validation errors to the component formerly known as Popover2.\n// See: https://github.com/palantir/blueprint/issues/1940\n\nexport var POPOVER_REQUIRES_TARGET = ns + \" <Popover> requires target prop or at least one child element.\";\nexport var POPOVER_HAS_BACKDROP_INTERACTION = ns + \" <Popover hasBackdrop={true}> requires interactionKind={PopoverInteractionKind.CLICK}.\";\nexport var POPOVER_WARN_TOO_MANY_CHILDREN = ns + \" <Popover> supports one or two children; additional children are ignored.\" + \" First child is the target, second child is the content. You may instead supply these two as props.\";\nexport var POPOVER_WARN_DOUBLE_CONTENT = ns + \" <Popover> with two children ignores content prop; use either prop or children.\";\nexport var POPOVER_WARN_DOUBLE_TARGET = ns + \" <Popover> with children ignores target prop; use either prop or children.\";\nexport var POPOVER_WARN_EMPTY_CONTENT = ns + \" Disabling <Popover> with empty/whitespace content...\";\nexport var POPOVER_WARN_HAS_BACKDROP_INLINE = ns + \" <Popover usePortal={false}> ignores hasBackdrop\";\nexport var POPOVER_WARN_UNCONTROLLED_ONINTERACTION = ns + \" <Popover> onInteraction is ignored when uncontrolled.\";\nexport var PORTAL_CONTEXT_CLASS_NAME_STRING = ns + \" <Portal> context blueprintPortalClassName must be string\";\nexport var RADIOGROUP_WARN_CHILDREN_OPTIONS_MUTEX = ns + \" <RadioGroup> children and options prop are mutually exclusive, with options taking priority.\";\nexport var SLIDER_ZERO_STEP = ns + \" <Slider> stepSize must be greater than zero.\";\nexport var SLIDER_ZERO_LABEL_STEP = ns + \" <Slider> labelStepSize must be greater than zero.\";\nexport var RANGESLIDER_NULL_VALUE = ns + \" <RangeSlider> value prop must be an array of two non-null numbers.\";\nexport var MULTISLIDER_INVALID_CHILD = ns + \" <MultiSlider> children must be <SliderHandle>s or <SliderTrackStop>s\";\nexport var SPINNER_WARN_CLASSES_SIZE = ns + \" <Spinner> Classes.SMALL/LARGE are ignored if size prop is set.\";\nexport var TOASTER_CREATE_NULL = ns + \" Toaster.create() is not supported inside React lifecycle methods in React 16.\" + \" See usage example on the docs site.\";\nexport var TOASTER_WARN_INLINE = ns + \" Toaster.create() ignores inline prop as it always creates a new element.\";\nexport var DIALOG_WARN_NO_HEADER_ICON = ns + \" <Dialog> iconName is ignored if title is omitted.\";\nexport var DIALOG_WARN_NO_HEADER_CLOSE_BUTTON = ns + \" <Dialog> isCloseButtonShown prop is ignored if title is omitted.\";\nexport var DRAWER_VERTICAL_IS_IGNORED = ns + \" <Drawer> vertical is ignored if position is defined\";\nexport var DRAWER_ANGLE_POSITIONS_ARE_CASTED = ns + \" <Drawer> all angle positions are casted into pure position (TOP, BOTTOM, LEFT or RIGHT)\";\nexport var TOASTER_MAX_TOASTS_INVALID = ns + \" <Toaster> maxToasts is set to an invalid number, must be greater than 0\";","/*\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Returns true if the arrays are equal. Elements will be shallowly compared by\n * default, or they will be compared using the custom `compare` function if one\n * is provided.\n */\nexport function arraysEqual(arrA, arrB, compare) {\n  if (compare === void 0) {\n    compare = function compare(a, b) {\n      return a === b;\n    };\n  } // treat `null` and `undefined` as the same\n\n\n  if (arrA == null && arrB == null) {\n    return true;\n  } else if (arrA == null || arrB == null || arrA.length !== arrB.length) {\n    return false;\n  } else {\n    return arrA.every(function (a, i) {\n      return compare(a, arrB[i]);\n    });\n  }\n}\n/**\n * Shallow comparison between objects. If `keys` is provided, just that subset\n * of keys will be compared; otherwise, all keys will be compared.\n * @returns true if items are equal.\n */\n\nexport function shallowCompareKeys(objA, objB, keys) {\n  // treat `null` and `undefined` as the same\n  if (objA == null && objB == null) {\n    return true;\n  } else if (objA == null || objB == null) {\n    return false;\n  } else if (Array.isArray(objA) || Array.isArray(objB)) {\n    return false;\n  } else if (keys != null) {\n    return _shallowCompareKeys(objA, objB, keys);\n  } else {\n    // shallowly compare all keys from both objects\n    var keysA = Object.keys(objA);\n    var keysB = Object.keys(objB);\n    return _shallowCompareKeys(objA, objB, {\n      include: keysA\n    }) && _shallowCompareKeys(objA, objB, {\n      include: keysB\n    });\n  }\n}\n/**\n * Deep comparison between objects. If `keys` is provided, just that subset of\n * keys will be compared; otherwise, all keys will be compared.\n * @returns true if items are equal.\n */\n\nexport function deepCompareKeys(objA, objB, keys) {\n  if (objA === objB) {\n    return true;\n  } else if (objA == null && objB == null) {\n    // treat `null` and `undefined` as the same\n    return true;\n  } else if (objA == null || objB == null) {\n    return false;\n  } else if (Array.isArray(objA) || Array.isArray(objB)) {\n    return arraysEqual(objA, objB, deepCompareKeys);\n  } else if (_isSimplePrimitiveType(objA) || _isSimplePrimitiveType(objB)) {\n    return objA === objB;\n  } else if (keys != null) {\n    return _deepCompareKeys(objA, objB, keys);\n  } else if (objA.constructor !== objB.constructor) {\n    return false;\n  } else {\n    var keysA = Object.keys(objA);\n    var keysB = Object.keys(objB);\n\n    if (keysA == null || keysB == null) {\n      return false;\n    }\n\n    if (keysA.length === 0 && keysB.length === 0) {\n      return true;\n    }\n\n    return arraysEqual(keysA, keysB) && _deepCompareKeys(objA, objB, keysA);\n  }\n}\n/**\n * Returns a descriptive object for each key whose values are deeply unequal\n * between two provided objects. Useful for debugging shouldComponentUpdate.\n */\n\nexport function getDeepUnequalKeyValues(objA, objB, keys) {\n  if (objA === void 0) {\n    objA = {};\n  }\n\n  if (objB === void 0) {\n    objB = {};\n  }\n\n  var filteredKeys = keys == null ? _unionKeys(objA, objB) : keys;\n  return _getUnequalKeyValues(objA, objB, filteredKeys, function (a, b, key) {\n    return deepCompareKeys(a, b, [key]);\n  });\n} // Private helpers\n// ===============\n\n/**\n * Partial shallow comparison between objects using the given list of keys.\n */\n\nfunction _shallowCompareKeys(objA, objB, keys) {\n  return _filterKeys(objA, objB, keys).every(function (key) {\n    return objA.hasOwnProperty(key) === objB.hasOwnProperty(key) && objA[key] === objB[key];\n  });\n}\n/**\n * Partial deep comparison between objects using the given list of keys.\n */\n\n\nfunction _deepCompareKeys(objA, objB, keys) {\n  return keys.every(function (key) {\n    return objA.hasOwnProperty(key) === objB.hasOwnProperty(key) && deepCompareKeys(objA[key], objB[key]);\n  });\n}\n\nfunction _isSimplePrimitiveType(value) {\n  return typeof value === \"number\" || typeof value === \"string\" || typeof value === \"boolean\";\n}\n\nfunction _filterKeys(objA, objB, keys) {\n  if (_isWhitelist(keys)) {\n    return keys.include;\n  } else if (_isBlacklist(keys)) {\n    var keysA = Object.keys(objA);\n    var keysB = Object.keys(objB); // merge keys from both objects into a big set for quick access\n\n    var keySet_1 = _arrayToObject(keysA.concat(keysB)); // delete blacklisted keys from the key set\n\n\n    keys.exclude.forEach(function (key) {\n      return delete keySet_1[key];\n    }); // return the remaining keys as an array\n\n    return Object.keys(keySet_1);\n  }\n\n  return [];\n}\n\nfunction _isWhitelist(keys) {\n  return keys != null && keys.include != null;\n}\n\nfunction _isBlacklist(keys) {\n  return keys != null && keys.exclude != null;\n}\n\nfunction _arrayToObject(arr) {\n  return arr.reduce(function (obj, element) {\n    obj[element] = true;\n    return obj;\n  }, {});\n}\n\nfunction _getUnequalKeyValues(objA, objB, keys, compareFn) {\n  var unequalKeys = keys.filter(function (key) {\n    return !compareFn(objA, objB, key);\n  });\n  var unequalKeyValues = unequalKeys.map(function (key) {\n    return {\n      key: key,\n      valueA: objA[key],\n      valueB: objB[key]\n    };\n  });\n  return unequalKeyValues;\n}\n\nfunction _unionKeys(objA, objB) {\n  var keysA = Object.keys(objA);\n  var keysB = Object.keys(objB);\n  var concatKeys = keysA.concat(keysB);\n\n  var keySet = _arrayToObject(concatKeys);\n\n  return Object.keys(keySet);\n}","/*\n * Copyright 2018 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { isFunction } from \"../utils\"; // tslint:disable-next-line:ban-types\n\nexport function safeInvokeMember(obj, key) {\n  var args = [];\n\n  for (var _i = 2; _i < arguments.length; _i++) {\n    args[_i - 2] = arguments[_i];\n  }\n\n  if (obj != null) {\n    var member = obj[key];\n\n    if (isFunction(member)) {\n      return member.apply(void 0, args);\n    }\n  }\n\n  return undefined;\n}","module.exports = __webpack_public_path__ + \"static/media/default.4f8c4983.jpg\";","module.exports = __webpack_public_path__ + \"static/media/theme1.2f59f00b.jpg\";","module.exports = __webpack_public_path__ + \"static/media/theme2.b18193fb.jpg\";","module.exports = __webpack_public_path__ + \"static/media/theme3.61c97910.jpg\";","module.exports = __webpack_public_path__ + \"static/media/theme4.1e21408c.jpg\";","var isProduction = process.env.NODE_ENV === 'production';\n\nfunction warning(condition, message) {\n  if (!isProduction) {\n    if (condition) {\n      return;\n    }\n\n    var text = \"Warning: \" + message;\n\n    if (typeof console !== 'undefined') {\n      console.warn(text);\n    }\n\n    try {\n      throw Error(text);\n    } catch (x) {}\n  }\n}\n\nexport default warning;","/*!\n * is-plain-object <https://github.com/jonschlinkert/is-plain-object>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\nimport isObject from 'isobject';\n\nfunction isObjectObject(o) {\n  return isObject(o) === true && Object.prototype.toString.call(o) === '[object Object]';\n}\n\nexport default function isPlainObject(o) {\n  var ctor, prot;\n  if (isObjectObject(o) === false) return false; // If has modified constructor\n\n  ctor = o.constructor;\n  if (typeof ctor !== 'function') return false; // If has modified prototype\n\n  prot = ctor.prototype;\n  if (isObjectObject(prot) === false) return false; // If constructor does not have an Object-specific method\n\n  if (prot.hasOwnProperty('isPrototypeOf') === false) {\n    return false;\n  } // Most likely a plain Object\n\n\n  return true;\n}\n;","/*!\n * isobject <https://github.com/jonschlinkert/isobject>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\nexport default function isObject(val) {\n  return val != null && typeof val === 'object' && Array.isArray(val) === false;\n}\n;","import debug from 'debug';\nimport memoizeOne from 'memoize-one';\nimport warning from 'tiny-warning';\nimport { List, Record, Map as Map$1 } from 'immutable';\nimport isPlainObject from 'is-plain-object';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar _extendStatics = function extendStatics(d, b) {\n  _extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) {\n      if (b.hasOwnProperty(p)) d[p] = b[p];\n    }\n  };\n\n  return _extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  _extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nfunction __values(o) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator],\n      i = 0;\n  if (m) return m.call(o);\n  return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n}\n\nfunction __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n}\n\nfunction __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++) {\n    ar = ar.concat(__read(arguments[i]));\n  }\n\n  return ar;\n}\n\nfunction CorePlugin(options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _a = options.plugins,\n      plugins = _a === void 0 ? [] : _a;\n  return __spread(plugins);\n}\n\nvar log = debug('core:controller');\n\nfunction registerPlugin(controller, plugin) {\n  if (Array.isArray(plugin)) {\n    plugin.forEach(function (p) {\n      return registerPlugin(controller, p);\n    });\n    return;\n  }\n\n  if (plugin == null) {\n    return;\n  }\n\n  for (var key in plugin) {\n    var fn = plugin[key];\n    controller.middleware[key] = controller.middleware[key] || [];\n    controller.middleware[key].push(fn);\n  }\n} // modified from koa-compose\n\n\nfunction compose(middleware) {\n  var e_1, _a;\n\n  if (!Array.isArray(middleware)) throw new TypeError('Middleware stack must be an array!');\n\n  try {\n    for (var middleware_1 = __values(middleware), middleware_1_1 = middleware_1.next(); !middleware_1_1.done; middleware_1_1 = middleware_1.next()) {\n      var fn = middleware_1_1.value;\n      if (typeof fn !== 'function') throw new TypeError('Middleware must be composed of functions!');\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (middleware_1_1 && !middleware_1_1.done && (_a = middleware_1.return)) _a.call(middleware_1);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n\n  return function (context, next) {\n    // last called middleware #\n    var index = -1;\n    return dispatch(0);\n\n    function dispatch(i) {\n      if (i <= index) throw new Error('next() called multiple times');\n      index = i;\n      var fn = middleware[i];\n      if (i === middleware.length) fn = next;\n      if (!fn) return null;\n\n      try {\n        return fn(context, dispatch.bind(null, i + 1));\n      } catch (err) {\n        throw err;\n      }\n    }\n  };\n}\n\nvar Controller =\n/** @class */\nfunction () {\n  function Controller(options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var _a = options.diagram,\n        diagram = _a === void 0 ? this : _a,\n        _b = options.plugins,\n        plugins = _b === void 0 ? [] : _b,\n        onChange = options.onChange,\n        readOnly = options.readOnly;\n    this.diagram = diagram;\n    this.readOnly = readOnly;\n    this.onChange = onChange;\n    this.middleware = new Map();\n    var corePlugin = CorePlugin({\n      plugins: plugins\n    });\n    registerPlugin(this, corePlugin);\n  }\n\n  Controller.prototype.run = function (key) {\n    var args = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      args[_i - 1] = arguments[_i];\n    }\n\n    var middleware = this.middleware;\n    var fns = middleware[key] || [];\n    warning(fns.length !== 0, \"the middleware function \" + key + \" is not found!\");\n    var composedFn = memoizeOne(compose)(fns); // @ts-ignore\n\n    return composedFn.apply(void 0, __spread(args));\n  };\n\n  Controller.prototype.change = function (model) {\n    this.onChange(model);\n  };\n\n  return Controller;\n}();\n\nvar defaultBlockRecord = {\n  type: null,\n  key: null,\n  data: null\n};\n\nvar Block =\n/** @class */\nfunction (_super) {\n  __extends(Block, _super);\n\n  function Block() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Object.defineProperty(Block.prototype, \"data\", {\n    get: function get() {\n      return this.get('data');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Block.prototype, \"type\", {\n    get: function get() {\n      return this.get('type');\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Block.create = function (obj) {\n    return new Block(obj);\n  };\n\n  Block.createList = function (obj) {\n    if (List.isList(obj) || Array.isArray(obj)) {\n      // @ts-ignore\n      return List(obj.map(Block.create));\n    }\n\n    throw new Error(\"Block.createList only accepts Array or List, but you passed it: \" + obj);\n  };\n\n  return Block;\n}(Record(defaultBlockRecord));\n\nvar defaultTheme = {\n  name: 'default',\n  randomColor: true,\n  background: 'rgb(57,60,65)',\n  highlightColor: '#50C9CE',\n  marginH: 60,\n  marginV: 20,\n  contentStyle: {\n    lineHeight: '1.5'\n  },\n  linkStyle: {\n    lineRadius: 5,\n    lineType: 'curve',\n    lineWidth: 3\n  },\n  rootTopic: {\n    contentStyle: {\n      fontSize: '34px',\n      borderRadius: '35px',\n      padding: '16px 18px 16px 18px'\n    },\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: 3,\n      lineColor: 'rgb(113, 203, 45)'\n    }\n  },\n  primaryTopic: {\n    contentStyle: {\n      borderWidth: '1px',\n      borderStyle: 'solid',\n      borderRadius: '20px',\n      fontSize: '17px',\n      padding: '10px 15px 10px 15px'\n    },\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: 3,\n      lineColor: 'rgb(113, 203, 45)'\n    }\n  },\n  normalTopic: {\n    contentStyle: {\n      border: '1px solid #e8eaec',\n      borderRadius: '20px',\n      fontSize: '17px',\n      padding: '4px 10px'\n    },\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: 3,\n      lineColor: 'white'\n    }\n  }\n};\nvar TopicDirection = {\n  LEFT: 'L',\n  RIGHT: 'R',\n  BOTTOM: 'B',\n  MAIN: 'M' // root\n\n};\nvar DiagramLayoutType;\n\n(function (DiagramLayoutType) {\n  DiagramLayoutType[DiagramLayoutType[\"LEFT_TO_RIGHT\"] = 0] = \"LEFT_TO_RIGHT\";\n  DiagramLayoutType[DiagramLayoutType[\"RIGHT_TO_LEFT\"] = 1] = \"RIGHT_TO_LEFT\";\n  DiagramLayoutType[DiagramLayoutType[\"LEFT_AND_RIGHT\"] = 2] = \"LEFT_AND_RIGHT\";\n  DiagramLayoutType[DiagramLayoutType[\"TOP_TO_BOTTOM\"] = 3] = \"TOP_TO_BOTTOM\";\n})(DiagramLayoutType || (DiagramLayoutType = {}));\n\nvar TopicVisualLevel = {\n  ROOT: 0,\n  PRIMARY: 1,\n  NORMAL: 2\n};\nvar BlockType = {\n  CONTENT: 'CONTENT',\n  DESC: 'DESC'\n};\nvar FocusMode = {\n  NORMAL: 'NORMAL',\n  EDITING_CONTENT: 'EDITING_CONTENT',\n  EDITING_DESC: 'EDITING_DESC',\n  SHOW_POPUP: 'SHOW_POPUP',\n  DRAGGING: 'DRAGGING'\n};\nvar TopicRelationship = {\n  ANCESTOR: 'ANCESTOR',\n  DESCENDANT: 'DESCENDANT',\n  SIBLING: 'SIBLING',\n  NONE: 'NONE'\n};\nvar OpType = {\n  TOGGLE_COLLAPSE: 'TOGGLE_COLLAPSE',\n  COLLAPSE_ALL: 'COLLAPSE_ALL',\n  EXPAND_ALL: 'EXPAND_ALL',\n  ADD_CHILD: 'ADD_CHILD',\n  ADD_SIBLING: 'ADD_SIBLING',\n  DELETE_TOPIC: 'DELETE_TOPIC',\n  FOCUS_TOPIC: 'FOCUS_TOPIC',\n  SET_STYLE: 'SET_STYLE',\n  SET_TOPIC_BLOCK: 'SET_TOPIC_BLOCK',\n  DELETE_TOPIC_BLOCK: 'DELETE_TOPIC_BLOCK',\n  // SET_TOPIC_CONTENT: 'SET_TOPIC_CONTENT',\n  // SET_TOPIC_DESC: 'SET_TOPIC_DESC',\n  START_EDITING_CONTENT: 'START_EDITING_CONTENT',\n  START_EDITING_DESC: 'START_EDITING_DESC',\n  DRAG_AND_DROP: 'DRAG_AND_DROP',\n  SET_EDITOR_ROOT: 'SET_EDITOR_ROOT'\n};\nvar defaultConfigRecord = {\n  readOnly: false,\n  allowUndo: true,\n  layoutDir: DiagramLayoutType.LEFT_AND_RIGHT,\n  theme: defaultTheme\n};\n\nvar Config =\n/** @class */\nfunction (_super) {\n  __extends(Config, _super);\n\n  function Config() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Object.defineProperty(Config.prototype, \"layoutDir\", {\n    get: function get() {\n      return this.get('layoutDir');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Config.prototype, \"readOnly\", {\n    get: function get() {\n      return this.get('readOnly');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Config.prototype, \"allowUndo\", {\n    get: function get() {\n      return this.get('allowUndo');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Config.prototype, \"theme\", {\n    get: function get() {\n      return this.get('theme');\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Config.fromJSON = function (obj) {\n    return new Config(obj);\n  };\n\n  return Config;\n}(Record(defaultConfigRecord));\n/**\r\n * Data.\r\n *\r\n * This isn't an immutable record, it's just a thin wrapper around `Map` so that\r\n * we can allow for more convenient creation.\r\n *\r\n * @type {Object}\r\n */\n\n\nvar Data =\n/** @class */\nfunction () {\n  function Data() {}\n  /**\r\n   * Create a new `Data` with `attrs`.\r\n   *\r\n   * @param {Object|Map} attrs\r\n   * @return {Data} data\r\n   */\n\n\n  Data.create = function (attrs) {\n    if (attrs === void 0) {\n      attrs = {};\n    }\n\n    if (Map$1.isMap(attrs)) {\n      return attrs;\n    }\n\n    if (isPlainObject(attrs)) {\n      return Data.fromJSON(attrs);\n    }\n\n    throw new Error(\"`Data.create` only accepts objects or maps, but you passed it: \" + attrs);\n  };\n  /**\r\n   * Create a `Data` from a JSON `object`.\r\n   *\r\n   * @param {Object} object\r\n   * @return {Data}\r\n   */\n\n\n  Data.fromJSON = function (object) {\n    return Map$1(object);\n  };\n\n  return Data;\n}();\n\nfunction createKey() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    var r = Math.random() * 16 | 0,\n        v = c == 'x' ? r : r & 0x3 | 0x8;\n    return v.toString(16);\n  });\n}\n\nvar defaultTopicRecord = {\n  key: null,\n  parentKey: null,\n  collapse: false,\n  subKeys: null,\n  blocks: null,\n  relations: null,\n  style: null\n};\n\nvar Topic =\n/** @class */\nfunction (_super) {\n  __extends(Topic, _super);\n\n  function Topic() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Object.defineProperty(Topic.prototype, \"key\", {\n    get: function get() {\n      return this.get('key');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Topic.prototype, \"parentKey\", {\n    get: function get() {\n      return this.get('parentKey');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Topic.prototype, \"collapse\", {\n    get: function get() {\n      return this.get('collapse');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Topic.prototype, \"subKeys\", {\n    get: function get() {\n      return this.get('subKeys');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Topic.prototype, \"blocks\", {\n    get: function get() {\n      return this.get('blocks');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Topic.prototype, \"relations\", {\n    get: function get() {\n      return this.get('relations');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Topic.prototype, \"style\", {\n    get: function get() {\n      return this.get('style');\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Topic.prototype.getBlock = function (type) {\n    var index = this.blocks.findIndex(function (b) {\n      return b.type === type;\n    });\n    if (index === -1) return {\n      index: index,\n      block: null\n    };\n    return {\n      index: index,\n      block: this.blocks.get(index)\n    };\n  };\n\n  Topic.fromJSON = function (obj) {\n    var key = obj.key,\n        _a = obj.parentKey,\n        parentKey = _a === void 0 ? null : _a,\n        blocks = obj.blocks,\n        _b = obj.subKeys,\n        subKeys = _b === void 0 ? [] : _b,\n        _c = obj.collapse,\n        collapse = _c === void 0 ? false : _c;\n    return new Topic({\n      key: key,\n      parentKey: parentKey,\n      collapse: collapse,\n      subKeys: List(subKeys),\n      blocks: Block.createList(blocks)\n    });\n  };\n\n  Topic.create = function (_a) {\n    var key = _a.key,\n        _b = _a.parentKey,\n        parentKey = _b === void 0 ? null : _b,\n        _c = _a.content,\n        content = _c === void 0 ? '' : _c,\n        _d = _a.subKeys,\n        subKeys = _d === void 0 ? [] : _d,\n        _e = _a.collapse,\n        collapse = _e === void 0 ? false : _e;\n    var block = Block.create({\n      type: BlockType.CONTENT,\n      data: content,\n      key: null\n    });\n    var blocks = List([block]);\n    return new Topic({\n      key: key,\n      parentKey: parentKey,\n      blocks: blocks,\n      subKeys: List(subKeys),\n      collapse: collapse\n    });\n  };\n\n  return Topic;\n}(Record(defaultTopicRecord));\n\nvar defaultModelRecord = {\n  topics: Map$1(),\n  data: null,\n  config: null,\n  rootTopicKey: null,\n  editorRootTopicKey: null,\n  focusKey: null,\n  focusMode: null,\n  formatVersion: null,\n  zoomFactor: 1\n};\n\nvar Model =\n/** @class */\nfunction (_super) {\n  __extends(Model, _super);\n\n  function Model() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Model.isModel = function (obj) {\n    return obj instanceof Model;\n  };\n\n  Model.create = function (attrs) {\n    if (attrs === void 0) {\n      attrs = null;\n    }\n\n    if (attrs == null) return Model.createEmpty();\n\n    if (Model.isModel(attrs)) {\n      return attrs;\n    }\n\n    if (isPlainObject(attrs)) {\n      return Model.fromJSON(attrs);\n    }\n\n    throw new Error(\"`Value.create` only accepts objects or values, but you passed it: \" + attrs);\n  };\n\n  Model.createEmpty = function () {\n    var model = new Model();\n    var rootTopic = Topic.create({\n      key: createKey()\n    });\n    return model.update('topics', function (topics) {\n      return topics.set(rootTopic.key, rootTopic);\n    }).set('rootTopicKey', rootTopic.key);\n  };\n\n  Model.fromJSON = function (object) {\n    var model = new Model();\n    var _a = object.data,\n        data = _a === void 0 ? {} : _a,\n        _b = object.topics,\n        topics = _b === void 0 ? [] : _b,\n        _c = object.config,\n        config = _c === void 0 ? {} : _c,\n        rootTopicKey = object.rootTopicKey;\n    var editorRootTopicKey = object.editorRootTopicKey;\n    if (editorRootTopicKey === undefined) editorRootTopicKey = rootTopicKey;\n    model = model.merge({\n      rootTopicKey: rootTopicKey,\n      editorRootTopicKey: editorRootTopicKey\n    });\n    model = model.withMutations(function (model) {\n      topics.forEach(function (topic) {\n        model.update('topics', function (topics) {\n          return topics.set(topic.key, Topic.fromJSON(topic));\n        });\n      });\n      model.set('config', Config.fromJSON(config));\n      model.set('data', Data.fromJSON(data));\n    });\n    return model;\n  };\n\n  Model.prototype.toJS = function () {\n    var obj = {\n      rootTopicKey: this.rootTopicKey,\n      topics: Object.values(this.topics.toJS()),\n      config: this.config,\n      data: this.data,\n      zoomFactor: this.zoomFactor\n    };\n    return obj;\n  };\n\n  Object.defineProperty(Model.prototype, \"topics\", {\n    get: function get() {\n      return this.get('topics');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Model.prototype, \"config\", {\n    get: function get() {\n      return this.get('config');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Model.prototype, \"formatVersion\", {\n    get: function get() {\n      return this.get('formatVersion');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Model.prototype, \"rootTopicKey\", {\n    get: function get() {\n      return this.get('rootTopicKey');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Model.prototype, \"editorRootTopicKey\", {\n    get: function get() {\n      return this.get('editorRootTopicKey');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Model.prototype, \"focusKey\", {\n    get: function get() {\n      return this.get('focusKey');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Model.prototype, \"focusMode\", {\n    get: function get() {\n      return this.get('focusMode');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Model.prototype, \"editingContentKey\", {\n    get: function get() {\n      return this.focusMode === FocusMode.EDITING_CONTENT ? this.focusKey : null;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Model.prototype, \"editingDescKey\", {\n    get: function get() {\n      return this.focusMode === FocusMode.EDITING_DESC ? this.focusKey : null;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Model.prototype.getTopic = function (key) {\n    return this.topics.get(key);\n  };\n\n  Model.prototype.getParentTopic = function (key) {\n    var topic = this.getTopic(key);\n    return topic.parentKey ? this.getTopic(topic.parentKey) : null;\n  };\n\n  Model.prototype.getTopicVisualLevel = function (key) {\n    var topic = this.getTopic(key);\n    var level = 0;\n\n    while (topic && topic.key !== this.editorRootTopicKey) {\n      level++;\n      topic = this.getParentTopic(topic.key);\n    }\n\n    return level;\n  };\n\n  Object.defineProperty(Model.prototype, \"rootTopic\", {\n    get: function get() {\n      return this.getTopic(this.rootTopicKey);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Model.prototype, \"zoomFactor\", {\n    get: function get() {\n      return this.get('zoomFactor');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return Model;\n}(Record(defaultModelRecord));\n\nfunction getAllSubTopicKeys(model, topicKey) {\n  var item = model.getTopic(topicKey);\n  var res = [];\n\n  if (item.subKeys.size > 0) {\n    var subKeys = item.subKeys.toArray();\n    res.push.apply(res, __spread(subKeys));\n    res = subKeys.reduce(function (acc, key) {\n      acc.push.apply(acc, __spread(getAllSubTopicKeys(model, key)));\n      return acc;\n    }, res);\n  }\n\n  return res;\n}\n\nfunction getRelationship(model, srcKey, dstKey) {\n  var srcTopic = model.getTopic(srcKey);\n  var dstTopic = model.getTopic(dstKey);\n\n  if (srcTopic && dstTopic) {\n    if (srcTopic.parentKey == dstTopic.parentKey) return TopicRelationship.SIBLING;\n    var pTopic = srcTopic;\n\n    while (pTopic.parentKey) {\n      if (pTopic.parentKey === dstTopic.key) return TopicRelationship.DESCENDANT;\n      pTopic = model.getParentTopic(pTopic.key);\n    }\n\n    pTopic = dstTopic;\n\n    while (pTopic.parentKey) {\n      if (pTopic.parentKey === srcTopic.key) return TopicRelationship.ANCESTOR;\n      pTopic = model.getParentTopic(pTopic.key);\n    }\n  }\n\n  return TopicRelationship.NONE;\n}\n\nvar log$1 = debug('modifier');\n\nfunction toggleCollapse(_a) {\n  var model = _a.model,\n      topicKey = _a.topicKey;\n  var topic = model.getTopic(topicKey);\n\n  if (topic && topic.subKeys.size !== 0) {\n    topic = topic.merge({\n      collapse: !topic.collapse\n    });\n    model = model.updateIn(['topics', topic.key, 'collapse'], function (collapse) {\n      return !collapse;\n    });\n  }\n\n  return model;\n}\n\nfunction collapseAll(_a) {\n  var model = _a.model;\n  log$1('collapseAll');\n  var topicKeys = getAllSubTopicKeys(model, model.editorRootTopicKey);\n  log$1(model);\n  model = model.withMutations(function (m) {\n    topicKeys.forEach(function (topicKey) {\n      m.setIn(['topics', topicKey, 'collapse'], true);\n    });\n  });\n  log$1(model);\n  return model;\n}\n\nfunction expandAll(_a) {\n  var model = _a.model;\n  var topicKeys = getAllSubTopicKeys(model, model.editorRootTopicKey);\n  log$1(model);\n  model = model.withMutations(function (m) {\n    topicKeys.forEach(function (topicKey) {\n      m.setIn(['topics', topicKey, 'collapse'], false);\n    });\n  });\n  log$1(model);\n  return model;\n}\n\nfunction focusTopic(_a) {\n  var model = _a.model,\n      topicKey = _a.topicKey,\n      focusMode = _a.focusMode;\n  log$1('focus topic');\n  if (topicKey !== model.focusKey) model = model.set('focusKey', topicKey);\n  if (focusMode !== model.focusMode) model = model.set('focusMode', focusMode);\n  return model;\n}\n\nfunction addChild(_a) {\n  var model = _a.model,\n      topicKey = _a.topicKey;\n  log$1('addChild:', topicKey);\n  var topic = model.getTopic(topicKey);\n\n  if (topic) {\n    var child_1 = Topic.create({\n      key: createKey(),\n      parentKey: topic.key\n    });\n    topic = topic.set('collapse', false).update('subKeys', function (subKeys) {\n      return subKeys.push(child_1.key);\n    });\n    model = model.update('topics', function (topics) {\n      return topics.set(topicKey, topic).set(child_1.key, child_1);\n    });\n    return focusTopic({\n      model: model,\n      topicKey: child_1.key,\n      focusMode: FocusMode.EDITING_CONTENT\n    });\n  }\n\n  return model;\n}\n\nfunction addSibling(_a) {\n  var model = _a.model,\n      topicKey = _a.topicKey;\n  if (topicKey === model.rootTopicKey) return model;\n  var topic = model.getTopic(topicKey);\n\n  if (topic) {\n    var pItem = model.getTopic(topic.parentKey);\n    var idx_1 = pItem.subKeys.indexOf(topicKey);\n    var sibling_1 = Topic.create({\n      key: createKey(),\n      parentKey: pItem.key\n    });\n    model = model.update('topics', function (topics) {\n      return topics.set(sibling_1.key, sibling_1);\n    }).updateIn(['topics', pItem.key, 'subKeys'], function (subKeys) {\n      return subKeys.insert(idx_1 + 1, sibling_1.key);\n    });\n    return focusTopic({\n      model: model,\n      topicKey: sibling_1.key,\n      focusMode: FocusMode.EDITING_CONTENT\n    });\n  }\n\n  return model;\n}\n\nfunction deleteTopic(_a) {\n  var model = _a.model,\n      topicKey = _a.topicKey;\n  if (topicKey === model.rootTopicKey) return model;\n  var item = model.getTopic(topicKey);\n\n  if (item) {\n    model = model.withMutations(function (m) {\n      m.update('topics', function (topics) {\n        topics = topics.delete(topicKey);\n        var deleteKeys = getAllSubTopicKeys(model, topicKey);\n        topics = topics.withMutations(function (t) {\n          deleteKeys.forEach(function (dKey) {\n            t.delete(dKey);\n          });\n        });\n        return topics;\n      });\n      m.updateIn(['topics', item.parentKey, 'subKeys'], function (subKeys) {\n        return subKeys.delete(subKeys.indexOf(topicKey));\n      });\n      if (m.focusKey === topicKey) m.set('focusKey', null).set('focusMode', null);\n    });\n  }\n\n  return model;\n}\n/**\r\n * setBlockData of one topic\r\n * @param model\r\n * @param topicKey\r\n * @param blockType\r\n * @param focusMode\r\n * @param data\r\n */\n\n\nfunction setBlockData(_a) {\n  var model = _a.model,\n      topicKey = _a.topicKey,\n      blockType = _a.blockType,\n      focusMode = _a.focusMode,\n      data = _a.data;\n  var topic = model.getTopic(topicKey);\n\n  if (topic) {\n    var _b = topic.getBlock(blockType),\n        index = _b.index,\n        block = _b.block;\n\n    if (index === -1) {\n      model = model.updateIn(['topics', topicKey, 'blocks'], function (blocks) {\n        return blocks.push(Block.create({\n          type: blockType,\n          data: data\n        }));\n      });\n    } else {\n      if (block.data !== data) {\n        model = model.updateIn(['topics', topicKey, 'blocks', index, 'data'], function (dt) {\n          return data;\n        });\n      }\n    }\n\n    if (focusMode) {\n      model = focusTopic({\n        model: model,\n        topicKey: topicKey,\n        focusMode: focusMode\n      });\n    }\n  }\n\n  return model;\n}\n\nfunction deleteBlock(_a) {\n  var model = _a.model,\n      topicKey = _a.topicKey,\n      blockType = _a.blockType;\n  var topic = model.getTopic(topicKey);\n\n  if (topic) {\n    var _b = topic.getBlock(blockType),\n        index_1 = _b.index,\n        block = _b.block;\n\n    if (index_1 !== -1) {\n      model = model.updateIn(['topics', topicKey, 'blocks'], function (blocks) {\n        return blocks.delete(index_1);\n      });\n    }\n\n    model = focusTopic({\n      model: model,\n      topicKey: null,\n      focusMode: null\n    });\n  }\n\n  return model;\n}\n\nfunction setContent(_a) {\n  var model = _a.model,\n      topicKey = _a.topicKey,\n      data = _a.data;\n  var topic = model.getTopic(topicKey);\n\n  if (topic) {\n    var _b = topic.getBlock(BlockType.CONTENT),\n        index = _b.index,\n        block = _b.block;\n\n    if (block.data !== data) {\n      model = model.updateIn(['topics', topicKey, 'blocks', index, 'data'], function (dt) {\n        return data;\n      });\n    } //TODO \n\n\n    return focusTopic({\n      model: model,\n      topicKey: topicKey,\n      focusMode: FocusMode.EDITING_CONTENT\n    });\n  }\n\n  return model;\n}\n\nfunction setStyle(_a) {\n  var model = _a.model,\n      topicKey = _a.topicKey,\n      style = _a.style;\n  var topic = model.getTopic(topicKey);\n\n  if (topic) {\n    if (style !== topic.style) {\n      model = model.updateIn(['topics', topicKey, 'style'], function (s) {\n        return style;\n      });\n    }\n  }\n\n  return model;\n}\n\nfunction setDesc(_a) {\n  var model = _a.model,\n      topicKey = _a.topicKey,\n      data = _a.data;\n  var topic = model.getTopic(topicKey);\n\n  if (topic) {\n    var _b = topic.getBlock(BlockType.DESC),\n        index = _b.index,\n        block = _b.block;\n\n    if (index === -1) {\n      model = model.updateIn(['topics', topicKey, 'blocks'], function (blocks) {\n        return blocks.push(Block.create({\n          type: BlockType.DESC,\n          data: data\n        }));\n      });\n    } else {\n      if (block.data !== data) {\n        model = model.updateIn(['topics', topicKey, 'blocks', index, 'data'], function (dt) {\n          return data;\n        });\n      }\n    }\n\n    return focusTopic({\n      model: model,\n      topicKey: topicKey,\n      focusMode: FocusMode.EDITING_DESC\n    });\n  }\n\n  return model;\n}\n\nfunction setTheme(_a) {\n  var model = _a.model,\n      theme = _a.theme;\n  model = model.setIn(['config', 'theme'], theme);\n  return model;\n}\n\nfunction setLayoutDir(_a) {\n  var model = _a.model,\n      layoutDir = _a.layoutDir;\n  if (model.config.layoutDir === layoutDir) return model;\n  model = model.setIn(['config', 'layoutDir'], layoutDir);\n  return model;\n}\n\nfunction setEditorRootTopicKey(_a) {\n  var model = _a.model,\n      topicKey = _a.topicKey;\n  if (model.editorRootTopicKey !== topicKey) model = model.set('editorRootTopicKey', topicKey);\n  if (model.getTopic(topicKey).collapse) model = model.setIn(['topics', topicKey, 'collapse'], false);\n  return model;\n}\n\nfunction setZoomFactor(_a) {\n  var model = _a.model,\n      zoomFactor = _a.zoomFactor;\n  if (model.editorRootTopicKey !== zoomFactor) model = model.set('zoomFactor', zoomFactor);\n  return model;\n}\n\nvar index = {\n  addChild: addChild,\n  addSibling: addSibling,\n  toggleCollapse: toggleCollapse,\n  collapseAll: collapseAll,\n  expandAll: expandAll,\n  focusTopic: focusTopic,\n  deleteTopic: deleteTopic,\n  setBlockData: setBlockData,\n  deleteBlock: deleteBlock,\n  setContent: setContent,\n  setDesc: setDesc,\n  setStyle: setStyle,\n  setTheme: setTheme,\n  setLayoutDir: setLayoutDir,\n  setEditorRootTopicKey: setEditorRootTopicKey,\n  setZoomFactor: setZoomFactor\n};\nvar index$1 = {\n  Block: Block,\n  Config: Config,\n  Model: Model,\n  Topic: Topic,\n  Data: Data\n};\nexport { Block, BlockType, Config, Controller, Data, DiagramLayoutType, FocusMode, Model, index as ModelModifier, index as Modifiers, OpType, Topic, TopicDirection, TopicRelationship, TopicVisualLevel, defaultTheme, getAllSubTopicKeys, getRelationship, index$1 as models };","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\nvar _extendStatics = function extendStatics(d, b) {\n  _extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) {\n      if (b.hasOwnProperty(p)) d[p] = b[p];\n    }\n  };\n\n  return _extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  _extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar _assign = function __assign() {\n  _assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return _assign.apply(this, arguments);\n};\n\nexport { _assign as __assign };\nexport function __rest(s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\nexport function __param(paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n}\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\nexport function __generator(thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n}\nexport function __exportStar(m, exports) {\n  for (var p in m) {\n    if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n  }\n}\nexport function __values(o) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator],\n      i = 0;\n  if (m) return m.call(o);\n  return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n}\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n}\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++) {\n    ar = ar.concat(__read(arguments[i]));\n  }\n\n  return ar;\n}\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []),\n      i,\n      q = [];\n  return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () {\n    return this;\n  }, i;\n\n  function verb(n) {\n    if (g[n]) i[n] = function (v) {\n      return new Promise(function (a, b) {\n        q.push([n, v, a, b]) > 1 || resume(n, v);\n      });\n    };\n  }\n\n  function resume(n, v) {\n    try {\n      step(g[n](v));\n    } catch (e) {\n      settle(q[0][3], e);\n    }\n  }\n\n  function step(r) {\n    r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);\n  }\n\n  function fulfill(value) {\n    resume(\"next\", value);\n  }\n\n  function reject(value) {\n    resume(\"throw\", value);\n  }\n\n  function settle(f, v) {\n    if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]);\n  }\n}\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) {\n    throw e;\n  }), verb(\"return\"), i[Symbol.iterator] = function () {\n    return this;\n  }, i;\n\n  function verb(n, f) {\n    i[n] = o[n] ? function (v) {\n      return (p = !p) ? {\n        value: __await(o[n](v)),\n        done: n === \"return\"\n      } : f ? f(v) : v;\n    } : f;\n  }\n}\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator],\n      i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () {\n    return this;\n  }, i);\n\n  function verb(n) {\n    i[n] = o[n] && function (v) {\n      return new Promise(function (resolve, reject) {\n        v = o[n](v), settle(resolve, reject, v.done, v.value);\n      });\n    };\n  }\n\n  function settle(resolve, reject, d, v) {\n    Promise.resolve(v).then(function (v) {\n      resolve({\n        value: v,\n        done: d\n      });\n    }, reject);\n  }\n}\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n}\n;\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  }\n  result.default = mod;\n  return result;\n}\nexport function __importDefault(mod) {\n  return mod && mod.__esModule ? mod : {\n    default: mod\n  };\n}","/*\n * Copyright 2015 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport var Position = {\n  BOTTOM: \"bottom\",\n  BOTTOM_LEFT: \"bottom-left\",\n  BOTTOM_RIGHT: \"bottom-right\",\n  LEFT: \"left\",\n  LEFT_BOTTOM: \"left-bottom\",\n  LEFT_TOP: \"left-top\",\n  RIGHT: \"right\",\n  RIGHT_BOTTOM: \"right-bottom\",\n  RIGHT_TOP: \"right-top\",\n  TOP: \"top\",\n  TOP_LEFT: \"top-left\",\n  TOP_RIGHT: \"top-right\"\n};\nexport function isPositionHorizontal(position) {\n  /* istanbul ignore next */\n  return position === Position.TOP || position === Position.TOP_LEFT || position === Position.TOP_RIGHT || position === Position.BOTTOM || position === Position.BOTTOM_LEFT || position === Position.BOTTOM_RIGHT;\n}\nexport function isPositionVertical(position) {\n  /* istanbul ignore next */\n  return position === Position.LEFT || position === Position.LEFT_TOP || position === Position.LEFT_BOTTOM || position === Position.RIGHT || position === Position.RIGHT_TOP || position === Position.RIGHT_BOTTOM;\n}\nexport function getPositionIgnoreAngles(position) {\n  if (position === Position.TOP || position === Position.TOP_LEFT || position === Position.TOP_RIGHT) {\n    return Position.TOP;\n  } else if (position === Position.BOTTOM || position === Position.BOTTOM_LEFT || position === Position.BOTTOM_RIGHT) {\n    return Position.BOTTOM;\n  } else if (position === Position.LEFT || position === Position.LEFT_TOP || position === Position.LEFT_BOTTOM) {\n    return Position.LEFT;\n  } else {\n    return Position.RIGHT;\n  }\n}","/*\n * Copyright 2018 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport { Position } from \"../../common/position\";\n/** `Position` with `\"auto\"` values, used by `Popover` and `Tooltip`. */\n\nexport var PopoverPosition = tslib_1.__assign({}, Position, {\n  AUTO: \"auto\",\n  AUTO_END: \"auto-end\",\n  AUTO_START: \"auto-start\"\n});","/*\n * Copyright 2018 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** Alignment along the horizontal axis. */\nexport var Alignment = {\n  CENTER: \"center\",\n  LEFT: \"left\",\n  RIGHT: \"right\"\n};","/*\n * Copyright 2018 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// tslint:disable:object-literal-sort-keys\nexport var Elevation = {\n  ZERO: 0,\n  ONE: 1,\n  TWO: 2,\n  THREE: 3,\n  FOUR: 4\n};","/*\n * Copyright 2015 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// tslint:disable:object-literal-sort-keys\n\n/**\n * The four basic intents.\n */\nexport var Intent = {\n  NONE: \"none\",\n  PRIMARY: \"primary\",\n  SUCCESS: \"success\",\n  WARNING: \"warning\",\n  DANGER: \"danger\"\n};","/*\n * Copyright 2015 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Alignment } from \"./alignment\";\nimport { Elevation } from \"./elevation\";\nimport { Intent } from \"./intent\";\nimport { Position } from \"./position\";\nvar NS = process.env.BLUEPRINT_NAMESPACE || process.env.REACT_APP_BLUEPRINT_NAMESPACE || \"bp3\"; // modifiers\n\nexport var ACTIVE = NS + \"-active\";\nexport var ALIGN_LEFT = NS + \"-align-left\";\nexport var ALIGN_RIGHT = NS + \"-align-right\";\nexport var DARK = NS + \"-dark\";\nexport var DISABLED = NS + \"-disabled\";\nexport var FILL = NS + \"-fill\";\nexport var FIXED = NS + \"-fixed\";\nexport var FIXED_TOP = NS + \"-fixed-top\";\nexport var INLINE = NS + \"-inline\";\nexport var INTERACTIVE = NS + \"-interactive\";\nexport var LARGE = NS + \"-large\";\nexport var LOADING = NS + \"-loading\";\nexport var MINIMAL = NS + \"-minimal\";\nexport var MULTILINE = NS + \"-multiline\";\nexport var ROUND = NS + \"-round\";\nexport var SMALL = NS + \"-small\";\nexport var VERTICAL = NS + \"-vertical\";\nexport var POSITION_TOP = positionClass(Position.TOP);\nexport var POSITION_BOTTOM = positionClass(Position.BOTTOM);\nexport var POSITION_LEFT = positionClass(Position.LEFT);\nexport var POSITION_RIGHT = positionClass(Position.RIGHT);\nexport var ELEVATION_0 = elevationClass(Elevation.ZERO);\nexport var ELEVATION_1 = elevationClass(Elevation.ONE);\nexport var ELEVATION_2 = elevationClass(Elevation.TWO);\nexport var ELEVATION_3 = elevationClass(Elevation.THREE);\nexport var ELEVATION_4 = elevationClass(Elevation.FOUR);\nexport var INTENT_PRIMARY = intentClass(Intent.PRIMARY);\nexport var INTENT_SUCCESS = intentClass(Intent.SUCCESS);\nexport var INTENT_WARNING = intentClass(Intent.WARNING);\nexport var INTENT_DANGER = intentClass(Intent.DANGER);\nexport var FOCUS_DISABLED = NS + \"-focus-disabled\"; // text utilities\n\nexport var UI_TEXT = NS + \"-ui-text\";\nexport var RUNNING_TEXT = NS + \"-running-text\";\nexport var MONOSPACE_TEXT = NS + \"-monospace-text\";\nexport var TEXT_LARGE = NS + \"-text-large\";\nexport var TEXT_SMALL = NS + \"-text-small\";\nexport var TEXT_MUTED = NS + \"-text-muted\";\nexport var TEXT_DISABLED = NS + \"-text-disabled\";\nexport var TEXT_OVERFLOW_ELLIPSIS = NS + \"-text-overflow-ellipsis\"; // textual elements\n\nexport var BLOCKQUOTE = NS + \"-blockquote\";\nexport var CODE = NS + \"-code\";\nexport var CODE_BLOCK = NS + \"-code-block\";\nexport var HEADING = NS + \"-heading\";\nexport var LIST = NS + \"-list\";\nexport var LIST_UNSTYLED = NS + \"-list-unstyled\";\nexport var RTL = NS + \"-rtl\"; // components\n\nexport var ALERT = NS + \"-alert\";\nexport var ALERT_BODY = ALERT + \"-body\";\nexport var ALERT_CONTENTS = ALERT + \"-contents\";\nexport var ALERT_FOOTER = ALERT + \"-footer\";\nexport var BREADCRUMB = NS + \"-breadcrumb\";\nexport var BREADCRUMB_CURRENT = BREADCRUMB + \"-current\";\nexport var BREADCRUMBS = BREADCRUMB + \"s\";\nexport var BREADCRUMBS_COLLAPSED = BREADCRUMB + \"s-collapsed\";\nexport var BUTTON = NS + \"-button\";\nexport var BUTTON_GROUP = BUTTON + \"-group\";\nexport var BUTTON_SPINNER = BUTTON + \"-spinner\";\nexport var BUTTON_TEXT = BUTTON + \"-text\";\nexport var CALLOUT = NS + \"-callout\";\nexport var CALLOUT_ICON = CALLOUT + \"-icon\";\nexport var CARD = NS + \"-card\";\nexport var COLLAPSE = NS + \"-collapse\";\nexport var COLLAPSE_BODY = COLLAPSE + \"-body\";\nexport var COLLAPSIBLE_LIST = NS + \"-collapse-list\";\nexport var CONTEXT_MENU = NS + \"-context-menu\";\nexport var CONTEXT_MENU_POPOVER_TARGET = CONTEXT_MENU + \"-popover-target\";\nexport var CONTROL_GROUP = NS + \"-control-group\";\nexport var DIALOG = NS + \"-dialog\";\nexport var DIALOG_CONTAINER = DIALOG + \"-container\";\nexport var DIALOG_BODY = DIALOG + \"-body\";\nexport var DIALOG_CLOSE_BUTTON = DIALOG + \"-close-button\";\nexport var DIALOG_FOOTER = DIALOG + \"-footer\";\nexport var DIALOG_FOOTER_ACTIONS = DIALOG + \"-footer-actions\";\nexport var DIALOG_HEADER = DIALOG + \"-header\";\nexport var DIVIDER = NS + \"-divider\";\nexport var DRAWER = NS + \"-drawer\";\nexport var DRAWER_BODY = DRAWER + \"-body\";\nexport var DRAWER_FOOTER = DRAWER + \"-footer\";\nexport var DRAWER_HEADER = DRAWER + \"-header\";\nexport var EDITABLE_TEXT = NS + \"-editable-text\";\nexport var EDITABLE_TEXT_CONTENT = EDITABLE_TEXT + \"-content\";\nexport var EDITABLE_TEXT_EDITING = EDITABLE_TEXT + \"-editing\";\nexport var EDITABLE_TEXT_INPUT = EDITABLE_TEXT + \"-input\";\nexport var EDITABLE_TEXT_PLACEHOLDER = EDITABLE_TEXT + \"-placeholder\";\nexport var FLEX_EXPANDER = NS + \"-flex-expander\";\nexport var HTML_SELECT = NS + \"-html-select\";\n/** @deprecated prefer `<HTMLSelect>` component */\n\nexport var SELECT = NS + \"-select\";\nexport var HTML_TABLE = NS + \"-html-table\";\nexport var HTML_TABLE_BORDERED = HTML_TABLE + \"-bordered\";\nexport var HTML_TABLE_CONDENSED = HTML_TABLE + \"-condensed\";\nexport var HTML_TABLE_STRIPED = HTML_TABLE + \"-striped\";\nexport var INPUT = NS + \"-input\";\nexport var INPUT_GHOST = INPUT + \"-ghost\";\nexport var INPUT_GROUP = INPUT + \"-group\";\nexport var INPUT_ACTION = INPUT + \"-action\";\nexport var CONTROL = NS + \"-control\";\nexport var CONTROL_INDICATOR = CONTROL + \"-indicator\";\nexport var CONTROL_INDICATOR_CHILD = CONTROL_INDICATOR + \"-child\";\nexport var CHECKBOX = NS + \"-checkbox\";\nexport var RADIO = NS + \"-radio\";\nexport var SWITCH = NS + \"-switch\";\nexport var SWITCH_INNER_TEXT = SWITCH + \"-inner-text\";\nexport var FILE_INPUT = NS + \"-file-input\";\nexport var FILE_INPUT_HAS_SELECTION = NS + \"-file-input-has-selection\";\nexport var FILE_UPLOAD_INPUT = NS + \"-file-upload-input\";\nexport var FILE_UPLOAD_INPUT_CUSTOM_TEXT = NS + \"-file-upload-input-custom-text\";\nexport var KEY = NS + \"-key\";\nexport var KEY_COMBO = KEY + \"-combo\";\nexport var MODIFIER_KEY = NS + \"-modifier-key\";\nexport var HOTKEY = NS + \"-hotkey\";\nexport var HOTKEY_LABEL = HOTKEY + \"-label\";\nexport var HOTKEY_COLUMN = HOTKEY + \"-column\";\nexport var HOTKEY_DIALOG = HOTKEY + \"-dialog\";\nexport var LABEL = NS + \"-label\";\nexport var FORM_GROUP = NS + \"-form-group\";\nexport var FORM_CONTENT = NS + \"-form-content\";\nexport var FORM_HELPER_TEXT = NS + \"-form-helper-text\";\nexport var MENU = NS + \"-menu\";\nexport var MENU_ITEM = MENU + \"-item\";\nexport var MENU_ITEM_LABEL = MENU_ITEM + \"-label\";\nexport var MENU_SUBMENU = NS + \"-submenu\";\nexport var MENU_DIVIDER = MENU + \"-divider\";\nexport var MENU_HEADER = MENU + \"-header\";\nexport var NAVBAR = NS + \"-navbar\";\nexport var NAVBAR_GROUP = NAVBAR + \"-group\";\nexport var NAVBAR_HEADING = NAVBAR + \"-heading\";\nexport var NAVBAR_DIVIDER = NAVBAR + \"-divider\";\nexport var NON_IDEAL_STATE = NS + \"-non-ideal-state\";\nexport var NON_IDEAL_STATE_VISUAL = NON_IDEAL_STATE + \"-visual\";\nexport var NUMERIC_INPUT = NS + \"-numeric-input\";\nexport var OVERFLOW_LIST = NS + \"-overflow-list\";\nexport var OVERFLOW_LIST_SPACER = OVERFLOW_LIST + \"-spacer\";\nexport var OVERLAY = NS + \"-overlay\";\nexport var OVERLAY_BACKDROP = OVERLAY + \"-backdrop\";\nexport var OVERLAY_CONTAINER = OVERLAY + \"-container\";\nexport var OVERLAY_CONTENT = OVERLAY + \"-content\";\nexport var OVERLAY_INLINE = OVERLAY + \"-inline\";\nexport var OVERLAY_OPEN = OVERLAY + \"-open\";\nexport var OVERLAY_SCROLL_CONTAINER = OVERLAY + \"-scroll-container\";\nexport var PANEL_STACK = NS + \"-panel-stack\";\nexport var PANEL_STACK_HEADER = PANEL_STACK + \"-header\";\nexport var PANEL_STACK_HEADER_BACK = PANEL_STACK + \"-header-back\";\nexport var PANEL_STACK_VIEW = PANEL_STACK + \"-view\";\nexport var POPOVER = NS + \"-popover\";\nexport var POPOVER_ARROW = POPOVER + \"-arrow\";\nexport var POPOVER_BACKDROP = POPOVER + \"-backdrop\";\nexport var POPOVER_CONTENT = POPOVER + \"-content\";\nexport var POPOVER_CONTENT_SIZING = POPOVER_CONTENT + \"-sizing\";\nexport var POPOVER_DISMISS = POPOVER + \"-dismiss\";\nexport var POPOVER_DISMISS_OVERRIDE = POPOVER_DISMISS + \"-override\";\nexport var POPOVER_OPEN = POPOVER + \"-open\";\nexport var POPOVER_TARGET = POPOVER + \"-target\";\nexport var POPOVER_WRAPPER = POPOVER + \"-wrapper\";\nexport var TRANSITION_CONTAINER = NS + \"-transition-container\";\nexport var PROGRESS_BAR = NS + \"-progress-bar\";\nexport var PROGRESS_METER = NS + \"-progress-meter\";\nexport var PROGRESS_NO_STRIPES = NS + \"-no-stripes\";\nexport var PROGRESS_NO_ANIMATION = NS + \"-no-animation\";\nexport var PORTAL = NS + \"-portal\";\nexport var SKELETON = NS + \"-skeleton\";\nexport var SLIDER = NS + \"-slider\";\nexport var SLIDER_AXIS = SLIDER + \"-axis\";\nexport var SLIDER_HANDLE = SLIDER + \"-handle\";\nexport var SLIDER_LABEL = SLIDER + \"-label\";\nexport var SLIDER_TRACK = SLIDER + \"-track\";\nexport var SLIDER_PROGRESS = SLIDER + \"-progress\";\nexport var START = NS + \"-start\";\nexport var END = NS + \"-end\";\nexport var SPINNER = NS + \"-spinner\";\nexport var SPINNER_ANIMATION = SPINNER + \"-animation\";\nexport var SPINNER_HEAD = SPINNER + \"-head\";\nexport var SPINNER_NO_SPIN = NS + \"-no-spin\";\nexport var SPINNER_TRACK = SPINNER + \"-track\";\nexport var TAB = NS + \"-tab\";\nexport var TAB_INDICATOR = TAB + \"-indicator\";\nexport var TAB_INDICATOR_WRAPPER = TAB_INDICATOR + \"-wrapper\";\nexport var TAB_LIST = TAB + \"-list\";\nexport var TAB_PANEL = TAB + \"-panel\";\nexport var TABS = TAB + \"s\";\nexport var TAG = NS + \"-tag\";\nexport var TAG_REMOVE = TAG + \"-remove\";\nexport var TAG_INPUT = NS + \"-tag-input\";\nexport var TAG_INPUT_ICON = TAG_INPUT + \"-icon\";\nexport var TAG_INPUT_VALUES = TAG_INPUT + \"-values\";\nexport var TOAST = NS + \"-toast\";\nexport var TOAST_CONTAINER = TOAST + \"-container\";\nexport var TOAST_MESSAGE = TOAST + \"-message\";\nexport var TOOLTIP = NS + \"-tooltip\";\nexport var TOOLTIP_INDICATOR = TOOLTIP + \"-indicator\";\nexport var TREE = NS + \"-tree\";\nexport var TREE_NODE = NS + \"-tree-node\";\nexport var TREE_NODE_CARET = TREE_NODE + \"-caret\";\nexport var TREE_NODE_CARET_CLOSED = TREE_NODE_CARET + \"-closed\";\nexport var TREE_NODE_CARET_NONE = TREE_NODE_CARET + \"-none\";\nexport var TREE_NODE_CARET_OPEN = TREE_NODE_CARET + \"-open\";\nexport var TREE_NODE_CONTENT = TREE_NODE + \"-content\";\nexport var TREE_NODE_EXPANDED = TREE_NODE + \"-expanded\";\nexport var TREE_NODE_ICON = TREE_NODE + \"-icon\";\nexport var TREE_NODE_LABEL = TREE_NODE + \"-label\";\nexport var TREE_NODE_LIST = TREE_NODE + \"-list\";\nexport var TREE_NODE_SECONDARY_LABEL = TREE_NODE + \"-secondary-label\";\nexport var TREE_NODE_SELECTED = TREE_NODE + \"-selected\";\nexport var TREE_ROOT = NS + \"-tree-root\";\nexport var ICON = NS + \"-icon\";\nexport var ICON_STANDARD = ICON + \"-standard\";\nexport var ICON_LARGE = ICON + \"-large\";\n/**\n * Returns the namespace prefix for all Blueprint CSS classes.\n * Customize this namespace at build time with the `process.env.BLUEPRINT_NAMESPACE` environment variable.\n */\n\nexport function getClassNamespace() {\n  return NS;\n}\n/** Return CSS class for alignment. */\n\nexport function alignmentClass(alignment) {\n  switch (alignment) {\n    case Alignment.LEFT:\n      return ALIGN_LEFT;\n\n    case Alignment.RIGHT:\n      return ALIGN_RIGHT;\n\n    default:\n      return undefined;\n  }\n}\nexport function elevationClass(elevation) {\n  if (elevation == null) {\n    return undefined;\n  }\n\n  return NS + \"-elevation-\" + elevation;\n}\n/** Returns CSS class for icon name. */\n\nexport function iconClass(iconName) {\n  if (iconName == null) {\n    return undefined;\n  }\n\n  return iconName.indexOf(NS + \"-icon-\") === 0 ? iconName : NS + \"-icon-\" + iconName;\n}\n/** Return CSS class for intent. */\n\nexport function intentClass(intent) {\n  if (intent == null || intent === Intent.NONE) {\n    return undefined;\n  }\n\n  return NS + \"-intent-\" + intent.toLowerCase();\n}\nexport function positionClass(position) {\n  if (position == null) {\n    return undefined;\n  }\n\n  return NS + \"-position-\" + position;\n}","/*\n * Copyright 2015 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport var BACKSPACE = 8;\nexport var TAB = 9;\nexport var ENTER = 13;\nexport var SHIFT = 16;\nexport var ESCAPE = 27;\nexport var SPACE = 32;\nexport var ARROW_LEFT = 37;\nexport var ARROW_UP = 38;\nexport var ARROW_RIGHT = 39;\nexport var ARROW_DOWN = 40;\nexport var DELETE = 46;\n/** Returns whether the key code is `enter` or `space`, the two keys that can click a button. */\n\nexport function isKeyboardClick(keyCode) {\n  return keyCode === ENTER || keyCode === SPACE;\n}","/*\n * Copyright 2015 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nexport var DISPLAYNAME_PREFIX = \"Blueprint3\";\n/** A collection of curated prop keys used across our Components which are not valid HTMLElement props. */\n\nvar INVALID_PROPS = [\"active\", \"alignText\", \"containerRef\", \"elementRef\", \"fill\", \"icon\", \"inputRef\", \"intent\", \"inline\", \"large\", \"loading\", \"leftIcon\", \"minimal\", \"onChildrenMount\", \"onRemove\", \"panel\", \"panelClassName\", \"popoverProps\", \"rightElement\", \"rightIcon\", \"round\", \"small\", \"text\"];\n/**\n * Typically applied to HTMLElements to filter out blacklisted props. When applied to a Component,\n * can filter props from being passed down to the children. Can also filter by a combined list of\n * supplied prop keys and the blacklist (only appropriate for HTMLElements).\n * @param props The original props object to filter down.\n * @param {string[]} invalidProps If supplied, overwrites the default blacklist.\n * @param {boolean} shouldMerge If true, will merge supplied invalidProps and blacklist together.\n */\n\nexport function removeNonHTMLProps(props, invalidProps, shouldMerge) {\n  if (invalidProps === void 0) {\n    invalidProps = INVALID_PROPS;\n  }\n\n  if (shouldMerge === void 0) {\n    shouldMerge = false;\n  }\n\n  if (shouldMerge) {\n    invalidProps = invalidProps.concat(INVALID_PROPS);\n  }\n\n  return invalidProps.reduce(function (prev, curr) {\n    if (prev.hasOwnProperty(curr)) {\n      delete prev[curr];\n    }\n\n    return prev;\n  }, tslib_1.__assign({}, props));\n}","/*\n * Copyright 2019 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport * as React from \"react\";\nimport { isNodeEnv } from \"./utils\";\n/**\n * An abstract component that Blueprint components can extend\n * in order to add some common functionality like runtime props validation.\n */\n\nvar AbstractPureComponent2 =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(AbstractPureComponent2, _super);\n\n  function AbstractPureComponent2(props, context) {\n    var _this = _super.call(this, props, context) || this; // Not bothering to remove entries when their timeouts finish because clearing invalid ID is a no-op\n\n\n    _this.timeoutIds = [];\n    /**\n     * Clear all known timeouts.\n     */\n\n    _this.clearTimeouts = function () {\n      if (_this.timeoutIds.length > 0) {\n        for (var _i = 0, _a = _this.timeoutIds; _i < _a.length; _i++) {\n          var timeoutId = _a[_i];\n          window.clearTimeout(timeoutId);\n        }\n\n        _this.timeoutIds = [];\n      }\n    };\n\n    if (!isNodeEnv(\"production\")) {\n      _this.validateProps(_this.props);\n    }\n\n    return _this;\n  }\n\n  AbstractPureComponent2.prototype.componentDidUpdate = function (_prevProps, _prevState, _snapshot) {\n    if (!isNodeEnv(\"production\")) {\n      this.validateProps(this.props);\n    }\n  };\n\n  AbstractPureComponent2.prototype.componentWillUnmount = function () {\n    this.clearTimeouts();\n  };\n  /**\n   * Set a timeout and remember its ID.\n   * All stored timeouts will be cleared when component unmounts.\n   * @returns a \"cancel\" function that will clear timeout when invoked.\n   */\n\n\n  AbstractPureComponent2.prototype.setTimeout = function (callback, timeout) {\n    var handle = window.setTimeout(callback, timeout);\n    this.timeoutIds.push(handle);\n    return function () {\n      return window.clearTimeout(handle);\n    };\n  };\n  /**\n   * Ensures that the props specified for a component are valid.\n   * Implementations should check that props are valid and usually throw an Error if they are not.\n   * Implementations should not duplicate checks that the type system already guarantees.\n   *\n   * This method should be used instead of React's\n   * [propTypes](https://facebook.github.io/react/docs/reusable-components.html#prop-validation) feature.\n   * Like propTypes, these runtime checks run only in development mode.\n   */\n\n\n  AbstractPureComponent2.prototype.validateProps = function (_props) {// implement in subclass\n  };\n\n  return AbstractPureComponent2;\n}(React.PureComponent);\n\nexport { AbstractPureComponent2 };","/*\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { IconSvgPaths16, IconSvgPaths20 } from \"@blueprintjs/icons\";\nimport { AbstractPureComponent2, Classes, DISPLAYNAME_PREFIX } from \"../../common\";\n\nvar Icon =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(Icon, _super);\n\n  function Icon() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Icon_1 = Icon;\n\n  Icon.prototype.render = function () {\n    var icon = this.props.icon;\n\n    if (icon == null || typeof icon === \"boolean\") {\n      return null;\n    } else if (typeof icon !== \"string\") {\n      return icon;\n    }\n\n    var _a = this.props,\n        className = _a.className,\n        color = _a.color,\n        htmlTitle = _a.htmlTitle,\n        _b = _a.iconSize,\n        iconSize = _b === void 0 ? Icon_1.SIZE_STANDARD : _b,\n        intent = _a.intent,\n        _c = _a.title,\n        title = _c === void 0 ? icon : _c,\n        _d = _a.tagName,\n        tagName = _d === void 0 ? \"span\" : _d,\n        htmlprops = tslib_1.__rest(_a, [\"className\", \"color\", \"htmlTitle\", \"iconSize\", \"intent\", \"title\", \"tagName\"]); // choose which pixel grid is most appropriate for given icon size\n\n\n    var pixelGridSize = iconSize >= Icon_1.SIZE_LARGE ? Icon_1.SIZE_LARGE : Icon_1.SIZE_STANDARD; // render path elements, or nothing if icon name is unknown.\n\n    var paths = this.renderSvgPaths(pixelGridSize, icon);\n    var classes = classNames(Classes.ICON, Classes.iconClass(icon), Classes.intentClass(intent), className);\n    var viewBox = \"0 0 \" + pixelGridSize + \" \" + pixelGridSize;\n    return React.createElement(tagName, tslib_1.__assign({}, htmlprops, {\n      className: classes,\n      title: htmlTitle\n    }), React.createElement(\"svg\", {\n      fill: color,\n      \"data-icon\": icon,\n      width: iconSize,\n      height: iconSize,\n      viewBox: viewBox\n    }, title && React.createElement(\"desc\", null, title), paths));\n  };\n  /** Render `<path>` elements for the given icon name. Returns `null` if name is unknown. */\n\n\n  Icon.prototype.renderSvgPaths = function (pathsSize, iconName) {\n    var svgPathsRecord = pathsSize === Icon_1.SIZE_STANDARD ? IconSvgPaths16 : IconSvgPaths20;\n    var pathStrings = svgPathsRecord[iconName];\n\n    if (pathStrings == null) {\n      return null;\n    }\n\n    return pathStrings.map(function (d, i) {\n      return React.createElement(\"path\", {\n        key: i,\n        d: d,\n        fillRule: \"evenodd\"\n      });\n    });\n  };\n\n  var Icon_1;\n  Icon.displayName = DISPLAYNAME_PREFIX + \".Icon\";\n  Icon.SIZE_STANDARD = 16;\n  Icon.SIZE_LARGE = 20;\n  Icon = Icon_1 = tslib_1.__decorate([polyfill], Icon);\n  return Icon;\n}(AbstractPureComponent2);\n\nexport { Icon };","/*\n * Copyright 2016 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport * as Classes from \"../../common/classes\";\nimport { Icon } from \"../icon/icon\";\nexport var Breadcrumb = function Breadcrumb(breadcrumbProps) {\n  var _a;\n\n  var classes = classNames(Classes.BREADCRUMB, (_a = {}, _a[Classes.BREADCRUMB_CURRENT] = breadcrumbProps.current, _a[Classes.DISABLED] = breadcrumbProps.disabled, _a), breadcrumbProps.className);\n  var icon = breadcrumbProps.icon != null ? React.createElement(Icon, {\n    icon: breadcrumbProps.icon\n  }) : undefined;\n\n  if (breadcrumbProps.href == null && breadcrumbProps.onClick == null) {\n    return React.createElement(\"span\", {\n      className: classes\n    }, icon, breadcrumbProps.text, breadcrumbProps.children);\n  }\n\n  return React.createElement(\"a\", {\n    className: classes,\n    href: breadcrumbProps.href,\n    onClick: breadcrumbProps.disabled ? null : breadcrumbProps.onClick,\n    tabIndex: breadcrumbProps.disabled ? null : 0,\n    target: breadcrumbProps.target\n  }, icon, breadcrumbProps.text, breadcrumbProps.children);\n};","/*\n * Copyright 2015 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport * as Classes from \"../../common/classes\";\nimport * as Errors from \"../../common/errors\";\nimport { DISPLAYNAME_PREFIX } from \"../../common/props\";\nimport { isFunction } from \"../../common/utils\";\n/** Detect if `React.createPortal()` API method does not exist. */\n\nvar cannotCreatePortal = !isFunction(ReactDOM.createPortal);\nvar REACT_CONTEXT_TYPES = {\n  blueprintPortalClassName: function blueprintPortalClassName(obj, key) {\n    if (obj[key] != null && typeof obj[key] !== \"string\") {\n      return new Error(Errors.PORTAL_CONTEXT_CLASS_NAME_STRING);\n    }\n\n    return undefined;\n  }\n};\n/**\n * This component detaches its contents and re-attaches them to document.body.\n * Use it when you need to circumvent DOM z-stacking (for dialogs, popovers, etc.).\n * Any class names passed to this element will be propagated to the new container element on document.body.\n */\n\nvar Portal =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(Portal, _super);\n\n  function Portal() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      hasMounted: false\n    };\n    return _this;\n  }\n\n  Portal.prototype.render = function () {\n    // Only render `children` once this component has mounted in a browser environment, so they are\n    // immediately attached to the DOM tree and can do DOM things like measuring or `autoFocus`.\n    // See long comment on componentDidMount in https://reactjs.org/docs/portals.html#event-bubbling-through-portals\n    if (cannotCreatePortal || typeof document === \"undefined\" || !this.state.hasMounted) {\n      return null;\n    } else {\n      return ReactDOM.createPortal(this.props.children, this.portalElement);\n    }\n  };\n\n  Portal.prototype.componentDidMount = function () {\n    if (!this.props.container) {\n      return;\n    }\n\n    this.portalElement = this.createContainerElement();\n    this.props.container.appendChild(this.portalElement);\n    this.setState({\n      hasMounted: true\n    }, this.props.onChildrenMount);\n\n    if (cannotCreatePortal) {\n      this.unstableRenderNoPortal();\n    }\n  };\n\n  Portal.prototype.componentDidUpdate = function (prevProps) {\n    // update className prop on portal DOM element\n    if (this.portalElement != null && prevProps.className !== this.props.className) {\n      this.portalElement.classList.remove(prevProps.className);\n      maybeAddClass(this.portalElement.classList, this.props.className);\n    }\n\n    if (cannotCreatePortal) {\n      this.unstableRenderNoPortal();\n    }\n  };\n\n  Portal.prototype.componentWillUnmount = function () {\n    if (this.portalElement != null) {\n      if (cannotCreatePortal) {\n        ReactDOM.unmountComponentAtNode(this.portalElement);\n      }\n\n      this.portalElement.remove();\n    }\n  };\n\n  Portal.prototype.createContainerElement = function () {\n    var container = document.createElement(\"div\");\n    container.classList.add(Classes.PORTAL);\n    maybeAddClass(container.classList, this.props.className);\n\n    if (this.context != null) {\n      maybeAddClass(container.classList, this.context.blueprintPortalClassName);\n    }\n\n    return container;\n  };\n\n  Portal.prototype.unstableRenderNoPortal = function () {\n    ReactDOM.unstable_renderSubtreeIntoContainer(\n    /* parentComponent */\n    this, React.createElement(\"div\", null, this.props.children), this.portalElement);\n  };\n\n  Portal.displayName = DISPLAYNAME_PREFIX + \".Portal\";\n  Portal.contextTypes = REACT_CONTEXT_TYPES;\n  Portal.defaultProps = {\n    container: typeof document !== \"undefined\" ? document.body : null\n  };\n  return Portal;\n}(React.Component);\n\nexport { Portal };\n\nfunction maybeAddClass(classList, className) {\n  if (className != null && className !== \"\") {\n    classList.add.apply(classList, className.split(\" \"));\n  }\n}","/*\n * Copyright 2015 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\";\nimport { findDOMNode } from \"react-dom\";\nimport { AbstractPureComponent2, Classes, Keys } from \"../../common\";\nimport { DISPLAYNAME_PREFIX } from \"../../common/props\";\nimport { safeInvoke } from \"../../common/utils\";\nimport { Portal } from \"../portal/portal\";\n\nvar Overlay =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(Overlay, _super);\n\n  function Overlay(props, context) {\n    var _this = _super.call(this, props, context) || this;\n\n    _this.refHandlers = {\n      container: function container(ref) {\n        return _this.containerElement = findDOMNode(ref);\n      }\n    };\n\n    _this.maybeRenderChild = function (child) {\n      if (child == null) {\n        return null;\n      } // add a special class to each child element that will automatically set the appropriate\n      // CSS position mode under the hood. also, make the container focusable so we can\n      // trap focus inside it (via `enforceFocus`).\n\n\n      var decoratedChild = typeof child === \"object\" ? React.cloneElement(child, {\n        className: classNames(child.props.className, Classes.OVERLAY_CONTENT),\n        tabIndex: 0\n      }) : React.createElement(\"span\", {\n        className: Classes.OVERLAY_CONTENT\n      }, child);\n      var _a = _this.props,\n          onOpening = _a.onOpening,\n          onOpened = _a.onOpened,\n          onClosing = _a.onClosing,\n          onClosed = _a.onClosed,\n          transitionDuration = _a.transitionDuration,\n          transitionName = _a.transitionName;\n      return React.createElement(CSSTransition, {\n        classNames: transitionName,\n        onEntering: onOpening,\n        onEntered: onOpened,\n        onExiting: onClosing,\n        onExited: onClosed,\n        timeout: transitionDuration\n      }, decoratedChild);\n    };\n\n    _this.handleBackdropMouseDown = function (e) {\n      var _a = _this.props,\n          backdropProps = _a.backdropProps,\n          canOutsideClickClose = _a.canOutsideClickClose,\n          enforceFocus = _a.enforceFocus,\n          onClose = _a.onClose;\n\n      if (canOutsideClickClose) {\n        safeInvoke(onClose, e);\n      }\n\n      if (enforceFocus) {\n        // make sure document.activeElement is updated before bringing the focus back\n        _this.bringFocusInsideOverlay();\n      }\n\n      safeInvoke(backdropProps.onMouseDown, e);\n    };\n\n    _this.handleDocumentClick = function (e) {\n      var _a = _this.props,\n          canOutsideClickClose = _a.canOutsideClickClose,\n          isOpen = _a.isOpen,\n          onClose = _a.onClose;\n      var eventTarget = e.target;\n      var stackIndex = Overlay_1.openStack.indexOf(_this);\n      var isClickInThisOverlayOrDescendant = Overlay_1.openStack.slice(stackIndex).some(function (_a) {\n        var elem = _a.containerElement; // `elem` is the container of backdrop & content, so clicking on that container\n        // should not count as being \"inside\" the overlay.\n\n        return elem && elem.contains(eventTarget) && !elem.isSameNode(eventTarget);\n      });\n\n      if (isOpen && canOutsideClickClose && !isClickInThisOverlayOrDescendant) {\n        // casting to any because this is a native event\n        safeInvoke(onClose, e);\n      }\n    };\n\n    _this.handleDocumentFocus = function (e) {\n      if (_this.props.enforceFocus && _this.containerElement != null && !_this.containerElement.contains(e.target)) {\n        // prevent default focus behavior (sometimes auto-scrolls the page)\n        e.preventDefault();\n        e.stopImmediatePropagation();\n\n        _this.bringFocusInsideOverlay();\n      }\n    };\n\n    _this.handleKeyDown = function (e) {\n      var _a = _this.props,\n          canEscapeKeyClose = _a.canEscapeKeyClose,\n          onClose = _a.onClose;\n\n      if (e.which === Keys.ESCAPE && canEscapeKeyClose) {\n        safeInvoke(onClose, e); // prevent browser-specific escape key behavior (Safari exits fullscreen)\n\n        e.preventDefault();\n      }\n    };\n\n    _this.state = {\n      hasEverOpened: props.isOpen\n    };\n    return _this;\n  }\n\n  Overlay_1 = Overlay;\n\n  Overlay.getDerivedStateFromProps = function (_a) {\n    var hasEverOpened = _a.isOpen;\n\n    if (hasEverOpened) {\n      return {\n        hasEverOpened: hasEverOpened\n      };\n    }\n\n    return null;\n  };\n\n  Overlay.prototype.render = function () {\n    var _a; // oh snap! no reason to render anything at all if we're being truly lazy\n\n\n    if (this.props.lazy && !this.state.hasEverOpened) {\n      return null;\n    }\n\n    var _b = this.props,\n        children = _b.children,\n        className = _b.className,\n        usePortal = _b.usePortal,\n        isOpen = _b.isOpen; // TransitionGroup types require single array of children; does not support nested arrays.\n    // So we must collapse backdrop and children into one array, and every item must be wrapped in a\n    // Transition element (no ReactText allowed).\n\n    var childrenWithTransitions = isOpen ? React.Children.map(children, this.maybeRenderChild) : [];\n    childrenWithTransitions.unshift(this.maybeRenderBackdrop());\n    var containerClasses = classNames(Classes.OVERLAY, (_a = {}, _a[Classes.OVERLAY_OPEN] = isOpen, _a[Classes.OVERLAY_INLINE] = !usePortal, _a), className);\n    var transitionGroup = React.createElement(TransitionGroup, {\n      appear: true,\n      className: containerClasses,\n      component: \"div\",\n      onKeyDown: this.handleKeyDown,\n      ref: this.refHandlers.container\n    }, childrenWithTransitions);\n\n    if (usePortal) {\n      return React.createElement(Portal, {\n        className: this.props.portalClassName,\n        container: this.props.portalContainer\n      }, transitionGroup);\n    } else {\n      return transitionGroup;\n    }\n  };\n\n  Overlay.prototype.componentDidMount = function () {\n    if (this.props.isOpen) {\n      this.overlayWillOpen();\n    }\n  };\n\n  Overlay.prototype.componentDidUpdate = function (prevProps) {\n    if (prevProps.isOpen && !this.props.isOpen) {\n      this.overlayWillClose();\n    } else if (!prevProps.isOpen && this.props.isOpen) {\n      this.overlayWillOpen();\n    }\n  };\n\n  Overlay.prototype.componentWillUnmount = function () {\n    this.overlayWillClose();\n  };\n  /**\n   * @public for testing\n   * @internal\n   */\n\n\n  Overlay.prototype.bringFocusInsideOverlay = function () {\n    var _this = this; // always delay focus manipulation to just before repaint to prevent scroll jumping\n\n\n    return requestAnimationFrame(function () {\n      // container ref may be undefined between component mounting and Portal rendering\n      // activeElement may be undefined in some rare cases in IE\n      if (_this.containerElement == null || document.activeElement == null || !_this.props.isOpen) {\n        return;\n      }\n\n      var isFocusOutsideModal = !_this.containerElement.contains(document.activeElement);\n\n      if (isFocusOutsideModal) {\n        // element marked autofocus has higher priority than the other clowns\n        var autofocusElement = _this.containerElement.querySelector(\"[autofocus]\");\n\n        var wrapperElement = _this.containerElement.querySelector(\"[tabindex]\");\n\n        if (autofocusElement != null) {\n          autofocusElement.focus();\n        } else if (wrapperElement != null) {\n          wrapperElement.focus();\n        }\n      }\n    });\n  };\n\n  Overlay.prototype.maybeRenderBackdrop = function () {\n    var _a = this.props,\n        backdropClassName = _a.backdropClassName,\n        backdropProps = _a.backdropProps,\n        hasBackdrop = _a.hasBackdrop,\n        isOpen = _a.isOpen,\n        transitionDuration = _a.transitionDuration,\n        transitionName = _a.transitionName;\n\n    if (hasBackdrop && isOpen) {\n      return React.createElement(CSSTransition, {\n        classNames: transitionName,\n        key: \"__backdrop\",\n        timeout: transitionDuration\n      }, React.createElement(\"div\", tslib_1.__assign({}, backdropProps, {\n        className: classNames(Classes.OVERLAY_BACKDROP, backdropClassName, backdropProps.className),\n        onMouseDown: this.handleBackdropMouseDown,\n        tabIndex: this.props.canOutsideClickClose ? 0 : null\n      })));\n    } else {\n      return null;\n    }\n  };\n\n  Overlay.prototype.overlayWillClose = function () {\n    document.removeEventListener(\"focus\", this.handleDocumentFocus,\n    /* useCapture */\n    true);\n    document.removeEventListener(\"mousedown\", this.handleDocumentClick);\n    var openStack = Overlay_1.openStack;\n    var stackIndex = openStack.indexOf(this);\n\n    if (stackIndex !== -1) {\n      openStack.splice(stackIndex, 1);\n\n      if (openStack.length > 0) {\n        var lastOpenedOverlay = Overlay_1.getLastOpened();\n\n        if (lastOpenedOverlay.props.enforceFocus) {\n          document.addEventListener(\"focus\", lastOpenedOverlay.handleDocumentFocus,\n          /* useCapture */\n          true);\n        }\n      }\n\n      if (openStack.filter(function (o) {\n        return o.props.usePortal && o.props.hasBackdrop;\n      }).length === 0) {\n        document.body.classList.remove(Classes.OVERLAY_OPEN);\n      }\n    }\n  };\n\n  Overlay.prototype.overlayWillOpen = function () {\n    var openStack = Overlay_1.openStack;\n\n    if (openStack.length > 0) {\n      document.removeEventListener(\"focus\", Overlay_1.getLastOpened().handleDocumentFocus,\n      /* useCapture */\n      true);\n    }\n\n    openStack.push(this);\n\n    if (this.props.autoFocus) {\n      this.bringFocusInsideOverlay();\n    }\n\n    if (this.props.enforceFocus) {\n      document.addEventListener(\"focus\", this.handleDocumentFocus,\n      /* useCapture */\n      true);\n    }\n\n    if (this.props.canOutsideClickClose && !this.props.hasBackdrop) {\n      document.addEventListener(\"mousedown\", this.handleDocumentClick);\n    }\n\n    if (this.props.hasBackdrop && this.props.usePortal) {\n      // add a class to the body to prevent scrolling of content below the overlay\n      document.body.classList.add(Classes.OVERLAY_OPEN);\n    }\n  };\n\n  var Overlay_1;\n  Overlay.displayName = DISPLAYNAME_PREFIX + \".Overlay\";\n  Overlay.defaultProps = {\n    autoFocus: true,\n    backdropProps: {},\n    canEscapeKeyClose: true,\n    canOutsideClickClose: true,\n    enforceFocus: true,\n    hasBackdrop: true,\n    isOpen: false,\n    lazy: true,\n    transitionDuration: 300,\n    transitionName: Classes.OVERLAY,\n    usePortal: true\n  };\n  Overlay.openStack = [];\n\n  Overlay.getLastOpened = function () {\n    return Overlay_1.openStack[Overlay_1.openStack.length - 1];\n  };\n\n  Overlay = Overlay_1 = tslib_1.__decorate([polyfill], Overlay);\n  return Overlay;\n}(AbstractPureComponent2);\n\nexport { Overlay };","/*\n * Copyright 2018 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport * as React from \"react\";\nimport { findDOMNode } from \"react-dom\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport ResizeObserver from \"resize-observer-polyfill\";\nimport { AbstractPureComponent2 } from \"../../common\";\nimport { DISPLAYNAME_PREFIX } from \"../../common/props\";\nimport { safeInvoke } from \"../../common/utils\";\n\nvar ResizeSensor =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(ResizeSensor, _super);\n\n  function ResizeSensor() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.element = null;\n    _this.observer = new ResizeObserver(function (entries) {\n      return safeInvoke(_this.props.onResize, entries);\n    });\n    return _this;\n  }\n\n  ResizeSensor.prototype.render = function () {\n    // pass-through render of single child\n    return React.Children.only(this.props.children);\n  };\n\n  ResizeSensor.prototype.componentDidMount = function () {\n    this.observeElement();\n  };\n\n  ResizeSensor.prototype.componentDidUpdate = function (prevProps) {\n    this.observeElement(this.props.observeParents !== prevProps.observeParents);\n  };\n\n  ResizeSensor.prototype.componentWillUnmount = function () {\n    this.observer.disconnect();\n  };\n  /**\n   * Observe the DOM element, if defined and different from the currently\n   * observed element. Pass `force` argument to skip element checks and always\n   * re-observe.\n   */\n\n\n  ResizeSensor.prototype.observeElement = function (force) {\n    if (force === void 0) {\n      force = false;\n    }\n\n    var element = this.getElement();\n\n    if (!(element instanceof Element)) {\n      // stop everything if not defined\n      this.observer.disconnect();\n      return;\n    }\n\n    if (element === this.element && !force) {\n      // quit if given same element -- nothing to update (unless forced)\n      return;\n    } else {\n      // clear observer list if new element\n      this.observer.disconnect(); // remember element reference for next time\n\n      this.element = element;\n    } // observer callback is invoked immediately when observing new elements\n\n\n    this.observer.observe(element);\n\n    if (this.props.observeParents) {\n      var parent_1 = element.parentElement;\n\n      while (parent_1 != null) {\n        this.observer.observe(parent_1);\n        parent_1 = parent_1.parentElement;\n      }\n    }\n  };\n\n  ResizeSensor.prototype.getElement = function () {\n    try {\n      // using findDOMNode for two reasons:\n      // 1. cloning to insert a ref is unwieldy and not performant.\n      // 2. ensure that we resolve to an actual DOM node (instead of any JSX ref instance).\n      return findDOMNode(this);\n    } catch (_a) {\n      // swallow error if findDOMNode is run on unmounted component.\n      return null;\n    }\n  };\n\n  ResizeSensor.displayName = DISPLAYNAME_PREFIX + \".ResizeSensor\";\n  ResizeSensor = tslib_1.__decorate([polyfill], ResizeSensor);\n  return ResizeSensor;\n}(AbstractPureComponent2);\n\nexport { ResizeSensor };","/*\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// Popper placement utils\n// ======================\n\n/** Converts a full placement to one of the four positions by stripping text after the `-`. */\nexport function getPosition(placement) {\n  return placement.split(\"-\")[0];\n}\n/** Returns true if position is left or right. */\n\nexport function isVerticalPosition(side) {\n  return [\"left\", \"right\"].indexOf(side) !== -1;\n}\n/** Returns the opposite position. */\n\nexport function getOppositePosition(side) {\n  switch (side) {\n    case \"top\":\n      return \"bottom\";\n\n    case \"left\":\n      return \"right\";\n\n    case \"bottom\":\n      return \"top\";\n\n    default:\n      return \"left\";\n  }\n}\n/** Returns the CSS alignment keyword corresponding to given placement. */\n\nexport function getAlignment(placement) {\n  var align = placement.split(\"-\")[1];\n\n  switch (align) {\n    case \"start\":\n      return \"left\";\n\n    case \"end\":\n      return \"right\";\n\n    default:\n      return \"center\";\n  }\n} // Popper modifiers\n// ================\n\n/** Modifier helper function to compute popper transform-origin based on arrow position */\n\nexport function getTransformOrigin(data) {\n  var position = getPosition(data.placement);\n\n  if (data.arrowElement == null) {\n    return isVerticalPosition(position) ? getOppositePosition(position) + \" \" + getAlignment(position) : getAlignment(position) + \" \" + getOppositePosition(position);\n  } else {\n    var arrowSizeShift = data.arrowElement.clientHeight / 2;\n    var arrow = data.offsets.arrow; // can use keyword for dimension without the arrow, to ease computation burden.\n    // move origin by half arrow's height to keep it centered.\n\n    return isVerticalPosition(position) ? getOppositePosition(position) + \" \" + (arrow.top + arrowSizeShift) + \"px\" : arrow.left + arrowSizeShift + \"px \" + getOppositePosition(position);\n  }\n} // additional space between arrow and edge of target\n\nvar ARROW_SPACING = 4;\n/** Popper modifier that offsets popper and arrow so arrow points out of the correct side */\n\nexport var arrowOffsetModifier = function arrowOffsetModifier(data) {\n  if (data.arrowElement == null) {\n    return data;\n  } // our arrows have equal width and height\n\n\n  var arrowSize = data.arrowElement.clientWidth; // this logic borrowed from original Popper arrow modifier itself\n\n  var position = getPosition(data.placement);\n  var isVertical = isVerticalPosition(position);\n  var len = isVertical ? \"width\" : \"height\";\n  var offsetSide = isVertical ? \"left\" : \"top\";\n  var arrowOffsetSize = Math.round(arrowSize / 2 / Math.sqrt(2)); // offset popover by arrow size, offset arrow in the opposite direction\n\n  if (position === \"top\" || position === \"left\") {\n    // the \"up & back\" directions require negative popper offsets\n    data.offsets.popper[offsetSide] -= arrowOffsetSize + ARROW_SPACING; // can only use left/top on arrow so gotta get clever with 100% + X\n\n    data.offsets.arrow[offsetSide] = data.offsets.popper[len] - arrowSize + arrowOffsetSize;\n  } else {\n    data.offsets.popper[offsetSide] += arrowOffsetSize + ARROW_SPACING;\n    data.offsets.arrow[offsetSide] = -arrowOffsetSize;\n  }\n\n  return data;\n};","/*\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as React from \"react\";\nimport * as Classes from \"../../common/classes\";\nimport { DISPLAYNAME_PREFIX } from \"../../common/props\";\nimport { getPosition } from \"./popperUtils\"; // these paths come from the Core Kit Sketch file\n// https://github.com/palantir/blueprint/blob/develop/resources/sketch/Core%20Kit.sketch\n\nvar SVG_SHADOW_PATH = \"M8.11 6.302c1.015-.936 1.887-2.922 1.887-4.297v26c0-1.378\" + \"-.868-3.357-1.888-4.297L.925 17.09c-1.237-1.14-1.233-3.034 0-4.17L8.11 6.302z\";\nvar SVG_ARROW_PATH = \"M8.787 7.036c1.22-1.125 2.21-3.376 2.21-5.03V0v30-2.005\" + \"c0-1.654-.983-3.9-2.21-5.03l-7.183-6.616c-.81-.746-.802-1.96 0-2.7l7.183-6.614z\";\n/** Modifier helper function to compute arrow rotate() transform */\n\nfunction getArrowAngle(placement) {\n  if (placement == null) {\n    return 0;\n  } // can only be top/left/bottom/right - auto is resolved internally\n\n\n  switch (getPosition(placement)) {\n    case \"top\":\n      return -90;\n\n    case \"left\":\n      return 180;\n\n    case \"bottom\":\n      return 90;\n\n    default:\n      return 0;\n  }\n}\n\nexport var PopoverArrow = function PopoverArrow(_a) {\n  var _b = _a.arrowProps,\n      ref = _b.ref,\n      style = _b.style,\n      placement = _a.placement;\n  return React.createElement(\"div\", {\n    className: Classes.POPOVER_ARROW,\n    ref: ref,\n    style: isNaN(+style.left) ? {} : style\n  }, React.createElement(\"svg\", {\n    viewBox: \"0 0 30 30\",\n    style: {\n      transform: \"rotate(\" + getArrowAngle(placement) + \"deg)\"\n    }\n  }, React.createElement(\"path\", {\n    className: Classes.POPOVER_ARROW + \"-border\",\n    d: SVG_SHADOW_PATH\n  }), React.createElement(\"path\", {\n    className: Classes.POPOVER_ARROW + \"-fill\",\n    d: SVG_ARROW_PATH\n  })));\n};\nPopoverArrow.displayName = DISPLAYNAME_PREFIX + \".PopoverArrow\";","/*\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Position } from \"../../common/position\";\n/**\n * Convert a position to a placement.\n * @param position the position to convert\n */\n\nexport function positionToPlacement(position) {\n  /* istanbul ignore next */\n  switch (position) {\n    case Position.TOP_LEFT:\n      return \"top-start\";\n\n    case Position.TOP:\n      return \"top\";\n\n    case Position.TOP_RIGHT:\n      return \"top-end\";\n\n    case Position.RIGHT_TOP:\n      return \"right-start\";\n\n    case Position.RIGHT:\n      return \"right\";\n\n    case Position.RIGHT_BOTTOM:\n      return \"right-end\";\n\n    case Position.BOTTOM_RIGHT:\n      return \"bottom-end\";\n\n    case Position.BOTTOM:\n      return \"bottom\";\n\n    case Position.BOTTOM_LEFT:\n      return \"bottom-start\";\n\n    case Position.LEFT_BOTTOM:\n      return \"left-end\";\n\n    case Position.LEFT:\n      return \"left\";\n\n    case Position.LEFT_TOP:\n      return \"left-start\";\n\n    case \"auto\":\n    case \"auto-start\":\n    case \"auto-end\":\n      // Return the string unchanged.\n      return position;\n\n    default:\n      return assertNever(position);\n  }\n}\n/* istanbul ignore next */\n\nfunction assertNever(x) {\n  throw new Error(\"Unexpected position: \" + x);\n}","/*\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { Manager, Popper, Reference } from \"react-popper\";\nimport { AbstractPureComponent2, Classes } from \"../../common\";\nimport * as Errors from \"../../common/errors\";\nimport { DISPLAYNAME_PREFIX } from \"../../common/props\";\nimport * as Utils from \"../../common/utils\";\nimport { Overlay } from \"../overlay/overlay\";\nimport { ResizeSensor } from \"../resize-sensor/resizeSensor\";\nimport { Tooltip } from \"../tooltip/tooltip\";\nimport { PopoverArrow } from \"./popoverArrow\";\nimport { positionToPlacement } from \"./popoverMigrationUtils\";\nimport { arrowOffsetModifier, getTransformOrigin } from \"./popperUtils\";\nexport var PopoverInteractionKind = {\n  CLICK: \"click\",\n  CLICK_TARGET_ONLY: \"click-target\",\n  HOVER: \"hover\",\n  HOVER_TARGET_ONLY: \"hover-target\"\n};\n\nvar Popover =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(Popover, _super);\n\n  function Popover() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      hasDarkParent: false,\n      isOpen: _this.getIsOpen(_this.props),\n      transformOrigin: \"\"\n    }; // a flag that lets us detect mouse movement between the target and popover,\n    // now that mouseleave is triggered when you cross the gap between the two.\n\n    _this.isMouseInTargetOrPopover = false; // a flag that indicates whether the target previously lost focus to another\n    // element on the same page.\n\n    _this.lostFocusOnSamePage = true;\n    _this.refHandlers = {\n      popover: function popover(ref) {\n        _this.popoverElement = ref;\n        Utils.safeInvoke(_this.props.popoverRef, ref);\n      },\n      target: function target(ref) {\n        return _this.targetElement = ref;\n      }\n    };\n    /**\n     * Instance method to instruct the `Popover` to recompute its position.\n     *\n     * This method should only be used if you are updating the target in a way\n     * that does not cause it to re-render, such as changing its _position_\n     * without changing its _size_ (since `Popover` already repositions when it\n     * detects a resize).\n     */\n\n    _this.reposition = function () {\n      return Utils.safeInvoke(_this.popperScheduleUpdate);\n    };\n\n    _this.renderPopover = function (popperProps) {\n      var _a;\n\n      var _b = _this.props,\n          usePortal = _b.usePortal,\n          interactionKind = _b.interactionKind;\n      var transformOrigin = _this.state.transformOrigin; // Need to update our reference to this on every render as it will change.\n\n      _this.popperScheduleUpdate = popperProps.scheduleUpdate;\n      var popoverHandlers = {\n        // always check popover clicks for dismiss class\n        onClick: _this.handlePopoverClick\n      };\n\n      if (interactionKind === PopoverInteractionKind.HOVER || !usePortal && interactionKind === PopoverInteractionKind.HOVER_TARGET_ONLY) {\n        popoverHandlers.onMouseEnter = _this.handleMouseEnter;\n        popoverHandlers.onMouseLeave = _this.handleMouseLeave;\n      }\n\n      var popoverClasses = classNames(Classes.POPOVER, (_a = {}, _a[Classes.DARK] = _this.props.inheritDarkTheme && _this.state.hasDarkParent, _a[Classes.MINIMAL] = _this.props.minimal, _a), _this.props.popoverClassName);\n      return React.createElement(\"div\", {\n        className: Classes.TRANSITION_CONTAINER,\n        ref: popperProps.ref,\n        style: popperProps.style\n      }, React.createElement(ResizeSensor, {\n        onResize: _this.reposition\n      }, React.createElement(\"div\", tslib_1.__assign({\n        className: popoverClasses,\n        style: {\n          transformOrigin: transformOrigin\n        }\n      }, popoverHandlers), _this.isArrowEnabled() && React.createElement(PopoverArrow, {\n        arrowProps: popperProps.arrowProps,\n        placement: popperProps.placement\n      }), React.createElement(\"div\", {\n        className: Classes.POPOVER_CONTENT\n      }, _this.understandChildren().content))));\n    };\n\n    _this.renderTarget = function (referenceProps) {\n      var _a, _b;\n\n      var _c = _this.props,\n          fill = _c.fill,\n          openOnTargetFocus = _c.openOnTargetFocus,\n          targetClassName = _c.targetClassName,\n          _d = _c.targetProps,\n          targetProps = _d === void 0 ? {} : _d;\n      var isOpen = _this.state.isOpen;\n\n      var isControlled = _this.isControlled();\n\n      var isHoverInteractionKind = _this.isHoverInteractionKind();\n\n      var targetTagName = _this.props.targetTagName;\n\n      if (fill) {\n        targetTagName = \"div\";\n      }\n\n      var finalTargetProps = isHoverInteractionKind ? {\n        // HOVER handlers\n        onBlur: _this.handleTargetBlur,\n        onFocus: _this.handleTargetFocus,\n        onMouseEnter: _this.handleMouseEnter,\n        onMouseLeave: _this.handleMouseLeave\n      } : {\n        // CLICK needs only one handler\n        onClick: _this.handleTargetClick\n      };\n      finalTargetProps.className = classNames(Classes.POPOVER_TARGET, (_a = {}, _a[Classes.POPOVER_OPEN] = isOpen, _a), targetProps.className, targetClassName);\n      finalTargetProps.ref = referenceProps.ref;\n      var rawTarget = Utils.ensureElement(_this.understandChildren().target);\n      var rawTabIndex = rawTarget.props.tabIndex; // ensure target is focusable if relevant prop enabled\n\n      var tabIndex = rawTabIndex == null && openOnTargetFocus && isHoverInteractionKind ? 0 : rawTabIndex;\n      var clonedTarget = React.cloneElement(rawTarget, {\n        className: classNames(rawTarget.props.className, (_b = {}, // this class is mainly useful for button targets; we should only apply it for uncontrolled popovers\n        // when they are opened by a user interaction\n        _b[Classes.ACTIVE] = isOpen && !isControlled && !isHoverInteractionKind, _b)),\n        // force disable single Tooltip child when popover is open (BLUEPRINT-552)\n        disabled: isOpen && Utils.isElementOfType(rawTarget, Tooltip) ? true : rawTarget.props.disabled,\n        tabIndex: tabIndex\n      });\n      var target = React.createElement(targetTagName, tslib_1.__assign({}, targetProps, finalTargetProps), clonedTarget);\n      return React.createElement(ResizeSensor, {\n        onResize: _this.reposition\n      }, target);\n    };\n\n    _this.isControlled = function () {\n      return _this.props.isOpen !== undefined;\n    };\n\n    _this.handleTargetFocus = function (e) {\n      if (_this.props.openOnTargetFocus && _this.isHoverInteractionKind()) {\n        if (e.relatedTarget == null && !_this.lostFocusOnSamePage) {\n          // ignore this focus event -- the target was already focused but the page itself\n          // lost focus (e.g. due to switching tabs).\n          return;\n        }\n\n        _this.handleMouseEnter(e);\n      }\n\n      Utils.safeInvokeMember(_this.props.targetProps, \"onFocus\", e);\n    };\n\n    _this.handleTargetBlur = function (e) {\n      if (_this.props.openOnTargetFocus && _this.isHoverInteractionKind()) {\n        // if the next element to receive focus is within the popover, we'll want to leave the\n        // popover open. e.relatedTarget ought to tell us the next element to receive focus, but if the user just\n        // clicked on an element which is not focusable (either by default or with a tabIndex attribute),\n        // it won't be set. So, we filter those out here and assume that a click handler somewhere else will\n        // close the popover if necessary.\n        if (e.relatedTarget != null && !_this.isElementInPopover(e.relatedTarget)) {\n          _this.handleMouseLeave(e);\n        }\n      }\n\n      _this.lostFocusOnSamePage = e.relatedTarget != null;\n      Utils.safeInvokeMember(_this.props.targetProps, \"onBlur\", e);\n    };\n\n    _this.handleMouseEnter = function (e) {\n      _this.isMouseInTargetOrPopover = true; // if we're entering the popover, and the mode is set to be HOVER_TARGET_ONLY, we want to manually\n      // trigger the mouse leave event, as hovering over the popover shouldn't count.\n\n      if (!_this.props.usePortal && _this.isElementInPopover(e.target) && _this.props.interactionKind === PopoverInteractionKind.HOVER_TARGET_ONLY && !_this.props.openOnTargetFocus) {\n        _this.handleMouseLeave(e);\n      } else if (!_this.props.disabled) {\n        // only begin opening popover when it is enabled\n        _this.setOpenState(true, e, _this.props.hoverOpenDelay);\n      }\n\n      Utils.safeInvokeMember(_this.props.targetProps, \"onMouseEnter\", e);\n    };\n\n    _this.handleMouseLeave = function (e) {\n      _this.isMouseInTargetOrPopover = false; // wait until the event queue is flushed, because we want to leave the\n      // popover open if the mouse entered the popover immediately after\n      // leaving the target (or vice versa).\n\n      _this.setTimeout(function () {\n        if (_this.isMouseInTargetOrPopover) {\n          return;\n        } // user-configurable closing delay is helpful when moving mouse from target to popover\n\n\n        _this.setOpenState(false, e, _this.props.hoverCloseDelay);\n      });\n\n      Utils.safeInvokeMember(_this.props.targetProps, \"onMouseLeave\", e);\n    };\n\n    _this.handlePopoverClick = function (e) {\n      var eventTarget = e.target; // an OVERRIDE inside a DISMISS does not dismiss, and a DISMISS inside an OVERRIDE will dismiss.\n\n      var dismissElement = eventTarget.closest(\".\" + Classes.POPOVER_DISMISS + \", .\" + Classes.POPOVER_DISMISS_OVERRIDE);\n      var shouldDismiss = dismissElement != null && dismissElement.classList.contains(Classes.POPOVER_DISMISS);\n      var isDisabled = eventTarget.closest(\":disabled, .\" + Classes.DISABLED) != null;\n\n      if (shouldDismiss && !isDisabled && !e.isDefaultPrevented()) {\n        _this.setOpenState(false, e);\n\n        if (_this.props.captureDismiss) {\n          e.preventDefault();\n        }\n      }\n    };\n\n    _this.handleOverlayClose = function (e) {\n      var eventTarget = e.target; // if click was in target, target event listener will handle things, so don't close\n\n      if (!Utils.elementIsOrContains(_this.targetElement, eventTarget) || e.nativeEvent instanceof KeyboardEvent) {\n        _this.setOpenState(false, e);\n      }\n    };\n\n    _this.handleTargetClick = function (e) {\n      // ensure click did not originate from within inline popover before closing\n      if (!_this.props.disabled && !_this.isElementInPopover(e.target)) {\n        if (_this.props.isOpen == null) {\n          _this.setState(function (prevState) {\n            return {\n              isOpen: !prevState.isOpen\n            };\n          });\n        } else {\n          _this.setOpenState(!_this.props.isOpen, e);\n        }\n      }\n\n      Utils.safeInvokeMember(_this.props.targetProps, \"onClick\", e);\n    };\n    /** Popper modifier that updates React state (for style properties) based on latest data. */\n\n\n    _this.updatePopoverState = function (data) {\n      // always set string; let shouldComponentUpdate determine if update is necessary\n      _this.setState({\n        transformOrigin: getTransformOrigin(data)\n      });\n\n      return data;\n    };\n\n    return _this;\n  }\n\n  Popover.prototype.render = function () {\n    var _a; // rename wrapper tag to begin with uppercase letter so it's recognized\n    // as JSX component instead of intrinsic element. but because of its\n    // type, tsc actually recognizes that it is _any_ intrinsic element, so\n    // it can typecheck the HTML props!!\n\n\n    var _b = this.props,\n        className = _b.className,\n        disabled = _b.disabled,\n        fill = _b.fill;\n    var isOpen = this.state.isOpen;\n    var wrapperTagName = this.props.wrapperTagName;\n\n    if (fill) {\n      wrapperTagName = \"div\";\n    }\n\n    var isContentEmpty = Utils.ensureElement(this.understandChildren().content) == null; // need to do this check in render(), because `isOpen` is derived from\n    // state, and state can't necessarily be accessed in validateProps.\n\n    if (isContentEmpty && !disabled && isOpen !== false && !Utils.isNodeEnv(\"production\")) {\n      console.warn(Errors.POPOVER_WARN_EMPTY_CONTENT);\n    }\n\n    var wrapperClasses = classNames(Classes.POPOVER_WRAPPER, className, (_a = {}, _a[Classes.FILL] = fill, _a));\n    var wrapper = React.createElement(wrapperTagName, {\n      className: wrapperClasses\n    }, React.createElement(Reference, {\n      innerRef: this.refHandlers.target\n    }, this.renderTarget), React.createElement(Overlay, {\n      autoFocus: this.props.autoFocus,\n      backdropClassName: Classes.POPOVER_BACKDROP,\n      backdropProps: this.props.backdropProps,\n      canEscapeKeyClose: this.props.canEscapeKeyClose,\n      canOutsideClickClose: this.props.interactionKind === PopoverInteractionKind.CLICK,\n      className: this.props.portalClassName,\n      enforceFocus: this.props.enforceFocus,\n      hasBackdrop: this.props.hasBackdrop,\n      isOpen: isOpen && !isContentEmpty,\n      onClose: this.handleOverlayClose,\n      onClosed: this.props.onClosed,\n      onClosing: this.props.onClosing,\n      onOpened: this.props.onOpened,\n      onOpening: this.props.onOpening,\n      transitionDuration: this.props.transitionDuration,\n      transitionName: Classes.POPOVER,\n      usePortal: this.props.usePortal,\n      portalContainer: this.props.portalContainer\n    }, React.createElement(Popper, {\n      innerRef: this.refHandlers.popover,\n      placement: positionToPlacement(this.props.position),\n      modifiers: this.getPopperModifiers()\n    }, this.renderPopover)));\n    return React.createElement(Manager, null, wrapper);\n  };\n\n  Popover.prototype.componentDidMount = function () {\n    this.updateDarkParent();\n  };\n\n  Popover.prototype.componentDidUpdate = function (_, __, snapshot) {\n    _super.prototype.componentDidUpdate.call(this, _, __, snapshot);\n\n    this.updateDarkParent();\n    var nextIsOpen = this.getIsOpen(this.props);\n\n    if (this.props.isOpen != null && nextIsOpen !== this.state.isOpen) {\n      this.setOpenState(nextIsOpen); // tricky: setOpenState calls setState only if this.props.isOpen is\n      // not controlled, so we need to invoke setState manually here.\n\n      this.setState({\n        isOpen: nextIsOpen\n      });\n    } else if (this.props.disabled && this.state.isOpen && this.props.isOpen == null) {\n      // special case: close an uncontrolled popover when disabled is set to true\n      this.setOpenState(false);\n    }\n  };\n\n  Popover.prototype.validateProps = function (props) {\n    if (props.isOpen == null && props.onInteraction != null) {\n      console.warn(Errors.POPOVER_WARN_UNCONTROLLED_ONINTERACTION);\n    }\n\n    if (props.hasBackdrop && !props.usePortal) {\n      console.warn(Errors.POPOVER_WARN_HAS_BACKDROP_INLINE);\n    }\n\n    if (props.hasBackdrop && props.interactionKind !== PopoverInteractionKind.CLICK) {\n      throw new Error(Errors.POPOVER_HAS_BACKDROP_INTERACTION);\n    }\n\n    var childrenCount = React.Children.count(props.children);\n    var hasContentProp = props.content !== undefined;\n    var hasTargetProp = props.target !== undefined;\n\n    if (childrenCount === 0 && !hasTargetProp) {\n      throw new Error(Errors.POPOVER_REQUIRES_TARGET);\n    }\n\n    if (childrenCount > 2) {\n      console.warn(Errors.POPOVER_WARN_TOO_MANY_CHILDREN);\n    }\n\n    if (childrenCount > 0 && hasTargetProp) {\n      console.warn(Errors.POPOVER_WARN_DOUBLE_TARGET);\n    }\n\n    if (childrenCount === 2 && hasContentProp) {\n      console.warn(Errors.POPOVER_WARN_DOUBLE_CONTENT);\n    }\n  };\n\n  Popover.prototype.updateDarkParent = function () {\n    if (this.props.usePortal && this.state.isOpen) {\n      var hasDarkParent = this.targetElement != null && this.targetElement.closest(\".\" + Classes.DARK) != null;\n      this.setState({\n        hasDarkParent: hasDarkParent\n      });\n    }\n  }; // content and target can be specified as props or as children. this method\n  // normalizes the two approaches, preferring child over prop.\n\n\n  Popover.prototype.understandChildren = function () {\n    var _a = this.props,\n        children = _a.children,\n        contentProp = _a.content,\n        targetProp = _a.target; // #validateProps asserts that 1 <= children.length <= 2 so content is optional\n\n    var _b = React.Children.toArray(children),\n        targetChild = _b[0],\n        contentChild = _b[1];\n\n    return {\n      content: contentChild == null ? contentProp : contentChild,\n      target: targetChild == null ? targetProp : targetChild\n    };\n  };\n\n  Popover.prototype.getIsOpen = function (props) {\n    // disabled popovers should never be allowed to open.\n    if (props.disabled) {\n      return false;\n    } else if (props.isOpen != null) {\n      return props.isOpen;\n    } else {\n      return props.defaultIsOpen;\n    }\n  };\n\n  Popover.prototype.getPopperModifiers = function () {\n    var _a = this.props,\n        boundary = _a.boundary,\n        modifiers = _a.modifiers;\n    var _b = modifiers.flip,\n        flip = _b === void 0 ? {} : _b,\n        _c = modifiers.preventOverflow,\n        preventOverflow = _c === void 0 ? {} : _c;\n    return tslib_1.__assign({}, modifiers, {\n      arrowOffset: {\n        enabled: this.isArrowEnabled(),\n        fn: arrowOffsetModifier,\n        order: 510\n      },\n      flip: tslib_1.__assign({\n        boundariesElement: boundary\n      }, flip),\n      preventOverflow: tslib_1.__assign({\n        boundariesElement: boundary\n      }, preventOverflow),\n      updatePopoverState: {\n        enabled: true,\n        fn: this.updatePopoverState,\n        order: 900\n      }\n    });\n  }; // a wrapper around setState({isOpen}) that will call props.onInteraction instead when in controlled mode.\n  // starts a timeout to delay changing the state if a non-zero duration is provided.\n\n\n  Popover.prototype.setOpenState = function (isOpen, e, timeout) {\n    var _this = this; // cancel any existing timeout because we have new state\n\n\n    Utils.safeInvoke(this.cancelOpenTimeout);\n\n    if (timeout > 0) {\n      this.cancelOpenTimeout = this.setTimeout(function () {\n        return _this.setOpenState(isOpen, e);\n      }, timeout);\n    } else {\n      if (this.props.isOpen == null) {\n        this.setState({\n          isOpen: isOpen\n        });\n      } else {\n        Utils.safeInvoke(this.props.onInteraction, isOpen, e);\n      }\n\n      if (!isOpen) {\n        Utils.safeInvoke(this.props.onClose, e);\n      }\n    }\n  };\n\n  Popover.prototype.isArrowEnabled = function () {\n    var _a = this.props,\n        minimal = _a.minimal,\n        arrow = _a.modifiers.arrow; // omitting `arrow` from `modifiers` uses Popper default, which does show an arrow.\n\n    return !minimal && (arrow == null || arrow.enabled);\n  };\n\n  Popover.prototype.isElementInPopover = function (element) {\n    return this.popoverElement != null && this.popoverElement.contains(element);\n  };\n\n  Popover.prototype.isHoverInteractionKind = function () {\n    return this.props.interactionKind === PopoverInteractionKind.HOVER || this.props.interactionKind === PopoverInteractionKind.HOVER_TARGET_ONLY;\n  };\n\n  Popover.displayName = DISPLAYNAME_PREFIX + \".Popover\";\n  Popover.defaultProps = {\n    boundary: \"scrollParent\",\n    captureDismiss: false,\n    defaultIsOpen: false,\n    disabled: false,\n    fill: false,\n    hasBackdrop: false,\n    hoverCloseDelay: 300,\n    hoverOpenDelay: 150,\n    inheritDarkTheme: true,\n    interactionKind: PopoverInteractionKind.CLICK,\n    minimal: false,\n    modifiers: {},\n    openOnTargetFocus: true,\n    position: \"auto\",\n    targetTagName: \"span\",\n    transitionDuration: 300,\n    usePortal: true,\n    wrapperTagName: \"span\"\n  };\n  Popover = tslib_1.__decorate([polyfill], Popover);\n  return Popover;\n}(AbstractPureComponent2);\n\nexport { Popover };","/*\n * Copyright 2015 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { AbstractPureComponent2, Classes } from \"../../common\";\nimport { DISPLAYNAME_PREFIX } from \"../../common/props\";\nimport { Popover, PopoverInteractionKind } from \"../popover/popover\";\n\nvar Tooltip =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(Tooltip, _super);\n\n  function Tooltip() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.popover = null;\n    return _this;\n  }\n\n  Tooltip.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.props,\n        children = _a.children,\n        intent = _a.intent,\n        popoverClassName = _a.popoverClassName,\n        restProps = tslib_1.__rest(_a, [\"children\", \"intent\", \"popoverClassName\"]);\n\n    var classes = classNames(Classes.TOOLTIP, Classes.intentClass(intent), popoverClassName);\n    return React.createElement(Popover, tslib_1.__assign({\n      interactionKind: PopoverInteractionKind.HOVER_TARGET_ONLY\n    }, restProps, {\n      autoFocus: false,\n      canEscapeKeyClose: false,\n      enforceFocus: false,\n      lazy: true,\n      popoverClassName: classes,\n      portalContainer: this.props.portalContainer,\n      ref: function ref(_ref) {\n        return _this.popover = _ref;\n      }\n    }), children);\n  };\n\n  Tooltip.prototype.reposition = function () {\n    if (this.popover != null) {\n      this.popover.reposition();\n    }\n  };\n\n  Tooltip.displayName = DISPLAYNAME_PREFIX + \".Tooltip\";\n  Tooltip.defaultProps = {\n    hoverCloseDelay: 0,\n    hoverOpenDelay: 100,\n    transitionDuration: 100\n  };\n  Tooltip = tslib_1.__decorate([polyfill], Tooltip);\n  return Tooltip;\n}(AbstractPureComponent2);\n\nexport { Tooltip };","/*\n * Copyright 2018 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** Boundary of a one-dimensional interval. */\nexport var Boundary = {\n  START: \"start\",\n  // tslint:disable-next-line:object-literal-sort-keys\n  END: \"end\"\n};","/*\n * Copyright 2018 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { BLOCKQUOTE, CODE, CODE_BLOCK, HEADING, LABEL, LIST } from \"../../common/classes\";\n\nfunction htmlElement(tagName, tagClassName) {\n  return function (props) {\n    var className = props.className,\n        elementRef = props.elementRef,\n        htmlProps = tslib_1.__rest(props, [\"className\", \"elementRef\"]);\n\n    return React.createElement(tagName, tslib_1.__assign({}, htmlProps, {\n      className: classNames(tagClassName, className),\n      ref: elementRef\n    }));\n  };\n} // the following components are linted by blueprint-html-components because\n// they should rarely be used without the Blueprint classes/styles:\n\n\nexport var H1 = htmlElement(\"h1\", HEADING);\nexport var H2 = htmlElement(\"h2\", HEADING);\nexport var H3 = htmlElement(\"h3\", HEADING);\nexport var H4 = htmlElement(\"h4\", HEADING);\nexport var H5 = htmlElement(\"h5\", HEADING);\nexport var H6 = htmlElement(\"h6\", HEADING);\nexport var Blockquote = htmlElement(\"blockquote\", BLOCKQUOTE);\nexport var Code = htmlElement(\"code\", CODE);\nexport var Pre = htmlElement(\"pre\", CODE_BLOCK);\nexport var Label = htmlElement(\"label\", LABEL); // these two are not linted by blueprint-html-components because there are valid\n// uses of these elements without Blueprint styles:\n\nexport var OL = htmlElement(\"ol\", LIST);\nexport var UL = htmlElement(\"ul\", LIST);","/*\n * Copyright 2018 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { Boundary } from \"../../common/boundary\";\nimport * as Classes from \"../../common/classes\";\nimport { OVERFLOW_LIST_OBSERVE_PARENTS_CHANGED } from \"../../common/errors\";\nimport { DISPLAYNAME_PREFIX } from \"../../common/props\";\nimport { safeInvoke, shallowCompareKeys } from \"../../common/utils\";\nimport { ResizeSensor } from \"../resize-sensor/resizeSensor\";\n/** @internal - do not expose this type */\n\nexport var OverflowDirection;\n\n(function (OverflowDirection) {\n  OverflowDirection[OverflowDirection[\"NONE\"] = 0] = \"NONE\";\n  OverflowDirection[OverflowDirection[\"GROW\"] = 1] = \"GROW\";\n  OverflowDirection[OverflowDirection[\"SHRINK\"] = 2] = \"SHRINK\";\n})(OverflowDirection || (OverflowDirection = {}));\n\nvar OverflowList =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(OverflowList, _super);\n\n  function OverflowList() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      direction: OverflowDirection.NONE,\n      lastOverflowCount: 0,\n      overflow: [],\n      visible: _this.props.items\n    };\n    /** A cache containing the widths of all elements being observed to detect growing/shrinking */\n\n    _this.previousWidths = new Map();\n    _this.spacer = null;\n\n    _this.resize = function (entries) {\n      // if any parent is growing, assume we have more room than before\n      var growing = entries.some(function (entry) {\n        var previousWidth = _this.previousWidths.get(entry.target) || 0;\n        return entry.contentRect.width > previousWidth;\n      });\n\n      _this.repartition(growing);\n\n      entries.forEach(function (entry) {\n        return _this.previousWidths.set(entry.target, entry.contentRect.width);\n      });\n    };\n\n    return _this;\n  }\n\n  OverflowList.ofType = function () {\n    return OverflowList;\n  };\n\n  OverflowList.prototype.componentDidMount = function () {\n    this.repartition(false);\n  };\n\n  OverflowList.prototype.shouldComponentUpdate = function (_nextProps, nextState) {\n    // We want this component to always re-render, even when props haven't changed, so that\n    // changes in the renderers' behavior can be reflected.\n    // The following statement prevents re-rendering only in the case where the state changes\n    // identity (i.e. setState was called), but the state is still the same when\n    // shallow-compared to the previous state.\n    return !(this.state !== nextState && shallowCompareKeys(this.state, nextState));\n  };\n\n  OverflowList.prototype.componentDidUpdate = function (prevProps, prevState) {\n    if (prevProps.observeParents !== this.props.observeParents) {\n      console.warn(OVERFLOW_LIST_OBSERVE_PARENTS_CHANGED);\n    }\n\n    if (prevProps.collapseFrom !== this.props.collapseFrom || prevProps.items !== this.props.items || prevProps.minVisibleItems !== this.props.minVisibleItems || prevProps.overflowRenderer !== this.props.overflowRenderer || prevProps.visibleItemRenderer !== this.props.visibleItemRenderer) {\n      // reset visible state if the above props change.\n      this.setState({\n        direction: OverflowDirection.GROW,\n        lastOverflowCount: 0,\n        overflow: [],\n        visible: this.props.items\n      });\n    }\n\n    if (!shallowCompareKeys(prevState, this.state)) {\n      this.repartition(false);\n    }\n\n    var _a = this.state,\n        direction = _a.direction,\n        overflow = _a.overflow,\n        lastOverflowCount = _a.lastOverflowCount;\n\n    if ( // if a resize operation has just completed (transition to NONE)\n    direction === OverflowDirection.NONE && direction !== prevState.direction && overflow.length !== lastOverflowCount) {\n      safeInvoke(this.props.onOverflow, overflow);\n    }\n  };\n\n  OverflowList.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.props,\n        className = _a.className,\n        collapseFrom = _a.collapseFrom,\n        observeParents = _a.observeParents,\n        style = _a.style,\n        _b = _a.tagName,\n        tagName = _b === void 0 ? \"div\" : _b,\n        visibleItemRenderer = _a.visibleItemRenderer;\n    var overflow = this.maybeRenderOverflow();\n    var list = React.createElement(tagName, {\n      className: classNames(Classes.OVERFLOW_LIST, className),\n      style: style\n    }, collapseFrom === Boundary.START ? overflow : null, this.state.visible.map(visibleItemRenderer), collapseFrom === Boundary.END ? overflow : null, React.createElement(\"div\", {\n      className: Classes.OVERFLOW_LIST_SPACER,\n      ref: function ref(_ref) {\n        return _this.spacer = _ref;\n      }\n    }));\n    return React.createElement(ResizeSensor, {\n      onResize: this.resize,\n      observeParents: observeParents\n    }, list);\n  };\n\n  OverflowList.prototype.maybeRenderOverflow = function () {\n    var overflow = this.state.overflow;\n\n    if (overflow.length === 0) {\n      return null;\n    }\n\n    return this.props.overflowRenderer(overflow);\n  };\n\n  OverflowList.prototype.repartition = function (growing) {\n    var _this = this;\n\n    if (this.spacer == null) {\n      return;\n    }\n\n    if (growing) {\n      this.setState(function (state) {\n        return {\n          direction: OverflowDirection.GROW,\n          // store last overflow if this is the beginning of a resize (for check in componentDidUpdate).\n          lastOverflowCount: state.direction === OverflowDirection.NONE ? state.overflow.length : state.lastOverflowCount,\n          overflow: [],\n          visible: _this.props.items\n        };\n      });\n    } else if (this.spacer.getBoundingClientRect().width < 0.9) {\n      // spacer has flex-shrink and width 1px so if it's much smaller then we know to shrink\n      this.setState(function (state) {\n        if (state.visible.length <= _this.props.minVisibleItems) {\n          return null;\n        }\n\n        var collapseFromStart = _this.props.collapseFrom === Boundary.START;\n        var visible = state.visible.slice();\n        var next = collapseFromStart ? visible.shift() : visible.pop();\n\n        if (next === undefined) {\n          return null;\n        }\n\n        var overflow = collapseFromStart ? state.overflow.concat([next]) : [next].concat(state.overflow);\n        return {\n          // set SHRINK mode unless a GROW is already in progress.\n          // GROW shows all items then shrinks until it settles, so we\n          // preserve the fact that the original trigger was a GROW.\n          direction: state.direction === OverflowDirection.NONE ? OverflowDirection.SHRINK : state.direction,\n          overflow: overflow,\n          visible: visible\n        };\n      });\n    } else {\n      // repartition complete!\n      this.setState({\n        direction: OverflowDirection.NONE\n      });\n    }\n  };\n\n  OverflowList.displayName = DISPLAYNAME_PREFIX + \".OverflowList\";\n  OverflowList.defaultProps = {\n    collapseFrom: Boundary.START,\n    minVisibleItems: 0\n  };\n  return OverflowList;\n}(React.Component);\n\nexport { OverflowList };","/*\n * Copyright 2015 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport * as Classes from \"../../common/classes\";\nimport { DISPLAYNAME_PREFIX } from \"../../common/props\";\nimport { H6 } from \"../html/html\";\n\nvar MenuDivider =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(MenuDivider, _super);\n\n  function MenuDivider() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  MenuDivider.prototype.render = function () {\n    var _a = this.props,\n        className = _a.className,\n        title = _a.title;\n\n    if (title == null) {\n      // simple divider\n      return React.createElement(\"li\", {\n        className: classNames(Classes.MENU_DIVIDER, className)\n      });\n    } else {\n      // section header with title\n      return React.createElement(\"li\", {\n        className: classNames(Classes.MENU_HEADER, className)\n      }, React.createElement(H6, null, title));\n    }\n  };\n\n  MenuDivider.displayName = DISPLAYNAME_PREFIX + \".MenuDivider\";\n  return MenuDivider;\n}(React.Component);\n\nexport { MenuDivider };","/*\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { AbstractPureComponent2, Classes } from \"../../common\";\nimport { DISPLAYNAME_PREFIX } from \"../../common/props\";\n\nvar Text =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(Text, _super);\n\n  function Text() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      isContentOverflowing: false,\n      textContent: \"\"\n    };\n    _this.textRef = null;\n    return _this;\n  }\n\n  Text.prototype.componentDidMount = function () {\n    this.update();\n  };\n\n  Text.prototype.componentDidUpdate = function () {\n    this.update();\n  };\n\n  Text.prototype.render = function () {\n    var _a;\n\n    var _this = this;\n\n    var classes = classNames((_a = {}, _a[Classes.TEXT_OVERFLOW_ELLIPSIS] = this.props.ellipsize, _a), this.props.className);\n    var _b = this.props,\n        children = _b.children,\n        _c = _b.tagName,\n        tagName = _c === void 0 ? \"div\" : _c;\n    return React.createElement(tagName, {\n      className: classes,\n      ref: function ref(_ref) {\n        return _this.textRef = _ref;\n      },\n      title: this.state.isContentOverflowing ? this.state.textContent : undefined\n    }, children);\n  };\n\n  Text.prototype.update = function () {\n    if (this.textRef == null) {\n      return;\n    }\n\n    var newState = {\n      isContentOverflowing: this.props.ellipsize && this.textRef.scrollWidth > this.textRef.clientWidth,\n      textContent: this.textRef.textContent\n    };\n    this.setState(newState);\n  };\n\n  Text.displayName = DISPLAYNAME_PREFIX + \".Text\";\n  Text = tslib_1.__decorate([polyfill], Text);\n  return Text;\n}(AbstractPureComponent2);\n\nexport { Text };","/*\n * Copyright 2015 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { AbstractPureComponent2, Classes, Position } from \"../../common\";\nimport { DISPLAYNAME_PREFIX } from \"../../common/props\";\nimport { Icon } from \"../icon/icon\";\nimport { Popover, PopoverInteractionKind } from \"../popover/popover\";\nimport { Text } from \"../text/text\";\nimport { Menu } from \"./menu\";\n\nvar MenuItem =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(MenuItem, _super);\n\n  function MenuItem() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  MenuItem.prototype.render = function () {\n    var _a, _b;\n\n    var _c = this.props,\n        active = _c.active,\n        className = _c.className,\n        children = _c.children,\n        disabled = _c.disabled,\n        icon = _c.icon,\n        intent = _c.intent,\n        labelClassName = _c.labelClassName,\n        labelElement = _c.labelElement,\n        multiline = _c.multiline,\n        popoverProps = _c.popoverProps,\n        shouldDismissPopover = _c.shouldDismissPopover,\n        text = _c.text,\n        textClassName = _c.textClassName,\n        _d = _c.tagName,\n        tagName = _d === void 0 ? \"a\" : _d,\n        htmlProps = tslib_1.__rest(_c, [\"active\", \"className\", \"children\", \"disabled\", \"icon\", \"intent\", \"labelClassName\", \"labelElement\", \"multiline\", \"popoverProps\", \"shouldDismissPopover\", \"text\", \"textClassName\", \"tagName\"]);\n\n    var hasSubmenu = children != null;\n    var intentClass = Classes.intentClass(intent);\n    var anchorClasses = classNames(Classes.MENU_ITEM, intentClass, (_a = {}, _a[Classes.ACTIVE] = active, _a[Classes.INTENT_PRIMARY] = active && intentClass == null, _a[Classes.DISABLED] = disabled, // prevent popover from closing when clicking on submenu trigger or disabled item\n    _a[Classes.POPOVER_DISMISS] = shouldDismissPopover && !disabled && !hasSubmenu, _a), className);\n    var target = React.createElement(tagName, tslib_1.__assign({}, htmlProps, disabled ? DISABLED_PROPS : {}, {\n      className: anchorClasses\n    }), React.createElement(Icon, {\n      icon: icon\n    }), React.createElement(Text, {\n      className: classNames(Classes.FILL, textClassName),\n      ellipsize: !multiline\n    }, text), this.maybeRenderLabel(labelElement), hasSubmenu ? React.createElement(Icon, {\n      icon: \"caret-right\"\n    }) : undefined);\n    var liClasses = classNames((_b = {}, _b[Classes.MENU_SUBMENU] = hasSubmenu, _b));\n    return React.createElement(\"li\", {\n      className: liClasses\n    }, this.maybeRenderPopover(target, children));\n  };\n\n  MenuItem.prototype.maybeRenderLabel = function (labelElement) {\n    var _a = this.props,\n        label = _a.label,\n        labelClassName = _a.labelClassName;\n\n    if (label == null && labelElement == null) {\n      return null;\n    }\n\n    return React.createElement(\"span\", {\n      className: classNames(Classes.MENU_ITEM_LABEL, labelClassName)\n    }, label, labelElement);\n  };\n\n  MenuItem.prototype.maybeRenderPopover = function (target, children) {\n    if (children == null) {\n      return target;\n    }\n\n    var _a = this.props,\n        disabled = _a.disabled,\n        popoverProps = _a.popoverProps;\n    return React.createElement(Popover, tslib_1.__assign({\n      autoFocus: false,\n      captureDismiss: false,\n      disabled: disabled,\n      enforceFocus: false,\n      hoverCloseDelay: 0,\n      interactionKind: PopoverInteractionKind.HOVER,\n      modifiers: SUBMENU_POPOVER_MODIFIERS,\n      position: Position.RIGHT_TOP,\n      usePortal: false\n    }, popoverProps, {\n      content: React.createElement(Menu, null, children),\n      minimal: true,\n      popoverClassName: classNames(Classes.MENU_SUBMENU, popoverProps.popoverClassName),\n      target: target\n    }));\n  };\n\n  MenuItem.defaultProps = {\n    disabled: false,\n    multiline: false,\n    popoverProps: {},\n    shouldDismissPopover: true,\n    text: \"\"\n  };\n  MenuItem.displayName = DISPLAYNAME_PREFIX + \".MenuItem\";\n  MenuItem = tslib_1.__decorate([polyfill], MenuItem);\n  return MenuItem;\n}(AbstractPureComponent2);\n\nexport { MenuItem };\nvar SUBMENU_POPOVER_MODIFIERS = {\n  // 20px padding - scrollbar width + a bit\n  flip: {\n    boundariesElement: \"viewport\",\n    padding: 20\n  },\n  // shift popover up 5px so MenuItems align\n  offset: {\n    offset: -5\n  },\n  preventOverflow: {\n    boundariesElement: \"viewport\",\n    padding: 20\n  }\n}; // props to ignore when disabled\n\nvar DISABLED_PROPS = {\n  href: undefined,\n  onClick: undefined,\n  onMouseDown: undefined,\n  onMouseEnter: undefined,\n  onMouseLeave: undefined,\n  tabIndex: -1\n};","/*\n * Copyright 2015 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { AbstractPureComponent2, Classes } from \"../../common\";\nimport { DISPLAYNAME_PREFIX } from \"../../common/props\";\nimport { MenuDivider } from \"./menuDivider\";\nimport { MenuItem } from \"./menuItem\";\n\nvar Menu =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(Menu, _super);\n\n  function Menu() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Menu.prototype.render = function () {\n    var _a;\n\n    var _b = this.props,\n        className = _b.className,\n        children = _b.children,\n        large = _b.large,\n        ulRef = _b.ulRef,\n        htmlProps = tslib_1.__rest(_b, [\"className\", \"children\", \"large\", \"ulRef\"]);\n\n    var classes = classNames(Classes.MENU, (_a = {}, _a[Classes.LARGE] = large, _a), className);\n    return React.createElement(\"ul\", tslib_1.__assign({}, htmlProps, {\n      className: classes,\n      ref: ulRef\n    }), children);\n  };\n\n  Menu.displayName = DISPLAYNAME_PREFIX + \".Menu\";\n  Menu.Divider = MenuDivider;\n  Menu.Item = MenuItem;\n  Menu = tslib_1.__decorate([polyfill], Menu);\n  return Menu;\n}(AbstractPureComponent2);\n\nexport { Menu };","/*\n * Copyright 2018 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { AbstractPureComponent2, Boundary, Classes, Position } from \"../../common\";\nimport { Menu } from \"../menu/menu\";\nimport { MenuItem } from \"../menu/menuItem\";\nimport { OverflowList } from \"../overflow-list/overflowList\";\nimport { Popover } from \"../popover/popover\";\nimport { Breadcrumb } from \"./breadcrumb\";\n\nvar Breadcrumbs =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(Breadcrumbs, _super);\n\n  function Breadcrumbs() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.renderOverflow = function (items) {\n      var collapseFrom = _this.props.collapseFrom;\n      var position = collapseFrom === Boundary.END ? Position.BOTTOM_RIGHT : Position.BOTTOM_LEFT;\n      var orderedItems = items;\n\n      if (collapseFrom === Boundary.START) {\n        // If we're collapsing from the start, the menu should be read from the bottom to the\n        // top, continuing with the breadcrumbs to the right. Since this means the first\n        // breadcrumb in the props must be the last in the menu, we need to reverse the overlow\n        // order.\n        orderedItems = items.slice().reverse();\n      }\n\n      return React.createElement(\"li\", null, React.createElement(Popover, tslib_1.__assign({\n        position: position\n      }, _this.props.popoverProps), React.createElement(\"span\", {\n        className: Classes.BREADCRUMBS_COLLAPSED\n      }), React.createElement(Menu, null, orderedItems.map(_this.renderOverflowBreadcrumb))));\n    };\n\n    _this.renderOverflowBreadcrumb = function (props, index) {\n      var isClickable = props.href != null || props.onClick != null;\n      return React.createElement(MenuItem, tslib_1.__assign({\n        disabled: !isClickable\n      }, props, {\n        text: props.text,\n        key: index\n      }));\n    };\n\n    _this.renderBreadcrumbWrapper = function (props, index) {\n      var isCurrent = _this.props.items[_this.props.items.length - 1] === props;\n      return React.createElement(\"li\", {\n        key: index\n      }, _this.renderBreadcrumb(props, isCurrent));\n    };\n\n    return _this;\n  }\n\n  Breadcrumbs.prototype.render = function () {\n    var _a = this.props,\n        className = _a.className,\n        collapseFrom = _a.collapseFrom,\n        items = _a.items,\n        minVisibleItems = _a.minVisibleItems,\n        _b = _a.overflowListProps,\n        overflowListProps = _b === void 0 ? {} : _b;\n    return React.createElement(OverflowList, tslib_1.__assign({\n      collapseFrom: collapseFrom,\n      minVisibleItems: minVisibleItems,\n      tagName: \"ul\"\n    }, overflowListProps, {\n      className: classNames(Classes.BREADCRUMBS, overflowListProps.className, className),\n      items: items,\n      overflowRenderer: this.renderOverflow,\n      visibleItemRenderer: this.renderBreadcrumbWrapper\n    }));\n  };\n\n  Breadcrumbs.prototype.renderBreadcrumb = function (props, isCurrent) {\n    if (isCurrent && this.props.currentBreadcrumbRenderer != null) {\n      return this.props.currentBreadcrumbRenderer(props);\n    } else if (this.props.breadcrumbRenderer != null) {\n      return this.props.breadcrumbRenderer(props);\n    } else {\n      return React.createElement(Breadcrumb, tslib_1.__assign({}, props, {\n        current: isCurrent\n      }));\n    }\n  };\n\n  Breadcrumbs.defaultProps = {\n    collapseFrom: Boundary.START\n  };\n  Breadcrumbs = tslib_1.__decorate([polyfill], Breadcrumbs);\n  return Breadcrumbs;\n}(AbstractPureComponent2);\n\nexport { Breadcrumbs };","/*\n * Copyright 2015 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { AbstractPureComponent2, Classes } from \"../../common\";\nimport { SPINNER_WARN_CLASSES_SIZE } from \"../../common/errors\";\nimport { DISPLAYNAME_PREFIX } from \"../../common/props\";\nimport { clamp } from \"../../common/utils\"; // see http://stackoverflow.com/a/18473154/3124288 for calculating arc path\n\nvar R = 45;\nvar SPINNER_TRACK = \"M 50,50 m 0,-\" + R + \" a \" + R + \",\" + R + \" 0 1 1 0,\" + R * 2 + \" a \" + R + \",\" + R + \" 0 1 1 0,-\" + R * 2; // unitless total length of SVG path, to which stroke-dash* properties are relative.\n// https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/pathLength\n// this value is the result of `<path d={SPINNER_TRACK} />.getTotalLength()` and works in all browsers:\n\nvar PATH_LENGTH = 280;\nvar MIN_SIZE = 10;\nvar STROKE_WIDTH = 4;\nvar MIN_STROKE_WIDTH = 16;\n\nvar Spinner =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(Spinner, _super);\n\n  function Spinner() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Spinner_1 = Spinner;\n\n  Spinner.prototype.componentDidUpdate = function (prevProps) {\n    if (prevProps.value !== this.props.value) {\n      // IE/Edge: re-render after changing value to force SVG update\n      this.forceUpdate();\n    }\n  };\n\n  Spinner.prototype.render = function () {\n    var _a;\n\n    var _b = this.props,\n        className = _b.className,\n        intent = _b.intent,\n        value = _b.value,\n        _c = _b.tagName,\n        tagName = _c === void 0 ? \"div\" : _c;\n    var size = this.getSize();\n    var classes = classNames(Classes.SPINNER, Classes.intentClass(intent), (_a = {}, _a[Classes.SPINNER_NO_SPIN] = value != null, _a), className); // keep spinner track width consistent at all sizes (down to about 10px).\n\n    var strokeWidth = Math.min(MIN_STROKE_WIDTH, STROKE_WIDTH * Spinner_1.SIZE_LARGE / size);\n    var strokeOffset = PATH_LENGTH - PATH_LENGTH * (value == null ? 0.25 : clamp(value, 0, 1)); // multiple DOM elements around SVG are necessary to properly isolate animation:\n    // - SVG elements in IE do not support anim/trans so they must be set on a parent HTML element.\n    // - SPINNER_ANIMATION isolates svg from parent display and is always centered inside root element.\n\n    return React.createElement(tagName, {\n      className: classes\n    }, React.createElement(tagName, {\n      className: Classes.SPINNER_ANIMATION\n    }, React.createElement(\"svg\", {\n      width: size,\n      height: size,\n      strokeWidth: strokeWidth.toFixed(2),\n      viewBox: this.getViewBox(strokeWidth)\n    }, React.createElement(\"path\", {\n      className: Classes.SPINNER_TRACK,\n      d: SPINNER_TRACK\n    }), React.createElement(\"path\", {\n      className: Classes.SPINNER_HEAD,\n      d: SPINNER_TRACK,\n      pathLength: PATH_LENGTH,\n      strokeDasharray: PATH_LENGTH + \" \" + PATH_LENGTH,\n      strokeDashoffset: strokeOffset\n    }))));\n  };\n\n  Spinner.prototype.validateProps = function (_a) {\n    var _b = _a.className,\n        className = _b === void 0 ? \"\" : _b,\n        size = _a.size;\n\n    if (size != null && (className.indexOf(Classes.SMALL) >= 0 || className.indexOf(Classes.LARGE) >= 0)) {\n      console.warn(SPINNER_WARN_CLASSES_SIZE);\n    }\n  };\n  /**\n   * Resolve size to a pixel value.\n   * Size can be set by className, props, default, or minimum constant.\n   */\n\n\n  Spinner.prototype.getSize = function () {\n    var _a = this.props,\n        _b = _a.className,\n        className = _b === void 0 ? \"\" : _b,\n        size = _a.size;\n\n    if (size == null) {\n      // allow Classes constants to determine default size.\n      if (className.indexOf(Classes.SMALL) >= 0) {\n        return Spinner_1.SIZE_SMALL;\n      } else if (className.indexOf(Classes.LARGE) >= 0) {\n        return Spinner_1.SIZE_LARGE;\n      }\n\n      return Spinner_1.SIZE_STANDARD;\n    }\n\n    return Math.max(MIN_SIZE, size);\n  };\n  /** Compute viewbox such that stroked track sits exactly at edge of image frame. */\n\n\n  Spinner.prototype.getViewBox = function (strokeWidth) {\n    var radius = R + strokeWidth / 2;\n    var viewBoxX = (50 - radius).toFixed(2);\n    var viewBoxWidth = (radius * 2).toFixed(2);\n    return viewBoxX + \" \" + viewBoxX + \" \" + viewBoxWidth + \" \" + viewBoxWidth;\n  };\n\n  var Spinner_1;\n  Spinner.displayName = DISPLAYNAME_PREFIX + \".Spinner\";\n  Spinner.SIZE_SMALL = 20;\n  Spinner.SIZE_STANDARD = 50;\n  Spinner.SIZE_LARGE = 100;\n  Spinner = Spinner_1 = tslib_1.__decorate([polyfill], Spinner);\n  return Spinner;\n}(AbstractPureComponent2);\n\nexport { Spinner };","/*\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { AbstractPureComponent2, Classes, Keys, Utils } from \"../../common\";\nimport { Icon } from \"../icon/icon\";\nimport { Spinner } from \"../spinner/spinner\";\n\nvar AbstractButton =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(AbstractButton, _super);\n\n  function AbstractButton() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      isActive: false\n    };\n    _this.refHandlers = {\n      button: function button(ref) {\n        _this.buttonRef = ref;\n        Utils.safeInvoke(_this.props.elementRef, ref);\n      }\n    };\n    _this.currentKeyDown = null; // we're casting as `any` to get around a somewhat opaque safeInvoke error\n    // that \"Type argument candidate 'KeyboardEvent<T>' is not a valid type\n    // argument because it is not a supertype of candidate\n    // 'KeyboardEvent<HTMLElement>'.\"\n\n    _this.handleKeyDown = function (e) {\n      if (Keys.isKeyboardClick(e.which)) {\n        e.preventDefault();\n\n        if (e.which !== _this.currentKeyDown) {\n          _this.setState({\n            isActive: true\n          });\n        }\n      }\n\n      _this.currentKeyDown = e.which;\n      Utils.safeInvoke(_this.props.onKeyDown, e);\n    };\n\n    _this.handleKeyUp = function (e) {\n      if (Keys.isKeyboardClick(e.which)) {\n        _this.setState({\n          isActive: false\n        });\n\n        _this.buttonRef.click();\n      }\n\n      _this.currentKeyDown = null;\n      Utils.safeInvoke(_this.props.onKeyUp, e);\n    };\n\n    return _this;\n  }\n\n  AbstractButton.prototype.getCommonButtonProps = function () {\n    var _a;\n\n    var _b = this.props,\n        alignText = _b.alignText,\n        fill = _b.fill,\n        large = _b.large,\n        loading = _b.loading,\n        minimal = _b.minimal,\n        small = _b.small,\n        tabIndex = _b.tabIndex;\n    var disabled = this.props.disabled || loading;\n    var className = classNames(Classes.BUTTON, (_a = {}, _a[Classes.ACTIVE] = this.state.isActive || this.props.active, _a[Classes.DISABLED] = disabled, _a[Classes.FILL] = fill, _a[Classes.LARGE] = large, _a[Classes.LOADING] = loading, _a[Classes.MINIMAL] = minimal, _a[Classes.SMALL] = small, _a), Classes.alignmentClass(alignText), Classes.intentClass(this.props.intent), this.props.className);\n    return {\n      className: className,\n      disabled: disabled,\n      onClick: disabled ? undefined : this.props.onClick,\n      onKeyDown: this.handleKeyDown,\n      onKeyUp: this.handleKeyUp,\n      ref: this.refHandlers.button,\n      tabIndex: disabled ? -1 : tabIndex\n    };\n  };\n\n  AbstractButton.prototype.renderChildren = function () {\n    var _a = this.props,\n        children = _a.children,\n        icon = _a.icon,\n        loading = _a.loading,\n        rightIcon = _a.rightIcon,\n        text = _a.text;\n    return [loading && React.createElement(Spinner, {\n      key: \"loading\",\n      className: Classes.BUTTON_SPINNER,\n      size: Icon.SIZE_LARGE\n    }), React.createElement(Icon, {\n      key: \"leftIcon\",\n      icon: icon\n    }), (!Utils.isReactNodeEmpty(text) || !Utils.isReactNodeEmpty(children)) && React.createElement(\"span\", {\n      key: \"text\",\n      className: Classes.BUTTON_TEXT\n    }, text, children), React.createElement(Icon, {\n      key: \"rightIcon\",\n      icon: rightIcon\n    })];\n  };\n\n  return AbstractButton;\n}(AbstractPureComponent2);\n\nexport { AbstractButton };","/*\n * Copyright 2016 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\"; // HACKHACK: these components should go in separate files\n// tslint:disable max-classes-per-file\n\nimport * as React from \"react\";\nimport { DISPLAYNAME_PREFIX, removeNonHTMLProps } from \"../../common/props\";\nimport { AbstractButton } from \"./abstractButton\";\n\nvar Button =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(Button, _super);\n\n  function Button() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Button.prototype.render = function () {\n    return React.createElement(\"button\", tslib_1.__assign({\n      type: \"button\"\n    }, removeNonHTMLProps(this.props), this.getCommonButtonProps()), this.renderChildren());\n  };\n\n  Button.displayName = DISPLAYNAME_PREFIX + \".Button\";\n  return Button;\n}(AbstractButton);\n\nexport { Button };\n\nvar AnchorButton =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(AnchorButton, _super);\n\n  function AnchorButton() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  AnchorButton.prototype.render = function () {\n    var _a = this.props,\n        href = _a.href,\n        _b = _a.tabIndex,\n        tabIndex = _b === void 0 ? 0 : _b;\n    var commonProps = this.getCommonButtonProps();\n    return React.createElement(\"a\", tslib_1.__assign({\n      role: \"button\"\n    }, removeNonHTMLProps(this.props), commonProps, {\n      href: commonProps.disabled ? undefined : href,\n      tabIndex: commonProps.disabled ? -1 : tabIndex\n    }), this.renderChildren());\n  };\n\n  AnchorButton.displayName = DISPLAYNAME_PREFIX + \".AnchorButton\";\n  return AnchorButton;\n}(AbstractButton);\n\nexport { AnchorButton };","/*\n * Copyright 2015 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { AbstractPureComponent2, Classes } from \"../../common\";\nimport * as Errors from \"../../common/errors\";\nimport { DISPLAYNAME_PREFIX } from \"../../common/props\";\nimport { Button } from \"../button/buttons\";\nimport { H4 } from \"../html/html\";\nimport { Icon } from \"../icon/icon\";\nimport { Overlay } from \"../overlay/overlay\";\n\nvar Dialog =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(Dialog, _super);\n\n  function Dialog() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Dialog.prototype.render = function () {\n    return React.createElement(Overlay, tslib_1.__assign({}, this.props, {\n      className: Classes.OVERLAY_SCROLL_CONTAINER,\n      hasBackdrop: true\n    }), React.createElement(\"div\", {\n      className: Classes.DIALOG_CONTAINER\n    }, React.createElement(\"div\", {\n      className: classNames(Classes.DIALOG, this.props.className),\n      style: this.props.style\n    }, this.maybeRenderHeader(), this.props.children)));\n  };\n\n  Dialog.prototype.validateProps = function (props) {\n    if (props.title == null) {\n      if (props.icon != null) {\n        console.warn(Errors.DIALOG_WARN_NO_HEADER_ICON);\n      }\n\n      if (props.isCloseButtonShown != null) {\n        console.warn(Errors.DIALOG_WARN_NO_HEADER_CLOSE_BUTTON);\n      }\n    }\n  };\n\n  Dialog.prototype.maybeRenderCloseButton = function () {\n    // show close button if prop is undefined or null\n    // this gives us a behavior as if the default value were `true`\n    if (this.props.isCloseButtonShown !== false) {\n      return React.createElement(Button, {\n        \"aria-label\": \"Close\",\n        className: Classes.DIALOG_CLOSE_BUTTON,\n        icon: React.createElement(Icon, {\n          icon: \"small-cross\",\n          iconSize: Icon.SIZE_LARGE\n        }),\n        minimal: true,\n        onClick: this.props.onClose\n      });\n    } else {\n      return undefined;\n    }\n  };\n\n  Dialog.prototype.maybeRenderHeader = function () {\n    var _a = this.props,\n        icon = _a.icon,\n        title = _a.title;\n\n    if (title == null) {\n      return undefined;\n    }\n\n    return React.createElement(\"div\", {\n      className: Classes.DIALOG_HEADER\n    }, React.createElement(Icon, {\n      icon: icon,\n      iconSize: Icon.SIZE_LARGE\n    }), React.createElement(H4, null, title), this.maybeRenderCloseButton());\n  };\n\n  Dialog.defaultProps = {\n    canOutsideClickClose: true,\n    isOpen: false\n  };\n  Dialog.displayName = DISPLAYNAME_PREFIX + \".Dialog\";\n  Dialog = tslib_1.__decorate([polyfill], Dialog);\n  return Dialog;\n}(AbstractPureComponent2);\n\nexport { Dialog };","/*\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { AbstractPureComponent2 } from \"../../common\";\nimport { DIVIDER } from \"../../common/classes\";\nimport { DISPLAYNAME_PREFIX } from \"../../common/props\"; // this component is simple enough that tests would be purely tautological.\n\n/* istanbul ignore next */\n\nvar Divider =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(Divider, _super);\n\n  function Divider() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Divider.prototype.render = function () {\n    var _a = this.props,\n        className = _a.className,\n        _b = _a.tagName,\n        tagName = _b === void 0 ? \"div\" : _b,\n        htmlProps = tslib_1.__rest(_a, [\"className\", \"tagName\"]);\n\n    var classes = classNames(DIVIDER, className);\n    return React.createElement(tagName, tslib_1.__assign({}, htmlProps, {\n      className: classes\n    }));\n  };\n\n  Divider.displayName = DISPLAYNAME_PREFIX + \".Divider\";\n  Divider = tslib_1.__decorate([polyfill], Divider);\n  return Divider;\n}(AbstractPureComponent2);\n\nexport { Divider };","/*\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { AbstractPureComponent2, Classes } from \"../../common\";\nimport { DISPLAYNAME_PREFIX } from \"../../common/props\"; // this component is simple enough that tests would be purely tautological.\n\n/* istanbul ignore next */\n\nvar ButtonGroup =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(ButtonGroup, _super);\n\n  function ButtonGroup() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ButtonGroup.prototype.render = function () {\n    var _a;\n\n    var _b = this.props,\n        alignText = _b.alignText,\n        className = _b.className,\n        fill = _b.fill,\n        minimal = _b.minimal,\n        large = _b.large,\n        vertical = _b.vertical,\n        htmlProps = tslib_1.__rest(_b, [\"alignText\", \"className\", \"fill\", \"minimal\", \"large\", \"vertical\"]);\n\n    var buttonGroupClasses = classNames(Classes.BUTTON_GROUP, (_a = {}, _a[Classes.FILL] = fill, _a[Classes.LARGE] = large, _a[Classes.MINIMAL] = minimal, _a[Classes.VERTICAL] = vertical, _a), Classes.alignmentClass(alignText), className);\n    return React.createElement(\"div\", tslib_1.__assign({}, htmlProps, {\n      className: buttonGroupClasses\n    }), this.props.children);\n  };\n\n  ButtonGroup.displayName = DISPLAYNAME_PREFIX + \".ButtonGroup\";\n  ButtonGroup = tslib_1.__decorate([polyfill], ButtonGroup);\n  return ButtonGroup;\n}(AbstractPureComponent2);\n\nexport { ButtonGroup };","/*\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { AbstractPureComponent2, Classes } from \"../../common\";\nimport { DISPLAYNAME_PREFIX } from \"../../common/props\"; // this component is simple enough that tests would be purely tautological.\n\n/* istanbul ignore next */\n\nvar ControlGroup =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(ControlGroup, _super);\n\n  function ControlGroup() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ControlGroup.prototype.render = function () {\n    var _a;\n\n    var _b = this.props,\n        children = _b.children,\n        className = _b.className,\n        fill = _b.fill,\n        vertical = _b.vertical,\n        htmlProps = tslib_1.__rest(_b, [\"children\", \"className\", \"fill\", \"vertical\"]);\n\n    var rootClasses = classNames(Classes.CONTROL_GROUP, (_a = {}, _a[Classes.FILL] = fill, _a[Classes.VERTICAL] = vertical, _a), className);\n    return React.createElement(\"div\", tslib_1.__assign({}, htmlProps, {\n      className: rootClasses\n    }), children);\n  };\n\n  ControlGroup.displayName = DISPLAYNAME_PREFIX + \".ControlGroup\";\n  ControlGroup = tslib_1.__decorate([polyfill], ControlGroup);\n  return ControlGroup;\n}(AbstractPureComponent2);\n\nexport { ControlGroup };","/*\n * Copyright 2016 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { AbstractPureComponent2, Classes } from \"../../common\";\nimport { DISPLAYNAME_PREFIX, removeNonHTMLProps } from \"../../common/props\";\nimport { Icon } from \"../icon/icon\";\nvar DEFAULT_RIGHT_ELEMENT_WIDTH = 10;\n\nvar InputGroup =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(InputGroup, _super);\n\n  function InputGroup() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      rightElementWidth: DEFAULT_RIGHT_ELEMENT_WIDTH\n    };\n    _this.refHandlers = {\n      rightElement: function rightElement(ref) {\n        return _this.rightElement = ref;\n      }\n    };\n    return _this;\n  }\n\n  InputGroup.prototype.render = function () {\n    var _a;\n\n    var _b = this.props,\n        className = _b.className,\n        disabled = _b.disabled,\n        fill = _b.fill,\n        intent = _b.intent,\n        large = _b.large,\n        small = _b.small,\n        leftIcon = _b.leftIcon,\n        round = _b.round;\n    var classes = classNames(Classes.INPUT_GROUP, Classes.intentClass(intent), (_a = {}, _a[Classes.DISABLED] = disabled, _a[Classes.FILL] = fill, _a[Classes.LARGE] = large, _a[Classes.SMALL] = small, _a[Classes.ROUND] = round, _a), className);\n\n    var style = tslib_1.__assign({}, this.props.style, {\n      paddingRight: this.state.rightElementWidth\n    });\n\n    return React.createElement(\"div\", {\n      className: classes\n    }, React.createElement(Icon, {\n      icon: leftIcon\n    }), React.createElement(\"input\", tslib_1.__assign({\n      type: \"text\"\n    }, removeNonHTMLProps(this.props), {\n      className: Classes.INPUT,\n      ref: this.props.inputRef,\n      style: style\n    })), this.maybeRenderRightElement());\n  };\n\n  InputGroup.prototype.componentDidMount = function () {\n    if (this.rightElement != null) {\n      var clientWidth = this.rightElement.clientWidth; // small threshold to prevent infinite loops\n\n      if (Math.abs(clientWidth - this.state.rightElementWidth) > 2) {\n        this.setState({\n          rightElementWidth: clientWidth\n        });\n      }\n    }\n  };\n\n  InputGroup.prototype.maybeRenderRightElement = function () {\n    var rightElement = this.props.rightElement;\n\n    if (rightElement == null) {\n      return undefined;\n    }\n\n    return React.createElement(\"span\", {\n      className: Classes.INPUT_ACTION,\n      ref: this.refHandlers.rightElement\n    }, rightElement);\n  };\n\n  InputGroup.displayName = DISPLAYNAME_PREFIX + \".InputGroup\";\n  InputGroup = tslib_1.__decorate([polyfill], InputGroup);\n  return InputGroup;\n}(AbstractPureComponent2);\n\nexport { InputGroup };","/*\n * Copyright 2018 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { clamp } from \"../../common/utils\";\nexport function clampValue(value, min, max) {\n  // defaultProps won't work if the user passes in null, so just default\n  // to +/- infinity here instead, as a catch-all.\n  var adjustedMin = min != null ? min : -Infinity;\n  var adjustedMax = max != null ? max : Infinity;\n  return clamp(value, adjustedMin, adjustedMax);\n}\nexport function getValueOrEmptyValue(value) {\n  if (value === void 0) {\n    value = \"\";\n  }\n\n  return value.toString();\n}\n/** Returns `true` if the string represents a valid numeric value, like \"1e6\". */\n\nexport function isValueNumeric(value) {\n  // checking if a string is numeric in Typescript is a big pain, because\n  // we can't simply toss a string parameter to isFinite. below is the\n  // essential approach that jQuery uses, which involves subtracting a\n  // parsed numeric value from the string representation of the value. we\n  // need to cast the value to the `any` type to allow this operation\n  // between dissimilar types.\n  return value != null && value - parseFloat(value) + 1 >= 0;\n}\nexport function isValidNumericKeyboardEvent(e) {\n  // unit tests may not include e.key. don't bother disabling those events.\n  if (e.key == null) {\n    return true;\n  } // allow modified key strokes that may involve letters and other\n  // non-numeric/invalid characters (Cmd + A, Cmd + C, Cmd + V, Cmd + X).\n\n\n  if (e.ctrlKey || e.altKey || e.metaKey) {\n    return true;\n  } // keys that print a single character when pressed have a `key` name of\n  // length 1. every other key has a longer `key` name (e.g. \"Backspace\",\n  // \"ArrowUp\", \"Shift\"). since none of those keys can print a character\n  // to the field--and since they may have important native behaviors\n  // beyond printing a character--we don't want to disable their effects.\n\n\n  var isSingleCharKey = e.key.length === 1;\n\n  if (!isSingleCharKey) {\n    return true;\n  } // now we can simply check that the single character that wants to be printed\n  // is a floating-point number character that we're allowed to print.\n\n\n  return isFloatingPointNumericCharacter(e.key);\n}\n/**\n * A regex that matches a string of length 1 (i.e. a standalone character)\n * if and only if it is a floating-point number character as defined by W3C:\n * https://www.w3.org/TR/2012/WD-html-markup-20120329/datatypes.html#common.data.float\n *\n * Floating-point number characters are the only characters that can be\n * printed within a default input[type=\"number\"]. This component should\n * behave the same way when this.props.allowNumericCharactersOnly = true.\n * See here for the input[type=\"number\"].value spec:\n * https://www.w3.org/TR/2012/WD-html-markup-20120329/input.number.html#input.number.attrs.value\n */\n\nvar FLOATING_POINT_NUMBER_CHARACTER_REGEX = /^[Ee0-9\\+\\-\\.]$/;\nexport function isFloatingPointNumericCharacter(character) {\n  return FLOATING_POINT_NUMBER_CHARACTER_REGEX.test(character);\n}\n/**\n * Round the value to have _up to_ the specified maximum precision.\n *\n * This differs from `toFixed(5)` in that trailing zeroes are not added on\n * more precise values, resulting in shorter strings.\n */\n\nexport function toMaxPrecision(value, maxPrecision) {\n  // round the value to have the specified maximum precision (toFixed is the wrong choice,\n  // because it would show trailing zeros in the decimal part out to the specified precision)\n  // source: http://stackoverflow.com/a/18358056/5199574\n  var scaleFactor = Math.pow(10, maxPrecision);\n  return Math.round(value * scaleFactor) / scaleFactor;\n}","/*\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { AbstractPureComponent2, Classes, DISPLAYNAME_PREFIX, Keys, Position, removeNonHTMLProps, Utils } from \"../../common\";\nimport * as Errors from \"../../common/errors\";\nimport { ButtonGroup } from \"../button/buttonGroup\";\nimport { Button } from \"../button/buttons\";\nimport { ControlGroup } from \"./controlGroup\";\nimport { InputGroup } from \"./inputGroup\";\nimport { clampValue, getValueOrEmptyValue, isFloatingPointNumericCharacter, isValidNumericKeyboardEvent, isValueNumeric, toMaxPrecision } from \"./numericInputUtils\";\nvar IncrementDirection;\n\n(function (IncrementDirection) {\n  IncrementDirection[IncrementDirection[\"DOWN\"] = -1] = \"DOWN\";\n  IncrementDirection[IncrementDirection[\"UP\"] = 1] = \"UP\";\n})(IncrementDirection || (IncrementDirection = {}));\n\nvar NON_HTML_PROPS = [\"allowNumericCharactersOnly\", \"buttonPosition\", \"clampValueOnBlur\", \"className\", \"majorStepSize\", \"minorStepSize\", \"onButtonClick\", \"onValueChange\", \"selectAllOnFocus\", \"selectAllOnIncrement\", \"stepSize\"];\n\nvar NumericInput =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(NumericInput, _super);\n\n  function NumericInput() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      shouldSelectAfterUpdate: false,\n      stepMaxPrecision: NumericInput_1.getStepMaxPrecision(_this.props),\n      value: getValueOrEmptyValue(_this.props.value)\n    }; // updating these flags need not trigger re-renders, so don't include them in this.state.\n\n    _this.didPasteEventJustOccur = false;\n    _this.delta = 0;\n    _this.inputElement = null;\n    _this.intervalId = null;\n    _this.incrementButtonHandlers = _this.getButtonEventHandlers(IncrementDirection.UP);\n    _this.decrementButtonHandlers = _this.getButtonEventHandlers(IncrementDirection.DOWN);\n\n    _this.inputRef = function (input) {\n      _this.inputElement = input;\n      Utils.safeInvoke(_this.props.inputRef, input);\n    };\n\n    _this.handleButtonClick = function (e, direction) {\n      var delta = _this.updateDelta(direction, e);\n\n      var nextValue = _this.incrementValue(delta);\n\n      _this.invokeValueCallback(nextValue, _this.props.onButtonClick);\n    };\n\n    _this.stopContinuousChange = function () {\n      _this.delta = 0;\n\n      _this.clearTimeouts();\n\n      clearInterval(_this.intervalId);\n      document.removeEventListener(\"mouseup\", _this.stopContinuousChange);\n    };\n\n    _this.handleContinuousChange = function () {\n      var nextValue = _this.incrementValue(_this.delta);\n\n      _this.invokeValueCallback(nextValue, _this.props.onButtonClick);\n    }; // Callbacks - Input\n    // =================\n\n\n    _this.handleInputFocus = function (e) {\n      // update this state flag to trigger update for input selection (see componentDidUpdate)\n      _this.setState({\n        shouldSelectAfterUpdate: _this.props.selectAllOnFocus\n      });\n\n      Utils.safeInvoke(_this.props.onFocus, e);\n    };\n\n    _this.handleInputBlur = function (e) {\n      // always disable this flag on blur so it's ready for next time.\n      _this.setState({\n        shouldSelectAfterUpdate: false\n      });\n\n      if (_this.props.clampValueOnBlur) {\n        var value = e.target.value;\n\n        var sanitizedValue = _this.getSanitizedValue(value);\n\n        _this.setState({\n          value: sanitizedValue\n        });\n      }\n\n      Utils.safeInvoke(_this.props.onBlur, e);\n    };\n\n    _this.handleInputKeyDown = function (e) {\n      if (_this.props.disabled || _this.props.readOnly) {\n        return;\n      }\n\n      var keyCode = e.keyCode;\n      var direction;\n\n      if (keyCode === Keys.ARROW_UP) {\n        direction = IncrementDirection.UP;\n      } else if (keyCode === Keys.ARROW_DOWN) {\n        direction = IncrementDirection.DOWN;\n      }\n\n      if (direction != null) {\n        // when the input field has focus, some key combinations will modify\n        // the field's selection range. we'll actually want to select all\n        // text in the field after we modify the value on the following\n        // lines. preventing the default selection behavior lets us do that\n        // without interference.\n        e.preventDefault();\n\n        var delta = _this.updateDelta(direction, e);\n\n        _this.incrementValue(delta);\n      }\n\n      Utils.safeInvoke(_this.props.onKeyDown, e);\n    };\n\n    _this.handleInputKeyPress = function (e) {\n      // we prohibit keystrokes in onKeyPress instead of onKeyDown, because\n      // e.key is not trustworthy in onKeyDown in all browsers.\n      if (_this.props.allowNumericCharactersOnly && !isValidNumericKeyboardEvent(e)) {\n        e.preventDefault();\n      }\n\n      Utils.safeInvoke(_this.props.onKeyPress, e);\n    };\n\n    _this.handleInputPaste = function (e) {\n      _this.didPasteEventJustOccur = true;\n      Utils.safeInvoke(_this.props.onPaste, e);\n    };\n\n    _this.handleInputChange = function (e) {\n      var value = e.target.value;\n      var nextValue = value;\n\n      if (_this.props.allowNumericCharactersOnly && _this.didPasteEventJustOccur) {\n        _this.didPasteEventJustOccur = false;\n        var valueChars = value.split(\"\");\n        var sanitizedValueChars = valueChars.filter(isFloatingPointNumericCharacter);\n        var sanitizedValue = sanitizedValueChars.join(\"\");\n        nextValue = sanitizedValue;\n      }\n\n      _this.setState({\n        shouldSelectAfterUpdate: false,\n        value: nextValue\n      });\n    };\n\n    return _this;\n  }\n\n  NumericInput_1 = NumericInput;\n\n  NumericInput.getDerivedStateFromProps = function (props, state) {\n    var nextState = {\n      prevMinProp: props.min,\n      prevMaxProp: props.max,\n      prevValueProp: props.value\n    };\n    var didMinChange = props.min !== state.prevMinProp;\n    var didMaxChange = props.max !== state.prevMaxProp;\n    var didBoundsChange = didMinChange || didMaxChange;\n    var didValuePropChange = props.value !== state.prevValueProp;\n    var value = getValueOrEmptyValue(didValuePropChange ? props.value : state.value);\n    var sanitizedValue = value !== NumericInput_1.VALUE_EMPTY ? NumericInput_1.getSanitizedValue(value,\n    /* delta */\n    0, props.min, props.max) : NumericInput_1.VALUE_EMPTY;\n    var stepMaxPrecision = NumericInput_1.getStepMaxPrecision(props); // if a new min and max were provided that cause the existing value to fall\n    // outside of the new bounds, then clamp the value to the new valid range.\n\n    if (didBoundsChange && sanitizedValue !== state.value) {\n      return tslib_1.__assign({}, nextState, {\n        stepMaxPrecision: stepMaxPrecision,\n        value: sanitizedValue\n      });\n    } else {\n      return tslib_1.__assign({}, nextState, {\n        stepMaxPrecision: stepMaxPrecision,\n        value: value\n      });\n    }\n  }; // Value Helpers\n  // =============\n\n\n  NumericInput.getStepMaxPrecision = function (props) {\n    if (props.minorStepSize != null) {\n      return Utils.countDecimalPlaces(props.minorStepSize);\n    } else {\n      return Utils.countDecimalPlaces(props.stepSize);\n    }\n  };\n\n  NumericInput.getSanitizedValue = function (value, stepMaxPrecision, min, max, delta) {\n    if (delta === void 0) {\n      delta = 0;\n    }\n\n    if (!isValueNumeric(value)) {\n      return NumericInput_1.VALUE_EMPTY;\n    }\n\n    var nextValue = toMaxPrecision(parseFloat(value) + delta, stepMaxPrecision);\n    return clampValue(nextValue, min, max).toString();\n  };\n\n  NumericInput.prototype.render = function () {\n    var _a;\n\n    var _b = this.props,\n        buttonPosition = _b.buttonPosition,\n        className = _b.className,\n        fill = _b.fill,\n        large = _b.large;\n    var containerClasses = classNames(Classes.NUMERIC_INPUT, (_a = {}, _a[Classes.LARGE] = large, _a), className);\n    var buttons = this.renderButtons();\n    return React.createElement(ControlGroup, {\n      className: containerClasses,\n      fill: fill\n    }, buttonPosition === Position.LEFT && buttons, this.renderInput(), buttonPosition === Position.RIGHT && buttons);\n  };\n\n  NumericInput.prototype.componentDidUpdate = function (prevProps, prevState) {\n    _super.prototype.componentDidUpdate.call(this, prevProps, prevState);\n\n    if (this.state.shouldSelectAfterUpdate) {\n      this.inputElement.setSelectionRange(0, this.state.value.length);\n    }\n\n    var didControlledValueChange = this.props.value !== prevProps.value;\n\n    if (!didControlledValueChange && this.state.value !== prevState.value) {\n      this.invokeValueCallback(this.state.value, this.props.onValueChange);\n    }\n  };\n\n  NumericInput.prototype.validateProps = function (nextProps) {\n    var majorStepSize = nextProps.majorStepSize,\n        max = nextProps.max,\n        min = nextProps.min,\n        minorStepSize = nextProps.minorStepSize,\n        stepSize = nextProps.stepSize;\n\n    if (min != null && max != null && min > max) {\n      throw new Error(Errors.NUMERIC_INPUT_MIN_MAX);\n    }\n\n    if (stepSize == null) {\n      throw new Error(Errors.NUMERIC_INPUT_STEP_SIZE_NULL);\n    }\n\n    if (stepSize <= 0) {\n      throw new Error(Errors.NUMERIC_INPUT_STEP_SIZE_NON_POSITIVE);\n    }\n\n    if (minorStepSize && minorStepSize <= 0) {\n      throw new Error(Errors.NUMERIC_INPUT_MINOR_STEP_SIZE_NON_POSITIVE);\n    }\n\n    if (majorStepSize && majorStepSize <= 0) {\n      throw new Error(Errors.NUMERIC_INPUT_MAJOR_STEP_SIZE_NON_POSITIVE);\n    }\n\n    if (minorStepSize && minorStepSize > stepSize) {\n      throw new Error(Errors.NUMERIC_INPUT_MINOR_STEP_SIZE_BOUND);\n    }\n\n    if (majorStepSize && majorStepSize < stepSize) {\n      throw new Error(Errors.NUMERIC_INPUT_MAJOR_STEP_SIZE_BOUND);\n    }\n  }; // Render Helpers\n  // ==============\n\n\n  NumericInput.prototype.renderButtons = function () {\n    var intent = this.props.intent;\n    var disabled = this.props.disabled || this.props.readOnly;\n    return React.createElement(ButtonGroup, {\n      className: Classes.FIXED,\n      key: \"button-group\",\n      vertical: true\n    }, React.createElement(Button, tslib_1.__assign({\n      disabled: disabled,\n      icon: \"chevron-up\",\n      intent: intent\n    }, this.incrementButtonHandlers)), React.createElement(Button, tslib_1.__assign({\n      disabled: disabled,\n      icon: \"chevron-down\",\n      intent: intent\n    }, this.decrementButtonHandlers)));\n  };\n\n  NumericInput.prototype.renderInput = function () {\n    var inputGroupHtmlProps = removeNonHTMLProps(this.props, NON_HTML_PROPS, true);\n    return React.createElement(InputGroup, tslib_1.__assign({\n      autoComplete: \"off\"\n    }, inputGroupHtmlProps, {\n      intent: this.props.intent,\n      inputRef: this.inputRef,\n      large: this.props.large,\n      leftIcon: this.props.leftIcon,\n      onFocus: this.handleInputFocus,\n      onBlur: this.handleInputBlur,\n      onChange: this.handleInputChange,\n      onKeyDown: this.handleInputKeyDown,\n      onKeyPress: this.handleInputKeyPress,\n      onPaste: this.handleInputPaste,\n      rightElement: this.props.rightElement,\n      value: this.state.value\n    }));\n  }; // Callbacks - Buttons\n  // ===================\n\n\n  NumericInput.prototype.getButtonEventHandlers = function (direction) {\n    var _this = this;\n\n    return {\n      // keydown is fired repeatedly when held so it's implicitly continuous\n      onKeyDown: function onKeyDown(evt) {\n        if (Keys.isKeyboardClick(evt.keyCode)) {\n          _this.handleButtonClick(evt, direction);\n        }\n      },\n      onMouseDown: function onMouseDown(evt) {\n        _this.handleButtonClick(evt, direction);\n\n        _this.startContinuousChange();\n      }\n    };\n  };\n\n  NumericInput.prototype.startContinuousChange = function () {\n    var _this = this; // The button's onMouseUp event handler doesn't fire if the user\n    // releases outside of the button, so we need to watch all the way\n    // from the top.\n\n\n    document.addEventListener(\"mouseup\", this.stopContinuousChange); // Initial delay is slightly longer to prevent the user from\n    // accidentally triggering the continuous increment/decrement.\n\n    this.setTimeout(function () {\n      _this.intervalId = window.setInterval(_this.handleContinuousChange, NumericInput_1.CONTINUOUS_CHANGE_INTERVAL);\n    }, NumericInput_1.CONTINUOUS_CHANGE_DELAY);\n  };\n\n  NumericInput.prototype.invokeValueCallback = function (value, callback) {\n    Utils.safeInvoke(callback, +value, value);\n  };\n\n  NumericInput.prototype.incrementValue = function (delta) {\n    // pretend we're incrementing from 0 if currValue is empty\n    var currValue = this.state.value || NumericInput_1.VALUE_ZERO;\n    var nextValue = this.getSanitizedValue(currValue, delta);\n    this.setState({\n      shouldSelectAfterUpdate: this.props.selectAllOnIncrement,\n      value: nextValue\n    });\n    return nextValue;\n  };\n\n  NumericInput.prototype.getIncrementDelta = function (direction, isShiftKeyPressed, isAltKeyPressed) {\n    var _a = this.props,\n        majorStepSize = _a.majorStepSize,\n        minorStepSize = _a.minorStepSize,\n        stepSize = _a.stepSize;\n\n    if (isShiftKeyPressed && majorStepSize != null) {\n      return direction * majorStepSize;\n    } else if (isAltKeyPressed && minorStepSize != null) {\n      return direction * minorStepSize;\n    } else {\n      return direction * stepSize;\n    }\n  };\n\n  NumericInput.prototype.getSanitizedValue = function (value, delta) {\n    if (delta === void 0) {\n      delta = 0;\n    }\n\n    return NumericInput_1.getSanitizedValue(value, this.state.stepMaxPrecision, this.props.min, this.props.max, delta);\n  };\n\n  NumericInput.prototype.updateDelta = function (direction, e) {\n    this.delta = this.getIncrementDelta(direction, e.shiftKey, e.altKey);\n    return this.delta;\n  };\n\n  var NumericInput_1;\n  NumericInput.displayName = DISPLAYNAME_PREFIX + \".NumericInput\";\n  NumericInput.VALUE_EMPTY = \"\";\n  NumericInput.VALUE_ZERO = \"0\";\n  NumericInput.defaultProps = {\n    allowNumericCharactersOnly: true,\n    buttonPosition: Position.RIGHT,\n    clampValueOnBlur: false,\n    large: false,\n    majorStepSize: 10,\n    minorStepSize: 0.1,\n    selectAllOnFocus: false,\n    selectAllOnIncrement: false,\n    stepSize: 1,\n    value: NumericInput_1.VALUE_EMPTY\n  };\n  NumericInput.CONTINUOUS_CHANGE_DELAY = 300;\n  NumericInput.CONTINUOUS_CHANGE_INTERVAL = 100;\n  NumericInput = NumericInput_1 = tslib_1.__decorate([polyfill], NumericInput);\n  return NumericInput;\n}(AbstractPureComponent2);\n\nexport { NumericInput };","/*\n * Copyright 2016 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { AbstractPureComponent2, Classes, Position } from \"../../common\";\nimport { safeInvoke } from \"../../common/utils\";\nimport { Popover } from \"../popover/popover\";\nvar POPPER_MODIFIERS = {\n  preventOverflow: {\n    boundariesElement: \"viewport\"\n  }\n};\nvar TRANSITION_DURATION = 100;\n/* istanbul ignore next */\n\nvar ContextMenu =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(ContextMenu, _super);\n\n  function ContextMenu() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      isDarkTheme: false,\n      isOpen: false,\n      menu: null,\n      offset: null\n    };\n\n    _this.cancelContextMenu = function (e) {\n      return e.preventDefault();\n    };\n\n    _this.handleBackdropContextMenu = function (e) {\n      // React function to remove from the event pool, useful when using a event within a callback\n      e.persist();\n      e.preventDefault(); // wait for backdrop to disappear so we can find the \"real\" element at event coordinates.\n      // timeout duration is equivalent to transition duration so we know it's animated out.\n\n      _this.setTimeout(function () {\n        // retrigger context menu event at the element beneath the backdrop.\n        // if it has a `contextmenu` event handler then it'll be invoked.\n        // if it doesn't, no native menu will show (at least on OSX) :(\n        var newTarget = document.elementFromPoint(e.clientX, e.clientY);\n        newTarget.dispatchEvent(new MouseEvent(\"contextmenu\", e));\n      }, TRANSITION_DURATION);\n    };\n\n    _this.handlePopoverInteraction = function (nextOpenState) {\n      if (!nextOpenState) {\n        // delay the actual hiding till the event queue clears\n        // to avoid flicker of opening twice\n        requestAnimationFrame(function () {\n          return _this.hide();\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  ContextMenu.prototype.render = function () {\n    var _a; // prevent right-clicking in a context menu\n\n\n    var content = React.createElement(\"div\", {\n      onContextMenu: this.cancelContextMenu\n    }, this.state.menu);\n    var popoverClassName = classNames((_a = {}, _a[Classes.DARK] = this.state.isDarkTheme, _a)); // HACKHACK: workaround until we have access to Popper#scheduleUpdate().\n    // https://github.com/palantir/blueprint/issues/692\n    // Generate key based on offset so a new Popover instance is created\n    // when offset changes, to force recomputing position.\n\n    var key = this.state.offset == null ? \"\" : this.state.offset.left + \"x\" + this.state.offset.top; // wrap the popover in a positioned div to make sure it is properly\n    // offset on the screen.\n\n    return React.createElement(\"div\", {\n      className: Classes.CONTEXT_MENU_POPOVER_TARGET,\n      style: this.state.offset\n    }, React.createElement(Popover, tslib_1.__assign({}, this.props, {\n      backdropProps: {\n        onContextMenu: this.handleBackdropContextMenu\n      },\n      content: content,\n      enforceFocus: false,\n      key: key,\n      hasBackdrop: true,\n      isOpen: this.state.isOpen,\n      minimal: true,\n      modifiers: POPPER_MODIFIERS,\n      onInteraction: this.handlePopoverInteraction,\n      position: Position.RIGHT_TOP,\n      popoverClassName: popoverClassName,\n      target: React.createElement(\"div\", null),\n      transitionDuration: TRANSITION_DURATION\n    })));\n  };\n\n  ContextMenu.prototype.show = function (menu, offset, onClose, isDarkTheme) {\n    this.setState({\n      isOpen: true,\n      menu: menu,\n      offset: offset,\n      onClose: onClose,\n      isDarkTheme: isDarkTheme\n    });\n  };\n\n  ContextMenu.prototype.hide = function () {\n    safeInvoke(this.state.onClose);\n    this.setState({\n      isOpen: false,\n      onClose: undefined\n    });\n  };\n\n  ContextMenu = tslib_1.__decorate([polyfill], ContextMenu);\n  return ContextMenu;\n}(AbstractPureComponent2);\n\nvar contextMenuElement;\nvar contextMenu;\n/**\n * Show the given menu element at the given offset from the top-left corner of the viewport.\n * The menu will appear below-right of this point and will flip to below-left if there is not enough\n * room onscreen. The optional callback will be invoked when this menu closes.\n */\n\nexport function show(menu, offset, onClose, isDarkTheme) {\n  if (contextMenuElement == null) {\n    contextMenuElement = document.createElement(\"div\");\n    contextMenuElement.classList.add(Classes.CONTEXT_MENU);\n    document.body.appendChild(contextMenuElement);\n    contextMenu = ReactDOM.render(React.createElement(ContextMenu, {\n      onClosed: remove\n    }), contextMenuElement);\n  }\n\n  contextMenu.show(menu, offset, onClose, isDarkTheme);\n}\n/** Hide the open context menu. */\n\nexport function hide() {\n  if (contextMenu != null) {\n    contextMenu.hide();\n  }\n}\n/** Return whether a context menu is currently open. */\n\nexport function isOpen() {\n  return contextMenu != null && contextMenu.state.isOpen;\n}\n\nfunction remove() {\n  if (contextMenuElement != null) {\n    ReactDOM.unmountComponentAtNode(contextMenuElement);\n    contextMenuElement.remove();\n    contextMenuElement = null;\n    contextMenu = null;\n  }\n}","/*\n * Copyright 2016 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport { CONTEXTMENU_WARN_DECORATOR_NEEDS_REACT_ELEMENT, CONTEXTMENU_WARN_DECORATOR_NO_METHOD } from \"../../common/errors\";\nimport { getDisplayName, isFunction, safeInvoke } from \"../../common/utils\";\nimport { isDarkTheme } from \"../../common/utils/isDarkTheme\";\nimport * as ContextMenu from \"./contextMenu\";\nexport function ContextMenuTarget(WrappedComponent) {\n  var _a;\n\n  if (!isFunction(WrappedComponent.prototype.renderContextMenu)) {\n    console.warn(CONTEXTMENU_WARN_DECORATOR_NO_METHOD);\n  }\n\n  return _a =\n  /** @class */\n  function (_super) {\n    tslib_1.__extends(ContextMenuTargetClass, _super);\n\n    function ContextMenuTargetClass() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    ContextMenuTargetClass.prototype.render = function () {\n      var _this = this;\n\n      var element = _super.prototype.render.call(this);\n\n      if (element == null) {\n        // always return `element` in case caller is distinguishing between `null` and `undefined`\n        return element;\n      }\n\n      if (!React.isValidElement(element)) {\n        console.warn(CONTEXTMENU_WARN_DECORATOR_NEEDS_REACT_ELEMENT);\n        return element;\n      }\n\n      var oldOnContextMenu = element.props.onContextMenu;\n\n      var onContextMenu = function onContextMenu(e) {\n        // support nested menus (inner menu target would have called preventDefault())\n        if (e.defaultPrevented) {\n          return;\n        }\n\n        if (isFunction(_this.renderContextMenu)) {\n          var menu = _this.renderContextMenu(e);\n\n          if (menu != null) {\n            var darkTheme = isDarkTheme(ReactDOM.findDOMNode(_this));\n            e.preventDefault();\n            ContextMenu.show(menu, {\n              left: e.clientX,\n              top: e.clientY\n            }, _this.onContextMenuClose, darkTheme);\n          }\n        }\n\n        safeInvoke(oldOnContextMenu, e);\n      };\n\n      return React.cloneElement(element, {\n        onContextMenu: onContextMenu\n      });\n    };\n\n    return ContextMenuTargetClass;\n  }(WrappedComponent), _a.displayName = \"ContextMenuTarget(\" + getDisplayName(WrappedComponent) + \")\", _a;\n}","/*\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Classes } from \"../\";\nexport function isDarkTheme(element) {\n  return element instanceof Element && element.closest(\".\" + Classes.DARK) != null;\n}","/*\n * Copyright 2016 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport var KeyCodes = {\n  8: \"backspace\",\n  9: \"tab\",\n  13: \"enter\",\n  20: \"capslock\",\n  27: \"esc\",\n  32: \"space\",\n  33: \"pageup\",\n  34: \"pagedown\",\n  35: \"end\",\n  36: \"home\",\n  37: \"left\",\n  38: \"up\",\n  39: \"right\",\n  40: \"down\",\n  45: \"ins\",\n  46: \"del\",\n  // number keys\n  48: \"0\",\n  49: \"1\",\n  50: \"2\",\n  51: \"3\",\n  52: \"4\",\n  53: \"5\",\n  54: \"6\",\n  55: \"7\",\n  56: \"8\",\n  57: \"9\",\n  // alphabet\n  65: \"a\",\n  66: \"b\",\n  67: \"c\",\n  68: \"d\",\n  69: \"e\",\n  70: \"f\",\n  71: \"g\",\n  72: \"h\",\n  73: \"i\",\n  74: \"j\",\n  75: \"k\",\n  76: \"l\",\n  77: \"m\",\n  78: \"n\",\n  79: \"o\",\n  80: \"p\",\n  81: \"q\",\n  82: \"r\",\n  83: \"s\",\n  84: \"t\",\n  85: \"u\",\n  86: \"v\",\n  87: \"w\",\n  88: \"x\",\n  89: \"y\",\n  90: \"z\",\n  // punctuation\n  106: \"*\",\n  107: \"+\",\n  109: \"-\",\n  110: \".\",\n  111: \"/\",\n  186: \";\",\n  187: \"=\",\n  188: \",\",\n  189: \"-\",\n  190: \".\",\n  191: \"/\",\n  192: \"`\",\n  219: \"[\",\n  220: \"\\\\\",\n  221: \"]\",\n  222: \"'\"\n};\nexport var Modifiers = {\n  16: \"shift\",\n  17: \"ctrl\",\n  18: \"alt\",\n  91: \"meta\",\n  93: \"meta\",\n  224: \"meta\"\n};\nexport var ModifierBitMasks = {\n  alt: 1,\n  ctrl: 2,\n  meta: 4,\n  shift: 8\n};\nexport var Aliases = {\n  cmd: \"meta\",\n  command: \"meta\",\n  escape: \"esc\",\n  minus: \"-\",\n  mod: isMac() ? \"meta\" : \"ctrl\",\n  option: \"alt\",\n  plus: \"+\",\n  return: \"enter\",\n  win: \"meta\"\n}; // alph sorting is unintuitive here\n// tslint:disable object-literal-sort-keys\n\nexport var ShiftKeys = {\n  \"~\": \"`\",\n  \"!\": \"1\",\n  \"@\": \"2\",\n  \"#\": \"3\",\n  $: \"4\",\n  \"%\": \"5\",\n  \"^\": \"6\",\n  \"&\": \"7\",\n  \"*\": \"8\",\n  \"(\": \"9\",\n  \")\": \"0\",\n  _: \"-\",\n  \"+\": \"=\",\n  \"{\": \"[\",\n  \"}\": \"]\",\n  \"|\": \"\\\\\",\n  \":\": \";\",\n  '\"': \"'\",\n  \"<\": \",\",\n  \">\": \".\",\n  \"?\": \"/\"\n}; // tslint:enable object-literal-sort-keys\n// Function keys\n\nfor (var i = 1; i <= 12; ++i) {\n  KeyCodes[111 + i] = \"f\" + i;\n} // Numpad\n\n\nfor (var i = 0; i <= 9; ++i) {\n  KeyCodes[96 + i] = \"num\" + i.toString();\n}\n\nexport function comboMatches(a, b) {\n  return a.modifiers === b.modifiers && a.key === b.key;\n}\n/**\n * Converts a key combo string into a key combo object. Key combos include\n * zero or more modifier keys, such as `shift` or `alt`, and exactly one\n * action key, such as `A`, `enter`, or `left`.\n *\n * For action keys that require a shift, e.g. `@` or `|`, we inlude the\n * necessary `shift` modifier and automatically convert the action key to the\n * unshifted version. For example, `@` is equivalent to `shift+2`.\n */\n\nexport var parseKeyCombo = function parseKeyCombo(combo) {\n  var pieces = combo.replace(/\\s/g, \"\").toLowerCase().split(\"+\");\n  var modifiers = 0;\n  var key = null;\n\n  for (var _i = 0, pieces_1 = pieces; _i < pieces_1.length; _i++) {\n    var piece = pieces_1[_i];\n\n    if (piece === \"\") {\n      throw new Error(\"Failed to parse key combo \\\"\" + combo + \"\\\".\\n                Valid key combos look like \\\"cmd + plus\\\", \\\"shift+p\\\", or \\\"!\\\"\");\n    }\n\n    if (Aliases[piece] != null) {\n      piece = Aliases[piece];\n    }\n\n    if (ModifierBitMasks[piece] != null) {\n      modifiers += ModifierBitMasks[piece];\n    } else if (ShiftKeys[piece] != null) {\n      // tslint:disable-next-line no-string-literal\n      modifiers += ModifierBitMasks[\"shift\"];\n      key = ShiftKeys[piece];\n    } else {\n      key = piece.toLowerCase();\n    }\n  }\n\n  return {\n    modifiers: modifiers,\n    key: key\n  };\n};\n/**\n * Converts a keyboard event into a valid combo prop string\n */\n\nexport var getKeyComboString = function getKeyComboString(e) {\n  var keys = []; // modifiers first\n\n  if (e.ctrlKey) {\n    keys.push(\"ctrl\");\n  }\n\n  if (e.altKey) {\n    keys.push(\"alt\");\n  }\n\n  if (e.shiftKey) {\n    keys.push(\"shift\");\n  }\n\n  if (e.metaKey) {\n    keys.push(\"meta\");\n  }\n\n  var which = e.which;\n\n  if (Modifiers[which] != null) {// no action key\n  } else if (KeyCodes[which] != null) {\n    keys.push(KeyCodes[which]);\n  } else {\n    keys.push(String.fromCharCode(which).toLowerCase());\n  } // join keys with plusses\n\n\n  return keys.join(\" + \");\n};\n/**\n * Determines the key combo object from the given keyboard event. Again, a key\n * combo includes zero or more modifiers (represented by a bitmask) and one\n * action key, which we determine from the `e.which` property of the keyboard\n * event.\n */\n\nexport var getKeyCombo = function getKeyCombo(e) {\n  var key = null;\n  var which = e.which;\n\n  if (Modifiers[which] != null) {// keep key null\n  } else if (KeyCodes[which] != null) {\n    key = KeyCodes[which];\n  } else {\n    key = String.fromCharCode(which).toLowerCase();\n  }\n\n  var modifiers = 0; // tslint:disable no-string-literal\n\n  if (e.altKey) {\n    modifiers += ModifierBitMasks[\"alt\"];\n  }\n\n  if (e.ctrlKey) {\n    modifiers += ModifierBitMasks[\"ctrl\"];\n  }\n\n  if (e.metaKey) {\n    modifiers += ModifierBitMasks[\"meta\"];\n  }\n\n  if (e.shiftKey) {\n    modifiers += ModifierBitMasks[\"shift\"];\n  } // tslint:enable\n\n\n  return {\n    modifiers: modifiers,\n    key: key\n  };\n};\n/**\n * Splits a key combo string into its constituent key values and looks up\n * aliases, such as `return` -> `enter`.\n *\n * Unlike the parseKeyCombo method, this method does NOT convert shifted\n * action keys. So `\"@\"` will NOT be converted to `[\"shift\", \"2\"]`).\n */\n\nexport var normalizeKeyCombo = function normalizeKeyCombo(combo, platformOverride) {\n  var keys = combo.replace(/\\s/g, \"\").split(\"+\");\n  return keys.map(function (key) {\n    var keyName = Aliases[key] != null ? Aliases[key] : key;\n    return keyName === \"meta\" ? isMac(platformOverride) ? \"cmd\" : \"ctrl\" : keyName;\n  });\n};\n/* tslint:enable:no-string-literal */\n\nfunction isMac(platformOverride) {\n  var platform = platformOverride != null ? platformOverride : typeof navigator !== \"undefined\" ? navigator.platform : undefined;\n  return platform == null ? false : /Mac|iPod|iPhone|iPad/.test(platform);\n}","/*\n * Copyright 2018 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { AbstractPureComponent2, Classes } from \"../../common\";\nimport * as Errors from \"../../common/errors\";\nimport { getPositionIgnoreAngles, isPositionHorizontal } from \"../../common/position\";\nimport { DISPLAYNAME_PREFIX } from \"../../common/props\";\nimport { Button } from \"../button/buttons\";\nimport { H4 } from \"../html/html\";\nimport { Icon } from \"../icon/icon\";\nimport { Overlay } from \"../overlay/overlay\";\n\nvar Drawer =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(Drawer, _super);\n\n  function Drawer() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Drawer.prototype.render = function () {\n    var _a, _b;\n\n    var _c = this.props,\n        size = _c.size,\n        style = _c.style,\n        position = _c.position,\n        vertical = _c.vertical;\n    var realPosition = position ? getPositionIgnoreAngles(position) : null;\n    var classes = classNames(Classes.DRAWER, (_a = {}, _a[Classes.VERTICAL] = !realPosition && vertical, _a[realPosition ? Classes.positionClass(realPosition) : \"\"] = true, _a), this.props.className);\n    var styleProp = size == null ? style : tslib_1.__assign({}, style, (_b = {}, _b[(realPosition ? isPositionHorizontal(realPosition) : vertical) ? \"height\" : \"width\"] = size, _b));\n    return React.createElement(Overlay, tslib_1.__assign({}, this.props, {\n      className: Classes.OVERLAY_CONTAINER\n    }), React.createElement(\"div\", {\n      className: classes,\n      style: styleProp\n    }, this.maybeRenderHeader(), this.props.children));\n  };\n\n  Drawer.prototype.validateProps = function (props) {\n    if (props.title == null) {\n      if (props.icon != null) {\n        console.warn(Errors.DIALOG_WARN_NO_HEADER_ICON);\n      }\n\n      if (props.isCloseButtonShown != null) {\n        console.warn(Errors.DIALOG_WARN_NO_HEADER_CLOSE_BUTTON);\n      }\n    }\n\n    if (props.position != null) {\n      if (props.vertical) {\n        console.warn(Errors.DRAWER_VERTICAL_IS_IGNORED);\n      }\n\n      if (props.position !== getPositionIgnoreAngles(props.position)) {\n        console.warn(Errors.DRAWER_ANGLE_POSITIONS_ARE_CASTED);\n      }\n    }\n  };\n\n  Drawer.prototype.maybeRenderCloseButton = function () {\n    // `isCloseButtonShown` can't be defaulted through default props because of props validation\n    // so this check actually defaults it to true (fails only if directly set to false)\n    if (this.props.isCloseButtonShown !== false) {\n      return React.createElement(Button, {\n        \"aria-label\": \"Close\",\n        className: Classes.DIALOG_CLOSE_BUTTON,\n        icon: React.createElement(Icon, {\n          icon: \"small-cross\",\n          iconSize: Icon.SIZE_LARGE\n        }),\n        minimal: true,\n        onClick: this.props.onClose\n      });\n    } else {\n      return null;\n    }\n  };\n\n  Drawer.prototype.maybeRenderHeader = function () {\n    var _a = this.props,\n        icon = _a.icon,\n        title = _a.title;\n\n    if (title == null) {\n      return null;\n    }\n\n    return React.createElement(\"div\", {\n      className: Classes.DRAWER_HEADER\n    }, React.createElement(Icon, {\n      icon: icon,\n      iconSize: Icon.SIZE_LARGE\n    }), React.createElement(H4, null, title), this.maybeRenderCloseButton());\n  };\n\n  Drawer.displayName = DISPLAYNAME_PREFIX + \".Drawer\";\n  Drawer.defaultProps = {\n    canOutsideClickClose: true,\n    isOpen: false,\n    position: null,\n    style: {},\n    vertical: false\n  };\n  Drawer.SIZE_SMALL = \"360px\";\n  Drawer.SIZE_STANDARD = \"50%\";\n  Drawer.SIZE_LARGE = \"90%\";\n  Drawer = tslib_1.__decorate([polyfill], Drawer);\n  return Drawer;\n}(AbstractPureComponent2);\n\nexport { Drawer };","/*\n * Copyright 2016 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { AbstractPureComponent2, Classes, DISPLAYNAME_PREFIX } from \"../../common\";\nimport { Icon } from \"../icon/icon\";\nimport { normalizeKeyCombo } from \"./hotkeyParser\";\nvar KeyIcons = {\n  alt: \"key-option\",\n  cmd: \"key-command\",\n  ctrl: \"key-control\",\n  delete: \"key-delete\",\n  down: \"arrow-down\",\n  enter: \"key-enter\",\n  left: \"arrow-left\",\n  meta: \"key-command\",\n  right: \"arrow-right\",\n  shift: \"key-shift\",\n  up: \"arrow-up\"\n};\n\nvar KeyCombo =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(KeyCombo, _super);\n\n  function KeyCombo() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.renderKey = function (key, index) {\n      var icon = KeyIcons[key];\n      var reactKey = \"key-\" + index;\n      return icon == null ? React.createElement(\"kbd\", {\n        className: Classes.KEY,\n        key: reactKey\n      }, key) : React.createElement(\"kbd\", {\n        className: classNames(Classes.KEY, Classes.MODIFIER_KEY),\n        key: reactKey\n      }, React.createElement(Icon, {\n        icon: icon\n      }), \" \", key);\n    };\n\n    _this.renderMinimalKey = function (key, index) {\n      var icon = KeyIcons[key];\n      return icon == null ? key : React.createElement(Icon, {\n        icon: icon,\n        key: \"key-\" + index\n      });\n    };\n\n    return _this;\n  }\n\n  KeyCombo.prototype.render = function () {\n    var _a = this.props,\n        className = _a.className,\n        combo = _a.combo,\n        minimal = _a.minimal;\n    var keys = normalizeKeyCombo(combo).map(function (key) {\n      return key.length === 1 ? key.toUpperCase() : key;\n    }).map(minimal ? this.renderMinimalKey : this.renderKey);\n    return React.createElement(\"span\", {\n      className: classNames(Classes.KEY_COMBO, className)\n    }, keys);\n  };\n\n  KeyCombo.displayName = DISPLAYNAME_PREFIX + \".KeyCombo\";\n  KeyCombo = tslib_1.__decorate([polyfill], KeyCombo);\n  return KeyCombo;\n}(AbstractPureComponent2);\n\nexport { KeyCombo };","/*\n * Copyright 2016 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { AbstractPureComponent2, Classes, DISPLAYNAME_PREFIX } from \"../../common\";\nimport { KeyCombo } from \"./keyCombo\";\n\nvar Hotkey =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(Hotkey, _super);\n\n  function Hotkey() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Hotkey.prototype.render = function () {\n    var _a = this.props,\n        label = _a.label,\n        className = _a.className,\n        spreadableProps = tslib_1.__rest(_a, [\"label\", \"className\"]);\n\n    var rootClasses = classNames(Classes.HOTKEY, className);\n    return React.createElement(\"div\", {\n      className: rootClasses\n    }, React.createElement(\"div\", {\n      className: Classes.HOTKEY_LABEL\n    }, label), React.createElement(KeyCombo, tslib_1.__assign({}, spreadableProps)));\n  };\n\n  Hotkey.prototype.validateProps = function (props) {\n    if (props.global !== true && props.group == null) {\n      throw new Error(\"non-global <Hotkey>s must define a group\");\n    }\n  };\n\n  Hotkey.displayName = DISPLAYNAME_PREFIX + \".Hotkey\";\n  Hotkey.defaultProps = {\n    allowInInput: false,\n    disabled: false,\n    global: false,\n    preventDefault: false,\n    stopPropagation: false\n  };\n  Hotkey = tslib_1.__decorate([polyfill], Hotkey);\n  return Hotkey;\n}(AbstractPureComponent2);\n\nexport { Hotkey };","/*\n * Copyright 2016 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { AbstractPureComponent2, Classes, DISPLAYNAME_PREFIX } from \"../../common\";\nimport { HOTKEYS_HOTKEY_CHILDREN } from \"../../common/errors\";\nimport { isElementOfType } from \"../../common/utils\";\nimport { H4 } from \"../html/html\";\nimport { Hotkey } from \"./hotkey\";\nexport { Hotkey } from \"./hotkey\";\nexport { KeyCombo } from \"./keyCombo\";\nexport { HotkeysTarget } from \"./hotkeysTarget\";\nexport { comboMatches, getKeyCombo, getKeyComboString, parseKeyCombo } from \"./hotkeyParser\";\nexport { hideHotkeysDialog, setHotkeysDialogProps } from \"./hotkeysDialog\";\n\nvar Hotkeys =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(Hotkeys, _super);\n\n  function Hotkeys() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Hotkeys.prototype.render = function () {\n    var hotkeys = React.Children.map(this.props.children, function (child) {\n      return child.props;\n    }); // sort by group label alphabetically, prioritize globals\n\n    hotkeys.sort(function (a, b) {\n      if (a.global === b.global) {\n        return a.group.localeCompare(b.group);\n      }\n\n      return a.global ? -1 : 1;\n    });\n    var lastGroup = null;\n    var elems = [];\n\n    for (var _i = 0, hotkeys_1 = hotkeys; _i < hotkeys_1.length; _i++) {\n      var hotkey = hotkeys_1[_i];\n      var groupLabel = hotkey.group;\n\n      if (groupLabel !== lastGroup) {\n        elems.push(React.createElement(H4, {\n          key: \"group-\" + elems.length\n        }, groupLabel));\n        lastGroup = groupLabel;\n      }\n\n      elems.push(React.createElement(Hotkey, tslib_1.__assign({\n        key: elems.length\n      }, hotkey)));\n    }\n\n    var rootClasses = classNames(Classes.HOTKEY_COLUMN, this.props.className);\n    return React.createElement(\"div\", {\n      className: rootClasses\n    }, elems);\n  };\n\n  Hotkeys.prototype.validateProps = function (props) {\n    React.Children.forEach(props.children, function (child) {\n      if (!isElementOfType(child, Hotkey)) {\n        throw new Error(HOTKEYS_HOTKEY_CHILDREN);\n      }\n    });\n  };\n\n  Hotkeys.displayName = DISPLAYNAME_PREFIX + \".Hotkeys\";\n  Hotkeys.defaultProps = {\n    tabIndex: 0\n  };\n  Hotkeys = tslib_1.__decorate([polyfill], Hotkeys);\n  return Hotkeys;\n}(AbstractPureComponent2);\n\nexport { Hotkeys };","/*\n * Copyright 2016 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport { Classes } from \"../../common\";\nimport { Dialog } from \"../../components\";\nimport { Hotkey } from \"./hotkey\";\nimport { Hotkeys } from \"./hotkeys\";\n/**\n * The delay before showing or hiding the dialog. Should be long enough to\n * allow all registered hotkey listeners to execute first.\n */\n\nvar DELAY_IN_MS = 10;\n\nvar HotkeysDialog =\n/** @class */\nfunction () {\n  function HotkeysDialog() {\n    var _this = this;\n\n    this.componentProps = {\n      globalHotkeysGroup: \"Global hotkeys\"\n    };\n    this.hotkeysQueue = [];\n    this.isDialogShowing = false;\n\n    this.show = function () {\n      _this.isDialogShowing = true;\n\n      _this.render();\n    };\n\n    this.hide = function () {\n      _this.isDialogShowing = false;\n\n      _this.render();\n    };\n  }\n\n  HotkeysDialog.prototype.render = function () {\n    if (this.container == null) {\n      this.container = this.getContainer();\n    }\n\n    ReactDOM.render(this.renderComponent(), this.container);\n  };\n\n  HotkeysDialog.prototype.unmount = function () {\n    if (this.container != null) {\n      ReactDOM.unmountComponentAtNode(this.container);\n      this.container.remove();\n      delete this.container;\n    }\n  };\n  /**\n   * Because hotkeys can be registered globally and locally and because\n   * event ordering cannot be guaranteed, we use this debouncing method to\n   * allow all hotkey listeners to fire and add their hotkeys to the dialog.\n   *\n   * 10msec after the last listener adds their hotkeys, we render the dialog\n   * and clear the queue.\n   */\n\n\n  HotkeysDialog.prototype.enqueueHotkeysForDisplay = function (hotkeys) {\n    this.hotkeysQueue.push(hotkeys); // reset timeout for debounce\n\n    window.clearTimeout(this.showTimeoutToken);\n    this.showTimeoutToken = window.setTimeout(this.show, DELAY_IN_MS);\n  };\n\n  HotkeysDialog.prototype.hideAfterDelay = function () {\n    window.clearTimeout(this.hideTimeoutToken);\n    this.hideTimeoutToken = window.setTimeout(this.hide, DELAY_IN_MS);\n  };\n\n  HotkeysDialog.prototype.isShowing = function () {\n    return this.isDialogShowing;\n  };\n\n  HotkeysDialog.prototype.getContainer = function () {\n    if (this.container == null) {\n      this.container = document.createElement(\"div\");\n      this.container.classList.add(Classes.PORTAL);\n      document.body.appendChild(this.container);\n    }\n\n    return this.container;\n  };\n\n  HotkeysDialog.prototype.renderComponent = function () {\n    return React.createElement(Dialog, tslib_1.__assign({}, this.componentProps, {\n      className: classNames(Classes.HOTKEY_DIALOG, this.componentProps.className),\n      isOpen: this.isDialogShowing,\n      onClose: this.hide\n    }), React.createElement(\"div\", {\n      className: Classes.DIALOG_BODY\n    }, this.renderHotkeys()));\n  };\n\n  HotkeysDialog.prototype.renderHotkeys = function () {\n    var _this = this;\n\n    var hotkeys = this.emptyHotkeyQueue();\n    var elements = hotkeys.map(function (hotkey, index) {\n      var group = hotkey.global === true && hotkey.group == null ? _this.componentProps.globalHotkeysGroup : hotkey.group;\n      return React.createElement(Hotkey, tslib_1.__assign({\n        key: index\n      }, hotkey, {\n        group: group\n      }));\n    });\n    return React.createElement(Hotkeys, null, elements);\n  };\n\n  HotkeysDialog.prototype.emptyHotkeyQueue = function () {\n    // flatten then empty the hotkeys queue\n    var hotkeys = this.hotkeysQueue.reduce(function (arr, queued) {\n      return arr.concat(queued);\n    }, []);\n    this.hotkeysQueue.length = 0;\n    return hotkeys;\n  };\n\n  return HotkeysDialog;\n}(); // singleton instance\n\n\nvar HOTKEYS_DIALOG = new HotkeysDialog();\nexport function isHotkeysDialogShowing() {\n  return HOTKEYS_DIALOG.isShowing();\n}\nexport function setHotkeysDialogProps(props) {\n  for (var key in props) {\n    if (props.hasOwnProperty(key)) {\n      HOTKEYS_DIALOG.componentProps[key] = props[key];\n    }\n  }\n}\nexport function showHotkeysDialog(hotkeys) {\n  HOTKEYS_DIALOG.enqueueHotkeysForDisplay(hotkeys);\n}\nexport function hideHotkeysDialog() {\n  HOTKEYS_DIALOG.hide();\n}\n/**\n * Use this function instead of `hideHotkeysDialog` if you need to ensure that all hotkey listeners\n * have time to execute with the dialog in a consistent open state. This can avoid flickering the\n * dialog between open and closedstates as successive listeners fire.\n */\n\nexport function hideHotkeysDialogAfterDelay() {\n  HOTKEYS_DIALOG.hideAfterDelay();\n}","/*\n * Copyright 2016 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Children } from \"react\";\nimport { isElementOfType, safeInvoke } from \"../../common/utils\";\nimport { Hotkey } from \"./hotkey\";\nimport { comboMatches, getKeyCombo, parseKeyCombo } from \"./hotkeyParser\";\nimport { hideHotkeysDialogAfterDelay, isHotkeysDialogShowing, showHotkeysDialog } from \"./hotkeysDialog\";\nvar SHOW_DIALOG_KEY = \"?\";\nexport var HotkeyScope;\n\n(function (HotkeyScope) {\n  HotkeyScope[\"LOCAL\"] = \"local\";\n  HotkeyScope[\"GLOBAL\"] = \"global\";\n})(HotkeyScope || (HotkeyScope = {}));\n\nvar HotkeysEvents =\n/** @class */\nfunction () {\n  function HotkeysEvents(scope) {\n    var _this = this;\n\n    this.scope = scope;\n    this.actions = [];\n\n    this.handleKeyDown = function (e) {\n      var combo = getKeyCombo(e);\n\n      var isTextInput = _this.isTextInput(e);\n\n      if (!isTextInput && comboMatches(parseKeyCombo(SHOW_DIALOG_KEY), combo)) {\n        if (isHotkeysDialogShowing()) {\n          hideHotkeysDialogAfterDelay();\n        } else {\n          showHotkeysDialog(_this.actions.map(function (action) {\n            return action.props;\n          }));\n        }\n\n        return;\n      } else if (isHotkeysDialogShowing()) {\n        return;\n      }\n\n      _this.invokeNamedCallbackIfComboRecognized(combo, \"onKeyDown\", e);\n    };\n\n    this.handleKeyUp = function (e) {\n      if (isHotkeysDialogShowing()) {\n        return;\n      }\n\n      _this.invokeNamedCallbackIfComboRecognized(getKeyCombo(e), \"onKeyUp\", e);\n    };\n  }\n\n  HotkeysEvents.prototype.count = function () {\n    return this.actions.length;\n  };\n\n  HotkeysEvents.prototype.clear = function () {\n    this.actions = [];\n  };\n\n  HotkeysEvents.prototype.setHotkeys = function (props) {\n    var _this = this;\n\n    var actions = [];\n    Children.forEach(props.children, function (child) {\n      if (isElementOfType(child, Hotkey) && _this.isScope(child.props)) {\n        actions.push({\n          combo: parseKeyCombo(child.props.combo),\n          props: child.props\n        });\n      }\n    });\n    this.actions = actions;\n  };\n\n  HotkeysEvents.prototype.invokeNamedCallbackIfComboRecognized = function (combo, callbackName, e) {\n    var isTextInput = this.isTextInput(e);\n\n    for (var _i = 0, _a = this.actions; _i < _a.length; _i++) {\n      var action = _a[_i];\n      var shouldIgnore = isTextInput && !action.props.allowInInput || action.props.disabled;\n\n      if (!shouldIgnore && comboMatches(action.combo, combo)) {\n        if (action.props.preventDefault) {\n          e.preventDefault();\n        }\n\n        if (action.props.stopPropagation) {\n          // set a flag just for unit testing. not meant to be referenced in feature work.\n          e.isPropagationStopped = true;\n          e.stopPropagation();\n        }\n\n        safeInvoke(action.props[callbackName], e);\n      }\n    }\n  };\n\n  HotkeysEvents.prototype.isScope = function (props) {\n    return (props.global ? HotkeyScope.GLOBAL : HotkeyScope.LOCAL) === this.scope;\n  };\n\n  HotkeysEvents.prototype.isTextInput = function (e) {\n    var elem = e.target; // we check these cases for unit testing, but this should not happen\n    // during normal operation\n\n    if (elem == null || elem.closest == null) {\n      return false;\n    }\n\n    var editable = elem.closest(\"input, textarea, [contenteditable=true]\");\n\n    if (editable == null) {\n      return false;\n    } // don't let checkboxes, switches, and radio buttons prevent hotkey behavior\n\n\n    if (editable.tagName.toLowerCase() === \"input\") {\n      var inputType = editable.type;\n\n      if (inputType === \"checkbox\" || inputType === \"radio\") {\n        return false;\n      }\n    } // don't let read-only fields prevent hotkey behavior\n\n\n    if (editable.readOnly) {\n      return false;\n    }\n\n    return true;\n  };\n\n  return HotkeysEvents;\n}();\n\nexport { HotkeysEvents };","/*\n * Copyright 2016 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport * as React from \"react\";\nimport { HOTKEYS_WARN_DECORATOR_NEEDS_REACT_ELEMENT, HOTKEYS_WARN_DECORATOR_NO_METHOD } from \"../../common/errors\";\nimport { getDisplayName, isFunction, safeInvoke } from \"../../common/utils\";\nimport { HotkeyScope, HotkeysEvents } from \"./hotkeysEvents\";\nexport function HotkeysTarget(WrappedComponent) {\n  var _a;\n\n  if (!isFunction(WrappedComponent.prototype.renderHotkeys)) {\n    console.warn(HOTKEYS_WARN_DECORATOR_NO_METHOD);\n  }\n\n  return _a =\n  /** @class */\n  function (_super) {\n    tslib_1.__extends(HotkeysTargetClass, _super);\n\n    function HotkeysTargetClass() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n      /** @internal */\n\n\n      _this.globalHotkeysEvents = new HotkeysEvents(HotkeyScope.GLOBAL);\n      /** @internal */\n\n      _this.localHotkeysEvents = new HotkeysEvents(HotkeyScope.LOCAL);\n      return _this;\n    }\n\n    HotkeysTargetClass.prototype.componentDidMount = function () {\n      if (_super.prototype.componentDidMount != null) {\n        _super.prototype.componentDidMount.call(this);\n      } // attach global key event listeners\n\n\n      document.addEventListener(\"keydown\", this.globalHotkeysEvents.handleKeyDown);\n      document.addEventListener(\"keyup\", this.globalHotkeysEvents.handleKeyUp);\n    };\n\n    HotkeysTargetClass.prototype.componentWillUnmount = function () {\n      if (_super.prototype.componentWillUnmount != null) {\n        _super.prototype.componentWillUnmount.call(this);\n      }\n\n      document.removeEventListener(\"keydown\", this.globalHotkeysEvents.handleKeyDown);\n      document.removeEventListener(\"keyup\", this.globalHotkeysEvents.handleKeyUp);\n      this.globalHotkeysEvents.clear();\n      this.localHotkeysEvents.clear();\n    };\n\n    HotkeysTargetClass.prototype.render = function () {\n      var _this = this;\n\n      var element = _super.prototype.render.call(this);\n\n      if (element == null) {\n        // always return `element` in case caller is distinguishing between `null` and `undefined`\n        return element;\n      }\n\n      if (!React.isValidElement(element)) {\n        console.warn(HOTKEYS_WARN_DECORATOR_NEEDS_REACT_ELEMENT);\n        return element;\n      }\n\n      if (isFunction(this.renderHotkeys)) {\n        var hotkeys = this.renderHotkeys();\n\n        if (this.localHotkeysEvents) {\n          this.localHotkeysEvents.setHotkeys(hotkeys.props);\n        }\n\n        if (this.globalHotkeysEvents) {\n          this.globalHotkeysEvents.setHotkeys(hotkeys.props);\n        }\n\n        if (this.localHotkeysEvents.count() > 0) {\n          var tabIndex = hotkeys.props.tabIndex === undefined ? 0 : hotkeys.props.tabIndex;\n          var _a = element.props,\n              existingKeyDown_1 = _a.onKeyDown,\n              existingKeyUp_1 = _a.onKeyUp;\n\n          var handleKeyDownWrapper = function handleKeyDownWrapper(e) {\n            _this.localHotkeysEvents.handleKeyDown(e.nativeEvent);\n\n            safeInvoke(existingKeyDown_1, e);\n          };\n\n          var handleKeyUpWrapper = function handleKeyUpWrapper(e) {\n            _this.localHotkeysEvents.handleKeyUp(e.nativeEvent);\n\n            safeInvoke(existingKeyUp_1, e);\n          };\n\n          return React.cloneElement(element, {\n            onKeyDown: handleKeyDownWrapper,\n            onKeyUp: handleKeyUpWrapper,\n            tabIndex: tabIndex\n          });\n        }\n      }\n\n      return element;\n    };\n\n    return HotkeysTargetClass;\n  }(WrappedComponent), _a.displayName = \"HotkeysTarget(\" + getDisplayName(WrappedComponent) + \")\", _a;\n}","import { BlockType, OpType, FocusMode } from '@blink-mind/core';\nimport { createElement, PureComponent } from 'react';\nimport plainSerializer from 'slate-plain-serializer';\nimport debug from 'debug';\nimport { Editor } from 'slate-react';\nimport styled from 'styled-components';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar _extendStatics = function extendStatics(d, b) {\n  _extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) {\n      if (b.hasOwnProperty(p)) d[p] = b[p];\n    }\n  };\n\n  return _extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  _extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar _assign = function __assign() {\n  _assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return _assign.apply(this, arguments);\n};\n\nfunction __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n}\n\nvar log = debug('node:text-editor');\nvar Content = styled.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  padding: 6px;\\n  background-color: \", \";\\n  cursor: \", \";\\n  min-width: 50px;\\n\"], [\"\\n  padding: 6px;\\n  background-color: \", \";\\n  cursor: \", \";\\n  min-width: 50px;\\n\"])), function (props) {\n  return props.readOnly ? null : 'white';\n}, function (props) {\n  return props.readOnly ? 'pointer' : 'text';\n});\n\nvar SimpleTextEditor =\n/** @class */\nfunction (_super) {\n  __extends(SimpleTextEditor, _super);\n\n  function SimpleTextEditor(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.state = {\n      content: null\n    };\n\n    _this.onMouseDown = function (e) {\n      e.stopPropagation();\n    };\n\n    _this.onMouseMove = function (e) {// log('onMouseMove');\n      // e.stopPropagation();\n    };\n\n    _this._handleClick = function (event) {\n      var wasOutside = !_this.root.contains(event.target);\n      wasOutside && _this.onClickOutSide(event);\n    };\n\n    _this.rootRef = function (saveRef) {\n      return function (ref) {\n        saveRef(ref);\n        _this.root = ref;\n      };\n    };\n\n    _this.initState();\n\n    return _this;\n  }\n\n  SimpleTextEditor.prototype.onChange = function (_a) {\n    var value = _a.value;\n    log('onChange', value);\n    this.setState({\n      content: value\n    });\n  };\n\n  SimpleTextEditor.prototype.componentDidMount = function () {\n    var readOnly = this.props.readOnly;\n    if (readOnly) return;\n    document.addEventListener('click', this._handleClick);\n  };\n\n  SimpleTextEditor.prototype.componentWillUnmount = function () {\n    var readOnly = this.props.readOnly;\n    if (readOnly) return;\n    document.removeEventListener('click', this._handleClick);\n  };\n\n  SimpleTextEditor.prototype.onClickOutSide = function (e) {};\n\n  SimpleTextEditor.prototype.getCustomizeProps = function () {\n    return null;\n  };\n\n  SimpleTextEditor.prototype.getContent = function () {\n    var block = this.getCustomizeProps().block;\n    var content = block.data;\n    if (content == null) return null;\n\n    if (typeof content === 'string') {\n      content = plainSerializer.deserialize(content);\n    }\n\n    return content;\n  };\n\n  SimpleTextEditor.prototype.initState = function () {\n    var content = this.getContent();\n    this.state = {\n      content: content\n    };\n  };\n\n  SimpleTextEditor.prototype.render = function () {\n    var _a = this.props,\n        topicKey = _a.topicKey,\n        saveRef = _a.saveRef;\n\n    var _b = this.getCustomizeProps(),\n        readOnly = _b.readOnly,\n        refKeyPrefix = _b.refKeyPrefix,\n        placeholder = _b.placeholder,\n        style = _b.style;\n\n    log(readOnly);\n    var key = refKeyPrefix + \"-\" + topicKey;\n    var content = readOnly ? this.getContent() : this.state.content;\n\n    var _c = this,\n        onMouseDown = _c.onMouseDown,\n        onMouseMove = _c.onMouseMove;\n\n    var editorProps = {\n      value: content,\n      readOnly: readOnly,\n      onChange: this.onChange.bind(this),\n      placeholder: placeholder,\n      style: style\n    };\n    var contentProps = {\n      key: key,\n      readOnly: readOnly,\n      ref: this.rootRef(saveRef(key)),\n      onMouseDown: onMouseDown,\n      onMouseMove: onMouseMove\n    };\n    return createElement(Content, _assign({}, contentProps), createElement(Editor, _assign({}, editorProps, {\n      autoFocus: true\n    })));\n  };\n\n  return SimpleTextEditor;\n}(PureComponent);\n\nvar templateObject_1;\nvar log$1 = debug('node:topic-content-editor');\n\nvar TopicContentEditor =\n/** @class */\nfunction (_super) {\n  __extends(TopicContentEditor, _super);\n\n  function TopicContentEditor(props) {\n    return _super.call(this, props) || this;\n  }\n\n  TopicContentEditor.prototype.getCustomizeProps = function () {\n    var _a = this.props,\n        model = _a.model,\n        topicKey = _a.topicKey,\n        readOnly = _a.readOnly;\n    var block = model.getTopic(topicKey).getBlock(BlockType.CONTENT).block;\n    var refKeyPrefix = 'content-editor';\n    var style = {\n      whiteSpace: 'pre'\n    };\n    return {\n      block: block,\n      readOnly: readOnly,\n      refKeyPrefix: refKeyPrefix,\n      placeholder: 'new',\n      style: style\n    };\n  }; // onChange = ({ value }) => {\n  //   log('onChange');\n  //   const { model, topicKey } = this.props;\n  //   const readOnly = model.editingContentKey !== topicKey;\n  //   if (readOnly) return;\n  //   const { controller } = this.props;\n  //   controller.run('operation', {\n  //     ...this.props,\n  //     opType: OpType.SET_TOPIC_CONTENT,\n  //     content: value\n  //   });\n  // };\n\n\n  TopicContentEditor.prototype.onClickOutSide = function (e) {\n    log$1('onClickOutSide');\n    var _a = this.props,\n        model = _a.model,\n        topicKey = _a.topicKey;\n    var readOnly = model.editingContentKey !== topicKey;\n    if (readOnly) return;\n    var controller = this.props.controller;\n    controller.run('operation', _assign(_assign({}, this.props), {\n      opType: OpType.SET_TOPIC_BLOCK,\n      blockType: BlockType.CONTENT,\n      data: this.state.content,\n      focusMode: FocusMode.NORMAL\n    }));\n  };\n\n  return TopicContentEditor;\n}(SimpleTextEditor);\n\nvar log$2 = debug('node:topic-desc-editor');\n\nvar TopicDescEditor =\n/** @class */\nfunction (_super) {\n  __extends(TopicDescEditor, _super);\n\n  function TopicDescEditor(props) {\n    var _this = _super.call(this, props) || this;\n\n    log$2('constructor');\n    return _this;\n  }\n\n  TopicDescEditor.prototype.initState = function () {\n    _super.prototype.initState.call(this);\n\n    var _a = this.props,\n        controller = _a.controller,\n        topicKey = _a.topicKey;\n    var key = \"topic-desc-data-\" + topicKey;\n    var value = this.state.content;\n    controller.run('setTempValue', {\n      key: key,\n      value: value\n    });\n  };\n\n  TopicDescEditor.prototype.getCustomizeProps = function () {\n    var _a = this.props,\n        model = _a.model,\n        topicKey = _a.topicKey;\n    var block = model.getTopic(topicKey).getBlock(BlockType.DESC).block;\n    var readOnly = model.editingDescKey !== topicKey;\n    var refKeyPrefix = 'desc-editor';\n    return {\n      block: block,\n      readOnly: readOnly,\n      refKeyPrefix: refKeyPrefix,\n      placeholder: 'write topic notes here'\n    };\n  };\n\n  TopicDescEditor.prototype.onChange = function (_a) {\n    var value = _a.value;\n    log$2('onChange');\n    var _b = this.props,\n        controller = _b.controller,\n        topicKey = _b.topicKey,\n        model = _b.model;\n    var readOnly = model.editingDescKey !== topicKey;\n    if (readOnly) return;\n    var key = \"topic-desc-data-\" + topicKey;\n    controller.run('setTempValue', {\n      key: key,\n      value: value\n    });\n    this.setState({\n      content: value\n    });\n  };\n\n  return TopicDescEditor;\n}(SimpleTextEditor);\n\nfunction SimpleTextEditorPlugin() {\n  return {\n    getTopicTitle: function getTopicTitle(props) {\n      var model = props.model,\n          controller = props.controller,\n          topicKey = props.topicKey;\n      var topic = model.getTopic(topicKey);\n      var block = topic.getBlock(BlockType.CONTENT).block;\n      var txt = controller.run('serializeBlockData', _assign(_assign({}, props), {\n        block: block\n      }));\n      return txt;\n    },\n    renderTopicContentEditor: function renderTopicContentEditor(props) {\n      return createElement(TopicContentEditor, _assign({}, props));\n    },\n    renderTopicDescEditor: function renderTopicDescEditor(props) {\n      return createElement(TopicDescEditor, _assign({}, props));\n    },\n    isBlockEmpty: function isBlockEmpty(props, next) {\n      var block = props.block,\n          controller = props.controller;\n\n      if (block.type === BlockType.CONTENT || block.type === BlockType.DESC) {\n        return block.data == null || controller.run('serializeBlockData', props) === '';\n      }\n\n      return next();\n    },\n    serializeBlockData: function serializeBlockData(props, next) {\n      var block = props.block;\n\n      if (block.type === BlockType.CONTENT || block.type === BlockType.DESC) {\n        return typeof block.data === 'string' ? block.data : plainSerializer.serialize(block.data);\n      }\n\n      return next();\n    },\n    serializeBlock: function serializeBlock(props, next) {\n      var block = props.block,\n          controller = props.controller;\n\n      if (block.type === BlockType.CONTENT || block.type === BlockType.DESC) {\n        var res = {\n          type: block.type,\n          data: controller.run('serializeBlockData', props)\n        };\n        return res;\n      }\n\n      return next();\n    },\n    deserializeBlock: function deserializeBlock(props, next) {\n      return next();\n    }\n  };\n}\n\nexport default SimpleTextEditorPlugin;","import { PureComponent, createElement, Component, Fragment } from 'react';\nimport ResizeObserver from 'resize-observer-polyfill';\nimport styled, { css, ThemeProvider } from 'styled-components';\nimport debug from 'debug';\nimport { OpType, FocusMode, getRelationship, TopicRelationship, DiagramLayoutType, ModelModifier, BlockType, TopicDirection, TopicVisualLevel, Controller } from '@blink-mind/core';\nimport '@blink-mind/icons';\nimport { Breadcrumbs, PopoverPosition, Breadcrumb, Tooltip, Dialog, Classes, MenuItem, Divider, Button, Popover, NumericInput, InputGroup, ContextMenuTarget, Menu, PopoverInteractionKind, Position, Drawer, Hotkey, Hotkeys, HotkeysTarget } from '@blueprintjs/core';\nimport '@blueprintjs/core/lib/css/blueprint.css';\nimport memoizeOne from 'memoize-one';\nimport SimpleTextEditorPlugin from '@blink-mind/plugin-simple-text-editor';\nimport { Stack, List } from 'immutable';\nimport { SketchPicker } from 'react-color';\nimport { Select } from '@blueprintjs/select';\nimport cx from 'classnames';\nimport { isEqual } from 'lodash';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar _extendStatics = function extendStatics(d, b) {\n  _extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) {\n      if (b.hasOwnProperty(p)) d[p] = b[p];\n    }\n  };\n\n  return _extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  _extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar _assign = function __assign() {\n  _assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return _assign.apply(this, arguments);\n};\n\nfunction __rest(s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\n\nfunction __decorate(decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nfunction __values(o) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator],\n      i = 0;\n  if (m) return m.call(o);\n  return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n}\n\nfunction __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n}\n\nfunction __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++) {\n    ar = ar.concat(__read(arguments[i]));\n  }\n\n  return ar;\n}\n\nfunction __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n}\n\nvar BaseWidget =\n/** @class */\nfunction (_super) {\n  __extends(BaseWidget, _super);\n\n  function BaseWidget(props) {\n    return _super.call(this, props) || this;\n  }\n\n  BaseWidget.prototype.operation = function (opType, arg) {\n    this.props.controller.run('operation', _assign({\n      opType: opType\n    }, arg));\n  };\n\n  BaseWidget.prototype.run = function (name, arg) {\n    this.props.controller.run(name, arg);\n  };\n\n  Object.defineProperty(BaseWidget.prototype, \"topic\", {\n    get: function get() {\n      return this.props.model.getTopic(this.props.topicKey);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return BaseWidget;\n}(PureComponent);\n\nvar log = debug('node:drag-scroll-widget');\nvar DragScrollView = styled.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  position: relative;\\n  width: 100%;\\n  height: 100%;\\n  overflow: scroll;\\n\"], [\"\\n  position: relative;\\n  width: 100%;\\n  height: 100%;\\n  overflow: scroll;\\n\"])));\nvar DragScrollContent = styled.div(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  position: relative;\\n  width: max-content;\\n\"], [\"\\n  position: relative;\\n  width: max-content;\\n\"])));\n\nvar DragScrollWidget =\n/** @class */\nfunction (_super) {\n  __extends(DragScrollWidget, _super);\n\n  function DragScrollWidget(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.contentResizeCallback = function (entries, observer) {\n      if (_this.oldContentRect) {\n        var widgetStyle = {\n          width: _this.content.clientWidth + _this.viewBox.clientWidth * 2,\n          height: _this.content.clientHeight + _this.viewBox.clientHeight * 2\n        };\n        _this.bigView.style.width = widgetStyle.width + 'px';\n        _this.bigView.style.height = widgetStyle.height + 'px';\n      }\n\n      _this.oldContentRect = entries[0].contentRect;\n    };\n\n    _this.contentResizeObserver = new ResizeObserver(_this.contentResizeCallback);\n\n    _this.contentRef = function (ref) {\n      if (ref) {\n        _this.content = ref;\n\n        _this.contentResizeObserver.observe(_this.content);\n      }\n    };\n\n    _this.viewBoxRef = function (ref) {\n      if (ref) {\n        _this.viewBox = ref;\n\n        if (!_this.props.enableMouseWheel) {\n          log('addEventListener onwheel');\n\n          _this.viewBox.addEventListener('wheel', function (e) {\n            log('onwheel');\n            (e.ctrlKey || e.altKey) && e.preventDefault();\n          }, {\n            passive: false\n          });\n        }\n\n        _this.setViewBoxScroll(_this.viewBox.clientWidth, _this.viewBox.clientHeight);\n      }\n    };\n\n    _this.bigViewRef = function (ref) {\n      if (ref) {\n        _this.bigView = ref;\n      }\n    };\n\n    _this.setWidgetStyle = function () {\n      if (_this.content && _this.viewBox && _this.bigView) {\n        _this.bigView.style.width = (_this.content.clientWidth + _this.viewBox.clientWidth) * 2 + 'px';\n        _this.bigView.style.height = (_this.content.clientHeight + _this.viewBox.clientHeight) * 2 + 'px';\n        _this.content.style.left = _this.viewBox.clientWidth + 'px';\n        _this.content.style.top = _this.viewBox.clientHeight + 'px';\n      }\n    };\n\n    _this.setViewBoxScroll = function (left, top) {\n      log(\"setViewBoxScroll \" + left + \" \" + top);\n\n      if (_this.viewBox) {\n        _this.viewBox.scrollLeft = left;\n        _this.viewBox.scrollTop = top;\n      }\n    };\n\n    _this.setViewBoxScrollDelta = function (deltaLeft, deltaTop) {\n      log(\"setViewBoxScrollDelta \" + deltaLeft + \" \" + deltaTop);\n\n      if (_this.viewBox) {\n        _this.viewBox.scrollLeft += deltaLeft;\n        _this.viewBox.scrollTop += deltaTop;\n      }\n    };\n\n    _this.onMouseDown = function (e) {\n      // log('Drag Scroll onMouseDown');\n      // log(e.nativeEvent.target);\n      // mouseKey \n      // needKeyPressed ctrl\n      // canDragFunc\n      var _a = _this.props,\n          mouseKey = _a.mouseKey,\n          needKeyPressed = _a.needKeyPressed,\n          canDragFunc = _a.canDragFunc;\n      if (canDragFunc && !canDragFunc()) return;\n\n      if (e.button === 0 && mouseKey === 'left' || e.button === 2 && mouseKey === 'right') {\n        if (needKeyPressed) {\n          if (!e.ctrlKey) return;\n        }\n\n        _this._lastCoordX = _this.viewBox.scrollLeft + e.nativeEvent.clientX;\n        _this._lastCoordY = _this.viewBox.scrollTop + e.nativeEvent.clientY;\n        var ele = _this.viewBox;\n        ele.addEventListener('mousemove', _this.onMouseMove);\n        ele.addEventListener('mouseup', _this.onMouseUp);\n      }\n    };\n\n    _this.onMouseUp = function (e) {\n      var ele = _this.viewBox;\n      ele.removeEventListener('mousemove', _this.onMouseMove);\n      ele.removeEventListener('mouseup', _this.onMouseUp);\n    };\n\n    _this.onMouseMove = function (e) {\n      _this.viewBox.scrollLeft = _this._lastCoordX - e.clientX;\n      _this.viewBox.scrollTop = _this._lastCoordY - e.clientY; // log(`onMouseMove ${this.viewBox.scrollLeft} ${this.viewBox.scrollTop}`);\n    };\n\n    _this.handleContextMenu = function (e) {\n      e.preventDefault();\n    };\n\n    _this.state = {\n      widgetStyle: {\n        width: '10000px',\n        height: '10000px'\n      }\n    };\n    return _this;\n  }\n\n  DragScrollWidget.prototype.componentDidMount = function () {\n    this.setWidgetStyle();\n    document.addEventListener('contextmenu', this.handleContextMenu);\n  };\n\n  DragScrollWidget.prototype.componentWillUnmount = function () {\n    document.removeEventListener('contextmenu', this.handleContextMenu);\n  };\n\n  DragScrollWidget.prototype.setZoomFactor = function (zoomFactor) {\n    this.bigView.style.transform = \"scale(\" + zoomFactor + \")\";\n    this.bigView.style.transformOrigin = '50% 50%';\n  };\n\n  DragScrollWidget.prototype.render = function () {\n    var style = _assign({}, this.state.widgetStyle // zoom:this.props.zoomFactor,\n    // transform: `scale(${this.props.zoomFactor})`,\n    // transformOrigin: '50% 50%'\n    );\n\n    return createElement(DragScrollView, {\n      ref: this.viewBoxRef,\n      onMouseDown: this.onMouseDown\n    }, createElement(\"div\", {\n      style: style,\n      ref: this.bigViewRef\n    }, createElement(DragScrollContent, {\n      ref: this.contentRef,\n      style: this.state.contentStyle\n    }, this.props.children(this.setViewBoxScroll, this.setViewBoxScrollDelta))));\n  };\n\n  DragScrollWidget.defaultProps = {\n    mouseKey: 'left',\n    needKeyPressed: false\n  };\n  return DragScrollWidget;\n}(Component);\n\nvar templateObject_1, templateObject_2;\n\nvar SaveRef =\n/** @class */\nfunction (_super) {\n  __extends(SaveRef, _super);\n\n  function SaveRef() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.getRef = function (name) {\n      return _this[name];\n    };\n\n    _this.saveRef = function (name) {\n      return function (node) {\n        if (node) {\n          _this[name] = node;\n\n          _this.fireListener(name, node);\n        }\n      };\n    };\n\n    _this.observers = new Map();\n\n    _this.fireListener = function (name, ref) {\n      var e_1, _a;\n\n      if (_this.observers.has(name)) {\n        var listeners = _this.observers.get(name);\n\n        try {\n          for (var listeners_1 = __values(listeners), listeners_1_1 = listeners_1.next(); !listeners_1_1.done; listeners_1_1 = listeners_1.next()) {\n            var listener = listeners_1_1.value;\n            listener(name, ref);\n          }\n        } catch (e_1_1) {\n          e_1 = {\n            error: e_1_1\n          };\n        } finally {\n          try {\n            if (listeners_1_1 && !listeners_1_1.done && (_a = listeners_1.return)) _a.call(listeners_1);\n          } finally {\n            if (e_1) throw e_1.error;\n          }\n        }\n      }\n    };\n\n    _this.registerRefListener = function (name, listener) {\n      if (!_this.observers.has(name)) {\n        _this.observers.set(name, [listener]);\n      } else {\n        _this.observers.get(name).push(listener);\n      }\n    };\n\n    return _this;\n  }\n\n  SaveRef.prototype.render = function () {\n    return this.props.children(this.saveRef, this.getRef, this.registerRefListener.bind(this));\n  };\n\n  return SaveRef;\n}(Component);\n\nvar Flex = styled.div(templateObject_1$1 || (templateObject_1$1 = __makeTemplateObject([\"\\n  display: flex;\\n  align-items: \", \";\\n\"], [\"\\n  display: flex;\\n  align-items: \", \";\\n\"])), function (props) {\n  return props.alignItems;\n});\nvar Margin = styled.div(templateObject_2$1 || (templateObject_2$1 = __makeTemplateObject([\"\\n  margin: \", \";\\n\"], [\"\\n  margin: \", \";\\n\"])), function (props) {\n  return props.margin;\n});\nvar ShowMenuIcon = styled.a(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  font-size: 20px !important;\\n\"], [\"\\n  font-size: 20px !important;\\n\"])));\nvar IconBg = styled.div(templateObject_4 || (templateObject_4 = __makeTemplateObject([\"\\n  padding: 5px;\\n  cursor: pointer;\\n\"], [\"\\n  padding: 5px;\\n  cursor: pointer;\\n\"])));\nvar Btn = styled.div(templateObject_5 || (templateObject_5 = __makeTemplateObject([\"\\n  cursor: pointer;\\n  &:hover {\\n    color: #1ea7fd;\\n  }\\n  &:focus {\\n    outline: none;\\n  }\\n\"], [\"\\n  cursor: pointer;\\n  &:hover {\\n    color: #1ea7fd;\\n  }\\n  &:focus {\\n    outline: none;\\n  }\\n\"])));\nvar CloseIcon = styled(Btn)(templateObject_6 || (templateObject_6 = __makeTemplateObject([\"\\n  position: absolute;\\n  right: 5px;\\n  top: 5px;\\n\"], [\"\\n  position: absolute;\\n  right: 5px;\\n  top: 5px;\\n\"])));\nvar Title = styled.div(templateObject_7 || (templateObject_7 = __makeTemplateObject([\"\\n  height: 16px;\\n\"], [\"\\n  height: 16px;\\n\"])));\nvar TopicBlockIcon = styled.span(templateObject_8 || (templateObject_8 = __makeTemplateObject([\"\\n  margin: 0px 10px;\\n\"], [\"\\n  margin: 0px 10px;\\n\"])));\nvar templateObject_1$1, templateObject_2$1, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8;\nvar IconName = {\n  SHOW_MENU: 'show-menu',\n  CLOSE: 'close',\n  COLOR_PICKER: 'color-picker',\n  NOTES: 'notes',\n  PLUS: 'plus',\n  MINUS: 'minus',\n  COLLAPSE_ALL: 'collapse',\n  EXPAND_ALL: 'expand',\n  CENTER: 'center',\n  TRASH: 'trash'\n};\n\nfunction iconClassName(name) {\n  return \"icon iconfont bm-\" + name;\n}\n\nfunction Icon(iconName) {\n  return createElement(\"span\", {\n    className: iconClassName(iconName)\n  });\n}\n\nfunction contentRefKey(key) {\n  return \"content-\" + key;\n}\n\nfunction topicWidgetRefKey(key) {\n  return \"topic-widget-\" + key;\n}\n\nfunction topicRefKey(key) {\n  return \"topic-\" + key;\n}\n\nfunction linksRefKey(key) {\n  return \"links-\" + key;\n}\n\nfunction linksSvgRefKey(key) {\n  return \"links-svg-\" + key;\n}\n\nfunction collapseRefKey(key) {\n  return \"collapse-\" + key;\n}\n\nvar RefKey = {\n  DIAGRAM_ROOT_KEY: 'DIAGRAM-ROOT',\n  DRAG_SCROLL_WIDGET_KEY: 'DragScrollWidget',\n  SVG_HIGHLIGHT_KEY: 'svg-highlight',\n  FOCUS_HIGHLIGHT_KEY: 'focus-highlight',\n  DROP_EFFECT_KEY: 'drop-effect'\n};\nvar EventKey = {\n  CENTER_ROOT_TOPIC: 'CENTER_ROOT_TOPIC'\n};\n\nvar cancelEvent = function cancelEvent(e) {\n  e.stopPropagation();\n};\n\nfunction getLinkKey(fromKey, toKey) {\n  return \"link-\" + fromKey + \"-\" + toKey;\n}\n\nfunction centerY(rect) {\n  return (rect.top + rect.bottom) / 2;\n}\n\nfunction centerX(rect) {\n  return (rect.left + rect.right) / 2;\n}\n\nfunction centerPointX(p1, p2) {\n  return (p1.x + p2.x) / 2;\n}\n\nfunction centerPointY(p1, p2) {\n  return (p1.y + p2.y) / 2;\n}\n\nfunction center(rect) {\n  return [(rect.left + rect.right) / 2, (rect.top + rect.bottom) / 2];\n}\n\nfunction _getRelativeRect(el, rel, scale) {\n  if (scale === void 0) {\n    scale = 1;\n  }\n\n  var rect = el.getBoundingClientRect();\n  var relRect = rel.getBoundingClientRect();\n  var relCenter = center(relRect);\n  var elCenter = center(rect);\n  elCenter[0] = (elCenter[0] - relCenter[0]) / scale;\n  elCenter[1] = (elCenter[1] - relCenter[1]) / scale;\n  var width = rect.width / scale;\n  var height = rect.height / scale;\n  return {\n    left: elCenter[0] - width / 2,\n    right: elCenter[0] + width / 2,\n    top: elCenter[1] - height / 2,\n    bottom: elCenter[1] + height / 2,\n    width: width,\n    height: height\n  };\n}\n\nfunction getRelativeVector(el, rel) {\n  var rect = el.getBoundingClientRect();\n  var relRect = rel.getBoundingClientRect();\n  var relCenter = center(relRect);\n  var elCenter = center(rect);\n  return [elCenter[0] - relCenter[0], elCenter[1] - relCenter[1]];\n}\n\nvar log$1 = debug('node:topic-drop-effect');\nvar DropEffectSvg = styled.svg(templateObject_1$2 || (templateObject_1$2 = __makeTemplateObject([\"\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  z-index: 2;\\n  pointer-events: none;\\n\"], [\"\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  z-index: 2;\\n  pointer-events: none;\\n\"])));\n\nvar TopicDropEffect =\n/** @class */\nfunction (_super) {\n  __extends(TopicDropEffect, _super);\n\n  function TopicDropEffect() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      content: null\n    };\n    return _this;\n  }\n\n  TopicDropEffect.prototype.layout = function () {\n    var props = this.props;\n    var _a = this.props,\n        getRef = _a.getRef,\n        model = _a.model,\n        zoomFactor = _a.zoomFactor,\n        controller = _a.controller;\n    var targetProps = controller.run('getDragTargetProps', props);\n    var key = targetProps.key,\n        dropDir = targetProps.dropDir;\n    log$1('layout', dropDir);\n\n    if (key === null) {\n      this.setState({\n        content: null\n      });\n      return;\n    }\n\n    var dropAreaRefKey;\n\n    if (dropDir === 'in') {\n      dropAreaRefKey = contentRefKey(key);\n    } else {\n      dropAreaRefKey = \"dropArea-\" + dropDir + \"-\" + key;\n    }\n\n    var content = getRef(dropAreaRefKey);\n    var svg = getRef('svg-drop-effect');\n    var bigView = getRef(RefKey.DRAG_SCROLL_WIDGET_KEY).bigView;\n\n    var contentRect = _getRelativeRect(content, bigView, zoomFactor);\n\n    var svgRect = _getRelativeRect(svg, bigView, zoomFactor);\n\n    var padding = 3;\n    var x = contentRect.left - svgRect.left - padding;\n    var y = contentRect.top - svgRect.top - padding;\n    var width = contentRect.width + 2 * padding;\n    var height = contentRect.height + 2 * padding;\n    this.setState({\n      content: createElement(\"g\", null, createElement(\"rect\", {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        fill: \"none\",\n        stroke: model.config.theme.highlightColor,\n        strokeDasharray: \"5,5\",\n        strokeWidth: 2\n      }))\n    });\n  };\n\n  TopicDropEffect.prototype.render = function () {\n    var saveRef = this.props.saveRef;\n    return createElement(DropEffectSvg, {\n      ref: saveRef('svg-drop-effect')\n    }, this.state.content);\n  };\n\n  return TopicDropEffect;\n}(BaseWidget);\n\nvar templateObject_1$2;\nvar log$2 = debug('plugin:drag-and-drop');\nvar DropArea = styled.div(templateObject_1$3 || (templateObject_1$3 = __makeTemplateObject([\"\\n  height: \", \";\\n  width: 100%;\\n  margin: 5px 0px;\\n\"], [\"\\n  height: \", \";\\n  width: 100%;\\n  margin: 5px 0px;\\n\"])), function (props) {\n  return props.height + \"px\";\n});\n\nfunction DragAndDrop() {\n  var dragTargetKey = null;\n  var dragTargetDir = null;\n  return {\n    renderTopicDropArea: function renderTopicDropArea(props) {\n      var topicKey = props.topicKey,\n          dropDir = props.dropDir,\n          saveRef = props.saveRef,\n          controller = props.controller,\n          model = props.model;\n\n      var onDragEnter = function onDragEnter(ev) {\n        log$2('onDragEnter', topicKey, dropDir);\n        controller.run('handleTopicDragEnter', _assign(_assign({}, props), {\n          ev: ev,\n          dropDir: dropDir\n        }));\n      };\n\n      var onDragLeave = function onDragLeave(ev) {\n        log$2('onDragLeave', topicKey, dropDir);\n        controller.run('handleTopicDragLeave', _assign(_assign({}, props), {\n          ev: ev,\n          dropDir: dropDir\n        }));\n      };\n\n      var onDragOver = function onDragOver(ev) {\n        ev.preventDefault();\n      };\n\n      var onDrop = function onDrop(ev) {\n        log$2('onDrop', topicKey, dropDir);\n        controller.run('handleTopicDrop', _assign(_assign({}, props), {\n          ev: ev,\n          dropDir: dropDir\n        }));\n      };\n\n      var eventHandlers = {\n        onDragEnter: onDragEnter,\n        onDragLeave: onDragLeave,\n        onDragOver: onDragOver,\n        onDrop: onDrop\n      };\n      return createElement(DropArea, _assign({\n        height: model.config.theme.marginV / 2,\n        ref: saveRef(\"dropArea-\" + dropDir + \"-\" + topicKey)\n      }, eventHandlers));\n    },\n    renderDragAndDropEffect: function renderDragAndDropEffect(props) {\n      log$2('renderDragAndDropEffect');\n      var saveRef = props.saveRef;\n      return createElement(TopicDropEffect, _assign({\n        ref: saveRef(RefKey.DROP_EFFECT_KEY)\n      }, props));\n    },\n    getDragTargetProps: function getDragTargetProps(props) {\n      return {\n        key: dragTargetKey,\n        dropDir: dragTargetDir\n      };\n    },\n    handleTopicDragStart: function handleTopicDragStart(props) {\n      var controller = props.controller,\n          ev = props.ev;\n      ev.stopPropagation();\n      controller.run('operation', _assign(_assign({}, props), {\n        opType: OpType.FOCUS_TOPIC,\n        focusMode: FocusMode.DRAGGING\n      }));\n    },\n    canDrop: function canDrop(props) {\n      var srcKey = props.srcKey,\n          dstKey = props.dstKey,\n          model = props.model,\n          dropDir = props.dropDir;\n      if (srcKey === model.editorRootTopicKey || srcKey === dstKey || getRelationship(model, srcKey, dstKey) === TopicRelationship.ANCESTOR) return false;\n      if (dstKey === model.editorRootTopicKey && dropDir !== 'in') return false;\n      var srcTopic = model.getTopic(srcKey);\n      if (srcTopic.parentKey === dstKey && dropDir === 'in') return false;\n      return true;\n    },\n    handleTopicDragEnter: function handleTopicDragEnter(props) {\n      var dropDir = props.dropDir,\n          topicKey = props.topicKey,\n          controller = props.controller,\n          model = props.model,\n          ev = props.ev;\n      log$2('handleTopicDragEnter:', topicKey, dropDir);\n      var canDrop = controller.run('canDrop', _assign(_assign({}, props), {\n        srcKey: model.focusKey,\n        dstKey: topicKey\n      }));\n\n      if (canDrop) {\n        dragTargetKey = topicKey;\n        dragTargetDir = dropDir;\n        controller.change(model);\n      }\n    },\n    handleTopicDragLeave: function handleTopicDragLeave(props) {\n      var controller = props.controller,\n          model = props.model,\n          topicKey = props.topicKey,\n          dropDir = props.dropDir,\n          getRef = props.getRef,\n          ev = props.ev;\n      var relatedTarget = ev.nativeEvent.relatedTarget;\n      log$2('handleTopicDragLeave:', topicKey, dropDir);\n      var content = getRef(contentRefKey(topicKey));\n\n      if (content == relatedTarget || content.contains(relatedTarget)) {\n        return;\n      }\n\n      dragTargetKey = null;\n      dragTargetDir = null;\n      controller.change(model);\n    },\n    handleTopicDrop: function handleTopicDrop(props) {\n      log$2('handleTopicDrop');\n      var controller = props.controller,\n          topicKey = props.topicKey,\n          model = props.model;\n      props = _assign(_assign({}, props), {\n        srcKey: model.focusKey,\n        dstKey: topicKey\n      });\n      dragTargetKey = null;\n      dragTargetDir = null;\n\n      if (controller.run('canDrop', props)) {\n        controller.run('operation', _assign(_assign({}, props), {\n          opType: OpType.DRAG_AND_DROP\n        }));\n      }\n    }\n  };\n}\n\nvar templateObject_1$3;\nvar log$3 = debug('plugin:event');\n\nfunction EventPlugin() {\n  var eventListeners = {};\n  return {\n    handleTopicClick: function handleTopicClick(props) {\n      log$3('handleTopicClick');\n      var controller = props.controller,\n          model = props.model,\n          topicKey = props.topicKey;\n      log$3(model.zoomFactor); //TODO\n\n      if (model.editingDescKey !== null) return;\n      if (model.editingContentKey === topicKey) return;\n      if (model.focusKey === topicKey && model.focusMode === FocusMode.EDITING_CONTENT) return;\n      controller.run('operation', _assign(_assign({}, props), {\n        opType: OpType.FOCUS_TOPIC,\n        focusMode: FocusMode.NORMAL\n      }));\n    },\n    handleTopicDoubleClick: function handleTopicDoubleClick(props) {\n      var controller = props.controller,\n          model = props.model;\n      if (model.editingDescKey !== null) return;\n      controller.run('operation', _assign(_assign({}, props), {\n        opType: OpType.FOCUS_TOPIC,\n        focusMode: FocusMode.EDITING_CONTENT\n      }));\n    },\n    handleTopicContextMenu: function handleTopicContextMenu(props) {\n      var controller = props.controller;\n      controller.run('operation', _assign(_assign({}, props), {\n        opType: OpType.FOCUS_TOPIC,\n        focusMode: FocusMode.SHOW_POPUP\n      }));\n    },\n    handleActiveModalClose: function handleActiveModalClose(props) {\n      var controller = props.controller;\n      var activeModalProps = controller.run('getActiveModalProps', props);\n      if (activeModalProps == null) return null;\n\n      if (activeModalProps.name === 'edit-desc') {\n        return function () {\n          controller.run('operation', _assign(_assign({}, props), {\n            focusMode: FocusMode.NORMAL,\n            opType: OpType.FOCUS_TOPIC\n          }));\n        };\n      }\n    },\n    addEventListener: function addEventListener(props) {\n      var key = props.key,\n          listener = props.listener,\n          once = props.once,\n          controller = props.controller;\n      if (!eventListeners[key]) eventListeners[key] = [];\n\n      if (once) {\n        only.origin = listener;\n        eventListeners[key].push(only);\n      } else {\n        eventListeners[key].push(listener);\n      }\n\n      function only() {\n        listener();\n        controller.run('removeEventListener', {\n          key: key,\n          listener: listener\n        });\n      }\n    },\n    removeEventListener: function removeEventListener(props) {\n      var key = props.key,\n          listener = props.listener,\n          controller = props.controller;\n\n      if (eventListeners[key]) {\n        eventListeners[key] = eventListeners[key].filter(function (fn) {\n          return fn !== listener && fn.origin !== listener;\n        });\n      }\n    },\n    fireEvent: function fireEvent(props) {\n      var key = props.key;\n\n      if (eventListeners[key]) {\n        eventListeners[key].forEach(function (fn) {\n          return fn();\n        });\n      }\n    }\n  };\n}\n\nvar HotKeyName = {\n  ADD_CHILD: 'ADD_CHILD',\n  ADD_SIBLING: 'ADD_SIBLING',\n  DELETE_TOPIC: 'DELETE_TOPIC',\n  EDIT_CONTENT: 'EDIT_CONTENT',\n  EDIT_NOTES: 'EDIT_NOTES',\n  SET_EDITOR_ROOT: 'SET_EDITOR_ROOT'\n};\n\nfunction op(opType, props) {\n  var topicKey = props.topicKey,\n      model = props.model,\n      controller = props.controller;\n\n  if (topicKey === undefined) {\n    props = _assign(_assign({}, props), {\n      topicKey: model.focusKey\n    });\n  }\n\n  controller.run('operation', _assign(_assign({}, props), {\n    opType: opType\n  }));\n}\n\nfunction HotKeyPlugin() {\n  return {\n    customizeHotKeys: function customizeHotKeys(props) {\n      var handleKeyDown = function handleKeyDown(opType) {\n        return function (e) {\n          // log('HotKeyPlugin', opType);\n          op(opType, props);\n        };\n      };\n\n      var hotKeyMap = new Map([[HotKeyName.ADD_CHILD, {\n        label: 'add child',\n        combo: 'tab',\n        onKeyDown: handleKeyDown(OpType.ADD_CHILD)\n      }], [HotKeyName.ADD_SIBLING, {\n        label: 'add sibling',\n        combo: 'enter',\n        onKeyDown: handleKeyDown(OpType.ADD_SIBLING)\n      }], [HotKeyName.DELETE_TOPIC, {\n        label: 'delete topic',\n        combo: 'del',\n        onKeyDown: handleKeyDown(OpType.DELETE_TOPIC)\n      }], [HotKeyName.EDIT_CONTENT, {\n        label: 'edit content',\n        combo: 'space',\n        onKeyDown: handleKeyDown(OpType.START_EDITING_CONTENT)\n      }], [HotKeyName.EDIT_NOTES, {\n        label: 'edit notes',\n        combo: 'alt + d',\n        onKeyDown: handleKeyDown(OpType.START_EDITING_DESC)\n      }], [HotKeyName.SET_EDITOR_ROOT, {\n        label: 'set editor root',\n        combo: 'alt + shift + f',\n        onKeyDown: handleKeyDown(OpType.SET_EDITOR_ROOT)\n      }]]);\n      return hotKeyMap;\n    }\n  };\n}\n\nfunction LayoutPlugin() {\n  var _zoomFactor = 1;\n  return {\n    getPartTopics: function getPartTopics(_a) {\n      var layout = _a.layout,\n          model = _a.model,\n          topicKey = _a.topicKey;\n      var topic = model.getTopic(topicKey);\n      var subTopicCount = topic.subKeys.size;\n      var topics = topic.subKeys.toArray();\n\n      switch (layout) {\n        case DiagramLayoutType.LEFT_TO_RIGHT:\n          return {\n            R: topics\n          };\n\n        case DiagramLayoutType.RIGHT_TO_LEFT:\n          return {\n            L: topics\n          };\n\n        case DiagramLayoutType.LEFT_AND_RIGHT:\n          return {\n            L: topics.slice(Math.ceil(subTopicCount / 2), subTopicCount),\n            R: topics.slice(0, Math.ceil(subTopicCount / 2))\n          };\n\n        case DiagramLayoutType.TOP_TO_BOTTOM:\n          return {\n            B: topics\n          };\n      }\n    },\n    createSubTopics: function createSubTopics(props) {\n      var model = props.model,\n          topicKey = props.topicKey,\n          controller = props.controller,\n          topics = props.topics,\n          saveRef = props.saveRef;\n      var topic = model.getTopic(topicKey);\n      if (topics.size === 0 || topic.collapse) return null;\n      var subTopics = [];\n      topics.forEach(function (tKey) {\n        var topicProps = _assign(_assign({}, props), {\n          topicKey: tKey,\n          key: tKey,\n          ref: saveRef(topicWidgetRefKey(tKey))\n        });\n\n        subTopics.push(controller.run('renderTopicWidget', topicProps));\n      });\n      return {\n        subTopics: subTopics\n      };\n    },\n    layout: function layout(props) {\n      var getRef = props.getRef,\n          model = props.model;\n      var links = getRef(linksRefKey(model.editorRootTopicKey));\n      var highlight = getRef(RefKey.FOCUS_HIGHLIGHT_KEY);\n      var dropEffect = getRef(RefKey.DROP_EFFECT_KEY);\n      links && links.layout();\n      highlight && highlight.layout();\n      dropEffect && dropEffect.layout();\n      var editorRootTopic = model.getTopic(model.editorRootTopicKey);\n      layoutTopic(editorRootTopic);\n\n      function layoutTopic(topic) {\n        var e_1, _a;\n\n        if (topic.key !== model.editorRootTopicKey) {\n          var topicWidget = getRef(topicWidgetRefKey(topic.key));\n          topicWidget && topicWidget.layoutLinks();\n        }\n\n        try {\n          for (var _b = __values(topic.subKeys), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var subKey = _c.value;\n            layoutTopic(model.getTopic(subKey));\n          }\n        } catch (e_1_1) {\n          e_1 = {\n            error: e_1_1\n          };\n        } finally {\n          try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n          } finally {\n            if (e_1) throw e_1.error;\n          }\n        }\n      }\n    },\n    setLayoutDir: function setLayoutDir(props) {\n      var layoutDir = props.layoutDir,\n          model = props.model,\n          controller = props.controller;\n      controller.change(ModelModifier.setLayoutDir({\n        model: model,\n        layoutDir: layoutDir\n      }));\n    },\n    getRelativeRect: function getRelativeRect(props) {\n      var element = props.element,\n          controller = props.controller,\n          getRef = props.getRef;\n      var zoomFactor = controller.run('getZoomFactor', props);\n      var bigView = getRef(RefKey.DRAG_SCROLL_WIDGET_KEY).bigView;\n      return _getRelativeRect(element, bigView, zoomFactor);\n    },\n    getRelativeRectFromViewPort: function getRelativeRectFromViewPort(props) {\n      var element = props.element,\n          controller = props.controller,\n          getRef = props.getRef;\n      var zoomFactor = controller.run('getZoomFactor', props);\n      var viewBox = getRef(RefKey.DRAG_SCROLL_WIDGET_KEY).viewBox;\n      return _getRelativeRect(element, viewBox, zoomFactor);\n    },\n    getRelativeVectorFromViewPort: function getRelativeVectorFromViewPort(props) {\n      var element = props.element,\n          controller = props.controller,\n          getRef = props.getRef;\n      var zoomFactor = controller.run('getZoomFactor', props);\n      var viewBox = getRef(RefKey.DRAG_SCROLL_WIDGET_KEY).viewBox;\n      return getRelativeVector(element, viewBox);\n    },\n    addZoomFactorChangeEventListener: function addZoomFactorChangeEventListener(props) {\n      var controller = props.controller;\n      controller.run('addTempValueChangeListener', _assign({\n        key: 'ZoomFactor'\n      }, props));\n    },\n    removeZoomFactorChangeEventListener: function removeZoomFactorChangeEventListener(props) {\n      var controller = props.controller;\n      controller.run('removeTempValueChangeListener', _assign({\n        key: 'ZoomFactor'\n      }, props));\n    },\n    setZoomFactor: function setZoomFactor(props) {\n      var controller = props.controller,\n          zoomFactor = props.zoomFactor;\n      return controller.run('setTempValue', {\n        key: 'ZoomFactor',\n        value: zoomFactor\n      });\n    },\n    getZoomFactor: function getZoomFactor(props) {\n      var controller = props.controller;\n      return controller.run('getTempValue', {\n        key: 'ZoomFactor'\n      }) || _zoomFactor;\n    }\n  };\n}\n\nvar log$4 = debug('plugin:operation');\n\nfunction OperationPlugin() {\n  var startEditingContent = function startEditingContent(_a) {\n    var model = _a.model,\n        topicKey = _a.topicKey;\n    return ModelModifier.focusTopic({\n      model: model,\n      topicKey: topicKey,\n      focusMode: FocusMode.EDITING_CONTENT\n    });\n  };\n\n  var startEditingDesc = function startEditingDesc(_a) {\n    var model = _a.model,\n        topicKey = _a.topicKey;\n    var topic = model.getTopic(topicKey);\n    var desc = topic.getBlock(BlockType.DESC);\n\n    if (desc.block == null || desc.block.data == null) {\n      model = ModelModifier.setBlockData({\n        model: model,\n        topicKey: topicKey,\n        blockType: BlockType.DESC,\n        data: ''\n      });\n    }\n\n    model = ModelModifier.focusTopic({\n      model: model,\n      topicKey: topicKey,\n      focusMode: FocusMode.EDITING_DESC\n    });\n    return model;\n  };\n\n  function dragAndDrop(props) {\n    var srcKey = props.srcKey,\n        dstKey = props.dstKey,\n        dropDir = props.dropDir;\n    var model = props.model;\n    var srcTopic = model.getTopic(srcKey);\n    var dstTopic = model.getTopic(dstKey);\n    var srcParentKey = srcTopic.parentKey;\n    var srcParentTopic = model.getTopic(srcParentKey);\n    var srcParentSubKeys = srcParentTopic.subKeys;\n    var srcIndex = srcParentSubKeys.indexOf(srcKey);\n    srcParentSubKeys = srcParentSubKeys.delete(srcIndex);\n\n    if (dropDir === 'in') {\n      var dstSubKeys_1 = dstTopic.subKeys;\n      dstSubKeys_1 = dstSubKeys_1.push(srcKey);\n      model = model.withMutations(function (m) {\n        m.setIn(['topics', srcParentKey, 'subKeys'], srcParentSubKeys).setIn(['topics', srcKey, 'parentKey'], dstKey).setIn(['topics', dstKey, 'subKeys'], dstSubKeys_1).setIn(['topics', dstKey, 'collapse'], false);\n      });\n    } else {\n      var dstParentKey_1 = dstTopic.parentKey;\n      var dstParentItem = model.getTopic(dstParentKey_1);\n      var dstParentSubKeys_1 = dstParentItem.subKeys;\n      var dstIndex = dstParentSubKeys_1.indexOf(dstKey); //src  dst \n\n      if (srcParentKey === dstParentKey_1) {\n        var newDstParentSubKeys_1 = List();\n        dstParentSubKeys_1.forEach(function (key) {\n          if (key !== srcKey) {\n            if (key === dstKey) {\n              if (dropDir === 'prev') {\n                newDstParentSubKeys_1 = newDstParentSubKeys_1.push(srcKey).push(key);\n              } else {\n                newDstParentSubKeys_1 = newDstParentSubKeys_1.push(key).push(srcKey);\n              }\n            } else {\n              newDstParentSubKeys_1 = newDstParentSubKeys_1.push(key);\n            }\n          }\n        });\n        model = model.withMutations(function (m) {\n          m.setIn(['topics', dstParentKey_1, 'subKeys'], newDstParentSubKeys_1);\n        });\n      } else {\n        if (dropDir === 'prev') {\n          dstParentSubKeys_1 = dstParentSubKeys_1.insert(dstIndex, srcKey);\n        } else if (dropDir === 'next') {\n          dstParentSubKeys_1 = dstParentSubKeys_1.insert(dstIndex + 1, srcKey);\n        }\n\n        model = model.withMutations(function (m) {\n          m.setIn(['topics', srcParentKey, 'subKeys'], srcParentSubKeys).setIn(['topics', srcKey, 'parentKey'], dstParentKey_1).setIn(['topics', dstParentKey_1, 'subKeys'], dstParentSubKeys_1).setIn(['topics', dstParentKey_1, 'collapse'], false);\n        });\n      }\n    }\n\n    return model;\n  }\n\n  var OpMap = new Map([[OpType.TOGGLE_COLLAPSE, ModelModifier.toggleCollapse], [OpType.COLLAPSE_ALL, ModelModifier.collapseAll], [OpType.EXPAND_ALL, ModelModifier.expandAll], [OpType.ADD_CHILD, ModelModifier.addChild], [OpType.ADD_SIBLING, ModelModifier.addSibling], [OpType.DELETE_TOPIC, ModelModifier.deleteTopic], [OpType.FOCUS_TOPIC, ModelModifier.focusTopic], [OpType.SET_STYLE, ModelModifier.setStyle], [OpType.SET_TOPIC_BLOCK, ModelModifier.setBlockData], [OpType.DELETE_TOPIC_BLOCK, ModelModifier.deleteBlock], [OpType.START_EDITING_CONTENT, startEditingContent], [OpType.START_EDITING_DESC, startEditingDesc], [OpType.DRAG_AND_DROP, dragAndDrop], [OpType.SET_EDITOR_ROOT, ModelModifier.setEditorRootTopicKey]]);\n  var undoStack = Stack();\n  var redoStack = Stack();\n  return {\n    /** plugin can extend Operation Map\r\n     * for example: A plugin can write a function\r\n     * getOpMap(props,next) {\r\n     *   let opMap = next();\r\n     *   opMap.set(\"OpTypeName\",opFunc);\r\n     *   return opMap;\r\n     * }\r\n     * @param props\r\n     */\n    getOpMap: function getOpMap(props) {\n      return OpMap;\n    },\n    getAllowUndo: function getAllowUndo(props) {\n      var model = props.model,\n          opType = props.opType;\n\n      if (opType) {\n        switch (opType) {\n          case OpType.FOCUS_TOPIC:\n          case OpType.START_EDITING_CONTENT:\n          case OpType.START_EDITING_DESC:\n            return false;\n        }\n      }\n\n      switch (model.focusMode) {\n        case 'EDITING_DESC':\n        case 'EDITING_CONTENT':\n          return false;\n      }\n\n      return model.config.allowUndo;\n    },\n    getUndoRedoStack: function getUndoRedoStack() {\n      return {\n        undoStack: undoStack,\n        redoStack: redoStack\n      };\n    },\n    setUndoStack: function setUndoStack(props) {\n      log$4('setUndoStack', props.undoStack);\n      undoStack = props.undoStack;\n    },\n    setRedoStack: function setRedoStack(props) {\n      log$4('setRedoStack', props.redoStack);\n      redoStack = props.redoStack;\n    },\n    canUndo: function canUndo(props) {\n      var controller = props.controller;\n      var undoStack = controller.run('getUndoRedoStack', props).undoStack;\n      var allowUndo = controller.run('getAllowUndo', props);\n      return undoStack.size > 0 && allowUndo;\n    },\n    canRedo: function canRedo(props) {\n      var controller = props.controller;\n      var redoStack = controller.run('getUndoRedoStack', props).redoStack;\n      var allowUndo = controller.run('getAllowUndo', props);\n      return redoStack.size > 0 && allowUndo;\n    },\n    undo: function undo(props) {\n      var controller = props.controller,\n          model = props.model;\n\n      if (!controller.run('getAllowUndo', props)) {\n        return;\n      }\n\n      var _a = controller.run('getUndoRedoStack', props),\n          undoStack = _a.undoStack,\n          redoStack = _a.redoStack;\n\n      var newModel = undoStack.peek();\n      if (!newModel) return;\n      controller.run('setUndoStack', _assign(_assign({}, props), {\n        undoStack: undoStack.shift()\n      }));\n      controller.run('setRedoStack', _assign(_assign({}, props), {\n        redoStack: redoStack.push(model)\n      }));\n      log$4(newModel);\n      controller.change(newModel);\n    },\n    redo: function redo(props) {\n      var controller = props.controller,\n          model = props.model;\n\n      if (!controller.run('getAllowUndo', props)) {\n        return;\n      }\n\n      var _a = controller.run('getUndoRedoStack', props),\n          undoStack = _a.undoStack,\n          redoStack = _a.redoStack;\n\n      var newModel = redoStack.peek();\n      if (!newModel) return;\n      controller.run('setUndoStack', _assign(_assign({}, props), {\n        undoStack: undoStack.push(model)\n      }));\n      controller.run('setRedoStack', _assign(_assign({}, props), {\n        redoStack: redoStack.shift()\n      }));\n      controller.change(newModel);\n    },\n    beforeOperation: function beforeOperation(props) {},\n    operation: function operation(props) {\n      var opType = props.opType,\n          controller = props.controller,\n          model = props.model,\n          opArray = props.opArray;\n      log$4('operation:', opType);\n      log$4('operation:', model);\n      log$4('operation:', props);\n      var opMap = controller.run('getOpMap', props);\n      controller.run('beforeOperation', props);\n\n      if (opType != null && opArray != null) {\n        throw new Error('operation: opType and opArray conflict!');\n      }\n\n      if (controller.run('getAllowUndo', props)) {\n        var undoStack_1 = controller.run('getUndoRedoStack', props).undoStack;\n        controller.run('setUndoStack', _assign(_assign({}, props), {\n          undoStack: undoStack_1.push(model)\n        }));\n      }\n\n      var newModel;\n\n      if (opArray != null) {\n        if (!Array.isArray(opArray)) {\n          throw new Error('operation: the type of opArray must be array!');\n        }\n\n        newModel = opArray.reduce(function (acc, cur) {\n          var opType = cur.opType;\n          if (!opMap.has(opType)) throw new Error(\"opType:\" + opType + \" not exist!\");\n          var opFunc = opMap.get(opType);\n          var res = opFunc(_assign(_assign({\n            controller: controller\n          }, cur), {\n            model: acc\n          }));\n          return res;\n        }, model);\n      } else {\n        if (!opMap.has(opType)) throw new Error(\"opType:\" + opType + \" not exist!\");\n        var opFunc = opMap.get(opType);\n        newModel = opFunc(props);\n      }\n\n      log$4('newModel:', newModel);\n      controller.change(newModel);\n      controller.run('afterOperation', props);\n    },\n    afterOperation: function afterOperation(props) {}\n  };\n}\n\nvar EditorRootBreadcrumbsRoot = styled.div(templateObject_1$4 || (templateObject_1$4 = __makeTemplateObject([\"\\n  position: absolute;\\n  width: 20%;\\n  padding: 0 5px;\\n  background: white;\\n  left: 30px;\\n  top: 20px;\\n  border-radius: 2px;\\n  z-index: 4;\\n\"], [\"\\n  position: absolute;\\n  width: 20%;\\n  padding: 0 5px;\\n  background: white;\\n  left: 30px;\\n  top: 20px;\\n  border-radius: 2px;\\n  z-index: 4;\\n\"])));\nvar TooltipContent = styled.div(templateObject_2$2 || (templateObject_2$2 = __makeTemplateObject([\"\\n  max-width: 600px;\\n\"], [\"\\n  max-width: 600px;\\n\"])));\nvar BreadcrumbTitle = styled.span(templateObject_3$1 || (templateObject_3$1 = __makeTemplateObject([\"\"], [\"\"])));\n\nvar EditorRootBreadcrumbs =\n/** @class */\nfunction (_super) {\n  __extends(EditorRootBreadcrumbs, _super);\n\n  function EditorRootBreadcrumbs(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.setEditorRootTopicKey = function (topicKey) {\n      return function () {\n        var _a = _this.props,\n            model = _a.model,\n            controller = _a.controller;\n\n        if (model.editorRootTopicKey !== topicKey) {\n          controller.change(ModelModifier.setEditorRootTopicKey({\n            model: model,\n            topicKey: topicKey\n          }));\n        }\n      };\n    };\n\n    _this.breadcrumbRenderer = function (props) {\n      var text = props.text,\n          breadProps = __rest(props, [\"text\"]);\n\n      var needTooltip = text.length > 8;\n      var title = needTooltip ? text.substr(0, 8) + '...' : text; //TODO\n\n      var content = createElement(TooltipContent, null, text);\n      var tooltipProps = {\n        content: content,\n        position: PopoverPosition.BOTTOM_RIGHT\n      };\n      var breadcrumb = createElement(Breadcrumb, _assign({}, breadProps), createElement(BreadcrumbTitle, null, title));\n      return needTooltip ? createElement(Tooltip, _assign({}, tooltipProps), breadcrumb) : breadcrumb; // return (\n      //   <Breadcrumb {...breadProps}>\n      //     <BreadcrumbTitle>{title}</BreadcrumbTitle>\n      //   </Breadcrumb>\n      // );\n    };\n\n    _this.state = {\n      show: false\n    };\n    return _this;\n  }\n\n  EditorRootBreadcrumbs.prototype.render = function () {\n    var props = this.props;\n    var model = props.model,\n        controller = props.controller;\n    var editingRootKey = model.editorRootTopicKey;\n    if (editingRootKey === model.rootTopicKey) return null;\n    var items = [];\n    var topic = model.getTopic(editingRootKey);\n\n    while (topic != null) {\n      var title = controller.run('getTopicTitle', _assign(_assign({}, props), {\n        topicKey: topic.key\n      }));\n      items.unshift({\n        text: title,\n        onClick: this.setEditorRootTopicKey(topic.key)\n      });\n      topic = model.getTopic(topic.parentKey);\n    }\n\n    var breadcrumbProps = {\n      items: items,\n      breadcrumbRenderer: this.breadcrumbRenderer\n    };\n    return createElement(EditorRootBreadcrumbsRoot, null, createElement(Breadcrumbs, _assign({}, breadcrumbProps)));\n  };\n\n  return EditorRootBreadcrumbs;\n}(BaseWidget);\n\nvar templateObject_1$4, templateObject_2$2, templateObject_3$1;\nvar NodeLayer = styled.div(templateObject_1$5 || (templateObject_1$5 = __makeTemplateObject([\"\\n  position: relative;\\n  display: flex;\\n  align-items: center;\\n  padding: 5px;\\n\"], [\"\\n  position: relative;\\n  display: flex;\\n  align-items: center;\\n  padding: 5px;\\n\"])));\nvar DIV = styled.div(templateObject_2$3 || (templateObject_2$3 = __makeTemplateObject([\"\\n  width: 100%;\\n  height: 100%;\\n  background: \", \";\\n\"], [\"\\n  width: 100%;\\n  height: 100%;\\n  background: \", \";\\n\"])), function (props) {\n  return props.theme.background;\n});\n\nvar MindDragScrollWidget =\n/** @class */\nfunction (_super) {\n  __extends(MindDragScrollWidget, _super);\n\n  function MindDragScrollWidget(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.setZoomFactor = function (zoomFactor) {\n      _this.dragScrollWidget.setZoomFactor(zoomFactor);\n    };\n\n    _this.onWheel = function (e) {\n      if (e.altKey || e.ctrlKey) {\n        var controller = _this.props.controller;\n        var zoomFactor = controller.run('getZoomFactor', _this.props);\n        zoomFactor = zoomFactor - (e.nativeEvent.deltaY > 0 ? 0.1 : -0.1);\n        if (zoomFactor < 0.5) zoomFactor = 0.5;\n        if (zoomFactor > 4) zoomFactor = 4; // console.log('zoomFactor=>', zoomFactor);\n\n        controller.run('setZoomFactor', _assign(_assign({}, _this.props), {\n          zoomFactor: zoomFactor\n        }));\n      }\n    };\n\n    return _this;\n  }\n\n  MindDragScrollWidget.prototype.componentDidMount = function () {\n    var _a = this.props,\n        getRef = _a.getRef,\n        model = _a.model,\n        controller = _a.controller;\n    controller.run('addZoomFactorChangeEventListener', _assign(_assign({}, this.props), {\n      listener: this.setZoomFactor\n    }));\n    var rootTopic = getRef(topicRefKey(model.editorRootTopicKey)); //TODO\n\n    var nodeLayer = getRef('node-layer');\n    var rootTopicRect = rootTopic.getBoundingClientRect();\n    var nodeLayerRect = nodeLayer.getBoundingClientRect();\n    this.dragScrollWidget.setViewBoxScrollDelta(0, rootTopicRect.top - nodeLayerRect.top - this.dragScrollWidget.viewBox.getBoundingClientRect().height / 2 + rootTopicRect.height);\n    this.layout();\n  };\n\n  MindDragScrollWidget.prototype.componentWillUnmount = function () {\n    var controller = this.props.controller;\n    controller.run('removeZoomFactorChangeEventListener', _assign(_assign({}, this.props), {\n      listener: this.setZoomFactor\n    }));\n  };\n\n  Object.defineProperty(MindDragScrollWidget.prototype, \"dragScrollWidget\", {\n    get: function get() {\n      return this.props.getRef(RefKey.DRAG_SCROLL_WIDGET_KEY);\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  MindDragScrollWidget.prototype.componentDidUpdate = function () {\n    var controller = this.props.controller;\n    controller.run('fireEvent', _assign(_assign({}, this.props), {\n      key: EventKey.CENTER_ROOT_TOPIC\n    }));\n    this.layout();\n  };\n\n  MindDragScrollWidget.prototype.layout = function () {\n    var controller = this.props.controller;\n    controller.run('layout', this.props);\n  };\n\n  MindDragScrollWidget.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.props,\n        saveRef = _a.saveRef,\n        model = _a.model,\n        controller = _a.controller;\n    var nodeKey = model.editorRootTopicKey;\n    return createElement(DIV, {\n      onWheel: this.onWheel\n    }, createElement(DragScrollWidget, _assign({}, this.state, {\n      enableMouseWheel: false,\n      zoomFactor: model.zoomFactor,\n      ref: saveRef(RefKey.DRAG_SCROLL_WIDGET_KEY)\n    }), function (setViewBoxScroll, setViewBoxScrollDelta) {\n      var rootWidgetProps = _assign(_assign({}, _this.props), {\n        topicKey: nodeKey,\n        setViewBoxScroll: setViewBoxScroll,\n        setViewBoxScrollDelta: setViewBoxScrollDelta\n      });\n\n      return createElement(NodeLayer, {\n        ref: saveRef('node-layer')\n      }, controller.run('renderRootWidget', rootWidgetProps));\n    }));\n  };\n\n  return MindDragScrollWidget;\n}(Component);\n\nvar templateObject_1$5, templateObject_2$3;\n\nvar Modals =\n/** @class */\nfunction (_super) {\n  __extends(Modals, _super);\n\n  function Modals() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.handleClose = function () {\n      var controller = _this.props.controller;\n      var handleActiveModalClose = controller.run('handleActiveModalClose', _this.props);\n      handleActiveModalClose && handleActiveModalClose();\n    };\n\n    return _this;\n  }\n\n  Modals.prototype.render = function () {\n    var controller = this.props.controller;\n    var activeModal = controller.run('renderModal', this.props);\n    var activeModalProps = controller.run('getActiveModalProps', this.props);\n    return createElement(Dialog, {\n      onClose: this.handleClose,\n      isOpen: activeModal !== null,\n      autoFocus: true,\n      enforceFocus: true,\n      usePortal: true,\n      title: activeModalProps && activeModalProps.title,\n      style: activeModalProps && activeModalProps.style\n    }, createElement(\"div\", {\n      className: Classes.DIALOG_BODY,\n      style: {\n        minHeight: 0\n      }\n    }, activeModal));\n  };\n\n  return Modals;\n}(BaseWidget);\n\nvar RootLinksSvg = styled.svg(templateObject_1$6 || (templateObject_1$6 = __makeTemplateObject([\"\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  z-index: 1;\\n  pointer-events: none;\\n\"], [\"\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  z-index: 1;\\n  pointer-events: none;\\n\"])));\nvar log$5 = debug('node:topic-sub-links');\n\nvar RootSubLinks =\n/** @class */\nfunction (_super) {\n  __extends(RootSubLinks, _super);\n\n  function RootSubLinks() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      curves: []\n    };\n    return _this;\n  }\n\n  RootSubLinks.prototype.layout = function () {\n    var props = this.props;\n    var model = props.model,\n        getRef = props.getRef,\n        topicKey = props.topicKey,\n        zoomFactor = props.zoomFactor,\n        controller = props.controller;\n    var topic = model.getTopic(topicKey);\n    var content = getRef(contentRefKey(topicKey));\n    var svg = getRef(linksSvgRefKey(topicKey));\n    var bigView = getRef(RefKey.DRAG_SCROLL_WIDGET_KEY).bigView;\n\n    var contentRect = _getRelativeRect(content, bigView, zoomFactor);\n\n    var svgRect = _getRelativeRect(svg, bigView, zoomFactor);\n\n    var p1, p2;\n    p1 = {\n      x: centerX(contentRect) - svgRect.left,\n      y: centerY(contentRect) - svgRect.top\n    };\n    var curves = [];\n    topic.subKeys.forEach(function (key) {\n      var linkStyle = controller.run('getLinkStyle', _assign(_assign({}, props), {\n        topicKey: key\n      }));\n      var lineType = linkStyle.lineType;\n      var subTopicContent = getRef(contentRefKey(key));\n\n      var rect = _getRelativeRect(subTopicContent, bigView, zoomFactor);\n\n      if (rect.left > contentRect.right) {\n        p2 = {\n          x: rect.left,\n          y: centerY(rect)\n        };\n      } else {\n        p2 = {\n          x: rect.right,\n          y: centerY(rect)\n        };\n      }\n\n      p2 = {\n        x: p2.x - svgRect.left,\n        y: p2.y - svgRect.top\n      };\n      var curve;\n\n      if (lineType === 'curve') {\n        curve = \"M \" + p1.x + \" \" + p1.y + \" C \" + p1.x + \" \" + centerPointY(p1, p2) + \" \" + centerPointX(p1, p2) + \" \" + p2.y + \" \" + p2.x + \" \" + p2.y;\n      } else if (lineType === 'line') {\n        curve = \"M \" + p1.x + \" \" + p1.y + \" L \" + p2.x + \" \" + p2.y;\n      } else if (lineType === 'round') {\n        var vDir = p2.y > p1.y ? 1 : -1;\n        var hDir = p2.x > p1.x ? 1 : -1;\n        var radius = linkStyle.lineRadius;\n\n        if (radius == null) {\n          throw new Error('link line type is round, but lineRadius is not provided!');\n        }\n\n        if (p2.y === p1.y) {\n          curve = \"M \" + p1.x + \" \" + p1.y + \" H \" + p2.x;\n        } else {\n          // 0  1 \n          curve = \"M \" + p1.x + \" \" + p1.y + \"  V \" + (p2.y - vDir * radius) + \" A \" + radius + \" \" + radius + \" 0 0 \" + (vDir * hDir === 1 ? 0 : 1) + \" \" + (p1.x + radius * hDir) + \" \" + p2.y + \" H \" + p2.x;\n        }\n      }\n\n      curves.push(createElement(\"path\", {\n        key: \"link-\" + key,\n        d: curve,\n        strokeWidth: linkStyle.lineWidth,\n        stroke: linkStyle.lineColor,\n        fill: \"none\"\n      }));\n    });\n    this.setState({\n      curves: curves\n    });\n  };\n\n  RootSubLinks.prototype.render = function () {\n    var _a = this.props,\n        topicKey = _a.topicKey,\n        saveRef = _a.saveRef;\n    return createElement(RootLinksSvg, {\n      ref: saveRef(linksSvgRefKey(topicKey))\n    }, createElement(\"g\", null, this.state.curves));\n  };\n\n  return RootSubLinks;\n}(BaseWidget);\n\nvar templateObject_1$6;\nvar log$6 = debug('RootNode');\nvar LayerPart = styled.div(templateObject_1$7 || (templateObject_1$7 = __makeTemplateObject([\"\\n  display: flex;\\n  position: relative;\\n\\n  align-items: \", \";\\n  flex-direction: column;\\n\\n  padding: \", \";\\n\"], [\"\\n  display: flex;\\n  position: relative;\\n\\n  align-items: \", \";\\n  flex-direction: column;\\n\\n  padding: \", \";\\n\"])), function (props) {\n  //@ts-ignore\n  return props.topicDirection === TopicDirection.LEFT ? 'flex-end' : 'flex-start';\n}, function (props) {\n  //@ts-ignore\n  return props.topicDirection === TopicDirection.LEFT ? '15px 60px 15px 0px' : '15px 0px 15px 60px';\n});\nvar Topic = styled.div(templateObject_2$4 || (templateObject_2$4 = __makeTemplateObject([\"\\n  display: flex;\\n  position: relative;\\n  align-items: center;\\n  z-index: 3;\\n\"], [\"\\n  display: flex;\\n  position: relative;\\n  align-items: center;\\n  z-index: 3;\\n\"])));\n\nvar RootWidget =\n/** @class */\nfunction (_super) {\n  __extends(RootWidget, _super);\n\n  function RootWidget() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  RootWidget.prototype.renderPartTopics = function (topics, dir) {\n    var _a = this.props,\n        controller = _a.controller,\n        saveRef = _a.saveRef;\n    var res = controller.run('createSubTopics', _assign(_assign({}, this.props), {\n      dir: dir,\n      isRoot: true,\n      topics: topics\n    }));\n    if (!res) return null;\n    var subTopics = res.subTopics;\n    var cxName = \"bm-layer-\" + (dir === TopicDirection.LEFT ? 'left' : 'right');\n    return (//@ts-ignore\n      createElement(LayerPart, {\n        topicDirection: dir,\n        ref: saveRef(cxName)\n      }, subTopics)\n    );\n  };\n\n  RootWidget.prototype.render = function () {\n    log$6('render');\n    var props = this.props;\n    var model = props.model,\n        topicKey = props.topicKey,\n        saveRef = props.saveRef,\n        controller = props.controller,\n        dir = props.dir;\n    var topicStyle = controller.run('getTopicContentStyle', props);\n    var config = model.config;\n    var topicContent = controller.run('renderTopicContent', _assign(_assign({}, props), {\n      topicStyle: topicStyle,\n      dir: TopicDirection.MAIN\n    }));\n    var partTopics = controller.run('getPartTopics', {\n      layout: config.layoutDir,\n      model: model,\n      topicKey: topicKey\n    });\n    var rootTopic = createElement(Topic, {\n      ref: saveRef(topicRefKey(topicKey))\n    }, topicContent);\n    var children = controller.run('renderRootWidgetOtherChildren', props);\n\n    switch (config.layoutDir) {\n      case DiagramLayoutType.LEFT_AND_RIGHT:\n        return createElement(Fragment, null, this.renderPartTopics(partTopics.L, 'L'), rootTopic, this.renderPartTopics(partTopics.R, 'R'), children);\n\n      case DiagramLayoutType.LEFT_TO_RIGHT:\n        return createElement(Fragment, null, rootTopic, this.renderPartTopics(partTopics.R, 'R'), children);\n\n      case DiagramLayoutType.RIGHT_TO_LEFT:\n        return createElement(Fragment, null, this.renderPartTopics(partTopics.L, 'L'), rootTopic, children);\n\n      case DiagramLayoutType.TOP_TO_BOTTOM:\n        return createElement(Fragment, null, rootTopic, this.renderPartTopics(partTopics.B, 'B'), children);\n    }\n\n    return null;\n  };\n\n  return RootWidget;\n}(Component);\n\nvar templateObject_1$7, templateObject_2$4;\nvar SettingTitle = styled.div(templateObject_1$8 || (templateObject_1$8 = __makeTemplateObject([\"\\n  margin-top: 10px;\\n  margin-bottom: 5px;\\n  font-weight: bold;\\n\"], [\"\\n  margin-top: 10px;\\n  margin-bottom: 5px;\\n  font-weight: bold;\\n\"])));\nvar SettingItem = styled.span(templateObject_2$5 || (templateObject_2$5 = __makeTemplateObject([\"\\n  margin: 0px 10px 0px 0px;\\n\"], [\"\\n  margin: 0px 10px 0px 0px;\\n\"])));\nvar SettingRow = styled(Flex)(templateObject_3$2 || (templateObject_3$2 = __makeTemplateObject([\"\\n  margin: 5px 0;\\n\"], [\"\\n  margin: 5px 0;\\n\"])));\n\nvar SettingGroup = function SettingGroup(props) {\n  return createElement(\"div\", null, props.children, createElement(Divider, {\n    style: {\n      margin: '10px 0'\n    }\n  }));\n};\n\nvar ColorBar = styled.div(templateObject_4$1 || (templateObject_4$1 = __makeTemplateObject([\"\\n  height: 3px;\\n  width: 80%;\\n  margin-left: 10%;\\n  margin-right: 10%;\\n  margin-bottom: 2px;\\n  background: \", \";\\n\"], [\"\\n  height: 3px;\\n  width: 80%;\\n  margin-left: 10%;\\n  margin-right: 10%;\\n  margin-bottom: 2px;\\n  background: \", \";\\n\"])), function (props) {\n  return props.color;\n});\nvar WithBorder = styled.div(templateObject_5$1 || (templateObject_5$1 = __makeTemplateObject([\"\\n  border: 1px solid grey;\\n  cursor: pointer;\\n  font-weight: bold;\\n\"], [\"\\n  border: 1px solid grey;\\n  cursor: pointer;\\n  font-weight: bold;\\n\"])));\n\nvar renderItem = function renderItem(unit) {\n  return function (width, _a) {\n    var handleClick = _a.handleClick,\n        modifiers = _a.modifiers,\n        query = _a.query;\n    return createElement(MenuItem, {\n      text: \"\" + width + unit,\n      key: width,\n      onClick: handleClick\n    });\n  };\n};\n\nvar PxSelect = Select.ofType();\n\nvar borderWidthItems = __spread(Array(7).keys());\n\nvar templateObject_1$8, templateObject_2$5, templateObject_3$2, templateObject_4$1, templateObject_5$1;\n\nvar borderWidthItems$1 = __spread(Array(7).keys());\n\nvar borderRadiusItems = [0, 5, 10, 15, 20, 25, 30, 35];\nvar borderStyleItems = ['none', 'solid', 'dotted', 'dashed', 'double'];\n\nfunction BorderStyleEditor(props) {\n  var topicStyle = props.topicStyle,\n      setStyle = props.setStyle;\n\n  var handleBorderWidthChange = function handleBorderWidthChange(value) {\n    // log('handleBorderWithChange:', value);\n    setStyle({\n      borderWidth: value + \"px\"\n    });\n  };\n\n  var handleBorderStyleChange = function handleBorderStyleChange(value) {\n    setStyle({\n      borderStyle: value\n    });\n  };\n\n  var handleBorderRadiusChange = function handleBorderRadiusChange(value) {\n    // log('handleBorderRadiusChange:', value);\n    setStyle({\n      borderRadius: value + \"px\"\n    });\n  };\n\n  var handleBorderColorChange = function handleBorderColorChange(color) {\n    setStyle({\n      borderColor: color.hex\n    });\n  };\n\n  return createElement(SettingGroup, null, createElement(SettingTitle, null, \"Border\"), createElement(\"div\", null, createElement(SettingItem, null, createElement(PxSelect, {\n    items: borderWidthItems$1,\n    itemRenderer: renderItem('px'),\n    filterable: false,\n    onItemSelect: handleBorderWidthChange\n  }, createElement(Button, {\n    text: \"width: \" + (topicStyle.borderWidth ? topicStyle.borderWidth : '0px')\n  }))), createElement(SettingItem, null, createElement(PxSelect, {\n    items: borderStyleItems,\n    itemRenderer: renderItem(''),\n    filterable: false,\n    onItemSelect: handleBorderStyleChange\n  }, createElement(Button, {\n    text: \"style: \" + (topicStyle.borderStyle ? topicStyle.borderStyle : 'none')\n  }))), createElement(SettingItem, null, createElement(PxSelect, {\n    items: borderRadiusItems,\n    itemRenderer: renderItem('px'),\n    filterable: false,\n    onItemSelect: handleBorderRadiusChange\n  }, createElement(Button, {\n    text: \"radius: \" + topicStyle.borderRadius\n  }))), createElement(SettingItem, null, createElement(Popover, null, createElement(WithBorder, null, createElement(\"div\", {\n    className: iconClassName(IconName.COLOR_PICKER)\n  }), createElement(ColorBar, {\n    color: topicStyle.borderColor\n  })), createElement(\"div\", null, createElement(SketchPicker, {\n    color: topicStyle.borderColor,\n    onChangeComplete: handleBorderColorChange\n  }))))));\n}\n\nfunction ClearAllCustomStyle(props) {\n  var controller = props.controller;\n\n  var handleClearAllCustomStyle = function handleClearAllCustomStyle(e) {\n    controller.run('clearAllCustomStyle', props);\n  };\n\n  return createElement(SettingGroup, null, createElement(SettingItem, null, createElement(Button, {\n    onClick: handleClearAllCustomStyle\n  }, \"Clear All Custom Styles\")));\n}\n\nvar lineTypes = ['curve', 'round', 'line'];\n\nvar renderLineTypeItem = function renderLineTypeItem(lineType, _a) {\n  var handleClick = _a.handleClick,\n      modifiers = _a.modifiers,\n      query = _a.query;\n  return createElement(MenuItem, {\n    text: \"\" + lineType,\n    key: lineType,\n    onClick: handleClick\n  });\n};\n\nfunction LinkStyleEditor(props) {\n  var controller = props.controller; // const topicStyle: TopicStyle = controller.run('getTopicStyle', props);\n\n  var linkStyle = controller.run('getLinkStyle', props);\n  var subLinkStyle = controller.run('getSubLinkStyle', props);\n\n  var handleLinkWidthChange = function handleLinkWidthChange(value) {\n    controller.run('setLinkStyle', _assign(_assign({}, props), {\n      linkStyle: {\n        lineWidth: value + \"px\"\n      }\n    }));\n  };\n\n  var handleLinkTypeChange = function handleLinkTypeChange(value) {\n    controller.run('setLinkStyle', _assign(_assign({}, props), {\n      linkStyle: {\n        lineType: value\n      }\n    }));\n  };\n\n  var handleSubLinkWidthChange = function handleSubLinkWidthChange(value) {\n    controller.run('setSubLinkStyle', _assign(_assign({}, props), {\n      subLinkStyle: {\n        lineWidth: value + \"px\"\n      }\n    }));\n  };\n\n  var handleSubLinkTypeChange = function handleSubLinkTypeChange(value) {\n    controller.run('setSubLinkStyle', _assign(_assign({}, props), {\n      subLinkStyle: {\n        lineType: value\n      }\n    }));\n  };\n\n  var handleLinkColorChange = function handleLinkColorChange(color) {\n    controller.run('setLinkStyle', _assign(_assign({}, props), {\n      linkStyle: {\n        lineColor: color.hex\n      }\n    }));\n  };\n\n  var handleSubLinkColorChange = function handleSubLinkColorChange(color) {\n    controller.run('setSubLinkStyle', _assign(_assign({}, props), {\n      subLinkStyle: {\n        lineColor: color.hex\n      }\n    }));\n  };\n\n  return createElement(SettingGroup, null, createElement(SettingTitle, null, \"Link\"), createElement(SettingRow, {\n    alignItems: \"center\"\n  }, createElement(Margin, {\n    margin: \"0 5px 0 0\"\n  }, \"LinkToParent: \"), createElement(SettingItem, null, createElement(PxSelect, {\n    items: borderWidthItems,\n    itemRenderer: renderItem('px'),\n    filterable: false,\n    onItemSelect: handleLinkWidthChange\n  }, createElement(Button, {\n    text: \"width: \" + (linkStyle ? linkStyle.lineWidth + 'px' : '0px')\n  }))), createElement(SettingItem, null, createElement(PxSelect, {\n    items: lineTypes,\n    itemRenderer: renderLineTypeItem,\n    filterable: false,\n    onItemSelect: handleLinkTypeChange\n  }, createElement(Button, {\n    text: \"lineType: \" + linkStyle.lineType\n  }))), createElement(SettingItem, null, createElement(Popover, null, createElement(WithBorder, null, createElement(\"div\", {\n    className: iconClassName(IconName.COLOR_PICKER)\n  }), createElement(ColorBar, {\n    color: linkStyle.lineColor\n  })), createElement(\"div\", null, createElement(SketchPicker, {\n    color: linkStyle.lineColor,\n    onChangeComplete: handleLinkColorChange\n  }))))), createElement(SettingRow, {\n    alignItems: \"center\"\n  }, createElement(Margin, {\n    margin: \"0 5px 0 0\"\n  }, \"SubLinks: \"), createElement(SettingItem, null, createElement(PxSelect, {\n    items: borderWidthItems,\n    itemRenderer: renderItem('px'),\n    filterable: false,\n    onItemSelect: handleSubLinkWidthChange\n  }, createElement(Button, {\n    text: \"width: \" + (subLinkStyle ? subLinkStyle.lineWidth + 'px' : '0px')\n  }))), createElement(SettingItem, null, createElement(PxSelect, {\n    items: lineTypes,\n    itemRenderer: renderLineTypeItem,\n    filterable: false,\n    onItemSelect: handleSubLinkTypeChange\n  }, createElement(Button, {\n    text: \"lineType: \" + subLinkStyle.lineType\n  }))), createElement(SettingItem, null, createElement(Popover, null, createElement(WithBorder, null, createElement(\"div\", {\n    className: iconClassName(IconName.COLOR_PICKER)\n  }), createElement(ColorBar, {\n    color: subLinkStyle.lineColor\n  })), createElement(\"div\", null, createElement(SketchPicker, {\n    color: subLinkStyle.lineColor,\n    onChangeComplete: handleSubLinkColorChange\n  }))))));\n}\n\nfunction TextStyleEditor(props) {\n  var topicStyle = props.topicStyle,\n      setStyle = props.setStyle;\n\n  var handleFontSizeChange = function handleFontSizeChange(value) {\n    // log('handleFontSizeChange:', value);\n    setStyle({\n      fontSize: value\n    });\n  };\n\n  var handleLineHeightChange = function handleLineHeightChange(e) {\n    // log('handleLineHeightChange:', e.target.value);\n    setStyle({\n      lineHeight: e.target.value\n    });\n  };\n\n  var handleColorChange = function handleColorChange(color) {\n    setStyle({\n      color: color.hex\n    });\n  };\n\n  var fontSizeNumInputProps = {\n    min: 12,\n    max: 100,\n    value: parseInt(topicStyle.fontSize),\n    style: {\n      width: 50\n    },\n    onValueChange: handleFontSizeChange\n  };\n  var lineHeightInputProps = {\n    style: {\n      width: 50\n    },\n    value: topicStyle.lineHeight || '',\n    onChange: handleLineHeightChange\n  };\n  return createElement(SettingGroup, null, createElement(SettingTitle, null, \"Text Editor\"), createElement(Flex, null, createElement(SettingItem, null, createElement(Flex, {\n    alignItems: \"center\"\n  }, createElement(Margin, {\n    margin: \"0 5px 0 0\"\n  }, \"FontSize: \"), createElement(NumericInput, _assign({}, fontSizeNumInputProps)))), createElement(SettingItem, null, createElement(Flex, {\n    alignItems: \"center\"\n  }, createElement(Margin, {\n    margin: \"0 5px 0 0\"\n  }, \"LineHeight: \"), createElement(InputGroup, _assign({}, lineHeightInputProps)))), createElement(SettingItem, null, createElement(Popover, null, createElement(WithBorder, null, createElement(\"div\", {\n    className: iconClassName(IconName.COLOR_PICKER)\n  }), createElement(ColorBar, {\n    color: topicStyle.color\n  })), createElement(\"div\", null, createElement(SketchPicker, {\n    color: topicStyle.color,\n    onChangeComplete: handleColorChange\n  }))))));\n}\n\nvar log$7 = debug('node:style-editor');\nvar StyleEditorRoot = styled.div(templateObject_1$9 || (templateObject_1$9 = __makeTemplateObject([\"\\n  position: absolute;\\n  background: white;\\n  right: 30px;\\n  top: 20px;\\n  border-radius: 2px;\\n  z-index: 4;\\n\"], [\"\\n  position: absolute;\\n  background: white;\\n  right: 30px;\\n  top: 20px;\\n  border-radius: 2px;\\n  z-index: 4;\\n\"])));\nvar PopRoot = styled.div(templateObject_2$6 || (templateObject_2$6 = __makeTemplateObject([\"\\n  padding: 10px;\\n\"], [\"\\n  padding: 10px;\\n\"])));\n\nvar StyleEditor =\n/** @class */\nfunction (_super) {\n  __extends(StyleEditor, _super);\n\n  function StyleEditor(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.setShowPanel = function (showPanel) {\n      return function () {\n        _this.setState({\n          showPanel: showPanel\n        });\n      };\n    };\n\n    _this.setTopicContentStyle = function (style) {\n      var props = _this.props;\n      var controller = props.controller;\n      controller.run('setTopicContentStyle', _assign(_assign({}, props), {\n        style: style\n      }));\n    };\n\n    _this.handleBackgroundColorChange = function (color) {\n      _this.setTopicContentStyle({\n        background: color.hex\n      });\n    };\n\n    _this.handleClearStyle = function () {\n      if (_this.topic.style) {\n        _this.operation(OpType.SET_STYLE, _assign(_assign({}, _this.props), {\n          style: null\n        }));\n\n        _this.setState({});\n      }\n    };\n\n    _this.handleCopyStyle = function () {\n      var props = _this.props;\n      var controller = props.controller;\n      _this.copiedStyle = controller.run('getTopicStyle', props);\n      log$7(_this.copiedStyle);\n    };\n\n    _this.handlePasteStyle = function () {\n      if (_this.copiedStyle) {\n        _this.operation(OpType.SET_STYLE, _assign(_assign({}, _this.props), {\n          style: JSON.stringify(_this.copiedStyle)\n        }));\n\n        _this.setState({});\n      }\n    };\n\n    _this.state = {\n      showPanel: false\n    };\n    return _this;\n  }\n\n  StyleEditor.prototype.render = function () {\n    var props = this.props;\n    var controller = props.controller,\n        model = props.model;\n    if (!model.focusKey) return null;\n    var topicStyle = controller.run('getTopicContentStyle', props);\n\n    if (!this.state.showPanel) {\n      return createElement(StyleEditorRoot, null, createElement(IconBg, {\n        onClick: this.setShowPanel(true)\n      }, createElement(ShowMenuIcon, {\n        className: iconClassName(IconName.SHOW_MENU)\n      })));\n    }\n\n    var setStyle = this.setTopicContentStyle;\n    return createElement(StyleEditorRoot, null, createElement(Title, null, createElement(CloseIcon, {\n      className: iconClassName(IconName.CLOSE),\n      onClick: this.setShowPanel(false)\n    })), createElement(PopRoot, null, BorderStyleEditor(_assign(_assign({}, props), {\n      topicStyle: topicStyle,\n      setStyle: setStyle\n    })), TextStyleEditor(_assign(_assign({}, props), {\n      topicStyle: topicStyle,\n      setStyle: setStyle\n    })), createElement(SettingGroup, null, createElement(SettingTitle, null, \"Background\"), createElement(\"div\", null, createElement(SettingItem, null, createElement(Popover, null, createElement(WithBorder, null, createElement(\"div\", {\n      className: iconClassName(IconName.COLOR_PICKER)\n    }), createElement(ColorBar, {\n      color: topicStyle.background\n    })), createElement(\"div\", null, createElement(SketchPicker, {\n      color: topicStyle.background,\n      onChangeComplete: this.handleBackgroundColorChange\n    })))))), LinkStyleEditor(props), createElement(SettingGroup, null, createElement(SettingItem, null, createElement(Button, {\n      onClick: this.handleClearStyle\n    }, \"Clear Topic Style\")), createElement(SettingItem, null, createElement(Button, {\n      onClick: this.handleCopyStyle\n    }, \"Copy Style\")), createElement(SettingItem, null, createElement(Button, {\n      onClick: this.handlePasteStyle\n    }, \"Paste Style\"))), ClearAllCustomStyle(props)));\n  };\n\n  return StyleEditor;\n}(BaseWidget);\n\nvar templateObject_1$9, templateObject_2$6;\nvar Icon$1 = styled.div(templateObject_3$3 || (templateObject_3$3 = __makeTemplateObject([\"\\n  position: absolute;\\n  top: calc(50% - 10px);\\n  \", \";\\n  border-radius: 50%;\\n  width: 20px;\\n  height: 20px;\\n  text-align: center;\\n  //@ts-ignore\\n  background: \", \";\\n  cursor: pointer;\\n  padding: 0;\\n  font-size: 14px;\\n  line-height: 20px;\\n  border: 0;\\n  z-index: 2;\\n\"], [\"\\n  position: absolute;\\n  top: calc(50% - 10px);\\n  \", \";\\n  border-radius: 50%;\\n  width: 20px;\\n  height: 20px;\\n  text-align: center;\\n  //@ts-ignore\\n  background: \", \";\\n  cursor: pointer;\\n  padding: 0;\\n  font-size: 14px;\\n  line-height: 20px;\\n  border: 0;\\n  z-index: 2;\\n\"])), function (_a) {\n  var dir = _a.dir;\n  if (dir === TopicDirection.RIGHT) return css(templateObject_1$a || (templateObject_1$a = __makeTemplateObject([\"\\n        right: -25px;\\n      \"], [\"\\n        right: -25px;\\n      \"])));\n  if (dir === TopicDirection.LEFT) return css(templateObject_2$7 || (templateObject_2$7 = __makeTemplateObject([\"\\n        left: -25px;\\n      \"], [\"\\n        left: -25px;\\n      \"])));\n}, function (props) {\n  return props.background;\n});\n\nfunction TopicCollapseIcon(props) {\n  var _a;\n\n  var model = props.model,\n      topicKey = props.topicKey,\n      topicStyle = props.topicStyle,\n      dir = props.dir,\n      saveRef = props.saveRef,\n      onClickCollapse = props.onClickCollapse;\n  var topic = model.getTopic(topicKey);\n  return topic.subKeys.size > 0 ? createElement(Icon$1, {\n    ref: saveRef(collapseRefKey(topicKey)),\n    onClick: onClickCollapse,\n    background: topicStyle.background,\n    dir: dir,\n    className: cx((_a = {\n      icon: true,\n      iconfont: true\n    }, _a[\"bm-\" + (topic.collapse ? 'plus' : 'minus')] = true, _a))\n  }) : null;\n}\n\nvar templateObject_1$a, templateObject_2$7, templateObject_3$3;\nvar log$8 = debug('node:topic-content2');\nvar EditingRoot = styled.div(templateObject_1$b || (templateObject_1$b = __makeTemplateObject([\"\\n  position: relative;\\n\"], [\"\\n  position: relative;\\n\"])));\nvar EditingWrapper = styled.div(templateObject_2$8 || (templateObject_2$8 = __makeTemplateObject([\"\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  width: auto;\\n  z-index: 10;\\n  color: black;\\n\"], [\"\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  width: auto;\\n  z-index: 10;\\n  color: black;\\n\"])));\n\nvar cancelEvent$1 = function cancelEvent$1(e) {\n  log$8('cancelEvent');\n  e.preventDefault();\n  e.stopPropagation();\n};\n\nfunction TopicContent(props) {\n  var controller = props.controller,\n      model = props.model,\n      topicKey = props.topicKey,\n      getRef = props.getRef;\n  var readOnly = model.editingContentKey !== topicKey;\n  var editor = controller.run('renderTopicContentEditor', _assign(_assign({}, props), {\n    readOnly: readOnly\n  }));\n  var child;\n\n  if (readOnly) {\n    child = editor;\n  } else {\n    var wrapper_1;\n\n    var wrapperRef = function wrapperRef(ref) {\n      if (ref) {\n        wrapper_1 = ref;\n        contentResizeObserver_1.observe(wrapper_1);\n      }\n    };\n\n    var rect_1 = {\n      width: 50,\n      height: 40\n    };\n    var editorDiv = getRef(\"content-editor-\" + topicKey);\n    if (editorDiv) rect_1 = editorDiv.getBoundingClientRect();\n\n    var contentResizeCallback = function contentResizeCallback(entries, observer) {\n      var r = entries[0].contentRect;\n      wrapper_1.style.left = (rect_1.width - r.width) / 2 + 'px';\n      wrapper_1.style.top = (rect_1.height - r.height) / 2 + 'px';\n    };\n\n    var contentResizeObserver_1 = new ResizeObserver(contentResizeCallback);\n    log$8(rect_1);\n    child = createElement(Fragment, null, createElement(\"div\", {\n      style: {\n        width: rect_1.width,\n        height: rect_1.height\n      }\n    }), createElement(EditingWrapper, {\n      ref: wrapperRef\n    }, editor));\n  }\n\n  return createElement(EditingRoot, {\n    onDragEnter: cancelEvent$1,\n    onDragOver: cancelEvent$1\n  }, child);\n}\n\nvar templateObject_1$b, templateObject_2$8;\nvar log$9 = debug('node:topic-content-widget');\nvar TopicContent$1 = styled.div(templateObject_1$c || (templateObject_1$c = __makeTemplateObject([\"\\n  display: flex;\\n  align-items: center;\\n  cursor: pointer;\\n  //overflow: hidden;\\n  position: relative;\\n\"], [\"\\n  display: flex;\\n  align-items: center;\\n  cursor: pointer;\\n  //overflow: hidden;\\n  position: relative;\\n\"])));\nvar TopicContentWithDropArea = styled.div(templateObject_2$9 || (templateObject_2$9 = __makeTemplateObject([\"\\n  position: relative;\\n\"], [\"\\n  position: relative;\\n\"])));\n\nvar TopicContentWidget =\n/** @class */\nfunction (_super) {\n  __extends(TopicContentWidget, _super);\n\n  function TopicContentWidget(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.onDragStart = function (ev) {\n      _this.run('handleTopicDragStart', _assign(_assign({}, _this.props), {\n        ev: ev\n      }));\n    };\n\n    _this.onDragOver = function (ev) {\n      // log('onDragOver');\n      ev.preventDefault();\n    };\n\n    _this.onDragEnter = function (ev) {\n      log$9('onDragEnter', _this.props.topicKey);\n\n      _this.run('handleTopicDragEnter', _assign(_assign({}, _this.props), {\n        ev: ev,\n        dropDir: 'in'\n      }));\n    };\n\n    _this.onDragLeave = function (ev) {\n      _this.run('handleTopicDragLeave', _assign(_assign({}, _this.props), {\n        ev: ev,\n        dropDir: 'in'\n      }));\n    };\n\n    _this.onDrop = function (ev) {\n      log$9('onDrop');\n\n      _this.run('handleTopicDrop', _assign(_assign({}, _this.props), {\n        ev: ev,\n        dropDir: 'in'\n      }));\n    };\n\n    _this.onClick = function (ev) {\n      // log('onClick');\n      var props = _this.props;\n      var controller = props.controller; //TODO bug [Violation] 'setTimeout' handler took 69ms\n\n      _this.handleTopicClickTimeout = setTimeout(function () {\n        log$9('handleTopicClick'); //this.props, props, onClick, topic-content-editoronClickOutside\n        //onClickOutside,model, props,model model\n\n        controller.run('handleTopicClick', _assign(_assign({}, _this.props), {\n          ev: ev\n        }));\n      }, 200);\n    };\n\n    _this.onDoubleClick = function (ev) {\n      clearTimeout(_this.handleTopicClickTimeout);\n      var controller = _this.props.controller;\n      log$9('handleTopicDoubleClick');\n      controller.run('handleTopicDoubleClick', _assign(_assign({}, _this.props), {\n        ev: ev\n      }));\n    };\n\n    _this.needRelocation = false;\n\n    _this.onClickCollapse = function (e) {\n      e.stopPropagation();\n      var _a = _this.props,\n          topicKey = _a.topicKey,\n          getRef = _a.getRef,\n          controller = _a.controller;\n      _this.needRelocation = true;\n      var collapseIcon = getRef(collapseRefKey(topicKey));\n      var rect = collapseIcon.getBoundingClientRect();\n      log$9('oldRect', rect);\n      _this.oldCollapseIconVector = [rect.left + rect.width / 2, rect.top + rect.height / 2];\n      log$9('oldCollapseIconVector', _this.oldCollapseIconVector); // this.oldCollapseIconVector = controller.run('getRelativeVectorFromViewPort', {\n      //   ...this.props,\n      //   element: collapseIcon\n      // });\n\n      _this.operation(OpType.TOGGLE_COLLAPSE, _this.props);\n    };\n\n    _this.state = {\n      dragEnter: false\n    };\n    return _this;\n  }\n\n  TopicContentWidget.prototype.renderContextMenu = function () {\n    var controller = this.props.controller;\n    this.operation(OpType.FOCUS_TOPIC, _assign(_assign({}, this.props), {\n      focusMode: FocusMode.SHOW_POPUP\n    }));\n    return controller.run('renderTopicContextMenu', this.props);\n  };\n\n  TopicContentWidget.prototype.onContextMenuClose = function () {// Optional method called once the context menu is closed.\n  };\n\n  TopicContentWidget.prototype.componentDidUpdate = function () {\n    if (this.needRelocation) {\n      var _a = this.props,\n          getRef = _a.getRef,\n          topicKey = _a.topicKey,\n          setViewBoxScrollDelta = _a.setViewBoxScrollDelta,\n          controller = _a.controller;\n      var newIcon = getRef(collapseRefKey(topicKey));\n      var newRect = newIcon.getBoundingClientRect(); // const newVector = controller.run('getRelativeVectorFromViewPort', {\n      //   ...this.props,\n      //   element: getRef(collapseRefKey(topicKey))\n      // });\n\n      var newVector = [newRect.left + newRect.width / 2, newRect.top + newRect.height / 2];\n      var z = controller.run('getZoomFactor', _assign({}, this.props));\n      log$9('newVector:', newVector);\n      log$9('oldVector:', this.oldCollapseIconVector); //TODO bug\n\n      var vector = [newVector[0] - this.oldCollapseIconVector[0], newVector[1] - this.oldCollapseIconVector[1]]; // vector = [vector[0]*z,vector[1]*z]\n\n      log$9('vector', vector);\n      setViewBoxScrollDelta(vector[0], vector[1]);\n      this.needRelocation = false;\n    }\n  };\n\n  TopicContentWidget.prototype.render = function () {\n    var props = this.props;\n    var saveRef = props.saveRef,\n        topicKey = props.topicKey,\n        model = props.model,\n        controller = props.controller,\n        topicStyle = props.topicStyle,\n        dir = props.dir;\n    log$9('render', topicKey, model.focusMode);\n    var draggable = model.editingContentKey !== topicKey;\n    var collapseIcon = controller.run('renderTopicCollapseIcon', _assign(_assign({}, props), {\n      onClickCollapse: this.onClickCollapse.bind(this)\n    }));\n    var prevDropArea = controller.run('renderTopicDropArea', _assign(_assign({}, props), {\n      dropDir: 'prev'\n    }));\n    var nextDropArea = controller.run('renderTopicDropArea', _assign(_assign({}, props), {\n      dropDir: 'next'\n    }));\n    var dropEventHandlers = {\n      onDragEnter: this.onDragEnter,\n      onDragLeave: this.onDragLeave,\n      onDragOver: this.onDragOver,\n      onDrop: this.onDrop\n    }; // log(topicKey, 'style', topicStyle);\n\n    return createElement(TopicContentWithDropArea, null, prevDropArea, createElement(TopicContent$1, _assign({\n      style: topicStyle,\n      draggable: draggable,\n      ref: saveRef(contentRefKey(topicKey)),\n      onDragStart: this.onDragStart,\n      onClick: this.onClick,\n      onDoubleClick: this.onDoubleClick\n    }, dropEventHandlers), controller.run('renderTopicBlocks', props)), nextDropArea, dir !== TopicDirection.MAIN && collapseIcon);\n  };\n\n  TopicContentWidget = __decorate([ContextMenuTarget], TopicContentWidget);\n  return TopicContentWidget;\n}(BaseWidget);\n\nvar templateObject_1$c, templateObject_2$9;\n\nvar TopicContextMenu =\n/** @class */\nfunction (_super) {\n  __extends(TopicContextMenu, _super);\n\n  function TopicContextMenu() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  TopicContextMenu.prototype.render = function () {\n    var controller = this.props.controller;\n    return createElement(Menu, null, controller.run('customizeTopicContextMenu', this.props));\n  };\n\n  return TopicContextMenu;\n}(BaseWidget);\n\nvar log$a = debug('node:topic-desc');\nvar TooltipContentWrapper = styled.div(templateObject_1$d || (templateObject_1$d = __makeTemplateObject([\"\\n  overflow: auto;\\n\"], [\"\\n  overflow: auto;\\n\"])));\n\nfunction TopicDesc(props) {\n  var controller = props.controller,\n      model = props.model,\n      topicKey = props.topicKey,\n      getRef = props.getRef;\n  var isEditing = model.editingDescKey === topicKey;\n  log$a('isEditing', isEditing);\n\n  var onClick = function onClick(e) {\n    e.stopPropagation();\n    controller.run('operation', _assign(_assign({}, props), {\n      opType: OpType.START_EDITING_DESC\n    }));\n  };\n\n  var desc = model.getTopic(topicKey).getBlock(BlockType.DESC);\n  if (!isEditing && controller.run('isBlockEmpty', _assign(_assign({}, props), {\n    block: desc.block\n  }))) return null;\n  var descEditor = controller.run('renderTopicDescEditor', props);\n  var diagramRoot = getRef(RefKey.DIAGRAM_ROOT_KEY);\n  var style = {\n    maxWidth: '800px',\n    maxHeight: '600px'\n  };\n\n  if (diagramRoot) {\n    var dRect = diagramRoot.getBoundingClientRect();\n    style.maxWidth = dRect.width * 0.6 + \"px\";\n    style.maxHeight = dRect.height * 0.8 + \"px\";\n  }\n\n  var tooltipContent = createElement(TooltipContentWrapper, {\n    onClick: cancelEvent,\n    classname: Classes.POPOVER_DISMISS,\n    style: style\n  }, descEditor);\n  var icon = createElement(TopicBlockIcon, {\n    onClick: onClick,\n    className: iconClassName(IconName.NOTES),\n    tabIndex: -1\n  });\n  var tooltipProps = {\n    autoFocus: false,\n    content: tooltipContent,\n    target: icon,\n    interactionKind: PopoverInteractionKind.HOVER,\n    hoverOpenDelay: 500\n  };\n  var descIcon = desc.block && createElement(Popover, _assign({}, tooltipProps));\n  return descIcon;\n}\n\nvar templateObject_1$d;\nvar FocusHighlightSvg = styled.svg(templateObject_1$e || (templateObject_1$e = __makeTemplateObject([\"\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  z-index: 2;\\n  pointer-events: none;\\n\"], [\"\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  z-index: 2;\\n  pointer-events: none;\\n\"])));\n\nvar TopicHighlight =\n/** @class */\nfunction (_super) {\n  __extends(TopicHighlight, _super);\n\n  function TopicHighlight() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      content: null\n    };\n    return _this;\n  }\n\n  TopicHighlight.prototype.layout = function () {\n    var _a = this.props,\n        getRef = _a.getRef,\n        model = _a.model,\n        zoomFactor = _a.zoomFactor;\n    var focusKey = model.focusKey;\n    var focusMode = model.focusMode;\n\n    if (!focusKey || focusMode === FocusMode.EDITING_CONTENT) {\n      this.setState({\n        content: null\n      });\n      return;\n    }\n\n    var content = getRef(contentRefKey(focusKey));\n    var bigView = getRef(RefKey.DRAG_SCROLL_WIDGET_KEY).bigView;\n    var svg = getRef(RefKey.SVG_HIGHLIGHT_KEY);\n\n    var contentRect = _getRelativeRect(content, bigView, zoomFactor);\n\n    var svgRect = _getRelativeRect(svg, bigView, zoomFactor);\n\n    var padding = 3;\n    var x = contentRect.left - svgRect.left - padding;\n    var y = contentRect.top - svgRect.top - padding;\n    var width = contentRect.width + 2 * padding;\n    var height = contentRect.height + 2 * padding;\n    this.setState({\n      content: createElement(\"rect\", {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        fill: \"none\",\n        stroke: model.config.theme.highlightColor,\n        strokeWidth: 2\n      })\n    });\n  };\n\n  TopicHighlight.prototype.render = function () {\n    var saveRef = this.props.saveRef;\n    return createElement(FocusHighlightSvg, {\n      ref: saveRef(RefKey.SVG_HIGHLIGHT_KEY)\n    }, this.state.content);\n  };\n\n  return TopicHighlight;\n}(BaseWidget);\n\nvar templateObject_1$e;\nvar TopicLinksSvg = styled.svg(templateObject_1$f || (templateObject_1$f = __makeTemplateObject([\"\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  z-index: 1;\\n  pointer-events: none;\\n\"], [\"\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  z-index: 1;\\n  pointer-events: none;\\n\"])));\nvar log$b = debug('node:topic-sub-links');\n\nvar TopicSubLinks =\n/** @class */\nfunction (_super) {\n  __extends(TopicSubLinks, _super);\n\n  function TopicSubLinks() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      curves: []\n    };\n    return _this;\n  }\n\n  TopicSubLinks.prototype.layout = function () {\n    var props = this.props;\n    var model = props.model,\n        getRef = props.getRef,\n        topicKey = props.topicKey,\n        dir = props.dir,\n        controller = props.controller;\n    var z = controller.run('getZoomFactor', props);\n    var topic = model.getTopic(topicKey);\n    var content = getRef(contentRefKey(topicKey));\n    var svg = getRef(linksSvgRefKey(topicKey));\n    var collapseIcon = getRef(collapseRefKey(topicKey));\n    var bigView = getRef(RefKey.DRAG_SCROLL_WIDGET_KEY).bigView;\n\n    var svgRect = _getRelativeRect(svg, bigView, z);\n\n    var collapseRect = _getRelativeRect(collapseIcon, bigView, z);\n\n    var contentRect = _getRelativeRect(content, bigView, z);\n\n    log$b(topicKey);\n    log$b('svgRect', svgRect);\n    log$b('collapseRect', collapseRect);\n    log$b('contentRect', contentRect);\n    var p1, p2, p3;\n\n    if (dir === TopicDirection.RIGHT) {\n      p1 = {\n        x: 0,\n        y: centerY(contentRect) - svgRect.top\n      };\n      p2 = {\n        x: collapseRect.right - svgRect.left + 10,\n        y: p1.y\n      };\n    } else if (dir === TopicDirection.LEFT) {\n      p1 = {\n        x: svgRect.right - svgRect.left,\n        y: centerY(contentRect) - svgRect.top\n      };\n      p2 = {\n        x: collapseRect.left - svgRect.left - 10,\n        y: p1.y\n      };\n    }\n\n    var curves = [];\n    topic.subKeys.forEach(function (key) {\n      var curve;\n      var linkStyle = controller.run('getLinkStyle', _assign(_assign({}, props), {\n        topicKey: key\n      }));\n      var subContent = getRef(contentRefKey(key));\n\n      var rect = _getRelativeRect(subContent, bigView, z);\n\n      if (dir === TopicDirection.RIGHT) {\n        p3 = {\n          x: rect.left - svgRect.left,\n          y: centerY(rect) - svgRect.top\n        };\n      }\n\n      if (dir === TopicDirection.LEFT) {\n        p3 = {\n          x: rect.right - svgRect.left,\n          y: centerY(rect) - svgRect.top\n        };\n      }\n\n      var lineType = linkStyle.lineType;\n\n      if (lineType === 'curve') {\n        curve = \"M \" + p1.x + \" \" + p1.y + \" L \" + p2.x + \" \" + p2.y + \" C \" + p2.x + \" \" + centerPointY(p2, p3) + \" \" + centerPointX(p2, p3) + \" \" + p3.y + \" \" + p3.x + \" \" + p3.y;\n      } else if (lineType === 'round') {\n        var vDir = p3.y > p1.y ? 1 : -1;\n        var hDir = p3.x > p1.x ? 1 : -1;\n        var radius = linkStyle.lineRadius; // if (p3.y === p1.y) { //\n\n        if (topic.subKeys.size === 1 || Math.abs(p3.y - p1.y) <= 1) {\n          curve = \"M \" + p1.x + \" \" + p1.y + \" L \" + p3.x + \" \" + p3.y;\n        } else {\n          // 0  1 \n          curve = \"M \" + p1.x + \" \" + p1.y + \" H \" + p2.x + \" V \" + (p3.y - vDir * radius) + \" A \" + radius + \" \" + radius + \" 0 0 \" + (vDir * hDir === 1 ? 0 : 1) + \" \" + (p2.x + radius * hDir) + \" \" + p3.y + \" H \" + p3.x;\n        }\n      } else if (lineType === 'line') {\n        curve = \"M \" + p1.x + \" \" + p1.y + \" H \" + p2.x + \" L \" + p3.x + \" \" + p3.y;\n      }\n\n      curves.push(createElement(\"path\", {\n        key: \"link-\" + key,\n        d: curve,\n        strokeWidth: linkStyle.lineWidth,\n        stroke: linkStyle.lineColor,\n        fill: \"none\"\n      }));\n    });\n    this.setState({\n      curves: curves\n    });\n  };\n\n  TopicSubLinks.prototype.render = function () {\n    var _a = this.props,\n        topicKey = _a.topicKey,\n        saveRef = _a.saveRef,\n        model = _a.model;\n    var style = {\n      transform: \"scale(\" + 1 / model.zoomFactor + \")\"\n    };\n    return createElement(TopicLinksSvg, {\n      ref: saveRef(linksSvgRefKey(topicKey))\n    }, createElement(\"g\", null, this.state.curves));\n  };\n\n  return TopicSubLinks;\n}(BaseWidget);\n\nvar templateObject_1$f;\nvar log$c = debug('node:topic-widget');\nvar Node = styled.div(templateObject_1$g || (templateObject_1$g = __makeTemplateObject([\"\\n  display: flex;\\n  align-items: center;\\n  flex-direction: \", \";\\n\"], [\"\\n  display: flex;\\n  align-items: center;\\n  flex-direction: \", \";\\n\"])), function (props) {\n  return props.topicDirection === TopicDirection.RIGHT ? 'row' : 'row-reverse';\n}); // TODO\n\nvar NodeChildren = styled.div(templateObject_2$a || (templateObject_2$a = __makeTemplateObject([\"\\n  position: relative;\\n  padding: \", \";\\n\"], [\"\\n  position: relative;\\n  padding: \", \";\\n\"])), function (props) {\n  return props.dir === TopicDirection.RIGHT ? \"0 0 0 \" + props.marginH + \"px\" : \"0 \" + props.marginH + \"px 0 0\";\n});\nvar NodeTopic = styled.div(templateObject_3$4 || (templateObject_3$4 = __makeTemplateObject([\"\\n  display: flex;\\n  position: relative;\\n  align-items: center;\\n\\n  flex-direction: \", \";\\n\"], [\"\\n  display: flex;\\n  position: relative;\\n  align-items: center;\\n\\n  flex-direction: \", \";\\n\"])), function (props) {\n  return props.topicDirection === TopicDirection.RIGHT ? 'row' : 'row-reverse';\n});\n\nvar TopicWidget =\n/** @class */\nfunction (_super) {\n  __extends(TopicWidget, _super);\n\n  function TopicWidget() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  TopicWidget.prototype.renderSubTopics = function () {\n    var props = this.props;\n    var controller = props.controller,\n        model = props.model,\n        topicKey = props.topicKey,\n        dir = props.dir;\n    var topics = model.getTopic(topicKey).subKeys.toArray();\n    var res = controller.run('createSubTopics', _assign(_assign({}, props), {\n      topics: topics\n    }));\n    if (!res) return null;\n    var subTopics = res.subTopics;\n    var subLinks = controller.run('renderSubLinks', props);\n    return createElement(NodeChildren, {\n      dir: dir,\n      marginH: model.config.theme.marginH\n    }, subTopics, \" \", subLinks);\n  }; // componentDidUpdate(): void {\n  //   this.layoutLinks();\n  // }\n  //\n  // componentDidMount(): void {\n  //   this.layoutLinks();\n  // }\n\n\n  TopicWidget.prototype.layoutLinks = function () {\n    log$c('layoutLinks');\n    var _a = this.props,\n        getRef = _a.getRef,\n        topicKey = _a.topicKey;\n    var links = getRef(linksRefKey(topicKey));\n    links && links.layout();\n  };\n\n  TopicWidget.prototype.render = function () {\n    log$c('render');\n    var props = this.props;\n    var controller = props.controller,\n        topicKey = props.topicKey,\n        dir = props.dir,\n        saveRef = props.saveRef;\n    var topicStyle = controller.run('getTopicContentStyle', props);\n\n    var propsMore = _assign(_assign({}, props), {\n      topicStyle: topicStyle\n    });\n\n    var topicContent = controller.run('renderTopicContent', propsMore);\n    return createElement(Node, {\n      topicDirection: dir\n    }, createElement(NodeTopic, {\n      topicDirection: dir,\n      ref: saveRef(topicRefKey(topicKey))\n    }, topicContent), this.renderSubTopics());\n  };\n\n  return TopicWidget;\n}(Component);\n\nvar templateObject_1$g, templateObject_2$a, templateObject_3$4;\nvar log$d = debug('node:view-port-viewer');\nvar ViewerRoot = styled.div(templateObject_1$h || (templateObject_1$h = __makeTemplateObject([\"\\n  position: absolute;\\n  background: white;\\n  right: 30px;\\n  bottom: 20px;\\n  border-radius: 2px;\\n  z-index: 3;\\n  display: flex;\\n  flex-direction: row;\\n  user-select: none;\\n\"], [\"\\n  position: absolute;\\n  background: white;\\n  right: 30px;\\n  bottom: 20px;\\n  border-radius: 2px;\\n  z-index: 3;\\n  display: flex;\\n  flex-direction: row;\\n  user-select: none;\\n\"])));\nvar Item_ = styled(Btn)(templateObject_2$b || (templateObject_2$b = __makeTemplateObject([\"\\n  margin: 10px;\\n\"], [\"\\n  margin: 10px;\\n\"])));\nvar ZoomFactorSpan = styled.span(templateObject_3$5 || (templateObject_3$5 = __makeTemplateObject([\"\\n  display: inline-block;\\n  width: 80px;\\n  height: 18px;\\n\"], [\"\\n  display: inline-block;\\n  width: 80px;\\n  height: 18px;\\n\"])));\n\nvar Item = function Item(props) {\n  return createElement(Tooltip, {\n    content: props.tooltip,\n    position: Position.TOP,\n    className: Classes.ICON\n  }, createElement(Item_, {\n    onClick: props.onClick\n  }, props.children));\n};\n\nvar ViewPortViewer =\n/** @class */\nfunction (_super) {\n  __extends(ViewPortViewer, _super);\n\n  function ViewPortViewer(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.zoomFactorChange = function (zoomFactor) {\n      log$d('zoomFactorChange', zoomFactor);\n\n      _this.setState({\n        zoomFactor: zoomFactor\n      });\n    };\n\n    _this.onClickResetZoom = function (e) {\n      var props = _this.props;\n      var controller = props.controller;\n      controller.run('setZoomFactor', _assign(_assign({}, props), {\n        zoomFactor: 1\n      }));\n    };\n\n    _this.onClickAddZoom = function (e) {\n      var props = _this.props;\n      var controller = props.controller;\n      var zoomFactor = controller.run('getZoomFactor', props);\n      controller.run('setZoomFactor', _assign(_assign({}, props), {\n        zoomFactor: zoomFactor + 0.1\n      }));\n    };\n\n    _this.onClickMinusZoom = function (e) {\n      var props = _this.props;\n      var controller = props.controller;\n      var zoomFactor = controller.run('getZoomFactor', props);\n      controller.run('setZoomFactor', _assign(_assign({}, props), {\n        zoomFactor: zoomFactor - 0.1\n      }));\n    };\n\n    _this.onClickCollapseAll = function (e) {\n      var props = _this.props;\n      var controller = props.controller;\n      controller.run('addEventListener', _assign(_assign({}, props), {\n        key: EventKey.CENTER_ROOT_TOPIC,\n        listener: _this.centerRootTopic,\n        once: true\n      }));\n      controller.run('operation', _assign(_assign({}, props), {\n        opType: OpType.COLLAPSE_ALL\n      }));\n    };\n\n    _this.onClickExpandAll = function (e) {\n      var props = _this.props;\n      var controller = props.controller;\n      controller.run('addEventListener', _assign(_assign({}, props), {\n        key: EventKey.CENTER_ROOT_TOPIC,\n        listener: _this.centerRootTopic,\n        once: true\n      }));\n      controller.run('operation', _assign(_assign({}, props), {\n        opType: OpType.EXPAND_ALL\n      }));\n    };\n\n    _this.centerRootTopic = function () {\n      var _a = _this.props,\n          getRef = _a.getRef,\n          model = _a.model,\n          controller = _a.controller;\n      var rootTopic = getRef(topicRefKey(model.editorRootTopicKey));\n      var dragScroll = getRef(RefKey.DRAG_SCROLL_WIDGET_KEY);\n      var viewBox = dragScroll.viewBox;\n      var vector = getRelativeVector(rootTopic, viewBox); //TODO\n\n      dragScroll.setViewBoxScrollDelta(vector[0], vector[1]);\n    };\n\n    return _this;\n  }\n\n  ViewPortViewer.prototype.componentDidMount = function () {\n    var props = this.props;\n    var controller = props.controller;\n    controller.run('addZoomFactorChangeEventListener', _assign(_assign({}, props), {\n      listener: this.zoomFactorChange\n    }));\n  };\n\n  ViewPortViewer.prototype.componentWillUnmount = function () {\n    var props = this.props;\n    var controller = props.controller;\n    controller.run('removeZoomFactorChangeEventListener', _assign(_assign({}, props), {\n      listener: this.zoomFactorChange\n    }));\n  };\n\n  ViewPortViewer.prototype.render = function () {\n    log$d('render');\n    var props = this.props;\n    var controller = props.controller;\n    var zoomFactor = controller.run('getZoomFactor', props);\n    return createElement(ViewerRoot, null, createElement(Item, {\n      onClick: this.onClickCollapseAll,\n      tooltip: \"collapse all\"\n    }, Icon(IconName.COLLAPSE_ALL)), createElement(Item, {\n      onClick: this.onClickExpandAll,\n      tooltip: \"expand all\"\n    }, Icon(IconName.EXPAND_ALL)), createElement(Item, {\n      onClick: this.centerRootTopic,\n      tooltip: \"center root topic\"\n    }, Icon(IconName.CENTER)), createElement(Item, {\n      onClick: this.onClickMinusZoom,\n      tooltip: \"zoom in\"\n    }, Icon(IconName.MINUS)), createElement(Item, {\n      onClick: this.onClickResetZoom,\n      tooltip: \"reset zoom\"\n    }, createElement(ZoomFactorSpan, null, \"zoom:\" + Math.floor(zoomFactor * 100) + \"%\")), createElement(Item, {\n      onClick: this.onClickAddZoom,\n      tooltip: \"zoom out\"\n    }, Icon(IconName.PLUS)));\n  };\n\n  return ViewPortViewer;\n}(BaseWidget);\n\nvar templateObject_1$h, templateObject_2$b, templateObject_3$5;\nvar items = [{\n  icon: 'edit',\n  label: 'edit',\n  shortcut: 'Space',\n  rootCanUse: true,\n  opType: OpType.START_EDITING_CONTENT\n}, {\n  icon: 'add-sibling',\n  label: 'add sibling',\n  shortcut: 'Enter',\n  opType: OpType.ADD_SIBLING\n}, {\n  icon: 'add-child',\n  label: 'add child',\n  shortcut: 'Tab',\n  rootCanUse: true,\n  opType: OpType.ADD_CHILD\n}, {\n  icon: 'notes',\n  label: 'edit notes',\n  shortcut: 'Alt + D',\n  rootCanUse: true,\n  opType: OpType.START_EDITING_DESC\n}, {\n  icon: 'delete-node',\n  label: 'delete node',\n  shortcut: 'Del',\n  opType: OpType.DELETE_TOPIC\n}, {\n  icon: 'root',\n  label: 'set as editor root',\n  shortcut: 'Alt + Shift + F',\n  opType: OpType.SET_EDITOR_ROOT\n}];\n\nfunction customizeTopicContextMenu(props) {\n  var topicKey = props.topicKey,\n      model = props.model,\n      controller = props.controller;\n  var isRoot = topicKey === model.editorRootTopicKey;\n\n  function onClickItem(item) {\n    return function (e) {\n      item.opType && controller.run('operation', _assign(_assign({}, props), {\n        opType: item.opType\n      }));\n    };\n  }\n\n  return items.map(function (item) {\n    return isRoot && !item.rootCanUse ? null : createElement(MenuItem, {\n      key: item.label,\n      icon: Icon(item.icon),\n      text: item.label,\n      labelElement: createElement(\"kbd\", null, item.shortcut),\n      onClick: onClickItem(item)\n    });\n  });\n}\n\nvar DescEditorWrapper = styled.div(templateObject_1$i || (templateObject_1$i = __makeTemplateObject([\"\\n  overflow: auto;\\n  padding: 0px 0px 0px 20px;\\n  background: #88888850;\\n\"], [\"\\n  overflow: auto;\\n  padding: 0px 0px 0px 20px;\\n  background: #88888850;\\n\"])));\n\nfunction renderDrawer(props) {\n  var controller = props.controller,\n      model = props.model,\n      topicKey = props.topicKey;\n\n  if (model.focusMode === FocusMode.EDITING_DESC) {\n    var onDescEditorClose = function onDescEditorClose(e) {\n      e.stopPropagation();\n      var key = \"topic-desc-data-\" + topicKey;\n      var descData = controller.run('deleteTempValue', {\n        key: key\n      });\n      controller.run('operation', _assign(_assign({}, props), {\n        opType: OpType.SET_TOPIC_BLOCK,\n        topicKey: topicKey,\n        blockType: BlockType.DESC,\n        data: descData,\n        focusMode: FocusMode.NORMAL\n      }));\n    };\n\n    var descEditor = controller.run('renderTopicDescEditor', props);\n    return createElement(Drawer, {\n      title: \"Edit Notes\",\n      icon: Icon('note'),\n      isOpen: true,\n      hasBackdrop: true,\n      backdropProps: {\n        onMouseDown: cancelEvent\n      },\n      isCloseButtonShown: false,\n      onClose: onDescEditorClose,\n      size: \"70%\"\n    }, createElement(DescEditorWrapper, null, descEditor));\n  }\n}\n\nvar templateObject_1$i;\n\nfunction Theme(_a) {\n  var theme = _a.theme,\n      children = _a.children;\n  return (//@ts-ignore\n    createElement(ThemeProvider, {\n      theme: theme\n    }, createElement(Fragment, null, children))\n  );\n}\n\nvar log$e = debug('plugin:rendering');\n\nfunction RenderingPlugin() {\n  var DiagramRoot = styled.div(templateObject_1$j || (templateObject_1$j = __makeTemplateObject([\"\\n    width: 100%;\\n    height: 100%;\\n    background: \", \";\\n    position: relative;\\n  \"], [\"\\n    width: 100%;\\n    height: 100%;\\n    background: \", \";\\n    position: relative;\\n  \"])), function (props) {\n    return props.theme.background;\n  });\n  return {\n    renderDiagram: function renderDiagram(props) {\n      var model = props.model,\n          controller = props.controller;\n      return createElement(SaveRef, null, function (saveRef, getRef) {\n        var widgetProps = _assign(_assign({}, props), {\n          saveRef: saveRef,\n          getRef: getRef\n        });\n\n        log$e('renderDiagram', model);\n        return createElement(Theme, {\n          theme: model.config.theme\n        }, createElement(DiagramRoot, {\n          ref: saveRef(RefKey.DIAGRAM_ROOT_KEY)\n        }, createElement(MindDragScrollWidget, _assign({}, widgetProps)), controller.run('renderDiagramCustomize', widgetProps)));\n      });\n    },\n    renderDrawer: renderDrawer,\n    renderDiagramCustomize: function renderDiagramCustomize(props) {\n      var controller = props.controller,\n          model = props.model;\n\n      var nProps = _assign(_assign({}, props), {\n        topicKey: model.focusKey\n      });\n\n      var breadcrumbs = controller.run('renderEditorRootBreadcrumbs', nProps);\n      var styleEditor = controller.run('renderStyleEditor', nProps);\n      var modals = controller.run('renderModals', nProps);\n      var drawer = controller.run('renderDrawer', nProps);\n      var viewportViewer = controller.run('renderViewPortViewer', nProps);\n      return [breadcrumbs, styleEditor, modals, drawer, viewportViewer];\n    },\n    renderEditorRootBreadcrumbs: function renderEditorRootBreadcrumbs(props) {\n      return createElement(EditorRootBreadcrumbs, _assign({\n        key: \"EditorRootBreadcrumbs\"\n      }, props));\n    },\n    renderModals: function renderModals(props) {\n      return createElement(Modals, _assign({\n        key: \"modals\"\n      }, props));\n    },\n    renderModal: function renderModal(props) {\n      return null;\n    },\n    getActiveModalProps: function getActiveModalProps(props) {\n      return null;\n    },\n    renderDoc: function renderDoc(_a) {\n      var children = _a.children;\n      return children;\n    },\n    renderRootWidget: function renderRootWidget(props) {\n      return createElement(RootWidget, _assign({}, props));\n    },\n    renderTopicWidget: function renderTopicWidget(props) {\n      return createElement(TopicWidget, _assign({}, props));\n    },\n    renderTopicContent: function renderTopicContent(props) {\n      return createElement(TopicContentWidget, _assign({}, props));\n    },\n    renderTopicContextMenu: function renderTopicContextMenu(props) {\n      return createElement(TopicContextMenu, _assign({}, props));\n    },\n    customizeTopicContextMenu: customizeTopicContextMenu,\n    renderTopicCollapseIcon: function renderTopicCollapseIcon(props) {\n      return createElement(TopicCollapseIcon, _assign({}, props));\n    },\n    renderTopicBlocks: function renderTopicBlocks(props) {\n      var model = props.model,\n          topicKey = props.topicKey,\n          controller = props.controller;\n      var topic = model.getTopic(topicKey);\n      var blocks = topic.blocks;\n      var res = [];\n      var i = 0;\n      blocks.forEach(function (block) {\n        var b = controller.run('renderTopicBlock', _assign(_assign({}, props), {\n          block: block,\n          blockKey: \"block-\" + i\n        }));\n\n        if (b) {\n          res.push(createElement(Fragment, {\n            key: \"block-\" + i\n          }, b));\n          i++;\n        }\n      });\n      return res;\n    },\n    renderTopicBlock: function renderTopicBlock(props) {\n      var controller = props.controller,\n          block = props.block;\n\n      switch (block.type) {\n        case BlockType.CONTENT:\n          return controller.run('renderTopicBlockContent', props);\n\n        case BlockType.DESC:\n          return controller.run('renderTopicBlockDesc', props);\n      }\n\n      return null;\n    },\n    renderTopicBlockContent: function renderTopicBlockContent(props) {\n      return createElement(TopicContent, _assign({}, props));\n    },\n    renderTopicBlockDesc: function renderTopicBlockDesc(props) {\n      return createElement(TopicDesc, _assign({}, props));\n    },\n    renderSubLinks: function renderSubLinks(props) {\n      var saveRef = props.saveRef,\n          topicKey = props.topicKey,\n          model = props.model;\n      var topic = model.getTopic(topicKey);\n      if (topic.subKeys.size === 0 || topic.collapse) return null;\n      return createElement(TopicSubLinks, _assign({\n        ref: saveRef(linksRefKey(topicKey))\n      }, props));\n    },\n    renderRootSubLinks: function renderRootSubLinks(props) {\n      var saveRef = props.saveRef,\n          topicKey = props.topicKey,\n          model = props.model;\n      var topic = model.getTopic(topicKey);\n      if (topic.subKeys.size === 0) return null;\n      return createElement(RootSubLinks, _assign({\n        ref: saveRef(linksRefKey(topicKey))\n      }, props));\n    },\n    renderFocusItemHighlight: function renderFocusItemHighlight(props) {\n      var saveRef = props.saveRef;\n      return createElement(TopicHighlight, _assign({\n        ref: saveRef(RefKey.FOCUS_HIGHLIGHT_KEY)\n      }, props));\n    },\n    renderRootWidgetOtherChildren: function renderRootWidgetOtherChildren(props) {\n      var controller = props.controller;\n      var zoomFactor = controller.run('getZoomFactor', props);\n      props = _assign(_assign({}, props), {\n        zoomFactor: zoomFactor\n      });\n      return createElement(Fragment, null, controller.run('renderRootSubLinks', props), controller.run('renderFocusItemHighlight', props), controller.run('renderDragAndDropEffect', props));\n    },\n    renderStyleEditor: function renderStyleEditor(props) {\n      return createElement(StyleEditor, _assign({\n        key: \"style-editor\"\n      }, props));\n    },\n    renderViewPortViewer: function renderViewPortViewer(props) {\n      return createElement(ViewPortViewer, _assign({\n        key: \"view-port-viewer\"\n      }, props));\n    }\n  };\n}\n\nvar templateObject_1$j;\nvar log$f = debug('plugin:utils');\n\nfunction UtilsPlugin() {\n  var tempValueMap = new Map();\n  var eventListenerMap = new Map();\n  return {\n    addTempValueChangeListener: function addTempValueChangeListener(props) {\n      var key = props.key,\n          listener = props.listener;\n\n      if (!eventListenerMap.has(key)) {\n        eventListenerMap.set(key, []);\n      }\n\n      eventListenerMap.get(key).push(listener);\n    },\n    removeTempValueChangeListener: function removeTempValueChangeListener(props) {\n      var key = props.key,\n          listener = props.listener;\n\n      if (eventListenerMap.has(key)) {\n        eventListenerMap[key] = eventListenerMap.get(key).filter(function (l) {\n          return l !== listener;\n        });\n      }\n    },\n    getTempValue: function getTempValue(props) {\n      var key = props.key;\n      log$f('getTempValue', key);\n      return tempValueMap.get(key);\n    },\n    setTempValue: function setTempValue(props) {\n      var e_1, _a;\n\n      var key = props.key,\n          value = props.value;\n      log$f('setTempValue', key);\n      tempValueMap.set(key, value);\n\n      if (eventListenerMap.has(key)) {\n        var listeners = eventListenerMap.get(key);\n\n        try {\n          for (var listeners_1 = __values(listeners), listeners_1_1 = listeners_1.next(); !listeners_1_1.done; listeners_1_1 = listeners_1.next()) {\n            var listener = listeners_1_1.value;\n            listener(value);\n          }\n        } catch (e_1_1) {\n          e_1 = {\n            error: e_1_1\n          };\n        } finally {\n          try {\n            if (listeners_1_1 && !listeners_1_1.done && (_a = listeners_1.return)) _a.call(listeners_1);\n          } finally {\n            if (e_1) throw e_1.error;\n          }\n        }\n      }\n    },\n    deleteTempValue: function deleteTempValue(props) {\n      var key = props.key;\n      log$f('deleteTempValue', key);\n      var value = tempValueMap.get(key);\n      tempValueMap.delete(key);\n      return value;\n    }\n  };\n}\n\nfunction ReactPlugin(options) {\n  return [RenderingPlugin(), UtilsPlugin()];\n}\n\nvar log$g = debug('plugin:StylePlugin');\n\nfunction StylePlugin() {\n  var colorMap = new Map();\n  var colorIndex = 0;\n  return {\n    getTopicStyle: function getTopicStyle(props) {\n      var controller = props.controller;\n      return {\n        contentStyle: controller.run('getTopicContentStyle', props),\n        linkStyle: controller.run('getLinkStyle', props),\n        subLinkStyle: controller.run('getSubLinkStyle', props)\n      };\n    },\n    getTopicContentStyle: function getTopicContentStyle(props) {\n      var topicKey = props.topicKey,\n          model = props.model,\n          controller = props.controller;\n      log$g('getTopicContentStyle:', topicKey, model);\n      var visualLevel = model.getTopicVisualLevel(topicKey);\n      var theme = model.config.theme;\n      var themeStyle;\n      if (visualLevel === TopicVisualLevel.ROOT) themeStyle = theme.rootTopic;else if (visualLevel === TopicVisualLevel.PRIMARY) themeStyle = theme.primaryTopic;else themeStyle = theme.normalTopic;\n      themeStyle = _assign(_assign({}, theme.contentStyle), themeStyle.contentStyle);\n\n      if (theme.randomColor) {\n        var randomColor = controller.run('getRandomColor', props);\n        themeStyle = _assign(_assign({}, themeStyle), {\n          background: randomColor,\n          borderColor: randomColor,\n          subLinkStyle: _assign(_assign({}, themeStyle.subLinkStyle), {\n            lineColor: randomColor\n          })\n        });\n      }\n\n      var topic = model.getTopic(topicKey);\n\n      if (!topic.style) {\n        return themeStyle;\n      }\n\n      var customStyle = JSON.parse(topic.style);\n      return _assign(_assign({}, themeStyle), customStyle.contentStyle);\n    },\n    getLinkStyle: function getLinkStyle(props) {\n      var topicKey = props.topicKey,\n          model = props.model,\n          controller = props.controller;\n      log$g('getLinkStyle', topicKey);\n      var visualLevel = model.getTopicVisualLevel(topicKey);\n      var theme = model.config.theme;\n      var linkStyle = theme.linkStyle;\n      var presetStyle;\n      if (visualLevel === TopicVisualLevel.ROOT) presetStyle = theme.rootTopic.linkStyle;else if (visualLevel === TopicVisualLevel.PRIMARY) presetStyle = theme.primaryTopic.linkStyle;else presetStyle = theme.normalTopic.linkStyle;\n      linkStyle = _assign(_assign({}, linkStyle), presetStyle);\n      var topic = model.getTopic(topicKey); // color\n      // if (theme.randomColor) {\n      //   const randomColor = controller.run('getRandomColor', {\n      //     ...props,\n      //     topicKey:\n      //       topic.parentKey !== model.editorRootTopicKey\n      //         ? topic.parentKey\n      //         : topicKey\n      //   });\n      //   log(randomColor);\n      //   linkStyle = {\n      //     ...linkStyle,\n      //     lineColor: randomColor\n      //   };\n      // }\n\n      if (topic.parentKey != null) {\n        var parentSubLinkStyle = controller.run('getSubLinkStyle', _assign(_assign({}, props), {\n          topicKey: topic.parentKey\n        }));\n        linkStyle = _assign(_assign({}, linkStyle), parentSubLinkStyle);\n      }\n\n      if (!topic.style) {\n        return linkStyle;\n      }\n\n      var customStyle = JSON.parse(topic.style);\n      return _assign(_assign({}, linkStyle), customStyle.linkStyle);\n    },\n    getSubLinkStyle: function getSubLinkStyle(props) {\n      var topicKey = props.topicKey,\n          model = props.model,\n          controller = props.controller;\n      log$g('getLinkStyle', topicKey);\n      var visualLevel = model.getTopicVisualLevel(topicKey);\n      var theme = model.config.theme;\n      var subLinkStyle = theme.linkStyle;\n      var presetStyle;\n      if (visualLevel === TopicVisualLevel.ROOT) presetStyle = theme.rootTopic.subLinkStyle;else if (visualLevel === TopicVisualLevel.PRIMARY) presetStyle = theme.primaryTopic.subLinkStyle;else presetStyle = theme.normalTopic.subLinkStyle;\n      subLinkStyle = _assign(_assign({}, subLinkStyle), presetStyle);\n      var topic = model.getTopic(topicKey); // color\n\n      if (theme.randomColor) {\n        var randomColor = controller.run('getRandomColor', props);\n        log$g(randomColor);\n        subLinkStyle = _assign(_assign({}, subLinkStyle), {\n          lineColor: randomColor\n        });\n      }\n\n      if (!topic.style) {\n        return subLinkStyle;\n      }\n\n      var customStyle = JSON.parse(topic.style);\n\n      var res = _assign(_assign({}, subLinkStyle), customStyle.subLinkStyle); // if (res.lineRadius == null) res.lineRadius = 5;\n\n\n      return res;\n    },\n    setTopicContentStyle: function setTopicContentStyle(props) {\n      var topicKey = props.topicKey,\n          controller = props.controller,\n          style = props.style,\n          model = props.model;\n      var topic = model.getTopic(topicKey);\n      var topicStyle = topic.style;\n      var styleObj = topicStyle ? JSON.parse(topicStyle) : {};\n\n      var newStyleObj = _assign(_assign({}, styleObj), {\n        contentStyle: _assign(_assign({}, styleObj.contentStyle), style)\n      });\n\n      if (!isEqual(styleObj, newStyleObj)) {\n        var newStyleStr = JSON.stringify(newStyleObj);\n        controller.run('operation', _assign(_assign({}, props), {\n          opType: OpType.SET_STYLE,\n          style: newStyleStr\n        }));\n      }\n    },\n    setLinkStyle: function setLinkStyle(props) {\n      var topicKey = props.topicKey,\n          controller = props.controller,\n          linkStyle = props.linkStyle,\n          model = props.model;\n      var topic = model.getTopic(topicKey);\n      var style = topic.style;\n      var styleObj = style ? JSON.parse(style) : {};\n\n      var newStyleObj = _assign(_assign({}, styleObj), {\n        linkStyle: _assign(_assign({}, styleObj.linkStyle), linkStyle)\n      });\n\n      if (!isEqual(styleObj, newStyleObj)) {\n        var newStyleStr = JSON.stringify(newStyleObj);\n        controller.run('operation', _assign(_assign({}, props), {\n          opType: OpType.SET_STYLE,\n          style: newStyleStr\n        }));\n      }\n    },\n    setSubLinkStyle: function setSubLinkStyle(props) {\n      var topicKey = props.topicKey,\n          controller = props.controller,\n          subLinkStyle = props.subLinkStyle,\n          model = props.model;\n      var topic = model.getTopic(topicKey);\n      var style = topic.style;\n      var styleObj = style ? JSON.parse(style) : {};\n\n      var newStyleObj = _assign(_assign({}, styleObj), {\n        subLinkStyle: _assign(_assign({}, styleObj.subLinkStyle), subLinkStyle)\n      });\n\n      if (!isEqual(styleObj, newStyleObj)) {\n        var newStyleStr = JSON.stringify(newStyleObj);\n        controller.run('operation', _assign(_assign({}, props), {\n          opType: OpType.SET_STYLE,\n          style: newStyleStr\n        }));\n      }\n    },\n    getTopicThemeStyle: function getTopicThemeStyle(props) {\n      var topicKey = props.topicKey,\n          model = props.model;\n      var visualLevel = model.getTopicVisualLevel(topicKey);\n      var theme = model.config.theme;\n      if (visualLevel === TopicVisualLevel.ROOT) return theme.rootTopic;\n      if (visualLevel === TopicVisualLevel.PRIMARY) return theme.primaryTopic;\n      return theme.normalTopic;\n    },\n    getRandomColor: function getRandomColor(props) {\n      var topicKey = props.topicKey;\n      if (colorMap.has(topicKey)) return colorMap.get(topicKey);\n      var colors = ['#00CC99', '#FFEE88', '#A167A5', '#E5F993', '#F5C396', '#DB995A', '#83BCFF', '#ED7B84', '#739E82', '#D3BCC0', '#FFA0FD', '#EFD3D7', '#C6878F'];\n      var color = colors[++colorIndex % colors.length];\n      colorMap.set(topicKey, color);\n      log$g('getRandomColor', topicKey, color);\n      return color;\n    },\n    clearAllCustomStyle: function clearAllCustomStyle(props) {\n      var model = props.model,\n          controller = props.controller;\n      var newModel = model.withMutations(function (model) {\n        model.topics.keySeq().forEach(function (key) {\n          model.setIn(['topics', key, 'style'], null);\n        });\n      });\n      controller.change(newModel);\n    }\n  };\n}\n\nfunction DefaultPlugin() {\n  return [ReactPlugin(), LayoutPlugin(), OperationPlugin(), StylePlugin(), EventPlugin(), HotKeyPlugin(), DragAndDrop(), SimpleTextEditorPlugin()];\n}\n\nvar log$h = debug('node:Diagram');\n\nvar Diagram =\n/** @class */\nfunction (_super) {\n  __extends(Diagram, _super);\n\n  function Diagram() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.resolveController = memoizeOne(function (plugins, commands, TheDefaultPlugin) {\n      if (plugins === void 0) {\n        plugins = [];\n      }\n\n      var defaultPlugin = TheDefaultPlugin();\n      _this.controller = new Controller({\n        plugins: [plugins, defaultPlugin],\n        commands: commands,\n        construct: false,\n        onChange: _this.props.onChange\n      });\n\n      _this.controller.run('onConstruct');\n    });\n    return _this;\n  }\n\n  Diagram.prototype.getDiagramProps = function () {\n    return this.diagramProps;\n  };\n\n  Diagram.prototype.renderHotkeys = function () {\n    var _a = this.diagramProps,\n        controller = _a.controller,\n        model = _a.model;\n\n    if (model.focusMode === FocusMode.NORMAL || model.focusMode === FocusMode.SHOW_POPUP) {\n      var hotKeys = controller.run('customizeHotKeys', this.diagramProps);\n      if (hotKeys === null) return null;\n\n      if (!(hotKeys instanceof Map)) {\n        throw new TypeError('customizeHotKeys must return a Map');\n      }\n\n      var children_1 = [];\n      hotKeys.forEach(function (v, k) {\n        children_1.push(createElement(Hotkey, _assign({\n          key: k\n        }, v, {\n          global: true\n        })));\n      });\n      return createElement(Hotkeys, null, children_1);\n    }\n\n    return createElement(Hotkeys, null);\n  };\n\n  Diagram.prototype.render = function () {\n    var _a = this.props,\n        commands = _a.commands,\n        plugins = _a.plugins,\n        model = _a.model;\n    this.resolveController(plugins, commands, DefaultPlugin);\n    this.diagramProps = _assign(_assign({}, this.props), {\n      controller: this.controller,\n      model: model,\n      diagram: this\n    });\n    return this.controller.run('renderDiagram', this.diagramProps);\n  };\n\n  Diagram = __decorate([HotkeysTarget], Diagram);\n  return Diagram;\n}(Component);\n\nexport { BaseWidget, Btn, CloseIcon, Diagram, DragScrollWidget, EventKey, Flex, Icon, IconBg, IconName, Margin, RefKey, SaveRef, ShowMenuIcon, Title, TopicBlockIcon, cancelEvent, center, centerPointX, centerPointY, centerX, centerY, collapseRefKey, contentRefKey, getLinkKey, _getRelativeRect as getRelativeRect, getRelativeVector, iconClassName, linksRefKey, linksSvgRefKey, topicRefKey, topicWidgetRefKey };","import { BlockType } from '@blink-mind/core';\nimport { createElement } from 'react';\nimport { BaseWidget } from '@blink-mind/renderer-react';\nimport RichMarkDownEditor from 'awehook-rich-markdown-editor';\nimport debug from 'debug';\nimport styled from 'styled-components';\nimport MarkdownSerializer from 'slate-md-serializer';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar _extendStatics = function extendStatics(d, b) {\n  _extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) {\n      if (b.hasOwnProperty(p)) d[p] = b[p];\n    }\n  };\n\n  return _extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  _extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar _assign = function __assign() {\n  _assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return _assign.apply(this, arguments);\n};\n\nfunction __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n}\n\nvar log = debug('node:topic-content-editor');\nvar NodeContent = styled.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  \", \";\\n\"], [\"\\n  \", \";\\n\"])), function (props) {\n  return !props.readOnly && \"\\n    // padding: 75px\\n    // min-width: 150px\\n    // min-height: 150px\\n  \";\n});\n\nvar RichTextEditor =\n/** @class */\nfunction (_super) {\n  __extends(RichTextEditor, _super);\n\n  function RichTextEditor(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.onMouseDown = function (e) {\n      e.stopPropagation();\n    };\n\n    _this.onMouseMove = function (e) {\n      e.stopPropagation();\n    };\n\n    _this.rootRef = function (saveRef) {\n      return function (ref) {\n        saveRef(ref);\n        _this.root = ref;\n      };\n    };\n\n    _this._handleClick = function (event) {\n      var wasOutside = !_this.root.contains(event.target);\n      wasOutside && _this.onClickOutSide(event);\n    };\n\n    _this.initState();\n\n    return _this;\n  }\n\n  RichTextEditor.prototype.initState = function () {\n    this.state = {\n      content: this.getContent()\n    };\n  };\n\n  RichTextEditor.prototype.getContent = function () {\n    var block = this.getCustomizeProps().block;\n    return block.data;\n  };\n\n  RichTextEditor.prototype.onChange = function (value) {\n    this.setState({\n      content: value\n    });\n  };\n\n  RichTextEditor.prototype.getCustomizeProps = function () {\n    return null;\n  };\n\n  RichTextEditor.prototype.componentDidMount = function () {\n    document.addEventListener('click', this._handleClick);\n  };\n\n  RichTextEditor.prototype.componentWillUnmount = function () {\n    document.removeEventListener('click', this._handleClick);\n  };\n\n  RichTextEditor.prototype.onClickOutSide = function (e) {};\n\n  RichTextEditor.prototype.render = function () {\n    var _a = this.props,\n        topicKey = _a.topicKey,\n        saveRef = _a.saveRef;\n\n    var _b = this.getCustomizeProps(),\n        readOnly = _b.readOnly,\n        refKeyPrefix = _b.refKeyPrefix,\n        placeholder = _b.placeholder;\n\n    log('readOnly:', readOnly);\n    var content = readOnly ? this.getContent() : this.state.content;\n    if (content == null) return null;\n    var key = refKeyPrefix + \"-\" + topicKey;\n\n    var _c = this,\n        onMouseDown = _c.onMouseDown,\n        onMouseMove = _c.onMouseMove;\n\n    var richEditorProps = {\n      editorValue: content,\n      readOnly: readOnly,\n      onChange: this.onChange.bind(this),\n      placeholder: placeholder\n    };\n    var nodeContentProps = {\n      key: key,\n      ref: this.rootRef(saveRef(key)),\n      readOnly: readOnly,\n      onMouseDown: onMouseDown,\n      onMouseMove: onMouseMove\n    };\n    return createElement(NodeContent, _assign({}, nodeContentProps), createElement(RichMarkDownEditor, _assign({}, richEditorProps)));\n  };\n\n  return RichTextEditor;\n}(BaseWidget);\n\nvar templateObject_1;\n\nvar TopicDescEditor =\n/** @class */\nfunction (_super) {\n  __extends(TopicDescEditor, _super);\n\n  function TopicDescEditor() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  TopicDescEditor.prototype.initState = function () {\n    _super.prototype.initState.call(this);\n\n    var _a = this.props,\n        controller = _a.controller,\n        topicKey = _a.topicKey;\n    var key = \"topic-desc-data-\" + topicKey;\n    var value = this.state.content;\n    controller.run('setTempValue', {\n      key: key,\n      value: value\n    });\n  };\n\n  TopicDescEditor.prototype.getCustomizeProps = function () {\n    var _a = this.props,\n        model = _a.model,\n        topicKey = _a.topicKey;\n    var block = model.getTopic(topicKey).getBlock(BlockType.DESC).block;\n    var readOnly = model.editingDescKey !== topicKey;\n    var refKeyPrefix = 'desc-editor';\n    return {\n      block: block,\n      readOnly: readOnly,\n      refKeyPrefix: refKeyPrefix,\n      placeholder: 'write topic notes here'\n    };\n  };\n\n  TopicDescEditor.prototype.onChange = function (value) {\n    var _a = this.props,\n        controller = _a.controller,\n        topicKey = _a.topicKey;\n    var key = \"topic-desc-data-\" + topicKey;\n    controller.run('setTempValue', {\n      key: key,\n      value: value\n    });\n    this.setState({\n      content: value\n    });\n  };\n\n  return TopicDescEditor;\n}(RichTextEditor);\n\nvar markdownSerializer = new MarkdownSerializer();\n\nfunction RichTextEditorPlugin() {\n  return {\n    // renderTopicBlockContent(props) {\n    //   return <TopicContent {...props} />;\n    // },\n    // renderTopicContentEditor(props) {\n    //   return <TopicContentEditor {...props} />;\n    // },\n    renderTopicDescEditor: function renderTopicDescEditor(props) {\n      return createElement(TopicDescEditor, _assign({}, props));\n    },\n    isBlockEmpty: function isBlockEmpty(props, next) {\n      var block = props.block,\n          controller = props.controller;\n\n      if (block.type === BlockType.CONTENT || block.type === BlockType.DESC) {\n        return block.data == null || controller.run('serializeBlockData', props) === '';\n      }\n\n      return next();\n    },\n    serializeBlockData: function serializeBlockData(props, next) {\n      var block = props.block;\n\n      if (block.type === BlockType.DESC) {\n        return typeof block.data === 'string' ? block.data : markdownSerializer.serialize(block.data);\n      }\n\n      return next();\n    },\n    serializeBlock: function serializeBlock(props, next) {\n      var block = props.block,\n          controller = props.controller;\n\n      if (block.type === BlockType.CONTENT || block.type === BlockType.DESC) {\n        var res = {\n          type: block.type,\n          data: controller.run('serializeBlockData', props)\n        };\n        return res;\n      }\n\n      return next();\n    },\n    deserializeBlock: function deserializeBlock(props, next) {\n      return next();\n    }\n  };\n}\n\nexport default RichTextEditorPlugin;","import { Model, Config, Topic, Block } from '@blink-mind/core';\nimport debug from 'debug';\nimport { List, Map } from 'immutable';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\nvar _assign = function __assign() {\n  _assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return _assign.apply(this, arguments);\n};\n\nvar log = debug('plugin:json-serializer');\nvar DATA_VERSION = '0.0';\n\nfunction JsonSerializerPlugin() {\n  return {\n    serializeModel: function serializeModel(props) {\n      var model = props.model,\n          controller = props.controller;\n      var obj = {\n        rootTopicKey: model.rootTopicKey,\n        topics: model.topics.valueSeq().toArray().map(function (topic) {\n          return controller.run('serializeTopic', _assign(_assign({}, props), {\n            topic: topic\n          }));\n        }),\n        config: controller.run('serializeConfig', _assign(_assign({}, props), {\n          config: model.config\n        })),\n        formatVersion: model.formatVersion\n      };\n      return obj;\n    },\n    deserializeModel: function deserializeModel(props) {\n      var obj = props.obj,\n          controller = props.controller;\n\n      if (obj.formatVersion == null) {\n        obj.formatVersion = '0.0';\n      }\n\n      var rootTopicKey = obj.rootTopicKey,\n          topics = obj.topics,\n          config = obj.config,\n          formatVersion = obj.formatVersion;\n      var model = new Model();\n      model = model.merge({\n        rootTopicKey: rootTopicKey,\n        editorRootTopicKey: rootTopicKey,\n        config: controller.run('deserializeConfig', _assign(_assign({}, props), {\n          obj: config,\n          formatVersion: formatVersion\n        })),\n        topics: controller.run('deserializeTopics', _assign(_assign({}, props), {\n          obj: topics,\n          formatVersion: formatVersion\n        })),\n        formatVersion: DATA_VERSION\n      });\n      log('deserializeModel', model);\n      return model;\n    },\n    serializeConfig: function serializeConfig(props) {\n      var config = props.config;\n      return config.toJS();\n    },\n    deserializeConfig: function deserializeConfig(props) {\n      var obj = props.obj;\n      return new Config(obj);\n    },\n    serializeTopic: function serializeTopic(props) {\n      var topic = props.topic,\n          controller = props.controller;\n      return {\n        key: topic.key,\n        parentKey: topic.parentKey,\n        subKeys: topic.subKeys.toArray(),\n        collapse: topic.collapse,\n        style: topic.style,\n        blocks: topic.blocks.map(function (block) {\n          return controller.run('serializeBlock', _assign(_assign({}, props), {\n            block: block\n          }));\n        })\n      };\n    },\n    deserializeTopic: function deserializeTopic(props) {\n      var obj = props.obj,\n          controller = props.controller;\n      var key = obj.key,\n          parentKey = obj.parentKey,\n          subKeys = obj.subKeys,\n          blocks = obj.blocks,\n          style = obj.style,\n          collapse = obj.collapse;\n      var topic = new Topic();\n      topic = topic.merge({\n        key: key,\n        parentKey: parentKey,\n        subKeys: List(subKeys),\n        style: style,\n        collapse: collapse,\n        blocks: controller.run('deserializeBlocks', _assign(_assign({}, props), {\n          obj: blocks\n        }))\n      });\n      return topic;\n    },\n    deserializeTopics: function deserializeTopics(props) {\n      var obj = props.obj,\n          controller = props.controller;\n      var topics = Map();\n      topics = topics.withMutations(function (topics) {\n        obj.forEach(function (topic) {\n          return topics.set(topic.key, controller.run('deserializeTopic', _assign(_assign({}, props), {\n            obj: topic\n          })));\n        });\n      });\n      return topics;\n    },\n    serializeBlock: function serializeBlock(props) {\n      var block = props.block;\n      return block.toJS();\n    },\n    deserializeBlock: function deserializeBlock(props) {\n      var obj = props.obj;\n      return new Block(obj);\n    },\n    deserializeBlocks: function deserializeBlocks(props) {\n      var obj = props.obj,\n          controller = props.controller;\n      var blocks = List();\n      blocks = blocks.withMutations(function (blocks) {\n        obj.forEach(function (block) {\n          return blocks.push(controller.run('deserializeBlock', _assign(_assign({}, props), {\n            obj: block\n          })));\n        });\n      });\n      return blocks;\n    }\n  };\n}\n\nexport { JsonSerializerPlugin };","import { ModelModifier, defaultTheme } from '@blink-mind/core';\nvar themeRandomColorSquare = {\n  name: 'default',\n  randomColor: true,\n  background: 'rgb(57,60,65)',\n  highlightColor: '#50C9CE',\n  marginH: 60,\n  marginV: 20,\n  contentStyle: {\n    lineHeight: '1.5',\n    fontSize: '16px'\n  },\n  linkStyle: {\n    lineRadius: 5,\n    lineType: 'curve',\n    lineWidth: 3\n  },\n  rootTopic: {\n    contentStyle: {\n      fontSize: '36px'\n    },\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: 3\n    }\n  },\n  primaryTopic: {\n    contentStyle: {\n      fontSize: '24px'\n    },\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: 3\n    }\n  },\n  normalTopic: {\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: 3\n    }\n  }\n};\nvar theme1 = {\n  name: 'theme1',\n  randomColor: false,\n  background: 'rgb(250,245,205)',\n  highlightColor: '#50C9CE',\n  marginH: 50,\n  marginV: 30,\n  contentStyle: {\n    lineHeight: '1.5'\n  },\n  linkStyle: {\n    lineRadius: 5\n  },\n  rootTopic: {\n    contentStyle: {\n      background: 'rgb(221, 170, 68)',\n      color: '#fff',\n      fontSize: '34px',\n      borderRadius: '5px',\n      padding: '16px 18px 16px 18px'\n    },\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: 2,\n      lineColor: 'rgb(221, 170, 68)'\n    }\n  },\n  primaryTopic: {\n    contentStyle: {\n      background: '#e8eaec',\n      borderWidth: '2px',\n      borderStyle: 'solid',\n      borderColor: 'rgb(221, 170, 68)',\n      borderRadius: '5px',\n      fontSize: '17px',\n      padding: '10px 15px 10px 15px'\n    },\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: 2,\n      lineColor: 'rgb(221, 170, 68)'\n    }\n  },\n  normalTopic: {\n    contentStyle: {\n      background: '#fff',\n      border: '1px solid #e8eaec',\n      borderRadius: '20px',\n      color: 'rgb(187, 136, 34)',\n      fontSize: '13px',\n      padding: '4px 10px'\n    },\n    subLinkStyle: {\n      lineType: 'round',\n      lineRadius: 5,\n      lineWidth: 1,\n      lineColor: 'rgb(187, 136, 34)'\n    }\n  }\n};\nvar theme2 = {\n  name: 'theme2',\n  randomColor: false,\n  background: '#f8f8f8',\n  highlightColor: '#50C9CE',\n  marginH: 45,\n  marginV: 10,\n  contentStyle: {\n    lineHeight: '1.5'\n  },\n  linkStyle: {\n    lineRadius: 5\n  },\n  rootTopic: {\n    contentStyle: {\n      background: '#50C18A',\n      color: '#fff',\n      fontSize: '34px',\n      borderRadius: '5px',\n      padding: '16px 18px 16px 18px'\n    },\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: 2,\n      lineColor: '#43a9ff'\n    }\n  },\n  primaryTopic: {\n    contentStyle: {\n      background: '#ffffff',\n      borderWidth: '1px',\n      borderStyle: 'solid',\n      borderColor: 'rgb(221, 170, 68)',\n      borderRadius: '5px',\n      color: 'rgb(103,103,103)',\n      fontSize: '14px',\n      padding: '6px 10px 5px 10px'\n    },\n    subLinkStyle: {\n      lineType: 'round',\n      lineRadius: 5,\n      lineWidth: 2,\n      lineColor: '#43a9ff'\n    }\n  },\n  normalTopic: {\n    contentStyle: {\n      background: '#fff',\n      borderRadius: '5px',\n      color: 'rgb(103,103,103)',\n      fontSize: '13px',\n      padding: '3px 9px 4px',\n      boxShadow: '1px 1px 1px #ccc'\n    },\n    subLinkStyle: {\n      lineType: 'round',\n      lineRadius: 5,\n      lineWidth: 1,\n      lineColor: '#43a9ff'\n    }\n  }\n};\nvar theme3 = {\n  name: 'theme3',\n  randomColor: false,\n  background: '#A9DEF9',\n  highlightColor: '#50C9CE',\n  marginH: 50,\n  marginV: 20,\n  contentStyle: {\n    lineHeight: '1.5'\n  },\n  linkStyle: {\n    lineRadius: 5\n  },\n  rootTopic: {\n    contentStyle: {\n      background: '#FF99C8',\n      color: '#fff',\n      fontSize: '34px',\n      borderRadius: '5px',\n      padding: '16px 18px 16px 18px'\n    },\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: 2,\n      lineColor: '#43a9ff'\n    }\n  },\n  primaryTopic: {\n    contentStyle: {\n      background: '#FCF6BD',\n      borderWidth: '1px',\n      borderStyle: 'solid',\n      borderColor: '#E4C1F9',\n      borderRadius: '5px',\n      color: 'rgb(103,103,103)',\n      fontSize: '14px',\n      padding: '6px 10px 5px 10px'\n    },\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: 2,\n      lineColor: '#43a9ff'\n    }\n  },\n  normalTopic: {\n    contentStyle: {\n      background: '#E4FDE1',\n      borderRadius: '5px',\n      color: 'rgb(103,103,103)',\n      fontSize: '13px',\n      padding: '3px 9px 4px',\n      boxShadow: '1px 1px 1px #ccc'\n    },\n    subLinkStyle: {\n      lineType: 'round',\n      lineRadius: 5,\n      lineWidth: 1,\n      lineColor: '#43a9ff'\n    }\n  }\n};\nvar theme4 = {\n  name: 'theme3',\n  randomColor: false,\n  background: '#CCFBFE',\n  highlightColor: '#50C9CE',\n  marginH: 50,\n  marginV: 20,\n  contentStyle: {\n    lineHeight: '1.5'\n  },\n  linkStyle: {\n    lineRadius: 5\n  },\n  rootTopic: {\n    contentStyle: {\n      background: '#CD8987',\n      color: '#fff',\n      fontSize: '34px',\n      borderRadius: '5px',\n      padding: '16px 18px 16px 18px'\n    },\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: 2,\n      lineColor: '#43a9ff'\n    }\n  },\n  primaryTopic: {\n    contentStyle: {\n      background: '#CDACA1',\n      borderWidth: '1px',\n      borderStyle: 'solid',\n      borderColor: '#E4C1F9',\n      borderRadius: '5px',\n      color: 'rgb(103,103,103)',\n      fontSize: '14px',\n      padding: '6px 10px 5px 10px'\n    },\n    subLinkStyle: {\n      lineType: 'line',\n      lineWidth: 2,\n      lineColor: '#43a9ff'\n    }\n  },\n  normalTopic: {\n    contentStyle: {\n      background: '#CDCACC',\n      borderRadius: '5px',\n      color: 'rgb(103,103,103)',\n      fontSize: '13px',\n      padding: '3px 9px 4px',\n      boxShadow: '1px 1px 1px #ccc'\n    },\n    subLinkStyle: {\n      lineType: 'line',\n      lineRadius: 5,\n      lineWidth: 1,\n      lineColor: '#43a9ff'\n    }\n  }\n};\n\nfunction ThemeSelectorPlugin() {\n  var themeMap = new Map([['default', defaultTheme], ['random-color-square', themeRandomColorSquare], ['theme1', theme1], ['theme2', theme2], ['theme3', theme3], ['theme4', theme4]]);\n  return {\n    getAllThemes: function getAllThemes(props) {\n      return themeMap;\n    },\n    setTheme: function setTheme(props) {\n      var model = props.model,\n          controller = props.controller,\n          themeKey = props.themeKey;\n      var allTheme = controller.run('getAllThemes', props);\n\n      if (!allTheme.has(themeKey)) {\n        throw new Error('setTheme: the theme key is not correct!');\n      }\n\n      var theme = allTheme.get(themeKey);\n      var newModel = ModelModifier.setTheme({\n        model: model,\n        theme: theme\n      });\n      controller.change(newModel);\n    }\n  };\n}\n\nexport { ThemeSelectorPlugin, theme1, theme2, theme3, theme4, themeRandomColorSquare };","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\nvar _extendStatics = function extendStatics(d, b) {\n  _extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) {\n      if (b.hasOwnProperty(p)) d[p] = b[p];\n    }\n  };\n\n  return _extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  _extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar _assign = function __assign() {\n  _assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return _assign.apply(this, arguments);\n};\n\nexport { _assign as __assign };\nexport function __rest(s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\nexport function __param(paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n}\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\nexport function __generator(thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n}\nexport function __exportStar(m, exports) {\n  for (var p in m) {\n    if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n  }\n}\nexport function __values(o) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator],\n      i = 0;\n  if (m) return m.call(o);\n  return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n}\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n}\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++) {\n    ar = ar.concat(__read(arguments[i]));\n  }\n\n  return ar;\n}\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []),\n      i,\n      q = [];\n  return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () {\n    return this;\n  }, i;\n\n  function verb(n) {\n    if (g[n]) i[n] = function (v) {\n      return new Promise(function (a, b) {\n        q.push([n, v, a, b]) > 1 || resume(n, v);\n      });\n    };\n  }\n\n  function resume(n, v) {\n    try {\n      step(g[n](v));\n    } catch (e) {\n      settle(q[0][3], e);\n    }\n  }\n\n  function step(r) {\n    r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);\n  }\n\n  function fulfill(value) {\n    resume(\"next\", value);\n  }\n\n  function reject(value) {\n    resume(\"throw\", value);\n  }\n\n  function settle(f, v) {\n    if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]);\n  }\n}\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) {\n    throw e;\n  }), verb(\"return\"), i[Symbol.iterator] = function () {\n    return this;\n  }, i;\n\n  function verb(n, f) {\n    i[n] = o[n] ? function (v) {\n      return (p = !p) ? {\n        value: __await(o[n](v)),\n        done: n === \"return\"\n      } : f ? f(v) : v;\n    } : f;\n  }\n}\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator],\n      i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () {\n    return this;\n  }, i);\n\n  function verb(n) {\n    i[n] = o[n] && function (v) {\n      return new Promise(function (resolve, reject) {\n        v = o[n](v), settle(resolve, reject, v.done, v.value);\n      });\n    };\n  }\n\n  function settle(resolve, reject, d, v) {\n    Promise.resolve(v).then(function (v) {\n      resolve({\n        value: v,\n        done: d\n      });\n    }, reject);\n  }\n}\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n}\n;\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  }\n  result.default = mod;\n  return result;\n}\nexport function __importDefault(mod) {\n  return mod && mod.__esModule ? mod : {\n    default: mod\n  };\n}","/*\n * Copyright 2018 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** Alignment along the horizontal axis. */\nexport var Alignment = {\n  CENTER: \"center\",\n  LEFT: \"left\",\n  RIGHT: \"right\"\n};","/*\n * Copyright 2018 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// tslint:disable:object-literal-sort-keys\nexport var Elevation = {\n  ZERO: 0,\n  ONE: 1,\n  TWO: 2,\n  THREE: 3,\n  FOUR: 4\n};","/*\n * Copyright 2015 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// tslint:disable:object-literal-sort-keys\n\n/**\n * The four basic intents.\n */\nexport var Intent = {\n  NONE: \"none\",\n  PRIMARY: \"primary\",\n  SUCCESS: \"success\",\n  WARNING: \"warning\",\n  DANGER: \"danger\"\n};","/*\n * Copyright 2015 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport var Position = {\n  BOTTOM: \"bottom\",\n  BOTTOM_LEFT: \"bottom-left\",\n  BOTTOM_RIGHT: \"bottom-right\",\n  LEFT: \"left\",\n  LEFT_BOTTOM: \"left-bottom\",\n  LEFT_TOP: \"left-top\",\n  RIGHT: \"right\",\n  RIGHT_BOTTOM: \"right-bottom\",\n  RIGHT_TOP: \"right-top\",\n  TOP: \"top\",\n  TOP_LEFT: \"top-left\",\n  TOP_RIGHT: \"top-right\"\n};\nexport function isPositionHorizontal(position) {\n  /* istanbul ignore next */\n  return position === Position.TOP || position === Position.TOP_LEFT || position === Position.TOP_RIGHT || position === Position.BOTTOM || position === Position.BOTTOM_LEFT || position === Position.BOTTOM_RIGHT;\n}\nexport function isPositionVertical(position) {\n  /* istanbul ignore next */\n  return position === Position.LEFT || position === Position.LEFT_TOP || position === Position.LEFT_BOTTOM || position === Position.RIGHT || position === Position.RIGHT_TOP || position === Position.RIGHT_BOTTOM;\n}\nexport function getPositionIgnoreAngles(position) {\n  if (position === Position.TOP || position === Position.TOP_LEFT || position === Position.TOP_RIGHT) {\n    return Position.TOP;\n  } else if (position === Position.BOTTOM || position === Position.BOTTOM_LEFT || position === Position.BOTTOM_RIGHT) {\n    return Position.BOTTOM;\n  } else if (position === Position.LEFT || position === Position.LEFT_TOP || position === Position.LEFT_BOTTOM) {\n    return Position.LEFT;\n  } else {\n    return Position.RIGHT;\n  }\n}","/*\n * Copyright 2015 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Alignment } from \"./alignment\";\nimport { Elevation } from \"./elevation\";\nimport { Intent } from \"./intent\";\nimport { Position } from \"./position\";\nvar NS = process.env.BLUEPRINT_NAMESPACE || process.env.REACT_APP_BLUEPRINT_NAMESPACE || \"bp3\"; // modifiers\n\nexport var ACTIVE = NS + \"-active\";\nexport var ALIGN_LEFT = NS + \"-align-left\";\nexport var ALIGN_RIGHT = NS + \"-align-right\";\nexport var DARK = NS + \"-dark\";\nexport var DISABLED = NS + \"-disabled\";\nexport var FILL = NS + \"-fill\";\nexport var FIXED = NS + \"-fixed\";\nexport var FIXED_TOP = NS + \"-fixed-top\";\nexport var INLINE = NS + \"-inline\";\nexport var INTERACTIVE = NS + \"-interactive\";\nexport var LARGE = NS + \"-large\";\nexport var LOADING = NS + \"-loading\";\nexport var MINIMAL = NS + \"-minimal\";\nexport var MULTILINE = NS + \"-multiline\";\nexport var ROUND = NS + \"-round\";\nexport var SMALL = NS + \"-small\";\nexport var VERTICAL = NS + \"-vertical\";\nexport var POSITION_TOP = positionClass(Position.TOP);\nexport var POSITION_BOTTOM = positionClass(Position.BOTTOM);\nexport var POSITION_LEFT = positionClass(Position.LEFT);\nexport var POSITION_RIGHT = positionClass(Position.RIGHT);\nexport var ELEVATION_0 = elevationClass(Elevation.ZERO);\nexport var ELEVATION_1 = elevationClass(Elevation.ONE);\nexport var ELEVATION_2 = elevationClass(Elevation.TWO);\nexport var ELEVATION_3 = elevationClass(Elevation.THREE);\nexport var ELEVATION_4 = elevationClass(Elevation.FOUR);\nexport var INTENT_PRIMARY = intentClass(Intent.PRIMARY);\nexport var INTENT_SUCCESS = intentClass(Intent.SUCCESS);\nexport var INTENT_WARNING = intentClass(Intent.WARNING);\nexport var INTENT_DANGER = intentClass(Intent.DANGER);\nexport var FOCUS_DISABLED = NS + \"-focus-disabled\"; // text utilities\n\nexport var UI_TEXT = NS + \"-ui-text\";\nexport var RUNNING_TEXT = NS + \"-running-text\";\nexport var MONOSPACE_TEXT = NS + \"-monospace-text\";\nexport var TEXT_LARGE = NS + \"-text-large\";\nexport var TEXT_SMALL = NS + \"-text-small\";\nexport var TEXT_MUTED = NS + \"-text-muted\";\nexport var TEXT_DISABLED = NS + \"-text-disabled\";\nexport var TEXT_OVERFLOW_ELLIPSIS = NS + \"-text-overflow-ellipsis\"; // textual elements\n\nexport var BLOCKQUOTE = NS + \"-blockquote\";\nexport var CODE = NS + \"-code\";\nexport var CODE_BLOCK = NS + \"-code-block\";\nexport var HEADING = NS + \"-heading\";\nexport var LIST = NS + \"-list\";\nexport var LIST_UNSTYLED = NS + \"-list-unstyled\";\nexport var RTL = NS + \"-rtl\"; // components\n\nexport var ALERT = NS + \"-alert\";\nexport var ALERT_BODY = ALERT + \"-body\";\nexport var ALERT_CONTENTS = ALERT + \"-contents\";\nexport var ALERT_FOOTER = ALERT + \"-footer\";\nexport var BREADCRUMB = NS + \"-breadcrumb\";\nexport var BREADCRUMB_CURRENT = BREADCRUMB + \"-current\";\nexport var BREADCRUMBS = BREADCRUMB + \"s\";\nexport var BREADCRUMBS_COLLAPSED = BREADCRUMB + \"s-collapsed\";\nexport var BUTTON = NS + \"-button\";\nexport var BUTTON_GROUP = BUTTON + \"-group\";\nexport var BUTTON_SPINNER = BUTTON + \"-spinner\";\nexport var BUTTON_TEXT = BUTTON + \"-text\";\nexport var CALLOUT = NS + \"-callout\";\nexport var CALLOUT_ICON = CALLOUT + \"-icon\";\nexport var CARD = NS + \"-card\";\nexport var COLLAPSE = NS + \"-collapse\";\nexport var COLLAPSE_BODY = COLLAPSE + \"-body\";\nexport var COLLAPSIBLE_LIST = NS + \"-collapse-list\";\nexport var CONTEXT_MENU = NS + \"-context-menu\";\nexport var CONTEXT_MENU_POPOVER_TARGET = CONTEXT_MENU + \"-popover-target\";\nexport var CONTROL_GROUP = NS + \"-control-group\";\nexport var DIALOG = NS + \"-dialog\";\nexport var DIALOG_CONTAINER = DIALOG + \"-container\";\nexport var DIALOG_BODY = DIALOG + \"-body\";\nexport var DIALOG_CLOSE_BUTTON = DIALOG + \"-close-button\";\nexport var DIALOG_FOOTER = DIALOG + \"-footer\";\nexport var DIALOG_FOOTER_ACTIONS = DIALOG + \"-footer-actions\";\nexport var DIALOG_HEADER = DIALOG + \"-header\";\nexport var DIVIDER = NS + \"-divider\";\nexport var DRAWER = NS + \"-drawer\";\nexport var DRAWER_BODY = DRAWER + \"-body\";\nexport var DRAWER_FOOTER = DRAWER + \"-footer\";\nexport var DRAWER_HEADER = DRAWER + \"-header\";\nexport var EDITABLE_TEXT = NS + \"-editable-text\";\nexport var EDITABLE_TEXT_CONTENT = EDITABLE_TEXT + \"-content\";\nexport var EDITABLE_TEXT_EDITING = EDITABLE_TEXT + \"-editing\";\nexport var EDITABLE_TEXT_INPUT = EDITABLE_TEXT + \"-input\";\nexport var EDITABLE_TEXT_PLACEHOLDER = EDITABLE_TEXT + \"-placeholder\";\nexport var FLEX_EXPANDER = NS + \"-flex-expander\";\nexport var HTML_SELECT = NS + \"-html-select\";\n/** @deprecated prefer `<HTMLSelect>` component */\n\nexport var SELECT = NS + \"-select\";\nexport var HTML_TABLE = NS + \"-html-table\";\nexport var HTML_TABLE_BORDERED = HTML_TABLE + \"-bordered\";\nexport var HTML_TABLE_CONDENSED = HTML_TABLE + \"-condensed\";\nexport var HTML_TABLE_STRIPED = HTML_TABLE + \"-striped\";\nexport var INPUT = NS + \"-input\";\nexport var INPUT_GHOST = INPUT + \"-ghost\";\nexport var INPUT_GROUP = INPUT + \"-group\";\nexport var INPUT_ACTION = INPUT + \"-action\";\nexport var CONTROL = NS + \"-control\";\nexport var CONTROL_INDICATOR = CONTROL + \"-indicator\";\nexport var CONTROL_INDICATOR_CHILD = CONTROL_INDICATOR + \"-child\";\nexport var CHECKBOX = NS + \"-checkbox\";\nexport var RADIO = NS + \"-radio\";\nexport var SWITCH = NS + \"-switch\";\nexport var SWITCH_INNER_TEXT = SWITCH + \"-inner-text\";\nexport var FILE_INPUT = NS + \"-file-input\";\nexport var FILE_INPUT_HAS_SELECTION = NS + \"-file-input-has-selection\";\nexport var FILE_UPLOAD_INPUT = NS + \"-file-upload-input\";\nexport var FILE_UPLOAD_INPUT_CUSTOM_TEXT = NS + \"-file-upload-input-custom-text\";\nexport var KEY = NS + \"-key\";\nexport var KEY_COMBO = KEY + \"-combo\";\nexport var MODIFIER_KEY = NS + \"-modifier-key\";\nexport var HOTKEY = NS + \"-hotkey\";\nexport var HOTKEY_LABEL = HOTKEY + \"-label\";\nexport var HOTKEY_COLUMN = HOTKEY + \"-column\";\nexport var HOTKEY_DIALOG = HOTKEY + \"-dialog\";\nexport var LABEL = NS + \"-label\";\nexport var FORM_GROUP = NS + \"-form-group\";\nexport var FORM_CONTENT = NS + \"-form-content\";\nexport var FORM_HELPER_TEXT = NS + \"-form-helper-text\";\nexport var MENU = NS + \"-menu\";\nexport var MENU_ITEM = MENU + \"-item\";\nexport var MENU_ITEM_LABEL = MENU_ITEM + \"-label\";\nexport var MENU_SUBMENU = NS + \"-submenu\";\nexport var MENU_DIVIDER = MENU + \"-divider\";\nexport var MENU_HEADER = MENU + \"-header\";\nexport var NAVBAR = NS + \"-navbar\";\nexport var NAVBAR_GROUP = NAVBAR + \"-group\";\nexport var NAVBAR_HEADING = NAVBAR + \"-heading\";\nexport var NAVBAR_DIVIDER = NAVBAR + \"-divider\";\nexport var NON_IDEAL_STATE = NS + \"-non-ideal-state\";\nexport var NON_IDEAL_STATE_VISUAL = NON_IDEAL_STATE + \"-visual\";\nexport var NUMERIC_INPUT = NS + \"-numeric-input\";\nexport var OVERFLOW_LIST = NS + \"-overflow-list\";\nexport var OVERFLOW_LIST_SPACER = OVERFLOW_LIST + \"-spacer\";\nexport var OVERLAY = NS + \"-overlay\";\nexport var OVERLAY_BACKDROP = OVERLAY + \"-backdrop\";\nexport var OVERLAY_CONTAINER = OVERLAY + \"-container\";\nexport var OVERLAY_CONTENT = OVERLAY + \"-content\";\nexport var OVERLAY_INLINE = OVERLAY + \"-inline\";\nexport var OVERLAY_OPEN = OVERLAY + \"-open\";\nexport var OVERLAY_SCROLL_CONTAINER = OVERLAY + \"-scroll-container\";\nexport var PANEL_STACK = NS + \"-panel-stack\";\nexport var PANEL_STACK_HEADER = PANEL_STACK + \"-header\";\nexport var PANEL_STACK_HEADER_BACK = PANEL_STACK + \"-header-back\";\nexport var PANEL_STACK_VIEW = PANEL_STACK + \"-view\";\nexport var POPOVER = NS + \"-popover\";\nexport var POPOVER_ARROW = POPOVER + \"-arrow\";\nexport var POPOVER_BACKDROP = POPOVER + \"-backdrop\";\nexport var POPOVER_CONTENT = POPOVER + \"-content\";\nexport var POPOVER_CONTENT_SIZING = POPOVER_CONTENT + \"-sizing\";\nexport var POPOVER_DISMISS = POPOVER + \"-dismiss\";\nexport var POPOVER_DISMISS_OVERRIDE = POPOVER_DISMISS + \"-override\";\nexport var POPOVER_OPEN = POPOVER + \"-open\";\nexport var POPOVER_TARGET = POPOVER + \"-target\";\nexport var POPOVER_WRAPPER = POPOVER + \"-wrapper\";\nexport var TRANSITION_CONTAINER = NS + \"-transition-container\";\nexport var PROGRESS_BAR = NS + \"-progress-bar\";\nexport var PROGRESS_METER = NS + \"-progress-meter\";\nexport var PROGRESS_NO_STRIPES = NS + \"-no-stripes\";\nexport var PROGRESS_NO_ANIMATION = NS + \"-no-animation\";\nexport var PORTAL = NS + \"-portal\";\nexport var SKELETON = NS + \"-skeleton\";\nexport var SLIDER = NS + \"-slider\";\nexport var SLIDER_AXIS = SLIDER + \"-axis\";\nexport var SLIDER_HANDLE = SLIDER + \"-handle\";\nexport var SLIDER_LABEL = SLIDER + \"-label\";\nexport var SLIDER_TRACK = SLIDER + \"-track\";\nexport var SLIDER_PROGRESS = SLIDER + \"-progress\";\nexport var START = NS + \"-start\";\nexport var END = NS + \"-end\";\nexport var SPINNER = NS + \"-spinner\";\nexport var SPINNER_ANIMATION = SPINNER + \"-animation\";\nexport var SPINNER_HEAD = SPINNER + \"-head\";\nexport var SPINNER_NO_SPIN = NS + \"-no-spin\";\nexport var SPINNER_TRACK = SPINNER + \"-track\";\nexport var TAB = NS + \"-tab\";\nexport var TAB_INDICATOR = TAB + \"-indicator\";\nexport var TAB_INDICATOR_WRAPPER = TAB_INDICATOR + \"-wrapper\";\nexport var TAB_LIST = TAB + \"-list\";\nexport var TAB_PANEL = TAB + \"-panel\";\nexport var TABS = TAB + \"s\";\nexport var TAG = NS + \"-tag\";\nexport var TAG_REMOVE = TAG + \"-remove\";\nexport var TAG_INPUT = NS + \"-tag-input\";\nexport var TAG_INPUT_ICON = TAG_INPUT + \"-icon\";\nexport var TAG_INPUT_VALUES = TAG_INPUT + \"-values\";\nexport var TOAST = NS + \"-toast\";\nexport var TOAST_CONTAINER = TOAST + \"-container\";\nexport var TOAST_MESSAGE = TOAST + \"-message\";\nexport var TOOLTIP = NS + \"-tooltip\";\nexport var TOOLTIP_INDICATOR = TOOLTIP + \"-indicator\";\nexport var TREE = NS + \"-tree\";\nexport var TREE_NODE = NS + \"-tree-node\";\nexport var TREE_NODE_CARET = TREE_NODE + \"-caret\";\nexport var TREE_NODE_CARET_CLOSED = TREE_NODE_CARET + \"-closed\";\nexport var TREE_NODE_CARET_NONE = TREE_NODE_CARET + \"-none\";\nexport var TREE_NODE_CARET_OPEN = TREE_NODE_CARET + \"-open\";\nexport var TREE_NODE_CONTENT = TREE_NODE + \"-content\";\nexport var TREE_NODE_EXPANDED = TREE_NODE + \"-expanded\";\nexport var TREE_NODE_ICON = TREE_NODE + \"-icon\";\nexport var TREE_NODE_LABEL = TREE_NODE + \"-label\";\nexport var TREE_NODE_LIST = TREE_NODE + \"-list\";\nexport var TREE_NODE_SECONDARY_LABEL = TREE_NODE + \"-secondary-label\";\nexport var TREE_NODE_SELECTED = TREE_NODE + \"-selected\";\nexport var TREE_ROOT = NS + \"-tree-root\";\nexport var ICON = NS + \"-icon\";\nexport var ICON_STANDARD = ICON + \"-standard\";\nexport var ICON_LARGE = ICON + \"-large\";\n/**\n * Returns the namespace prefix for all Blueprint CSS classes.\n * Customize this namespace at build time with the `process.env.BLUEPRINT_NAMESPACE` environment variable.\n */\n\nexport function getClassNamespace() {\n  return NS;\n}\n/** Return CSS class for alignment. */\n\nexport function alignmentClass(alignment) {\n  switch (alignment) {\n    case Alignment.LEFT:\n      return ALIGN_LEFT;\n\n    case Alignment.RIGHT:\n      return ALIGN_RIGHT;\n\n    default:\n      return undefined;\n  }\n}\nexport function elevationClass(elevation) {\n  if (elevation == null) {\n    return undefined;\n  }\n\n  return NS + \"-elevation-\" + elevation;\n}\n/** Returns CSS class for icon name. */\n\nexport function iconClass(iconName) {\n  if (iconName == null) {\n    return undefined;\n  }\n\n  return iconName.indexOf(NS + \"-icon-\") === 0 ? iconName : NS + \"-icon-\" + iconName;\n}\n/** Return CSS class for intent. */\n\nexport function intentClass(intent) {\n  if (intent == null || intent === Intent.NONE) {\n    return undefined;\n  }\n\n  return NS + \"-intent-\" + intent.toLowerCase();\n}\nexport function positionClass(position) {\n  if (position == null) {\n    return undefined;\n  }\n\n  return NS + \"-position-\" + position;\n}","/*\n * Copyright 2015 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport var BACKSPACE = 8;\nexport var TAB = 9;\nexport var ENTER = 13;\nexport var SHIFT = 16;\nexport var ESCAPE = 27;\nexport var SPACE = 32;\nexport var ARROW_LEFT = 37;\nexport var ARROW_UP = 38;\nexport var ARROW_RIGHT = 39;\nexport var ARROW_DOWN = 40;\nexport var DELETE = 46;\n/** Returns whether the key code is `enter` or `space`, the two keys that can click a button. */\n\nexport function isKeyboardClick(keyCode) {\n  return keyCode === ENTER || keyCode === SPACE;\n}","/*\n * Copyright 2019 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport * as React from \"react\";\nimport { isNodeEnv } from \"./utils\";\n/**\n * An abstract component that Blueprint components can extend\n * in order to add some common functionality like runtime props validation.\n */\n\nvar AbstractPureComponent2 =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(AbstractPureComponent2, _super);\n\n  function AbstractPureComponent2(props, context) {\n    var _this = _super.call(this, props, context) || this; // Not bothering to remove entries when their timeouts finish because clearing invalid ID is a no-op\n\n\n    _this.timeoutIds = [];\n    /**\n     * Clear all known timeouts.\n     */\n\n    _this.clearTimeouts = function () {\n      if (_this.timeoutIds.length > 0) {\n        for (var _i = 0, _a = _this.timeoutIds; _i < _a.length; _i++) {\n          var timeoutId = _a[_i];\n          window.clearTimeout(timeoutId);\n        }\n\n        _this.timeoutIds = [];\n      }\n    };\n\n    if (!isNodeEnv(\"production\")) {\n      _this.validateProps(_this.props);\n    }\n\n    return _this;\n  }\n\n  AbstractPureComponent2.prototype.componentDidUpdate = function (_prevProps, _prevState, _snapshot) {\n    if (!isNodeEnv(\"production\")) {\n      this.validateProps(this.props);\n    }\n  };\n\n  AbstractPureComponent2.prototype.componentWillUnmount = function () {\n    this.clearTimeouts();\n  };\n  /**\n   * Set a timeout and remember its ID.\n   * All stored timeouts will be cleared when component unmounts.\n   * @returns a \"cancel\" function that will clear timeout when invoked.\n   */\n\n\n  AbstractPureComponent2.prototype.setTimeout = function (callback, timeout) {\n    var handle = window.setTimeout(callback, timeout);\n    this.timeoutIds.push(handle);\n    return function () {\n      return window.clearTimeout(handle);\n    };\n  };\n  /**\n   * Ensures that the props specified for a component are valid.\n   * Implementations should check that props are valid and usually throw an Error if they are not.\n   * Implementations should not duplicate checks that the type system already guarantees.\n   *\n   * This method should be used instead of React's\n   * [propTypes](https://facebook.github.io/react/docs/reusable-components.html#prop-validation) feature.\n   * Like propTypes, these runtime checks run only in development mode.\n   */\n\n\n  AbstractPureComponent2.prototype.validateProps = function (_props) {// implement in subclass\n  };\n\n  return AbstractPureComponent2;\n}(React.PureComponent);\n\nexport { AbstractPureComponent2 };","/*\n * Copyright 2015 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nexport var DISPLAYNAME_PREFIX = \"Blueprint3\";\n/** A collection of curated prop keys used across our Components which are not valid HTMLElement props. */\n\nvar INVALID_PROPS = [\"active\", \"alignText\", \"containerRef\", \"elementRef\", \"fill\", \"icon\", \"inputRef\", \"intent\", \"inline\", \"large\", \"loading\", \"leftIcon\", \"minimal\", \"onChildrenMount\", \"onRemove\", \"panel\", \"panelClassName\", \"popoverProps\", \"rightElement\", \"rightIcon\", \"round\", \"small\", \"text\"];\n/**\n * Typically applied to HTMLElements to filter out blacklisted props. When applied to a Component,\n * can filter props from being passed down to the children. Can also filter by a combined list of\n * supplied prop keys and the blacklist (only appropriate for HTMLElements).\n * @param props The original props object to filter down.\n * @param {string[]} invalidProps If supplied, overwrites the default blacklist.\n * @param {boolean} shouldMerge If true, will merge supplied invalidProps and blacklist together.\n */\n\nexport function removeNonHTMLProps(props, invalidProps, shouldMerge) {\n  if (invalidProps === void 0) {\n    invalidProps = INVALID_PROPS;\n  }\n\n  if (shouldMerge === void 0) {\n    shouldMerge = false;\n  }\n\n  if (shouldMerge) {\n    invalidProps = invalidProps.concat(INVALID_PROPS);\n  }\n\n  return invalidProps.reduce(function (prev, curr) {\n    if (prev.hasOwnProperty(curr)) {\n      delete prev[curr];\n    }\n\n    return prev;\n  }, tslib_1.__assign({}, props));\n}","/*\n * Copyright 2015 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport * as Classes from \"../../common/classes\";\nimport * as Errors from \"../../common/errors\";\nimport { DISPLAYNAME_PREFIX } from \"../../common/props\";\nimport { isFunction } from \"../../common/utils\";\n/** Detect if `React.createPortal()` API method does not exist. */\n\nvar cannotCreatePortal = !isFunction(ReactDOM.createPortal);\nvar REACT_CONTEXT_TYPES = {\n  blueprintPortalClassName: function blueprintPortalClassName(obj, key) {\n    if (obj[key] != null && typeof obj[key] !== \"string\") {\n      return new Error(Errors.PORTAL_CONTEXT_CLASS_NAME_STRING);\n    }\n\n    return undefined;\n  }\n};\n/**\n * This component detaches its contents and re-attaches them to document.body.\n * Use it when you need to circumvent DOM z-stacking (for dialogs, popovers, etc.).\n * Any class names passed to this element will be propagated to the new container element on document.body.\n */\n\nvar Portal =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(Portal, _super);\n\n  function Portal() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      hasMounted: false\n    };\n    return _this;\n  }\n\n  Portal.prototype.render = function () {\n    // Only render `children` once this component has mounted in a browser environment, so they are\n    // immediately attached to the DOM tree and can do DOM things like measuring or `autoFocus`.\n    // See long comment on componentDidMount in https://reactjs.org/docs/portals.html#event-bubbling-through-portals\n    if (cannotCreatePortal || typeof document === \"undefined\" || !this.state.hasMounted) {\n      return null;\n    } else {\n      return ReactDOM.createPortal(this.props.children, this.portalElement);\n    }\n  };\n\n  Portal.prototype.componentDidMount = function () {\n    if (!this.props.container) {\n      return;\n    }\n\n    this.portalElement = this.createContainerElement();\n    this.props.container.appendChild(this.portalElement);\n    this.setState({\n      hasMounted: true\n    }, this.props.onChildrenMount);\n\n    if (cannotCreatePortal) {\n      this.unstableRenderNoPortal();\n    }\n  };\n\n  Portal.prototype.componentDidUpdate = function (prevProps) {\n    // update className prop on portal DOM element\n    if (this.portalElement != null && prevProps.className !== this.props.className) {\n      this.portalElement.classList.remove(prevProps.className);\n      maybeAddClass(this.portalElement.classList, this.props.className);\n    }\n\n    if (cannotCreatePortal) {\n      this.unstableRenderNoPortal();\n    }\n  };\n\n  Portal.prototype.componentWillUnmount = function () {\n    if (this.portalElement != null) {\n      if (cannotCreatePortal) {\n        ReactDOM.unmountComponentAtNode(this.portalElement);\n      }\n\n      this.portalElement.remove();\n    }\n  };\n\n  Portal.prototype.createContainerElement = function () {\n    var container = document.createElement(\"div\");\n    container.classList.add(Classes.PORTAL);\n    maybeAddClass(container.classList, this.props.className);\n\n    if (this.context != null) {\n      maybeAddClass(container.classList, this.context.blueprintPortalClassName);\n    }\n\n    return container;\n  };\n\n  Portal.prototype.unstableRenderNoPortal = function () {\n    ReactDOM.unstable_renderSubtreeIntoContainer(\n    /* parentComponent */\n    this, React.createElement(\"div\", null, this.props.children), this.portalElement);\n  };\n\n  Portal.displayName = DISPLAYNAME_PREFIX + \".Portal\";\n  Portal.contextTypes = REACT_CONTEXT_TYPES;\n  Portal.defaultProps = {\n    container: typeof document !== \"undefined\" ? document.body : null\n  };\n  return Portal;\n}(React.Component);\n\nexport { Portal };\n\nfunction maybeAddClass(classList, className) {\n  if (className != null && className !== \"\") {\n    classList.add.apply(classList, className.split(\" \"));\n  }\n}","/*\n * Copyright 2015 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\";\nimport { findDOMNode } from \"react-dom\";\nimport { AbstractPureComponent2, Classes, Keys } from \"../../common\";\nimport { DISPLAYNAME_PREFIX } from \"../../common/props\";\nimport { safeInvoke } from \"../../common/utils\";\nimport { Portal } from \"../portal/portal\";\n\nvar Overlay =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(Overlay, _super);\n\n  function Overlay(props, context) {\n    var _this = _super.call(this, props, context) || this;\n\n    _this.refHandlers = {\n      container: function container(ref) {\n        return _this.containerElement = findDOMNode(ref);\n      }\n    };\n\n    _this.maybeRenderChild = function (child) {\n      if (child == null) {\n        return null;\n      } // add a special class to each child element that will automatically set the appropriate\n      // CSS position mode under the hood. also, make the container focusable so we can\n      // trap focus inside it (via `enforceFocus`).\n\n\n      var decoratedChild = typeof child === \"object\" ? React.cloneElement(child, {\n        className: classNames(child.props.className, Classes.OVERLAY_CONTENT),\n        tabIndex: 0\n      }) : React.createElement(\"span\", {\n        className: Classes.OVERLAY_CONTENT\n      }, child);\n      var _a = _this.props,\n          onOpening = _a.onOpening,\n          onOpened = _a.onOpened,\n          onClosing = _a.onClosing,\n          onClosed = _a.onClosed,\n          transitionDuration = _a.transitionDuration,\n          transitionName = _a.transitionName;\n      return React.createElement(CSSTransition, {\n        classNames: transitionName,\n        onEntering: onOpening,\n        onEntered: onOpened,\n        onExiting: onClosing,\n        onExited: onClosed,\n        timeout: transitionDuration\n      }, decoratedChild);\n    };\n\n    _this.handleBackdropMouseDown = function (e) {\n      var _a = _this.props,\n          backdropProps = _a.backdropProps,\n          canOutsideClickClose = _a.canOutsideClickClose,\n          enforceFocus = _a.enforceFocus,\n          onClose = _a.onClose;\n\n      if (canOutsideClickClose) {\n        safeInvoke(onClose, e);\n      }\n\n      if (enforceFocus) {\n        // make sure document.activeElement is updated before bringing the focus back\n        _this.bringFocusInsideOverlay();\n      }\n\n      safeInvoke(backdropProps.onMouseDown, e);\n    };\n\n    _this.handleDocumentClick = function (e) {\n      var _a = _this.props,\n          canOutsideClickClose = _a.canOutsideClickClose,\n          isOpen = _a.isOpen,\n          onClose = _a.onClose;\n      var eventTarget = e.target;\n      var stackIndex = Overlay_1.openStack.indexOf(_this);\n      var isClickInThisOverlayOrDescendant = Overlay_1.openStack.slice(stackIndex).some(function (_a) {\n        var elem = _a.containerElement; // `elem` is the container of backdrop & content, so clicking on that container\n        // should not count as being \"inside\" the overlay.\n\n        return elem && elem.contains(eventTarget) && !elem.isSameNode(eventTarget);\n      });\n\n      if (isOpen && canOutsideClickClose && !isClickInThisOverlayOrDescendant) {\n        // casting to any because this is a native event\n        safeInvoke(onClose, e);\n      }\n    };\n\n    _this.handleDocumentFocus = function (e) {\n      if (_this.props.enforceFocus && _this.containerElement != null && !_this.containerElement.contains(e.target)) {\n        // prevent default focus behavior (sometimes auto-scrolls the page)\n        e.preventDefault();\n        e.stopImmediatePropagation();\n\n        _this.bringFocusInsideOverlay();\n      }\n    };\n\n    _this.handleKeyDown = function (e) {\n      var _a = _this.props,\n          canEscapeKeyClose = _a.canEscapeKeyClose,\n          onClose = _a.onClose;\n\n      if (e.which === Keys.ESCAPE && canEscapeKeyClose) {\n        safeInvoke(onClose, e); // prevent browser-specific escape key behavior (Safari exits fullscreen)\n\n        e.preventDefault();\n      }\n    };\n\n    _this.state = {\n      hasEverOpened: props.isOpen\n    };\n    return _this;\n  }\n\n  Overlay_1 = Overlay;\n\n  Overlay.getDerivedStateFromProps = function (_a) {\n    var hasEverOpened = _a.isOpen;\n\n    if (hasEverOpened) {\n      return {\n        hasEverOpened: hasEverOpened\n      };\n    }\n\n    return null;\n  };\n\n  Overlay.prototype.render = function () {\n    var _a; // oh snap! no reason to render anything at all if we're being truly lazy\n\n\n    if (this.props.lazy && !this.state.hasEverOpened) {\n      return null;\n    }\n\n    var _b = this.props,\n        children = _b.children,\n        className = _b.className,\n        usePortal = _b.usePortal,\n        isOpen = _b.isOpen; // TransitionGroup types require single array of children; does not support nested arrays.\n    // So we must collapse backdrop and children into one array, and every item must be wrapped in a\n    // Transition element (no ReactText allowed).\n\n    var childrenWithTransitions = isOpen ? React.Children.map(children, this.maybeRenderChild) : [];\n    childrenWithTransitions.unshift(this.maybeRenderBackdrop());\n    var containerClasses = classNames(Classes.OVERLAY, (_a = {}, _a[Classes.OVERLAY_OPEN] = isOpen, _a[Classes.OVERLAY_INLINE] = !usePortal, _a), className);\n    var transitionGroup = React.createElement(TransitionGroup, {\n      appear: true,\n      className: containerClasses,\n      component: \"div\",\n      onKeyDown: this.handleKeyDown,\n      ref: this.refHandlers.container\n    }, childrenWithTransitions);\n\n    if (usePortal) {\n      return React.createElement(Portal, {\n        className: this.props.portalClassName,\n        container: this.props.portalContainer\n      }, transitionGroup);\n    } else {\n      return transitionGroup;\n    }\n  };\n\n  Overlay.prototype.componentDidMount = function () {\n    if (this.props.isOpen) {\n      this.overlayWillOpen();\n    }\n  };\n\n  Overlay.prototype.componentDidUpdate = function (prevProps) {\n    if (prevProps.isOpen && !this.props.isOpen) {\n      this.overlayWillClose();\n    } else if (!prevProps.isOpen && this.props.isOpen) {\n      this.overlayWillOpen();\n    }\n  };\n\n  Overlay.prototype.componentWillUnmount = function () {\n    this.overlayWillClose();\n  };\n  /**\n   * @public for testing\n   * @internal\n   */\n\n\n  Overlay.prototype.bringFocusInsideOverlay = function () {\n    var _this = this; // always delay focus manipulation to just before repaint to prevent scroll jumping\n\n\n    return requestAnimationFrame(function () {\n      // container ref may be undefined between component mounting and Portal rendering\n      // activeElement may be undefined in some rare cases in IE\n      if (_this.containerElement == null || document.activeElement == null || !_this.props.isOpen) {\n        return;\n      }\n\n      var isFocusOutsideModal = !_this.containerElement.contains(document.activeElement);\n\n      if (isFocusOutsideModal) {\n        // element marked autofocus has higher priority than the other clowns\n        var autofocusElement = _this.containerElement.querySelector(\"[autofocus]\");\n\n        var wrapperElement = _this.containerElement.querySelector(\"[tabindex]\");\n\n        if (autofocusElement != null) {\n          autofocusElement.focus();\n        } else if (wrapperElement != null) {\n          wrapperElement.focus();\n        }\n      }\n    });\n  };\n\n  Overlay.prototype.maybeRenderBackdrop = function () {\n    var _a = this.props,\n        backdropClassName = _a.backdropClassName,\n        backdropProps = _a.backdropProps,\n        hasBackdrop = _a.hasBackdrop,\n        isOpen = _a.isOpen,\n        transitionDuration = _a.transitionDuration,\n        transitionName = _a.transitionName;\n\n    if (hasBackdrop && isOpen) {\n      return React.createElement(CSSTransition, {\n        classNames: transitionName,\n        key: \"__backdrop\",\n        timeout: transitionDuration\n      }, React.createElement(\"div\", tslib_1.__assign({}, backdropProps, {\n        className: classNames(Classes.OVERLAY_BACKDROP, backdropClassName, backdropProps.className),\n        onMouseDown: this.handleBackdropMouseDown,\n        tabIndex: this.props.canOutsideClickClose ? 0 : null\n      })));\n    } else {\n      return null;\n    }\n  };\n\n  Overlay.prototype.overlayWillClose = function () {\n    document.removeEventListener(\"focus\", this.handleDocumentFocus,\n    /* useCapture */\n    true);\n    document.removeEventListener(\"mousedown\", this.handleDocumentClick);\n    var openStack = Overlay_1.openStack;\n    var stackIndex = openStack.indexOf(this);\n\n    if (stackIndex !== -1) {\n      openStack.splice(stackIndex, 1);\n\n      if (openStack.length > 0) {\n        var lastOpenedOverlay = Overlay_1.getLastOpened();\n\n        if (lastOpenedOverlay.props.enforceFocus) {\n          document.addEventListener(\"focus\", lastOpenedOverlay.handleDocumentFocus,\n          /* useCapture */\n          true);\n        }\n      }\n\n      if (openStack.filter(function (o) {\n        return o.props.usePortal && o.props.hasBackdrop;\n      }).length === 0) {\n        document.body.classList.remove(Classes.OVERLAY_OPEN);\n      }\n    }\n  };\n\n  Overlay.prototype.overlayWillOpen = function () {\n    var openStack = Overlay_1.openStack;\n\n    if (openStack.length > 0) {\n      document.removeEventListener(\"focus\", Overlay_1.getLastOpened().handleDocumentFocus,\n      /* useCapture */\n      true);\n    }\n\n    openStack.push(this);\n\n    if (this.props.autoFocus) {\n      this.bringFocusInsideOverlay();\n    }\n\n    if (this.props.enforceFocus) {\n      document.addEventListener(\"focus\", this.handleDocumentFocus,\n      /* useCapture */\n      true);\n    }\n\n    if (this.props.canOutsideClickClose && !this.props.hasBackdrop) {\n      document.addEventListener(\"mousedown\", this.handleDocumentClick);\n    }\n\n    if (this.props.hasBackdrop && this.props.usePortal) {\n      // add a class to the body to prevent scrolling of content below the overlay\n      document.body.classList.add(Classes.OVERLAY_OPEN);\n    }\n  };\n\n  var Overlay_1;\n  Overlay.displayName = DISPLAYNAME_PREFIX + \".Overlay\";\n  Overlay.defaultProps = {\n    autoFocus: true,\n    backdropProps: {},\n    canEscapeKeyClose: true,\n    canOutsideClickClose: true,\n    enforceFocus: true,\n    hasBackdrop: true,\n    isOpen: false,\n    lazy: true,\n    transitionDuration: 300,\n    transitionName: Classes.OVERLAY,\n    usePortal: true\n  };\n  Overlay.openStack = [];\n\n  Overlay.getLastOpened = function () {\n    return Overlay_1.openStack[Overlay_1.openStack.length - 1];\n  };\n\n  Overlay = Overlay_1 = tslib_1.__decorate([polyfill], Overlay);\n  return Overlay;\n}(AbstractPureComponent2);\n\nexport { Overlay };","/*\n * Copyright 2018 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport * as React from \"react\";\nimport { findDOMNode } from \"react-dom\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport ResizeObserver from \"resize-observer-polyfill\";\nimport { AbstractPureComponent2 } from \"../../common\";\nimport { DISPLAYNAME_PREFIX } from \"../../common/props\";\nimport { safeInvoke } from \"../../common/utils\";\n\nvar ResizeSensor =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(ResizeSensor, _super);\n\n  function ResizeSensor() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.element = null;\n    _this.observer = new ResizeObserver(function (entries) {\n      return safeInvoke(_this.props.onResize, entries);\n    });\n    return _this;\n  }\n\n  ResizeSensor.prototype.render = function () {\n    // pass-through render of single child\n    return React.Children.only(this.props.children);\n  };\n\n  ResizeSensor.prototype.componentDidMount = function () {\n    this.observeElement();\n  };\n\n  ResizeSensor.prototype.componentDidUpdate = function (prevProps) {\n    this.observeElement(this.props.observeParents !== prevProps.observeParents);\n  };\n\n  ResizeSensor.prototype.componentWillUnmount = function () {\n    this.observer.disconnect();\n  };\n  /**\n   * Observe the DOM element, if defined and different from the currently\n   * observed element. Pass `force` argument to skip element checks and always\n   * re-observe.\n   */\n\n\n  ResizeSensor.prototype.observeElement = function (force) {\n    if (force === void 0) {\n      force = false;\n    }\n\n    var element = this.getElement();\n\n    if (!(element instanceof Element)) {\n      // stop everything if not defined\n      this.observer.disconnect();\n      return;\n    }\n\n    if (element === this.element && !force) {\n      // quit if given same element -- nothing to update (unless forced)\n      return;\n    } else {\n      // clear observer list if new element\n      this.observer.disconnect(); // remember element reference for next time\n\n      this.element = element;\n    } // observer callback is invoked immediately when observing new elements\n\n\n    this.observer.observe(element);\n\n    if (this.props.observeParents) {\n      var parent_1 = element.parentElement;\n\n      while (parent_1 != null) {\n        this.observer.observe(parent_1);\n        parent_1 = parent_1.parentElement;\n      }\n    }\n  };\n\n  ResizeSensor.prototype.getElement = function () {\n    try {\n      // using findDOMNode for two reasons:\n      // 1. cloning to insert a ref is unwieldy and not performant.\n      // 2. ensure that we resolve to an actual DOM node (instead of any JSX ref instance).\n      return findDOMNode(this);\n    } catch (_a) {\n      // swallow error if findDOMNode is run on unmounted component.\n      return null;\n    }\n  };\n\n  ResizeSensor.displayName = DISPLAYNAME_PREFIX + \".ResizeSensor\";\n  ResizeSensor = tslib_1.__decorate([polyfill], ResizeSensor);\n  return ResizeSensor;\n}(AbstractPureComponent2);\n\nexport { ResizeSensor };","/*\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// Popper placement utils\n// ======================\n\n/** Converts a full placement to one of the four positions by stripping text after the `-`. */\nexport function getPosition(placement) {\n  return placement.split(\"-\")[0];\n}\n/** Returns true if position is left or right. */\n\nexport function isVerticalPosition(side) {\n  return [\"left\", \"right\"].indexOf(side) !== -1;\n}\n/** Returns the opposite position. */\n\nexport function getOppositePosition(side) {\n  switch (side) {\n    case \"top\":\n      return \"bottom\";\n\n    case \"left\":\n      return \"right\";\n\n    case \"bottom\":\n      return \"top\";\n\n    default:\n      return \"left\";\n  }\n}\n/** Returns the CSS alignment keyword corresponding to given placement. */\n\nexport function getAlignment(placement) {\n  var align = placement.split(\"-\")[1];\n\n  switch (align) {\n    case \"start\":\n      return \"left\";\n\n    case \"end\":\n      return \"right\";\n\n    default:\n      return \"center\";\n  }\n} // Popper modifiers\n// ================\n\n/** Modifier helper function to compute popper transform-origin based on arrow position */\n\nexport function getTransformOrigin(data) {\n  var position = getPosition(data.placement);\n\n  if (data.arrowElement == null) {\n    return isVerticalPosition(position) ? getOppositePosition(position) + \" \" + getAlignment(position) : getAlignment(position) + \" \" + getOppositePosition(position);\n  } else {\n    var arrowSizeShift = data.arrowElement.clientHeight / 2;\n    var arrow = data.offsets.arrow; // can use keyword for dimension without the arrow, to ease computation burden.\n    // move origin by half arrow's height to keep it centered.\n\n    return isVerticalPosition(position) ? getOppositePosition(position) + \" \" + (arrow.top + arrowSizeShift) + \"px\" : arrow.left + arrowSizeShift + \"px \" + getOppositePosition(position);\n  }\n} // additional space between arrow and edge of target\n\nvar ARROW_SPACING = 4;\n/** Popper modifier that offsets popper and arrow so arrow points out of the correct side */\n\nexport var arrowOffsetModifier = function arrowOffsetModifier(data) {\n  if (data.arrowElement == null) {\n    return data;\n  } // our arrows have equal width and height\n\n\n  var arrowSize = data.arrowElement.clientWidth; // this logic borrowed from original Popper arrow modifier itself\n\n  var position = getPosition(data.placement);\n  var isVertical = isVerticalPosition(position);\n  var len = isVertical ? \"width\" : \"height\";\n  var offsetSide = isVertical ? \"left\" : \"top\";\n  var arrowOffsetSize = Math.round(arrowSize / 2 / Math.sqrt(2)); // offset popover by arrow size, offset arrow in the opposite direction\n\n  if (position === \"top\" || position === \"left\") {\n    // the \"up & back\" directions require negative popper offsets\n    data.offsets.popper[offsetSide] -= arrowOffsetSize + ARROW_SPACING; // can only use left/top on arrow so gotta get clever with 100% + X\n\n    data.offsets.arrow[offsetSide] = data.offsets.popper[len] - arrowSize + arrowOffsetSize;\n  } else {\n    data.offsets.popper[offsetSide] += arrowOffsetSize + ARROW_SPACING;\n    data.offsets.arrow[offsetSide] = -arrowOffsetSize;\n  }\n\n  return data;\n};","/*\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as React from \"react\";\nimport * as Classes from \"../../common/classes\";\nimport { DISPLAYNAME_PREFIX } from \"../../common/props\";\nimport { getPosition } from \"./popperUtils\"; // these paths come from the Core Kit Sketch file\n// https://github.com/palantir/blueprint/blob/develop/resources/sketch/Core%20Kit.sketch\n\nvar SVG_SHADOW_PATH = \"M8.11 6.302c1.015-.936 1.887-2.922 1.887-4.297v26c0-1.378\" + \"-.868-3.357-1.888-4.297L.925 17.09c-1.237-1.14-1.233-3.034 0-4.17L8.11 6.302z\";\nvar SVG_ARROW_PATH = \"M8.787 7.036c1.22-1.125 2.21-3.376 2.21-5.03V0v30-2.005\" + \"c0-1.654-.983-3.9-2.21-5.03l-7.183-6.616c-.81-.746-.802-1.96 0-2.7l7.183-6.614z\";\n/** Modifier helper function to compute arrow rotate() transform */\n\nfunction getArrowAngle(placement) {\n  if (placement == null) {\n    return 0;\n  } // can only be top/left/bottom/right - auto is resolved internally\n\n\n  switch (getPosition(placement)) {\n    case \"top\":\n      return -90;\n\n    case \"left\":\n      return 180;\n\n    case \"bottom\":\n      return 90;\n\n    default:\n      return 0;\n  }\n}\n\nexport var PopoverArrow = function PopoverArrow(_a) {\n  var _b = _a.arrowProps,\n      ref = _b.ref,\n      style = _b.style,\n      placement = _a.placement;\n  return React.createElement(\"div\", {\n    className: Classes.POPOVER_ARROW,\n    ref: ref,\n    style: isNaN(+style.left) ? {} : style\n  }, React.createElement(\"svg\", {\n    viewBox: \"0 0 30 30\",\n    style: {\n      transform: \"rotate(\" + getArrowAngle(placement) + \"deg)\"\n    }\n  }, React.createElement(\"path\", {\n    className: Classes.POPOVER_ARROW + \"-border\",\n    d: SVG_SHADOW_PATH\n  }), React.createElement(\"path\", {\n    className: Classes.POPOVER_ARROW + \"-fill\",\n    d: SVG_ARROW_PATH\n  })));\n};\nPopoverArrow.displayName = DISPLAYNAME_PREFIX + \".PopoverArrow\";","/*\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Position } from \"../../common/position\";\n/**\n * Convert a position to a placement.\n * @param position the position to convert\n */\n\nexport function positionToPlacement(position) {\n  /* istanbul ignore next */\n  switch (position) {\n    case Position.TOP_LEFT:\n      return \"top-start\";\n\n    case Position.TOP:\n      return \"top\";\n\n    case Position.TOP_RIGHT:\n      return \"top-end\";\n\n    case Position.RIGHT_TOP:\n      return \"right-start\";\n\n    case Position.RIGHT:\n      return \"right\";\n\n    case Position.RIGHT_BOTTOM:\n      return \"right-end\";\n\n    case Position.BOTTOM_RIGHT:\n      return \"bottom-end\";\n\n    case Position.BOTTOM:\n      return \"bottom\";\n\n    case Position.BOTTOM_LEFT:\n      return \"bottom-start\";\n\n    case Position.LEFT_BOTTOM:\n      return \"left-end\";\n\n    case Position.LEFT:\n      return \"left\";\n\n    case Position.LEFT_TOP:\n      return \"left-start\";\n\n    case \"auto\":\n    case \"auto-start\":\n    case \"auto-end\":\n      // Return the string unchanged.\n      return position;\n\n    default:\n      return assertNever(position);\n  }\n}\n/* istanbul ignore next */\n\nfunction assertNever(x) {\n  throw new Error(\"Unexpected position: \" + x);\n}","/*\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { Manager, Popper, Reference } from \"react-popper\";\nimport { AbstractPureComponent2, Classes } from \"../../common\";\nimport * as Errors from \"../../common/errors\";\nimport { DISPLAYNAME_PREFIX } from \"../../common/props\";\nimport * as Utils from \"../../common/utils\";\nimport { Overlay } from \"../overlay/overlay\";\nimport { ResizeSensor } from \"../resize-sensor/resizeSensor\";\nimport { Tooltip } from \"../tooltip/tooltip\";\nimport { PopoverArrow } from \"./popoverArrow\";\nimport { positionToPlacement } from \"./popoverMigrationUtils\";\nimport { arrowOffsetModifier, getTransformOrigin } from \"./popperUtils\";\nexport var PopoverInteractionKind = {\n  CLICK: \"click\",\n  CLICK_TARGET_ONLY: \"click-target\",\n  HOVER: \"hover\",\n  HOVER_TARGET_ONLY: \"hover-target\"\n};\n\nvar Popover =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(Popover, _super);\n\n  function Popover() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      hasDarkParent: false,\n      isOpen: _this.getIsOpen(_this.props),\n      transformOrigin: \"\"\n    }; // a flag that lets us detect mouse movement between the target and popover,\n    // now that mouseleave is triggered when you cross the gap between the two.\n\n    _this.isMouseInTargetOrPopover = false; // a flag that indicates whether the target previously lost focus to another\n    // element on the same page.\n\n    _this.lostFocusOnSamePage = true;\n    _this.refHandlers = {\n      popover: function popover(ref) {\n        _this.popoverElement = ref;\n        Utils.safeInvoke(_this.props.popoverRef, ref);\n      },\n      target: function target(ref) {\n        return _this.targetElement = ref;\n      }\n    };\n    /**\n     * Instance method to instruct the `Popover` to recompute its position.\n     *\n     * This method should only be used if you are updating the target in a way\n     * that does not cause it to re-render, such as changing its _position_\n     * without changing its _size_ (since `Popover` already repositions when it\n     * detects a resize).\n     */\n\n    _this.reposition = function () {\n      return Utils.safeInvoke(_this.popperScheduleUpdate);\n    };\n\n    _this.renderPopover = function (popperProps) {\n      var _a;\n\n      var _b = _this.props,\n          usePortal = _b.usePortal,\n          interactionKind = _b.interactionKind;\n      var transformOrigin = _this.state.transformOrigin; // Need to update our reference to this on every render as it will change.\n\n      _this.popperScheduleUpdate = popperProps.scheduleUpdate;\n      var popoverHandlers = {\n        // always check popover clicks for dismiss class\n        onClick: _this.handlePopoverClick\n      };\n\n      if (interactionKind === PopoverInteractionKind.HOVER || !usePortal && interactionKind === PopoverInteractionKind.HOVER_TARGET_ONLY) {\n        popoverHandlers.onMouseEnter = _this.handleMouseEnter;\n        popoverHandlers.onMouseLeave = _this.handleMouseLeave;\n      }\n\n      var popoverClasses = classNames(Classes.POPOVER, (_a = {}, _a[Classes.DARK] = _this.props.inheritDarkTheme && _this.state.hasDarkParent, _a[Classes.MINIMAL] = _this.props.minimal, _a), _this.props.popoverClassName);\n      return React.createElement(\"div\", {\n        className: Classes.TRANSITION_CONTAINER,\n        ref: popperProps.ref,\n        style: popperProps.style\n      }, React.createElement(ResizeSensor, {\n        onResize: _this.reposition\n      }, React.createElement(\"div\", tslib_1.__assign({\n        className: popoverClasses,\n        style: {\n          transformOrigin: transformOrigin\n        }\n      }, popoverHandlers), _this.isArrowEnabled() && React.createElement(PopoverArrow, {\n        arrowProps: popperProps.arrowProps,\n        placement: popperProps.placement\n      }), React.createElement(\"div\", {\n        className: Classes.POPOVER_CONTENT\n      }, _this.understandChildren().content))));\n    };\n\n    _this.renderTarget = function (referenceProps) {\n      var _a, _b;\n\n      var _c = _this.props,\n          fill = _c.fill,\n          openOnTargetFocus = _c.openOnTargetFocus,\n          targetClassName = _c.targetClassName,\n          _d = _c.targetProps,\n          targetProps = _d === void 0 ? {} : _d;\n      var isOpen = _this.state.isOpen;\n\n      var isControlled = _this.isControlled();\n\n      var isHoverInteractionKind = _this.isHoverInteractionKind();\n\n      var targetTagName = _this.props.targetTagName;\n\n      if (fill) {\n        targetTagName = \"div\";\n      }\n\n      var finalTargetProps = isHoverInteractionKind ? {\n        // HOVER handlers\n        onBlur: _this.handleTargetBlur,\n        onFocus: _this.handleTargetFocus,\n        onMouseEnter: _this.handleMouseEnter,\n        onMouseLeave: _this.handleMouseLeave\n      } : {\n        // CLICK needs only one handler\n        onClick: _this.handleTargetClick\n      };\n      finalTargetProps.className = classNames(Classes.POPOVER_TARGET, (_a = {}, _a[Classes.POPOVER_OPEN] = isOpen, _a), targetProps.className, targetClassName);\n      finalTargetProps.ref = referenceProps.ref;\n      var rawTarget = Utils.ensureElement(_this.understandChildren().target);\n      var rawTabIndex = rawTarget.props.tabIndex; // ensure target is focusable if relevant prop enabled\n\n      var tabIndex = rawTabIndex == null && openOnTargetFocus && isHoverInteractionKind ? 0 : rawTabIndex;\n      var clonedTarget = React.cloneElement(rawTarget, {\n        className: classNames(rawTarget.props.className, (_b = {}, // this class is mainly useful for button targets; we should only apply it for uncontrolled popovers\n        // when they are opened by a user interaction\n        _b[Classes.ACTIVE] = isOpen && !isControlled && !isHoverInteractionKind, _b)),\n        // force disable single Tooltip child when popover is open (BLUEPRINT-552)\n        disabled: isOpen && Utils.isElementOfType(rawTarget, Tooltip) ? true : rawTarget.props.disabled,\n        tabIndex: tabIndex\n      });\n      var target = React.createElement(targetTagName, tslib_1.__assign({}, targetProps, finalTargetProps), clonedTarget);\n      return React.createElement(ResizeSensor, {\n        onResize: _this.reposition\n      }, target);\n    };\n\n    _this.isControlled = function () {\n      return _this.props.isOpen !== undefined;\n    };\n\n    _this.handleTargetFocus = function (e) {\n      if (_this.props.openOnTargetFocus && _this.isHoverInteractionKind()) {\n        if (e.relatedTarget == null && !_this.lostFocusOnSamePage) {\n          // ignore this focus event -- the target was already focused but the page itself\n          // lost focus (e.g. due to switching tabs).\n          return;\n        }\n\n        _this.handleMouseEnter(e);\n      }\n\n      Utils.safeInvokeMember(_this.props.targetProps, \"onFocus\", e);\n    };\n\n    _this.handleTargetBlur = function (e) {\n      if (_this.props.openOnTargetFocus && _this.isHoverInteractionKind()) {\n        // if the next element to receive focus is within the popover, we'll want to leave the\n        // popover open. e.relatedTarget ought to tell us the next element to receive focus, but if the user just\n        // clicked on an element which is not focusable (either by default or with a tabIndex attribute),\n        // it won't be set. So, we filter those out here and assume that a click handler somewhere else will\n        // close the popover if necessary.\n        if (e.relatedTarget != null && !_this.isElementInPopover(e.relatedTarget)) {\n          _this.handleMouseLeave(e);\n        }\n      }\n\n      _this.lostFocusOnSamePage = e.relatedTarget != null;\n      Utils.safeInvokeMember(_this.props.targetProps, \"onBlur\", e);\n    };\n\n    _this.handleMouseEnter = function (e) {\n      _this.isMouseInTargetOrPopover = true; // if we're entering the popover, and the mode is set to be HOVER_TARGET_ONLY, we want to manually\n      // trigger the mouse leave event, as hovering over the popover shouldn't count.\n\n      if (!_this.props.usePortal && _this.isElementInPopover(e.target) && _this.props.interactionKind === PopoverInteractionKind.HOVER_TARGET_ONLY && !_this.props.openOnTargetFocus) {\n        _this.handleMouseLeave(e);\n      } else if (!_this.props.disabled) {\n        // only begin opening popover when it is enabled\n        _this.setOpenState(true, e, _this.props.hoverOpenDelay);\n      }\n\n      Utils.safeInvokeMember(_this.props.targetProps, \"onMouseEnter\", e);\n    };\n\n    _this.handleMouseLeave = function (e) {\n      _this.isMouseInTargetOrPopover = false; // wait until the event queue is flushed, because we want to leave the\n      // popover open if the mouse entered the popover immediately after\n      // leaving the target (or vice versa).\n\n      _this.setTimeout(function () {\n        if (_this.isMouseInTargetOrPopover) {\n          return;\n        } // user-configurable closing delay is helpful when moving mouse from target to popover\n\n\n        _this.setOpenState(false, e, _this.props.hoverCloseDelay);\n      });\n\n      Utils.safeInvokeMember(_this.props.targetProps, \"onMouseLeave\", e);\n    };\n\n    _this.handlePopoverClick = function (e) {\n      var eventTarget = e.target; // an OVERRIDE inside a DISMISS does not dismiss, and a DISMISS inside an OVERRIDE will dismiss.\n\n      var dismissElement = eventTarget.closest(\".\" + Classes.POPOVER_DISMISS + \", .\" + Classes.POPOVER_DISMISS_OVERRIDE);\n      var shouldDismiss = dismissElement != null && dismissElement.classList.contains(Classes.POPOVER_DISMISS);\n      var isDisabled = eventTarget.closest(\":disabled, .\" + Classes.DISABLED) != null;\n\n      if (shouldDismiss && !isDisabled && !e.isDefaultPrevented()) {\n        _this.setOpenState(false, e);\n\n        if (_this.props.captureDismiss) {\n          e.preventDefault();\n        }\n      }\n    };\n\n    _this.handleOverlayClose = function (e) {\n      var eventTarget = e.target; // if click was in target, target event listener will handle things, so don't close\n\n      if (!Utils.elementIsOrContains(_this.targetElement, eventTarget) || e.nativeEvent instanceof KeyboardEvent) {\n        _this.setOpenState(false, e);\n      }\n    };\n\n    _this.handleTargetClick = function (e) {\n      // ensure click did not originate from within inline popover before closing\n      if (!_this.props.disabled && !_this.isElementInPopover(e.target)) {\n        if (_this.props.isOpen == null) {\n          _this.setState(function (prevState) {\n            return {\n              isOpen: !prevState.isOpen\n            };\n          });\n        } else {\n          _this.setOpenState(!_this.props.isOpen, e);\n        }\n      }\n\n      Utils.safeInvokeMember(_this.props.targetProps, \"onClick\", e);\n    };\n    /** Popper modifier that updates React state (for style properties) based on latest data. */\n\n\n    _this.updatePopoverState = function (data) {\n      // always set string; let shouldComponentUpdate determine if update is necessary\n      _this.setState({\n        transformOrigin: getTransformOrigin(data)\n      });\n\n      return data;\n    };\n\n    return _this;\n  }\n\n  Popover.prototype.render = function () {\n    var _a; // rename wrapper tag to begin with uppercase letter so it's recognized\n    // as JSX component instead of intrinsic element. but because of its\n    // type, tsc actually recognizes that it is _any_ intrinsic element, so\n    // it can typecheck the HTML props!!\n\n\n    var _b = this.props,\n        className = _b.className,\n        disabled = _b.disabled,\n        fill = _b.fill;\n    var isOpen = this.state.isOpen;\n    var wrapperTagName = this.props.wrapperTagName;\n\n    if (fill) {\n      wrapperTagName = \"div\";\n    }\n\n    var isContentEmpty = Utils.ensureElement(this.understandChildren().content) == null; // need to do this check in render(), because `isOpen` is derived from\n    // state, and state can't necessarily be accessed in validateProps.\n\n    if (isContentEmpty && !disabled && isOpen !== false && !Utils.isNodeEnv(\"production\")) {\n      console.warn(Errors.POPOVER_WARN_EMPTY_CONTENT);\n    }\n\n    var wrapperClasses = classNames(Classes.POPOVER_WRAPPER, className, (_a = {}, _a[Classes.FILL] = fill, _a));\n    var wrapper = React.createElement(wrapperTagName, {\n      className: wrapperClasses\n    }, React.createElement(Reference, {\n      innerRef: this.refHandlers.target\n    }, this.renderTarget), React.createElement(Overlay, {\n      autoFocus: this.props.autoFocus,\n      backdropClassName: Classes.POPOVER_BACKDROP,\n      backdropProps: this.props.backdropProps,\n      canEscapeKeyClose: this.props.canEscapeKeyClose,\n      canOutsideClickClose: this.props.interactionKind === PopoverInteractionKind.CLICK,\n      className: this.props.portalClassName,\n      enforceFocus: this.props.enforceFocus,\n      hasBackdrop: this.props.hasBackdrop,\n      isOpen: isOpen && !isContentEmpty,\n      onClose: this.handleOverlayClose,\n      onClosed: this.props.onClosed,\n      onClosing: this.props.onClosing,\n      onOpened: this.props.onOpened,\n      onOpening: this.props.onOpening,\n      transitionDuration: this.props.transitionDuration,\n      transitionName: Classes.POPOVER,\n      usePortal: this.props.usePortal,\n      portalContainer: this.props.portalContainer\n    }, React.createElement(Popper, {\n      innerRef: this.refHandlers.popover,\n      placement: positionToPlacement(this.props.position),\n      modifiers: this.getPopperModifiers()\n    }, this.renderPopover)));\n    return React.createElement(Manager, null, wrapper);\n  };\n\n  Popover.prototype.componentDidMount = function () {\n    this.updateDarkParent();\n  };\n\n  Popover.prototype.componentDidUpdate = function (_, __, snapshot) {\n    _super.prototype.componentDidUpdate.call(this, _, __, snapshot);\n\n    this.updateDarkParent();\n    var nextIsOpen = this.getIsOpen(this.props);\n\n    if (this.props.isOpen != null && nextIsOpen !== this.state.isOpen) {\n      this.setOpenState(nextIsOpen); // tricky: setOpenState calls setState only if this.props.isOpen is\n      // not controlled, so we need to invoke setState manually here.\n\n      this.setState({\n        isOpen: nextIsOpen\n      });\n    } else if (this.props.disabled && this.state.isOpen && this.props.isOpen == null) {\n      // special case: close an uncontrolled popover when disabled is set to true\n      this.setOpenState(false);\n    }\n  };\n\n  Popover.prototype.validateProps = function (props) {\n    if (props.isOpen == null && props.onInteraction != null) {\n      console.warn(Errors.POPOVER_WARN_UNCONTROLLED_ONINTERACTION);\n    }\n\n    if (props.hasBackdrop && !props.usePortal) {\n      console.warn(Errors.POPOVER_WARN_HAS_BACKDROP_INLINE);\n    }\n\n    if (props.hasBackdrop && props.interactionKind !== PopoverInteractionKind.CLICK) {\n      throw new Error(Errors.POPOVER_HAS_BACKDROP_INTERACTION);\n    }\n\n    var childrenCount = React.Children.count(props.children);\n    var hasContentProp = props.content !== undefined;\n    var hasTargetProp = props.target !== undefined;\n\n    if (childrenCount === 0 && !hasTargetProp) {\n      throw new Error(Errors.POPOVER_REQUIRES_TARGET);\n    }\n\n    if (childrenCount > 2) {\n      console.warn(Errors.POPOVER_WARN_TOO_MANY_CHILDREN);\n    }\n\n    if (childrenCount > 0 && hasTargetProp) {\n      console.warn(Errors.POPOVER_WARN_DOUBLE_TARGET);\n    }\n\n    if (childrenCount === 2 && hasContentProp) {\n      console.warn(Errors.POPOVER_WARN_DOUBLE_CONTENT);\n    }\n  };\n\n  Popover.prototype.updateDarkParent = function () {\n    if (this.props.usePortal && this.state.isOpen) {\n      var hasDarkParent = this.targetElement != null && this.targetElement.closest(\".\" + Classes.DARK) != null;\n      this.setState({\n        hasDarkParent: hasDarkParent\n      });\n    }\n  }; // content and target can be specified as props or as children. this method\n  // normalizes the two approaches, preferring child over prop.\n\n\n  Popover.prototype.understandChildren = function () {\n    var _a = this.props,\n        children = _a.children,\n        contentProp = _a.content,\n        targetProp = _a.target; // #validateProps asserts that 1 <= children.length <= 2 so content is optional\n\n    var _b = React.Children.toArray(children),\n        targetChild = _b[0],\n        contentChild = _b[1];\n\n    return {\n      content: contentChild == null ? contentProp : contentChild,\n      target: targetChild == null ? targetProp : targetChild\n    };\n  };\n\n  Popover.prototype.getIsOpen = function (props) {\n    // disabled popovers should never be allowed to open.\n    if (props.disabled) {\n      return false;\n    } else if (props.isOpen != null) {\n      return props.isOpen;\n    } else {\n      return props.defaultIsOpen;\n    }\n  };\n\n  Popover.prototype.getPopperModifiers = function () {\n    var _a = this.props,\n        boundary = _a.boundary,\n        modifiers = _a.modifiers;\n    var _b = modifiers.flip,\n        flip = _b === void 0 ? {} : _b,\n        _c = modifiers.preventOverflow,\n        preventOverflow = _c === void 0 ? {} : _c;\n    return tslib_1.__assign({}, modifiers, {\n      arrowOffset: {\n        enabled: this.isArrowEnabled(),\n        fn: arrowOffsetModifier,\n        order: 510\n      },\n      flip: tslib_1.__assign({\n        boundariesElement: boundary\n      }, flip),\n      preventOverflow: tslib_1.__assign({\n        boundariesElement: boundary\n      }, preventOverflow),\n      updatePopoverState: {\n        enabled: true,\n        fn: this.updatePopoverState,\n        order: 900\n      }\n    });\n  }; // a wrapper around setState({isOpen}) that will call props.onInteraction instead when in controlled mode.\n  // starts a timeout to delay changing the state if a non-zero duration is provided.\n\n\n  Popover.prototype.setOpenState = function (isOpen, e, timeout) {\n    var _this = this; // cancel any existing timeout because we have new state\n\n\n    Utils.safeInvoke(this.cancelOpenTimeout);\n\n    if (timeout > 0) {\n      this.cancelOpenTimeout = this.setTimeout(function () {\n        return _this.setOpenState(isOpen, e);\n      }, timeout);\n    } else {\n      if (this.props.isOpen == null) {\n        this.setState({\n          isOpen: isOpen\n        });\n      } else {\n        Utils.safeInvoke(this.props.onInteraction, isOpen, e);\n      }\n\n      if (!isOpen) {\n        Utils.safeInvoke(this.props.onClose, e);\n      }\n    }\n  };\n\n  Popover.prototype.isArrowEnabled = function () {\n    var _a = this.props,\n        minimal = _a.minimal,\n        arrow = _a.modifiers.arrow; // omitting `arrow` from `modifiers` uses Popper default, which does show an arrow.\n\n    return !minimal && (arrow == null || arrow.enabled);\n  };\n\n  Popover.prototype.isElementInPopover = function (element) {\n    return this.popoverElement != null && this.popoverElement.contains(element);\n  };\n\n  Popover.prototype.isHoverInteractionKind = function () {\n    return this.props.interactionKind === PopoverInteractionKind.HOVER || this.props.interactionKind === PopoverInteractionKind.HOVER_TARGET_ONLY;\n  };\n\n  Popover.displayName = DISPLAYNAME_PREFIX + \".Popover\";\n  Popover.defaultProps = {\n    boundary: \"scrollParent\",\n    captureDismiss: false,\n    defaultIsOpen: false,\n    disabled: false,\n    fill: false,\n    hasBackdrop: false,\n    hoverCloseDelay: 300,\n    hoverOpenDelay: 150,\n    inheritDarkTheme: true,\n    interactionKind: PopoverInteractionKind.CLICK,\n    minimal: false,\n    modifiers: {},\n    openOnTargetFocus: true,\n    position: \"auto\",\n    targetTagName: \"span\",\n    transitionDuration: 300,\n    usePortal: true,\n    wrapperTagName: \"span\"\n  };\n  Popover = tslib_1.__decorate([polyfill], Popover);\n  return Popover;\n}(AbstractPureComponent2);\n\nexport { Popover };","/*\n * Copyright 2015 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { AbstractPureComponent2, Classes } from \"../../common\";\nimport { DISPLAYNAME_PREFIX } from \"../../common/props\";\nimport { Popover, PopoverInteractionKind } from \"../popover/popover\";\n\nvar Tooltip =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(Tooltip, _super);\n\n  function Tooltip() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.popover = null;\n    return _this;\n  }\n\n  Tooltip.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.props,\n        children = _a.children,\n        intent = _a.intent,\n        popoverClassName = _a.popoverClassName,\n        restProps = tslib_1.__rest(_a, [\"children\", \"intent\", \"popoverClassName\"]);\n\n    var classes = classNames(Classes.TOOLTIP, Classes.intentClass(intent), popoverClassName);\n    return React.createElement(Popover, tslib_1.__assign({\n      interactionKind: PopoverInteractionKind.HOVER_TARGET_ONLY\n    }, restProps, {\n      autoFocus: false,\n      canEscapeKeyClose: false,\n      enforceFocus: false,\n      lazy: true,\n      popoverClassName: classes,\n      portalContainer: this.props.portalContainer,\n      ref: function ref(_ref) {\n        return _this.popover = _ref;\n      }\n    }), children);\n  };\n\n  Tooltip.prototype.reposition = function () {\n    if (this.popover != null) {\n      this.popover.reposition();\n    }\n  };\n\n  Tooltip.displayName = DISPLAYNAME_PREFIX + \".Tooltip\";\n  Tooltip.defaultProps = {\n    hoverCloseDelay: 0,\n    hoverOpenDelay: 100,\n    transitionDuration: 100\n  };\n  Tooltip = tslib_1.__decorate([polyfill], Tooltip);\n  return Tooltip;\n}(AbstractPureComponent2);\n\nexport { Tooltip };","/*\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { IconSvgPaths16, IconSvgPaths20 } from \"@blueprintjs/icons\";\nimport { AbstractPureComponent2, Classes, DISPLAYNAME_PREFIX } from \"../../common\";\n\nvar Icon =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(Icon, _super);\n\n  function Icon() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Icon_1 = Icon;\n\n  Icon.prototype.render = function () {\n    var icon = this.props.icon;\n\n    if (icon == null || typeof icon === \"boolean\") {\n      return null;\n    } else if (typeof icon !== \"string\") {\n      return icon;\n    }\n\n    var _a = this.props,\n        className = _a.className,\n        color = _a.color,\n        htmlTitle = _a.htmlTitle,\n        _b = _a.iconSize,\n        iconSize = _b === void 0 ? Icon_1.SIZE_STANDARD : _b,\n        intent = _a.intent,\n        _c = _a.title,\n        title = _c === void 0 ? icon : _c,\n        _d = _a.tagName,\n        tagName = _d === void 0 ? \"span\" : _d,\n        htmlprops = tslib_1.__rest(_a, [\"className\", \"color\", \"htmlTitle\", \"iconSize\", \"intent\", \"title\", \"tagName\"]); // choose which pixel grid is most appropriate for given icon size\n\n\n    var pixelGridSize = iconSize >= Icon_1.SIZE_LARGE ? Icon_1.SIZE_LARGE : Icon_1.SIZE_STANDARD; // render path elements, or nothing if icon name is unknown.\n\n    var paths = this.renderSvgPaths(pixelGridSize, icon);\n    var classes = classNames(Classes.ICON, Classes.iconClass(icon), Classes.intentClass(intent), className);\n    var viewBox = \"0 0 \" + pixelGridSize + \" \" + pixelGridSize;\n    return React.createElement(tagName, tslib_1.__assign({}, htmlprops, {\n      className: classes,\n      title: htmlTitle\n    }), React.createElement(\"svg\", {\n      fill: color,\n      \"data-icon\": icon,\n      width: iconSize,\n      height: iconSize,\n      viewBox: viewBox\n    }, title && React.createElement(\"desc\", null, title), paths));\n  };\n  /** Render `<path>` elements for the given icon name. Returns `null` if name is unknown. */\n\n\n  Icon.prototype.renderSvgPaths = function (pathsSize, iconName) {\n    var svgPathsRecord = pathsSize === Icon_1.SIZE_STANDARD ? IconSvgPaths16 : IconSvgPaths20;\n    var pathStrings = svgPathsRecord[iconName];\n\n    if (pathStrings == null) {\n      return null;\n    }\n\n    return pathStrings.map(function (d, i) {\n      return React.createElement(\"path\", {\n        key: i,\n        d: d,\n        fillRule: \"evenodd\"\n      });\n    });\n  };\n\n  var Icon_1;\n  Icon.displayName = DISPLAYNAME_PREFIX + \".Icon\";\n  Icon.SIZE_STANDARD = 16;\n  Icon.SIZE_LARGE = 20;\n  Icon = Icon_1 = tslib_1.__decorate([polyfill], Icon);\n  return Icon;\n}(AbstractPureComponent2);\n\nexport { Icon };","/*\n * Copyright 2015 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { AbstractPureComponent2, Classes } from \"../../common\";\nimport { SPINNER_WARN_CLASSES_SIZE } from \"../../common/errors\";\nimport { DISPLAYNAME_PREFIX } from \"../../common/props\";\nimport { clamp } from \"../../common/utils\"; // see http://stackoverflow.com/a/18473154/3124288 for calculating arc path\n\nvar R = 45;\nvar SPINNER_TRACK = \"M 50,50 m 0,-\" + R + \" a \" + R + \",\" + R + \" 0 1 1 0,\" + R * 2 + \" a \" + R + \",\" + R + \" 0 1 1 0,-\" + R * 2; // unitless total length of SVG path, to which stroke-dash* properties are relative.\n// https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/pathLength\n// this value is the result of `<path d={SPINNER_TRACK} />.getTotalLength()` and works in all browsers:\n\nvar PATH_LENGTH = 280;\nvar MIN_SIZE = 10;\nvar STROKE_WIDTH = 4;\nvar MIN_STROKE_WIDTH = 16;\n\nvar Spinner =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(Spinner, _super);\n\n  function Spinner() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Spinner_1 = Spinner;\n\n  Spinner.prototype.componentDidUpdate = function (prevProps) {\n    if (prevProps.value !== this.props.value) {\n      // IE/Edge: re-render after changing value to force SVG update\n      this.forceUpdate();\n    }\n  };\n\n  Spinner.prototype.render = function () {\n    var _a;\n\n    var _b = this.props,\n        className = _b.className,\n        intent = _b.intent,\n        value = _b.value,\n        _c = _b.tagName,\n        tagName = _c === void 0 ? \"div\" : _c;\n    var size = this.getSize();\n    var classes = classNames(Classes.SPINNER, Classes.intentClass(intent), (_a = {}, _a[Classes.SPINNER_NO_SPIN] = value != null, _a), className); // keep spinner track width consistent at all sizes (down to about 10px).\n\n    var strokeWidth = Math.min(MIN_STROKE_WIDTH, STROKE_WIDTH * Spinner_1.SIZE_LARGE / size);\n    var strokeOffset = PATH_LENGTH - PATH_LENGTH * (value == null ? 0.25 : clamp(value, 0, 1)); // multiple DOM elements around SVG are necessary to properly isolate animation:\n    // - SVG elements in IE do not support anim/trans so they must be set on a parent HTML element.\n    // - SPINNER_ANIMATION isolates svg from parent display and is always centered inside root element.\n\n    return React.createElement(tagName, {\n      className: classes\n    }, React.createElement(tagName, {\n      className: Classes.SPINNER_ANIMATION\n    }, React.createElement(\"svg\", {\n      width: size,\n      height: size,\n      strokeWidth: strokeWidth.toFixed(2),\n      viewBox: this.getViewBox(strokeWidth)\n    }, React.createElement(\"path\", {\n      className: Classes.SPINNER_TRACK,\n      d: SPINNER_TRACK\n    }), React.createElement(\"path\", {\n      className: Classes.SPINNER_HEAD,\n      d: SPINNER_TRACK,\n      pathLength: PATH_LENGTH,\n      strokeDasharray: PATH_LENGTH + \" \" + PATH_LENGTH,\n      strokeDashoffset: strokeOffset\n    }))));\n  };\n\n  Spinner.prototype.validateProps = function (_a) {\n    var _b = _a.className,\n        className = _b === void 0 ? \"\" : _b,\n        size = _a.size;\n\n    if (size != null && (className.indexOf(Classes.SMALL) >= 0 || className.indexOf(Classes.LARGE) >= 0)) {\n      console.warn(SPINNER_WARN_CLASSES_SIZE);\n    }\n  };\n  /**\n   * Resolve size to a pixel value.\n   * Size can be set by className, props, default, or minimum constant.\n   */\n\n\n  Spinner.prototype.getSize = function () {\n    var _a = this.props,\n        _b = _a.className,\n        className = _b === void 0 ? \"\" : _b,\n        size = _a.size;\n\n    if (size == null) {\n      // allow Classes constants to determine default size.\n      if (className.indexOf(Classes.SMALL) >= 0) {\n        return Spinner_1.SIZE_SMALL;\n      } else if (className.indexOf(Classes.LARGE) >= 0) {\n        return Spinner_1.SIZE_LARGE;\n      }\n\n      return Spinner_1.SIZE_STANDARD;\n    }\n\n    return Math.max(MIN_SIZE, size);\n  };\n  /** Compute viewbox such that stroked track sits exactly at edge of image frame. */\n\n\n  Spinner.prototype.getViewBox = function (strokeWidth) {\n    var radius = R + strokeWidth / 2;\n    var viewBoxX = (50 - radius).toFixed(2);\n    var viewBoxWidth = (radius * 2).toFixed(2);\n    return viewBoxX + \" \" + viewBoxX + \" \" + viewBoxWidth + \" \" + viewBoxWidth;\n  };\n\n  var Spinner_1;\n  Spinner.displayName = DISPLAYNAME_PREFIX + \".Spinner\";\n  Spinner.SIZE_SMALL = 20;\n  Spinner.SIZE_STANDARD = 50;\n  Spinner.SIZE_LARGE = 100;\n  Spinner = Spinner_1 = tslib_1.__decorate([polyfill], Spinner);\n  return Spinner;\n}(AbstractPureComponent2);\n\nexport { Spinner };","/*\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { AbstractPureComponent2, Classes, Keys, Utils } from \"../../common\";\nimport { Icon } from \"../icon/icon\";\nimport { Spinner } from \"../spinner/spinner\";\n\nvar AbstractButton =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(AbstractButton, _super);\n\n  function AbstractButton() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      isActive: false\n    };\n    _this.refHandlers = {\n      button: function button(ref) {\n        _this.buttonRef = ref;\n        Utils.safeInvoke(_this.props.elementRef, ref);\n      }\n    };\n    _this.currentKeyDown = null; // we're casting as `any` to get around a somewhat opaque safeInvoke error\n    // that \"Type argument candidate 'KeyboardEvent<T>' is not a valid type\n    // argument because it is not a supertype of candidate\n    // 'KeyboardEvent<HTMLElement>'.\"\n\n    _this.handleKeyDown = function (e) {\n      if (Keys.isKeyboardClick(e.which)) {\n        e.preventDefault();\n\n        if (e.which !== _this.currentKeyDown) {\n          _this.setState({\n            isActive: true\n          });\n        }\n      }\n\n      _this.currentKeyDown = e.which;\n      Utils.safeInvoke(_this.props.onKeyDown, e);\n    };\n\n    _this.handleKeyUp = function (e) {\n      if (Keys.isKeyboardClick(e.which)) {\n        _this.setState({\n          isActive: false\n        });\n\n        _this.buttonRef.click();\n      }\n\n      _this.currentKeyDown = null;\n      Utils.safeInvoke(_this.props.onKeyUp, e);\n    };\n\n    return _this;\n  }\n\n  AbstractButton.prototype.getCommonButtonProps = function () {\n    var _a;\n\n    var _b = this.props,\n        alignText = _b.alignText,\n        fill = _b.fill,\n        large = _b.large,\n        loading = _b.loading,\n        minimal = _b.minimal,\n        small = _b.small,\n        tabIndex = _b.tabIndex;\n    var disabled = this.props.disabled || loading;\n    var className = classNames(Classes.BUTTON, (_a = {}, _a[Classes.ACTIVE] = this.state.isActive || this.props.active, _a[Classes.DISABLED] = disabled, _a[Classes.FILL] = fill, _a[Classes.LARGE] = large, _a[Classes.LOADING] = loading, _a[Classes.MINIMAL] = minimal, _a[Classes.SMALL] = small, _a), Classes.alignmentClass(alignText), Classes.intentClass(this.props.intent), this.props.className);\n    return {\n      className: className,\n      disabled: disabled,\n      onClick: disabled ? undefined : this.props.onClick,\n      onKeyDown: this.handleKeyDown,\n      onKeyUp: this.handleKeyUp,\n      ref: this.refHandlers.button,\n      tabIndex: disabled ? -1 : tabIndex\n    };\n  };\n\n  AbstractButton.prototype.renderChildren = function () {\n    var _a = this.props,\n        children = _a.children,\n        icon = _a.icon,\n        loading = _a.loading,\n        rightIcon = _a.rightIcon,\n        text = _a.text;\n    return [loading && React.createElement(Spinner, {\n      key: \"loading\",\n      className: Classes.BUTTON_SPINNER,\n      size: Icon.SIZE_LARGE\n    }), React.createElement(Icon, {\n      key: \"leftIcon\",\n      icon: icon\n    }), (!Utils.isReactNodeEmpty(text) || !Utils.isReactNodeEmpty(children)) && React.createElement(\"span\", {\n      key: \"text\",\n      className: Classes.BUTTON_TEXT\n    }, text, children), React.createElement(Icon, {\n      key: \"rightIcon\",\n      icon: rightIcon\n    })];\n  };\n\n  return AbstractButton;\n}(AbstractPureComponent2);\n\nexport { AbstractButton };","/*\n * Copyright 2016 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\"; // HACKHACK: these components should go in separate files\n// tslint:disable max-classes-per-file\n\nimport * as React from \"react\";\nimport { DISPLAYNAME_PREFIX, removeNonHTMLProps } from \"../../common/props\";\nimport { AbstractButton } from \"./abstractButton\";\n\nvar Button =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(Button, _super);\n\n  function Button() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Button.prototype.render = function () {\n    return React.createElement(\"button\", tslib_1.__assign({\n      type: \"button\"\n    }, removeNonHTMLProps(this.props), this.getCommonButtonProps()), this.renderChildren());\n  };\n\n  Button.displayName = DISPLAYNAME_PREFIX + \".Button\";\n  return Button;\n}(AbstractButton);\n\nexport { Button };\n\nvar AnchorButton =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(AnchorButton, _super);\n\n  function AnchorButton() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  AnchorButton.prototype.render = function () {\n    var _a = this.props,\n        href = _a.href,\n        _b = _a.tabIndex,\n        tabIndex = _b === void 0 ? 0 : _b;\n    var commonProps = this.getCommonButtonProps();\n    return React.createElement(\"a\", tslib_1.__assign({\n      role: \"button\"\n    }, removeNonHTMLProps(this.props), commonProps, {\n      href: commonProps.disabled ? undefined : href,\n      tabIndex: commonProps.disabled ? -1 : tabIndex\n    }), this.renderChildren());\n  };\n\n  AnchorButton.displayName = DISPLAYNAME_PREFIX + \".AnchorButton\";\n  return AnchorButton;\n}(AbstractButton);\n\nexport { AnchorButton };","/*\n * Copyright 2018 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { BLOCKQUOTE, CODE, CODE_BLOCK, HEADING, LABEL, LIST } from \"../../common/classes\";\n\nfunction htmlElement(tagName, tagClassName) {\n  return function (props) {\n    var className = props.className,\n        elementRef = props.elementRef,\n        htmlProps = tslib_1.__rest(props, [\"className\", \"elementRef\"]);\n\n    return React.createElement(tagName, tslib_1.__assign({}, htmlProps, {\n      className: classNames(tagClassName, className),\n      ref: elementRef\n    }));\n  };\n} // the following components are linted by blueprint-html-components because\n// they should rarely be used without the Blueprint classes/styles:\n\n\nexport var H1 = htmlElement(\"h1\", HEADING);\nexport var H2 = htmlElement(\"h2\", HEADING);\nexport var H3 = htmlElement(\"h3\", HEADING);\nexport var H4 = htmlElement(\"h4\", HEADING);\nexport var H5 = htmlElement(\"h5\", HEADING);\nexport var H6 = htmlElement(\"h6\", HEADING);\nexport var Blockquote = htmlElement(\"blockquote\", BLOCKQUOTE);\nexport var Code = htmlElement(\"code\", CODE);\nexport var Pre = htmlElement(\"pre\", CODE_BLOCK);\nexport var Label = htmlElement(\"label\", LABEL); // these two are not linted by blueprint-html-components because there are valid\n// uses of these elements without Blueprint styles:\n\nexport var OL = htmlElement(\"ol\", LIST);\nexport var UL = htmlElement(\"ul\", LIST);","/*\n * Copyright 2015 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { AbstractPureComponent2, Classes } from \"../../common\";\nimport * as Errors from \"../../common/errors\";\nimport { DISPLAYNAME_PREFIX } from \"../../common/props\";\nimport { Button } from \"../button/buttons\";\nimport { H4 } from \"../html/html\";\nimport { Icon } from \"../icon/icon\";\nimport { Overlay } from \"../overlay/overlay\";\n\nvar Dialog =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(Dialog, _super);\n\n  function Dialog() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Dialog.prototype.render = function () {\n    return React.createElement(Overlay, tslib_1.__assign({}, this.props, {\n      className: Classes.OVERLAY_SCROLL_CONTAINER,\n      hasBackdrop: true\n    }), React.createElement(\"div\", {\n      className: Classes.DIALOG_CONTAINER\n    }, React.createElement(\"div\", {\n      className: classNames(Classes.DIALOG, this.props.className),\n      style: this.props.style\n    }, this.maybeRenderHeader(), this.props.children)));\n  };\n\n  Dialog.prototype.validateProps = function (props) {\n    if (props.title == null) {\n      if (props.icon != null) {\n        console.warn(Errors.DIALOG_WARN_NO_HEADER_ICON);\n      }\n\n      if (props.isCloseButtonShown != null) {\n        console.warn(Errors.DIALOG_WARN_NO_HEADER_CLOSE_BUTTON);\n      }\n    }\n  };\n\n  Dialog.prototype.maybeRenderCloseButton = function () {\n    // show close button if prop is undefined or null\n    // this gives us a behavior as if the default value were `true`\n    if (this.props.isCloseButtonShown !== false) {\n      return React.createElement(Button, {\n        \"aria-label\": \"Close\",\n        className: Classes.DIALOG_CLOSE_BUTTON,\n        icon: React.createElement(Icon, {\n          icon: \"small-cross\",\n          iconSize: Icon.SIZE_LARGE\n        }),\n        minimal: true,\n        onClick: this.props.onClose\n      });\n    } else {\n      return undefined;\n    }\n  };\n\n  Dialog.prototype.maybeRenderHeader = function () {\n    var _a = this.props,\n        icon = _a.icon,\n        title = _a.title;\n\n    if (title == null) {\n      return undefined;\n    }\n\n    return React.createElement(\"div\", {\n      className: Classes.DIALOG_HEADER\n    }, React.createElement(Icon, {\n      icon: icon,\n      iconSize: Icon.SIZE_LARGE\n    }), React.createElement(H4, null, title), this.maybeRenderCloseButton());\n  };\n\n  Dialog.defaultProps = {\n    canOutsideClickClose: true,\n    isOpen: false\n  };\n  Dialog.displayName = DISPLAYNAME_PREFIX + \".Dialog\";\n  Dialog = tslib_1.__decorate([polyfill], Dialog);\n  return Dialog;\n}(AbstractPureComponent2);\n\nexport { Dialog };","/*\n * Copyright 2015 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { AbstractPureComponent2, Classes, DISPLAYNAME_PREFIX } from \"../../common\";\nimport { ALERT_WARN_CANCEL_ESCAPE_KEY, ALERT_WARN_CANCEL_OUTSIDE_CLICK, ALERT_WARN_CANCEL_PROPS } from \"../../common/errors\";\nimport { safeInvoke } from \"../../common/utils\";\nimport { Button } from \"../button/buttons\";\nimport { Dialog } from \"../dialog/dialog\";\nimport { Icon } from \"../icon/icon\";\n\nvar Alert =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(Alert, _super);\n\n  function Alert() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.handleCancel = function (evt) {\n      return _this.internalHandleCallbacks(false, evt);\n    };\n\n    _this.handleConfirm = function (evt) {\n      return _this.internalHandleCallbacks(true, evt);\n    };\n\n    return _this;\n  }\n\n  Alert.prototype.render = function () {\n    var _a = this.props,\n        canEscapeKeyCancel = _a.canEscapeKeyCancel,\n        canOutsideClickCancel = _a.canOutsideClickCancel,\n        children = _a.children,\n        className = _a.className,\n        icon = _a.icon,\n        intent = _a.intent,\n        cancelButtonText = _a.cancelButtonText,\n        confirmButtonText = _a.confirmButtonText,\n        onClose = _a.onClose,\n        overlayProps = tslib_1.__rest(_a, [\"canEscapeKeyCancel\", \"canOutsideClickCancel\", \"children\", \"className\", \"icon\", \"intent\", \"cancelButtonText\", \"confirmButtonText\", \"onClose\"]);\n\n    return React.createElement(Dialog, tslib_1.__assign({}, overlayProps, {\n      className: classNames(Classes.ALERT, className),\n      canEscapeKeyClose: canEscapeKeyCancel,\n      canOutsideClickClose: canOutsideClickCancel,\n      onClose: this.handleCancel,\n      portalContainer: this.props.portalContainer\n    }), React.createElement(\"div\", {\n      className: Classes.ALERT_BODY\n    }, React.createElement(Icon, {\n      icon: icon,\n      iconSize: 40,\n      intent: intent\n    }), React.createElement(\"div\", {\n      className: Classes.ALERT_CONTENTS\n    }, children)), React.createElement(\"div\", {\n      className: Classes.ALERT_FOOTER\n    }, React.createElement(Button, {\n      intent: intent,\n      text: confirmButtonText,\n      onClick: this.handleConfirm\n    }), cancelButtonText && React.createElement(Button, {\n      text: cancelButtonText,\n      onClick: this.handleCancel\n    })));\n  };\n\n  Alert.prototype.validateProps = function (props) {\n    if (props.onClose == null && props.cancelButtonText == null !== (props.onCancel == null)) {\n      console.warn(ALERT_WARN_CANCEL_PROPS);\n    }\n\n    var hasCancelHandler = props.onCancel != null || props.onClose != null;\n\n    if (props.canEscapeKeyCancel && !hasCancelHandler) {\n      console.warn(ALERT_WARN_CANCEL_ESCAPE_KEY);\n    }\n\n    if (props.canOutsideClickCancel && !hasCancelHandler) {\n      console.warn(ALERT_WARN_CANCEL_OUTSIDE_CLICK);\n    }\n  };\n\n  Alert.prototype.internalHandleCallbacks = function (confirmed, evt) {\n    var _a = this.props,\n        onCancel = _a.onCancel,\n        onClose = _a.onClose,\n        onConfirm = _a.onConfirm;\n    safeInvoke(confirmed ? onConfirm : onCancel, evt);\n    safeInvoke(onClose, confirmed, evt);\n  };\n\n  Alert.defaultProps = {\n    canEscapeKeyCancel: false,\n    canOutsideClickCancel: false,\n    confirmButtonText: \"OK\",\n    isOpen: false\n  };\n  Alert.displayName = DISPLAYNAME_PREFIX + \".Alert\";\n  Alert = tslib_1.__decorate([polyfill], Alert);\n  return Alert;\n}(AbstractPureComponent2);\n\nexport { Alert };","/*\n * Copyright 2018 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { AbstractPureComponent2, Classes } from \"../../common\";\nimport * as Errors from \"../../common/errors\";\nimport { getPositionIgnoreAngles, isPositionHorizontal } from \"../../common/position\";\nimport { DISPLAYNAME_PREFIX } from \"../../common/props\";\nimport { Button } from \"../button/buttons\";\nimport { H4 } from \"../html/html\";\nimport { Icon } from \"../icon/icon\";\nimport { Overlay } from \"../overlay/overlay\";\n\nvar Drawer =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(Drawer, _super);\n\n  function Drawer() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Drawer.prototype.render = function () {\n    var _a, _b;\n\n    var _c = this.props,\n        size = _c.size,\n        style = _c.style,\n        position = _c.position,\n        vertical = _c.vertical;\n    var realPosition = position ? getPositionIgnoreAngles(position) : null;\n    var classes = classNames(Classes.DRAWER, (_a = {}, _a[Classes.VERTICAL] = !realPosition && vertical, _a[realPosition ? Classes.positionClass(realPosition) : \"\"] = true, _a), this.props.className);\n    var styleProp = size == null ? style : tslib_1.__assign({}, style, (_b = {}, _b[(realPosition ? isPositionHorizontal(realPosition) : vertical) ? \"height\" : \"width\"] = size, _b));\n    return React.createElement(Overlay, tslib_1.__assign({}, this.props, {\n      className: Classes.OVERLAY_CONTAINER\n    }), React.createElement(\"div\", {\n      className: classes,\n      style: styleProp\n    }, this.maybeRenderHeader(), this.props.children));\n  };\n\n  Drawer.prototype.validateProps = function (props) {\n    if (props.title == null) {\n      if (props.icon != null) {\n        console.warn(Errors.DIALOG_WARN_NO_HEADER_ICON);\n      }\n\n      if (props.isCloseButtonShown != null) {\n        console.warn(Errors.DIALOG_WARN_NO_HEADER_CLOSE_BUTTON);\n      }\n    }\n\n    if (props.position != null) {\n      if (props.vertical) {\n        console.warn(Errors.DRAWER_VERTICAL_IS_IGNORED);\n      }\n\n      if (props.position !== getPositionIgnoreAngles(props.position)) {\n        console.warn(Errors.DRAWER_ANGLE_POSITIONS_ARE_CASTED);\n      }\n    }\n  };\n\n  Drawer.prototype.maybeRenderCloseButton = function () {\n    // `isCloseButtonShown` can't be defaulted through default props because of props validation\n    // so this check actually defaults it to true (fails only if directly set to false)\n    if (this.props.isCloseButtonShown !== false) {\n      return React.createElement(Button, {\n        \"aria-label\": \"Close\",\n        className: Classes.DIALOG_CLOSE_BUTTON,\n        icon: React.createElement(Icon, {\n          icon: \"small-cross\",\n          iconSize: Icon.SIZE_LARGE\n        }),\n        minimal: true,\n        onClick: this.props.onClose\n      });\n    } else {\n      return null;\n    }\n  };\n\n  Drawer.prototype.maybeRenderHeader = function () {\n    var _a = this.props,\n        icon = _a.icon,\n        title = _a.title;\n\n    if (title == null) {\n      return null;\n    }\n\n    return React.createElement(\"div\", {\n      className: Classes.DRAWER_HEADER\n    }, React.createElement(Icon, {\n      icon: icon,\n      iconSize: Icon.SIZE_LARGE\n    }), React.createElement(H4, null, title), this.maybeRenderCloseButton());\n  };\n\n  Drawer.displayName = DISPLAYNAME_PREFIX + \".Drawer\";\n  Drawer.defaultProps = {\n    canOutsideClickClose: true,\n    isOpen: false,\n    position: null,\n    style: {},\n    vertical: false\n  };\n  Drawer.SIZE_SMALL = \"360px\";\n  Drawer.SIZE_STANDARD = \"50%\";\n  Drawer.SIZE_LARGE = \"90%\";\n  Drawer = tslib_1.__decorate([polyfill], Drawer);\n  return Drawer;\n}(AbstractPureComponent2);\n\nexport { Drawer };","/*\n * Copyright 2015 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport * as Classes from \"../../common/classes\";\nimport { DISPLAYNAME_PREFIX } from \"../../common/props\";\nimport { H6 } from \"../html/html\";\n\nvar MenuDivider =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(MenuDivider, _super);\n\n  function MenuDivider() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  MenuDivider.prototype.render = function () {\n    var _a = this.props,\n        className = _a.className,\n        title = _a.title;\n\n    if (title == null) {\n      // simple divider\n      return React.createElement(\"li\", {\n        className: classNames(Classes.MENU_DIVIDER, className)\n      });\n    } else {\n      // section header with title\n      return React.createElement(\"li\", {\n        className: classNames(Classes.MENU_HEADER, className)\n      }, React.createElement(H6, null, title));\n    }\n  };\n\n  MenuDivider.displayName = DISPLAYNAME_PREFIX + \".MenuDivider\";\n  return MenuDivider;\n}(React.Component);\n\nexport { MenuDivider };","/*\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { AbstractPureComponent2, Classes } from \"../../common\";\nimport { DISPLAYNAME_PREFIX } from \"../../common/props\";\n\nvar Text =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(Text, _super);\n\n  function Text() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      isContentOverflowing: false,\n      textContent: \"\"\n    };\n    _this.textRef = null;\n    return _this;\n  }\n\n  Text.prototype.componentDidMount = function () {\n    this.update();\n  };\n\n  Text.prototype.componentDidUpdate = function () {\n    this.update();\n  };\n\n  Text.prototype.render = function () {\n    var _a;\n\n    var _this = this;\n\n    var classes = classNames((_a = {}, _a[Classes.TEXT_OVERFLOW_ELLIPSIS] = this.props.ellipsize, _a), this.props.className);\n    var _b = this.props,\n        children = _b.children,\n        _c = _b.tagName,\n        tagName = _c === void 0 ? \"div\" : _c;\n    return React.createElement(tagName, {\n      className: classes,\n      ref: function ref(_ref) {\n        return _this.textRef = _ref;\n      },\n      title: this.state.isContentOverflowing ? this.state.textContent : undefined\n    }, children);\n  };\n\n  Text.prototype.update = function () {\n    if (this.textRef == null) {\n      return;\n    }\n\n    var newState = {\n      isContentOverflowing: this.props.ellipsize && this.textRef.scrollWidth > this.textRef.clientWidth,\n      textContent: this.textRef.textContent\n    };\n    this.setState(newState);\n  };\n\n  Text.displayName = DISPLAYNAME_PREFIX + \".Text\";\n  Text = tslib_1.__decorate([polyfill], Text);\n  return Text;\n}(AbstractPureComponent2);\n\nexport { Text };","/*\n * Copyright 2015 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { AbstractPureComponent2, Classes } from \"../../common\";\nimport { DISPLAYNAME_PREFIX } from \"../../common/props\";\nimport { MenuDivider } from \"./menuDivider\";\nimport { MenuItem } from \"./menuItem\";\n\nvar Menu =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(Menu, _super);\n\n  function Menu() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Menu.prototype.render = function () {\n    var _a;\n\n    var _b = this.props,\n        className = _b.className,\n        children = _b.children,\n        large = _b.large,\n        ulRef = _b.ulRef,\n        htmlProps = tslib_1.__rest(_b, [\"className\", \"children\", \"large\", \"ulRef\"]);\n\n    var classes = classNames(Classes.MENU, (_a = {}, _a[Classes.LARGE] = large, _a), className);\n    return React.createElement(\"ul\", tslib_1.__assign({}, htmlProps, {\n      className: classes,\n      ref: ulRef\n    }), children);\n  };\n\n  Menu.displayName = DISPLAYNAME_PREFIX + \".Menu\";\n  Menu.Divider = MenuDivider;\n  Menu.Item = MenuItem;\n  Menu = tslib_1.__decorate([polyfill], Menu);\n  return Menu;\n}(AbstractPureComponent2);\n\nexport { Menu };","/*\n * Copyright 2015 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { AbstractPureComponent2, Classes, Position } from \"../../common\";\nimport { DISPLAYNAME_PREFIX } from \"../../common/props\";\nimport { Icon } from \"../icon/icon\";\nimport { Popover, PopoverInteractionKind } from \"../popover/popover\";\nimport { Text } from \"../text/text\";\nimport { Menu } from \"./menu\";\n\nvar MenuItem =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(MenuItem, _super);\n\n  function MenuItem() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  MenuItem.prototype.render = function () {\n    var _a, _b;\n\n    var _c = this.props,\n        active = _c.active,\n        className = _c.className,\n        children = _c.children,\n        disabled = _c.disabled,\n        icon = _c.icon,\n        intent = _c.intent,\n        labelClassName = _c.labelClassName,\n        labelElement = _c.labelElement,\n        multiline = _c.multiline,\n        popoverProps = _c.popoverProps,\n        shouldDismissPopover = _c.shouldDismissPopover,\n        text = _c.text,\n        textClassName = _c.textClassName,\n        _d = _c.tagName,\n        tagName = _d === void 0 ? \"a\" : _d,\n        htmlProps = tslib_1.__rest(_c, [\"active\", \"className\", \"children\", \"disabled\", \"icon\", \"intent\", \"labelClassName\", \"labelElement\", \"multiline\", \"popoverProps\", \"shouldDismissPopover\", \"text\", \"textClassName\", \"tagName\"]);\n\n    var hasSubmenu = children != null;\n    var intentClass = Classes.intentClass(intent);\n    var anchorClasses = classNames(Classes.MENU_ITEM, intentClass, (_a = {}, _a[Classes.ACTIVE] = active, _a[Classes.INTENT_PRIMARY] = active && intentClass == null, _a[Classes.DISABLED] = disabled, // prevent popover from closing when clicking on submenu trigger or disabled item\n    _a[Classes.POPOVER_DISMISS] = shouldDismissPopover && !disabled && !hasSubmenu, _a), className);\n    var target = React.createElement(tagName, tslib_1.__assign({}, htmlProps, disabled ? DISABLED_PROPS : {}, {\n      className: anchorClasses\n    }), React.createElement(Icon, {\n      icon: icon\n    }), React.createElement(Text, {\n      className: classNames(Classes.FILL, textClassName),\n      ellipsize: !multiline\n    }, text), this.maybeRenderLabel(labelElement), hasSubmenu ? React.createElement(Icon, {\n      icon: \"caret-right\"\n    }) : undefined);\n    var liClasses = classNames((_b = {}, _b[Classes.MENU_SUBMENU] = hasSubmenu, _b));\n    return React.createElement(\"li\", {\n      className: liClasses\n    }, this.maybeRenderPopover(target, children));\n  };\n\n  MenuItem.prototype.maybeRenderLabel = function (labelElement) {\n    var _a = this.props,\n        label = _a.label,\n        labelClassName = _a.labelClassName;\n\n    if (label == null && labelElement == null) {\n      return null;\n    }\n\n    return React.createElement(\"span\", {\n      className: classNames(Classes.MENU_ITEM_LABEL, labelClassName)\n    }, label, labelElement);\n  };\n\n  MenuItem.prototype.maybeRenderPopover = function (target, children) {\n    if (children == null) {\n      return target;\n    }\n\n    var _a = this.props,\n        disabled = _a.disabled,\n        popoverProps = _a.popoverProps;\n    return React.createElement(Popover, tslib_1.__assign({\n      autoFocus: false,\n      captureDismiss: false,\n      disabled: disabled,\n      enforceFocus: false,\n      hoverCloseDelay: 0,\n      interactionKind: PopoverInteractionKind.HOVER,\n      modifiers: SUBMENU_POPOVER_MODIFIERS,\n      position: Position.RIGHT_TOP,\n      usePortal: false\n    }, popoverProps, {\n      content: React.createElement(Menu, null, children),\n      minimal: true,\n      popoverClassName: classNames(Classes.MENU_SUBMENU, popoverProps.popoverClassName),\n      target: target\n    }));\n  };\n\n  MenuItem.defaultProps = {\n    disabled: false,\n    multiline: false,\n    popoverProps: {},\n    shouldDismissPopover: true,\n    text: \"\"\n  };\n  MenuItem.displayName = DISPLAYNAME_PREFIX + \".MenuItem\";\n  MenuItem = tslib_1.__decorate([polyfill], MenuItem);\n  return MenuItem;\n}(AbstractPureComponent2);\n\nexport { MenuItem };\nvar SUBMENU_POPOVER_MODIFIERS = {\n  // 20px padding - scrollbar width + a bit\n  flip: {\n    boundariesElement: \"viewport\",\n    padding: 20\n  },\n  // shift popover up 5px so MenuItems align\n  offset: {\n    offset: -5\n  },\n  preventOverflow: {\n    boundariesElement: \"viewport\",\n    padding: 20\n  }\n}; // props to ignore when disabled\n\nvar DISABLED_PROPS = {\n  href: undefined,\n  onClick: undefined,\n  onMouseDown: undefined,\n  onMouseEnter: undefined,\n  onMouseLeave: undefined,\n  tabIndex: -1\n};","import { OpType, FocusMode, ModelModifier } from '@blink-mind/core';\nimport { iconClassName, TopicBlockIcon, BaseWidget, Btn, Icon, IconName, cancelEvent } from '@blink-mind/renderer-react';\nimport { Alert, Tooltip, Position, Classes, Drawer, MenuDivider, MenuItem } from '@blueprintjs/core';\nimport { createElement, Component, Fragment } from 'react';\nimport { Topology } from 'topology-core';\nimport { registerNode } from 'topology-core/middles';\nimport { flowData, flowDataAnchors, flowDataIconRect, flowDataTextRect, flowSubprocess, flowSubprocessIconRect, flowSubprocessTextRect, flowDb, flowDbIconRect, flowDbTextRect, flowDocument, flowDocumentAnchors, flowDocumentIconRect, flowDocumentTextRect, flowInternalStorage, flowInternalStorageIconRect, flowInternalStorageTextRect, flowExternStorage, flowExternStorageAnchors, flowExternStorageIconRect, flowExternStorageTextRect, flowQueue, flowQueueIconRect, flowQueueTextRect, flowManually, flowManuallyAnchors, flowManuallyIconRect, flowManuallyTextRect, flowDisplay, flowDisplayAnchors, flowDisplayIconRect, flowDisplayTextRect, flowParallel, flowParallelAnchors, flowComment, flowCommentAnchors } from 'topology-flow-diagram';\nimport '@blink-mind/icons/iconfont/topology';\nimport styled from 'styled-components';\nimport { activityFinal, activityFinalIconRect, activityFinalTextRect, swimlaneV, swimlaneVIconRect, swimlaneVTextRect, swimlaneH, swimlaneHIconRect, swimlaneHTextRect, fork, forkHAnchors, forkIconRect, forkTextRect, forkVAnchors } from 'topology-activity-diagram';\nimport { simpleClass, simpleClassIconRect, simpleClassTextRect, interfaceClass, interfaceClassIconRect, interfaceClassTextRect } from 'topology-class-diagram';\nimport { lifeline, lifelineAnchors, lifelineIconRect, lifelineTextRect, sequenceFocus, sequenceFocusAnchors, sequenceFocusIconRect, sequenceFocusTextRect } from 'topology-sequence-diagram';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar _extendStatics = function extendStatics(d, b) {\n  _extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) {\n      if (b.hasOwnProperty(p)) d[p] = b[p];\n    }\n  };\n\n  return _extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  _extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar _assign = function __assign() {\n  _assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return _assign.apply(this, arguments);\n};\n\nfunction __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n}\n\nvar FOCUS_MODE_EDITING_TOPOLOGY = 'FOCUS_MODE_EDITING_TOPOLOGY';\nvar OP_TYPE_START_EDITING_TOPOLOGY = 'OP_TYPE_START_EDITING_TOPOLOGY';\nvar BLOCK_TYPE_TOPOLOGY = 'TOPOLOGY';\nvar REF_KEY_TOPOLOGY_DIAGRAM = 'TOPOLOGY_DIAGRAM';\nvar REF_KEY_TOPOLOGY_DIAGRAM_UTIL = 'TOPOLOGY_DIAGRAM_UTIL';\n\nfunction TopicBlockTopology(props) {\n  var controller = props.controller,\n      model = props.model,\n      topicKey = props.topicKey,\n      getRef = props.getRef;\n\n  var onClick = function onClick(e) {\n    e.stopPropagation();\n    controller.run('operation', _assign(_assign({}, props), {\n      opType: OP_TYPE_START_EDITING_TOPOLOGY\n    }));\n  };\n\n  var isEditing = model.focusKey === topicKey && model.focusMode === FOCUS_MODE_EDITING_TOPOLOGY;\n  var block = model.getTopic(topicKey).getBlock(BLOCK_TYPE_TOPOLOGY).block;\n  if (!isEditing && !block) return null;\n  var iconProps = {\n    className: iconClassName('topology'),\n    onClick: onClick,\n    tabIndex: -1\n  };\n  return createElement(TopicBlockIcon, _assign({}, iconProps));\n}\n\nvar ToolsConfig = [{\n  group: 'Basic',\n  children: [{\n    name: 'rectangle',\n    icon: 'icon-rect',\n    data: {\n      text: 'Topology',\n      rect: {\n        width: 100,\n        height: 100\n      },\n      paddingLeft: 10,\n      paddingRight: 10,\n      paddingTop: 10,\n      paddingBottom: 10,\n      name: 'rectangle',\n      icon: \"\\uE64D\",\n      iconFamily: 'topology',\n      iconColor: '#2f54eb'\n    }\n  }, {\n    name: 'rectangle',\n    icon: 'icon-rectangle',\n    data: {\n      text: 'rectangle',\n      rect: {\n        width: 200,\n        height: 50\n      },\n      paddingLeft: 10,\n      paddingRight: 10,\n      paddingTop: 10,\n      paddingBottom: 10,\n      borderRadius: 0.1,\n      name: 'rectangle'\n    }\n  }, {\n    name: 'circle',\n    icon: 'icon-circle',\n    data: {\n      text: 'circle',\n      rect: {\n        width: 100,\n        height: 100\n      },\n      name: 'circle',\n      textMaxLine: 1\n    }\n  }, {\n    name: 'triangle',\n    icon: 'icon-triangle',\n    data: {\n      text: 'triangle',\n      rect: {\n        width: 100,\n        height: 100\n      },\n      name: 'triangle'\n    }\n  }, {\n    name: 'diamond',\n    icon: 'icon-diamond',\n    data: {\n      text: 'diamond',\n      rect: {\n        width: 100,\n        height: 100\n      },\n      name: 'diamond'\n    }\n  }, {\n    name: 'pentagon',\n    icon: 'icon-pentagon',\n    data: {\n      text: 'pentagon',\n      rect: {\n        width: 100,\n        height: 100\n      },\n      name: 'pentagon'\n    }\n  }, {\n    name: 'hexagon',\n    icon: 'icon-hexagon',\n    data: {\n      text: 'hexagon',\n      rect: {\n        width: 100,\n        height: 100\n      },\n      paddingTop: 10,\n      paddingBottom: 10,\n      name: 'hexagon'\n    }\n  }, {\n    name: 'pentagram',\n    icon: 'icon-pentagram',\n    data: {\n      text: 'pentagram',\n      rect: {\n        width: 100,\n        height: 100\n      },\n      name: 'pentagram'\n    }\n  }, {\n    name: 'left arrow',\n    icon: 'icon-arrow-left',\n    data: {\n      text: '',\n      rect: {\n        width: 200,\n        height: 100\n      },\n      name: 'leftArrow'\n    }\n  }, {\n    name: 'right arrow',\n    icon: 'icon-arrow-right',\n    data: {\n      text: '',\n      rect: {\n        width: 200,\n        height: 100\n      },\n      name: 'rightArrow'\n    }\n  }, {\n    name: 'bidirectional arrow',\n    icon: 'icon-twoway-arrow',\n    data: {\n      text: '',\n      rect: {\n        width: 200,\n        height: 100\n      },\n      name: 'twowayArrow'\n    }\n  }, {\n    name: 'line',\n    icon: 'icon-line',\n    data: {\n      text: 'line',\n      rect: {\n        width: 100,\n        height: 100\n      },\n      name: 'line'\n    }\n  }, {\n    name: 'cloud',\n    icon: 'icon-cloud',\n    data: {\n      text: 'cloud',\n      rect: {\n        width: 100,\n        height: 100\n      },\n      name: 'cloud'\n    }\n  }, {\n    name: 'message',\n    icon: 'icon-msg',\n    data: {\n      text: 'message',\n      rect: {\n        width: 100,\n        height: 100\n      },\n      paddingLeft: 10,\n      paddingRight: 10,\n      paddingTop: 10,\n      paddingBottom: 10,\n      name: 'message'\n    }\n  }, {\n    name: 'file',\n    icon: 'icon-file',\n    data: {\n      text: 'file',\n      rect: {\n        width: 80,\n        height: 100\n      },\n      paddingLeft: 10,\n      paddingRight: 10,\n      paddingTop: 10,\n      paddingBottom: 10,\n      name: 'file'\n    }\n  }, {\n    name: 'text',\n    icon: 'icon-text',\n    data: {\n      text: 'text',\n      rect: {\n        width: 160,\n        height: 30\n      },\n      name: 'text'\n    }\n  }, {\n    name: 'image',\n    icon: 'icon-image',\n    data: {\n      text: '',\n      rect: {\n        width: 100,\n        height: 100\n      },\n      name: 'image',\n      image: '/assets/img/logo.png'\n    }\n  }, {\n    name: 'cube',\n    icon: 'icon-cube',\n    data: {\n      rect: {\n        width: 50,\n        height: 70\n      },\n      is3D: true,\n      z: 10,\n      zRotate: 15,\n      fillStyle: '#ddd',\n      name: 'cube',\n      icon: \"\\uE63C\",\n      iconFamily: 'topology',\n      iconColor: '#777',\n      iconSize: 30\n    }\n  }, {\n    name: 'people',\n    icon: 'icon-people',\n    data: {\n      rect: {\n        width: 70,\n        height: 100\n      },\n      name: 'people'\n    }\n  }, {\n    name: 'multi media',\n    icon: 'icon-pc',\n    data: {\n      text: 'multi media',\n      rect: {\n        width: 200,\n        height: 200\n      },\n      paddingLeft: 10,\n      paddingRight: 10,\n      paddingTop: 10,\n      paddingBottom: 10,\n      // strokeStyle: 'transparent',\n      name: 'div'\n    }\n  }]\n}, {\n  group: 'Flow Graph',\n  children: [{\n    name: 'start/end',\n    icon: 'icon-flow-start',\n    data: {\n      text: 'start',\n      rect: {\n        width: 120,\n        height: 40\n      },\n      borderRadius: 0.5,\n      name: 'rectangle'\n    }\n  }, {\n    name: 'flow',\n    icon: 'icon-rectangle',\n    data: {\n      text: 'flow',\n      rect: {\n        width: 120,\n        height: 40\n      },\n      name: 'rectangle'\n    }\n  }, {\n    name: 'judgement',\n    icon: 'icon-diamond',\n    data: {\n      text: 'judgement',\n      rect: {\n        width: 120,\n        height: 60\n      },\n      name: 'diamond'\n    }\n  }, {\n    name: 'data',\n    icon: 'icon-flow-data',\n    data: {\n      text: 'data',\n      rect: {\n        width: 120,\n        height: 50\n      },\n      name: 'flowData'\n    }\n  }, {\n    name: 'prepare',\n    icon: 'icon-flow-ready',\n    data: {\n      text: 'prepare',\n      rect: {\n        width: 120,\n        height: 50\n      },\n      name: 'hexagon'\n    }\n  }, {\n    name: 'sub flow',\n    icon: 'icon-flow-subprocess',\n    data: {\n      text: 'sub flow',\n      rect: {\n        width: 120,\n        height: 50\n      },\n      name: 'flowSubprocess'\n    }\n  }, {\n    name: 'database',\n    icon: 'icon-db',\n    data: {\n      text: 'database',\n      rect: {\n        width: 80,\n        height: 120\n      },\n      name: 'flowDb'\n    }\n  }, {\n    name: 'document',\n    icon: 'icon-flow-document',\n    data: {\n      text: 'document',\n      rect: {\n        width: 120,\n        height: 100\n      },\n      name: 'flowDocument'\n    }\n  }, {\n    name: 'internal storage',\n    icon: 'icon-internal-storage',\n    data: {\n      text: 'internal storage',\n      rect: {\n        width: 120,\n        height: 80\n      },\n      name: 'flowInternalStorage'\n    }\n  }, {\n    name: 'external storage',\n    icon: 'icon-extern-storage',\n    data: {\n      text: 'external storage',\n      rect: {\n        width: 120,\n        height: 80\n      },\n      name: 'flowExternStorage'\n    }\n  }, {\n    name: 'queue',\n    icon: 'icon-flow-queue',\n    data: {\n      text: 'queue',\n      rect: {\n        width: 100,\n        height: 100\n      },\n      name: 'flowQueue'\n    }\n  }, {\n    name: 'input manually',\n    icon: 'icon-flow-manually',\n    data: {\n      text: 'input manually',\n      rect: {\n        width: 120,\n        height: 80\n      },\n      name: 'flowManually'\n    }\n  }, {\n    name: 'display',\n    icon: 'icon-flow-display',\n    data: {\n      text: 'display',\n      rect: {\n        width: 120,\n        height: 80\n      },\n      name: 'flowDisplay'\n    }\n  }, {\n    name: 'parallel',\n    icon: 'icon-flow-parallel',\n    data: {\n      text: 'parallel',\n      rect: {\n        width: 120,\n        height: 50\n      },\n      name: 'flowParallel'\n    }\n  }, {\n    name: 'comment',\n    icon: 'icon-flow-comment',\n    data: {\n      text: 'comment',\n      rect: {\n        width: 100,\n        height: 100\n      },\n      name: 'flowComment'\n    }\n  }]\n}, {\n  group: 'Activity Diagram',\n  children: [{\n    name: 'start',\n    icon: 'icon-inital',\n    data: {\n      text: '',\n      rect: {\n        width: 30,\n        height: 30\n      },\n      name: 'circle',\n      fillStyle: '#555',\n      strokeStyle: 'transparent'\n    }\n  }, {\n    name: 'end',\n    icon: 'icon-final',\n    data: {\n      text: '',\n      rect: {\n        width: 30,\n        height: 30\n      },\n      name: 'activityFinal'\n    }\n  }, {\n    name: 'action',\n    icon: 'icon-action',\n    data: {\n      text: 'action',\n      rect: {\n        width: 120,\n        height: 50\n      },\n      borderRadius: 0.25,\n      name: 'rectangle'\n    }\n  }, {\n    name: 'decision/merge',\n    icon: 'icon-diamond',\n    data: {\n      text: '',\n      rect: {\n        width: 120,\n        height: 50\n      },\n      name: 'diamond'\n    }\n  }, {\n    name: 'vertical swimming lane',\n    icon: 'icon-swimlane-v',\n    data: {\n      text: 'vertical swimming lane',\n      rect: {\n        width: 200,\n        height: 500\n      },\n      name: 'swimlaneV'\n    }\n  }, {\n    name: 'horizontal swimming lane',\n    icon: 'icon-swimlane-h',\n    data: {\n      text: 'horizontal swimming lane',\n      rect: {\n        width: 500,\n        height: 200\n      },\n      name: 'swimlaneH'\n    }\n  }, {\n    name: 'vertical fork/merge',\n    icon: 'icon-fork-v',\n    data: {\n      text: '',\n      rect: {\n        width: 10,\n        height: 150\n      },\n      name: 'forkV',\n      fillStyle: '#555',\n      strokeStyle: 'transparent'\n    }\n  }, {\n    name: 'horizontal fork/merge',\n    icon: 'icon-fork',\n    data: {\n      text: '',\n      rect: {\n        width: 150,\n        height: 10\n      },\n      name: 'forkH',\n      fillStyle: '#555',\n      strokeStyle: 'transparent'\n    }\n  }]\n}, {\n  group: 'Sequence Diagram && Class Diagram',\n  children: [{\n    name: 'lifeline',\n    icon: 'icon-lifeline',\n    data: {\n      text: 'lifeline',\n      rect: {\n        width: 150,\n        height: 400\n      },\n      name: 'lifeline'\n    }\n  }, {\n    name: 'activation',\n    icon: 'icon-focus',\n    data: {\n      text: '',\n      rect: {\n        width: 12,\n        height: 200\n      },\n      name: 'sequenceFocus'\n    }\n  }, {\n    name: 'simple class',\n    icon: 'icon-simple-class',\n    data: {\n      text: 'Topolgoy',\n      rect: {\n        width: 270,\n        height: 200\n      },\n      paddingTop: 40,\n      font: {\n        fontFamily: 'Arial',\n        color: '#222',\n        fontWeight: 'bold'\n      },\n      fillStyle: '#ffffba',\n      strokeStyle: '#7e1212',\n      name: 'simpleClass',\n      children: [{\n        text: '- name: string\\n+ setName(name: string): void',\n        name: 'text',\n        paddingLeft: 10,\n        paddingRight: 10,\n        paddingTop: 10,\n        paddingBottom: 10,\n        rectInParent: {\n          x: 0,\n          y: 0,\n          width: '100%',\n          height: '100%',\n          rotate: 0\n        },\n        font: {\n          fontFamily: 'Arial',\n          color: '#222',\n          textAlign: 'left',\n          textBaseline: 'top'\n        }\n      }]\n    }\n  }, {\n    name: 'class',\n    icon: 'icon-class',\n    data: {\n      text: 'Topolgoy',\n      rect: {\n        width: 270,\n        height: 200\n      },\n      paddingTop: 40,\n      font: {\n        fontFamily: 'Arial',\n        color: '#222',\n        fontWeight: 'bold'\n      },\n      fillStyle: '#ffffba',\n      strokeStyle: '#7e1212',\n      name: 'interfaceClass',\n      children: [{\n        text: '- name: string',\n        name: 'text',\n        paddingLeft: 10,\n        paddingRight: 10,\n        paddingTop: 10,\n        paddingBottom: 10,\n        rectInParent: {\n          x: 0,\n          y: 0,\n          width: '100%',\n          height: '50%',\n          rotate: 0\n        },\n        font: {\n          fontFamily: 'Arial',\n          color: '#222',\n          textAlign: 'left',\n          textBaseline: 'top'\n        }\n      }, {\n        text: '+ setName(name: string): void',\n        name: 'text',\n        paddingLeft: 10,\n        paddingRight: 10,\n        paddingTop: 10,\n        paddingBottom: 10,\n        rectInParent: {\n          x: 0,\n          y: '50%',\n          width: '100%',\n          height: '50%',\n          rotate: 0\n        },\n        font: {\n          fontFamily: 'Arial',\n          color: '#222',\n          textAlign: 'left',\n          textBaseline: 'top'\n        }\n      }]\n    }\n  }]\n}];\nvar Root = styled.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  position: relative;\\n  display: flex;\\n  width: 100%;\\n  height: 100%;\\n\"], [\"\\n  position: relative;\\n  display: flex;\\n  width: 100%;\\n  height: 100%;\\n\"])));\nvar Canvas = styled.div(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  flex: 1;\\n  width: initial;\\n  position: relative;\\n  overflow: auto;\\n  background: #fff;\\n\"], [\"\\n  flex: 1;\\n  width: initial;\\n  position: relative;\\n  overflow: auto;\\n  background: #fff;\\n\"])));\nvar Tools = styled.div(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  flex-shrink: 0;\\n  width: 1.75rem;\\n  background-color: #f8f8f8;\\n  border-right: 1px solid #d9d9d9;\\n  overflow-y: auto;\\n\"], [\"\\n  flex-shrink: 0;\\n  width: 1.75rem;\\n  background-color: #f8f8f8;\\n  border-right: 1px solid #d9d9d9;\\n  overflow-y: auto;\\n\"])));\nvar ToolTitle = styled.div(templateObject_4 || (templateObject_4 = __makeTemplateObject([\"\\n  color: #0d1a26;\\n  font-weight: 600;\\n  font-size: 0.12rem;\\n  padding: 0.05rem 0.1rem;\\n  margin-top: 0.08rem;\\n  border-bottom: 1px solid #ddd;\\n\\n  &:first-child {\\n    border-top: none;\\n  }\\n\"], [\"\\n  color: #0d1a26;\\n  font-weight: 600;\\n  font-size: 0.12rem;\\n  padding: 0.05rem 0.1rem;\\n  margin-top: 0.08rem;\\n  border-bottom: 1px solid #ddd;\\n\\n  &:first-child {\\n    border-top: none;\\n  }\\n\"])));\nvar ToolbarButtons = styled.div(templateObject_5 || (templateObject_5 = __makeTemplateObject([\"\\n  padding: 0.1rem 0;\\n  a {\\n    display: inline-block;\\n    color: @text-color;\\n    line-height: 1;\\n    width: 0.4rem;\\n    height: 0.4rem;\\n    text-align: center;\\n    text-decoration: none !important;\\n\\n    .iconfont {\\n      font-size: 0.24rem;\\n    }\\n  }\\n\"], [\"\\n  padding: 0.1rem 0;\\n  a {\\n    display: inline-block;\\n    color: @text-color;\\n    line-height: 1;\\n    width: 0.4rem;\\n    height: 0.4rem;\\n    text-align: center;\\n    text-decoration: none !important;\\n\\n    .iconfont {\\n      font-size: 0.24rem;\\n    }\\n  }\\n\"])));\n\nvar TopologyDiagram =\n/** @class */\nfunction (_super) {\n  __extends(TopologyDiagram, _super);\n\n  function TopologyDiagram() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      id: '',\n      data: null,\n      toolsConfig: ToolsConfig,\n      iconfont: {\n        fontSize: '0.24rem'\n      }\n    };\n    _this.canvasOptions = {};\n\n    _this.handleContextMenu = function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n    };\n\n    _this.onMessage = function (event, data) {\n      var getRef = _this.props.getRef;\n      var diagramUtil = getRef(REF_KEY_TOPOLOGY_DIAGRAM_UTIL);\n\n      switch (event) {\n        case 'resize':\n        case 'scale':\n        case 'locked':\n          if (_this.topology && diagramUtil) {\n            diagramUtil.setCanvasData(_this.topology.data);\n          }\n\n          break;\n      }\n    };\n\n    return _this;\n  }\n\n  TopologyDiagram.prototype.canvasRegister = function () {\n    registerNode('flowData', flowData, flowDataAnchors, flowDataIconRect, flowDataTextRect);\n    registerNode('flowSubprocess', flowSubprocess, null, flowSubprocessIconRect, flowSubprocessTextRect);\n    registerNode('flowDb', flowDb, null, flowDbIconRect, flowDbTextRect);\n    registerNode('flowDocument', flowDocument, flowDocumentAnchors, flowDocumentIconRect, flowDocumentTextRect);\n    registerNode('flowInternalStorage', flowInternalStorage, null, flowInternalStorageIconRect, flowInternalStorageTextRect);\n    registerNode('flowExternStorage', flowExternStorage, flowExternStorageAnchors, flowExternStorageIconRect, flowExternStorageTextRect);\n    registerNode('flowQueue', flowQueue, null, flowQueueIconRect, flowQueueTextRect);\n    registerNode('flowManually', flowManually, flowManuallyAnchors, flowManuallyIconRect, flowManuallyTextRect);\n    registerNode('flowDisplay', flowDisplay, flowDisplayAnchors, flowDisplayIconRect, flowDisplayTextRect);\n    registerNode('flowParallel', flowParallel, flowParallelAnchors, null, null);\n    registerNode('flowComment', flowComment, flowCommentAnchors, null, null); // activity\n\n    registerNode('activityFinal', activityFinal, null, activityFinalIconRect, activityFinalTextRect);\n    registerNode('swimlaneV', swimlaneV, null, swimlaneVIconRect, swimlaneVTextRect);\n    registerNode('swimlaneH', swimlaneH, null, swimlaneHIconRect, swimlaneHTextRect);\n    registerNode('forkH', fork, forkHAnchors, forkIconRect, forkTextRect);\n    registerNode('forkV', fork, forkVAnchors, forkIconRect, forkTextRect); // class\n\n    registerNode('simpleClass', simpleClass, null, simpleClassIconRect, simpleClassTextRect);\n    registerNode('interfaceClass', interfaceClass, null, interfaceClassIconRect, interfaceClassTextRect); // sequence\n\n    registerNode('lifeline', lifeline, lifelineAnchors, lifelineIconRect, lifelineTextRect);\n    registerNode('sequenceFocus', sequenceFocus, sequenceFocusAnchors, sequenceFocusIconRect, sequenceFocusTextRect);\n  };\n\n  TopologyDiagram.prototype.componentDidMount = function () {\n    this.canvasRegister();\n    this.canvasOptions.on = this.onMessage;\n    this.topology = new Topology('topology-canvas', this.canvasOptions);\n    this.openData();\n  };\n\n  TopologyDiagram.prototype.componentDidUpdate = function () {\n    this.openData();\n  };\n\n  TopologyDiagram.prototype.openData = function () {\n    var _a = this.props,\n        model = _a.model,\n        topicKey = _a.topicKey;\n    var topic = model.getTopic(topicKey);\n    var block = topic.getBlock(BLOCK_TYPE_TOPOLOGY).block;\n\n    if (block && block.data && block.data !== '') {\n      this.setState({\n        data: block.data\n      });\n      this.topology.open(block.data);\n    }\n  };\n\n  TopologyDiagram.prototype.onDrag = function (event, node) {\n    event.dataTransfer.setData('Text', JSON.stringify(node.data));\n  };\n\n  TopologyDiagram.prototype.renderTools = function () {\n    var _this = this;\n\n    return createElement(Tools, null, this.state.toolsConfig.map(function (item, index) {\n      return createElement(\"div\", {\n        key: index\n      }, createElement(ToolTitle, null, item.group), createElement(ToolbarButtons, null, //TODO\n      //@ts-ignore\n      item.children.map(function (btn, i) {\n        return createElement(\"a\", {\n          key: i,\n          title: btn.name,\n          draggable: true,\n          onDragStart: function onDragStart(ev) {\n            _this.onDrag(ev, btn);\n          }\n        }, createElement(\"i\", {\n          className: 'iconfont ' + btn.icon,\n          style: _this.state.iconfont\n        }));\n      })));\n    }));\n  };\n\n  TopologyDiagram.prototype.render = function () {\n    return createElement(Root, null, this.renderTools(), createElement(Canvas, {\n      id: \"topology-canvas\",\n      onContextMenu: this.handleContextMenu\n    }));\n  };\n\n  return TopologyDiagram;\n}(BaseWidget);\n\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5;\nvar Root$1 = styled.div(templateObject_1$1 || (templateObject_1$1 = __makeTemplateObject([\"\\n  position: absolute;\\n  background: white;\\n  right: 30px;\\n  bottom: 20px;\\n  border-radius: 2px;\\n  z-index: 3;\\n  display: flex;\\n  flex-direction: row;\\n  user-select: none;\\n\"], [\"\\n  position: absolute;\\n  background: white;\\n  right: 30px;\\n  bottom: 20px;\\n  border-radius: 2px;\\n  z-index: 3;\\n  display: flex;\\n  flex-direction: row;\\n  user-select: none;\\n\"])));\nvar Item_ = styled(Btn)(templateObject_2$1 || (templateObject_2$1 = __makeTemplateObject([\"\\n  margin: 10px;\\n\"], [\"\\n  margin: 10px;\\n\"])));\n\nvar Item = function Item(props) {\n  return createElement(Tooltip, {\n    content: props.tooltip,\n    position: Position.TOP,\n    className: Classes.ICON\n  }, createElement(Item_, {\n    onClick: props.onClick\n  }, props.children));\n};\n\nvar ZoomFactorSpan = styled.span(templateObject_3$1 || (templateObject_3$1 = __makeTemplateObject([\"\\n  display: inline-block;\\n  width: 80px;\\n  height: 18px;\\n\"], [\"\\n  display: inline-block;\\n  width: 80px;\\n  height: 18px;\\n\"])));\n\nvar TopologyDiagramUtils =\n/** @class */\nfunction (_super) {\n  __extends(TopologyDiagramUtils, _super);\n\n  function TopologyDiagramUtils(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.setCanvasData = function (canvasData) {\n      _this.setState({\n        canvasData: canvasData\n      });\n    };\n\n    _this.onClickResetZoom = function (e) {\n      var topology = _this.getTopology();\n\n      topology.scaleTo(1);\n    };\n\n    _this.state = {\n      deleteConfirm: false,\n      canvasData: null\n    };\n    return _this;\n  }\n\n  TopologyDiagramUtils.prototype.getTopology = function () {\n    var getRef = this.props.getRef;\n    return getRef(REF_KEY_TOPOLOGY_DIAGRAM).topology;\n  };\n\n  TopologyDiagramUtils.prototype.render = function () {\n    var _this = this;\n\n    var props = this.props;\n    var controller = props.controller;\n\n    var onClickDelete = function onClickDelete(e) {\n      _this.setState({\n        deleteConfirm: true\n      });\n    };\n\n    var deleteAlertProps = {\n      isOpen: this.state.deleteConfirm,\n      cancelButtonText: 'cancel',\n      onConfirm: function onConfirm(e) {\n        controller.run('operation', _assign(_assign({}, props), {\n          opType: OpType.DELETE_TOPIC_BLOCK,\n          blockType: BLOCK_TYPE_TOPOLOGY\n        }));\n      },\n      onCancel: function onCancel(e) {\n        _this.setState({\n          deleteConfirm: false\n        });\n      },\n      onClose: function onClose(e) {\n        _this.setState({\n          deleteConfirm: false\n        });\n      }\n    };\n    var canvasData = this.state.canvasData;\n    var scale = canvasData ? canvasData.scale : 1;\n    return createElement(Root$1, null, createElement(Item, {\n      onClick: this.onClickResetZoom,\n      tooltip: \"reset zoom\"\n    }, createElement(ZoomFactorSpan, null, \"zoom:\" + Math.floor(scale * 100) + \"%\")), createElement(Item, {\n      onClick: onClickDelete,\n      tooltip: \"delete this diagram\"\n    }, Icon(IconName.TRASH)), createElement(Alert, _assign({}, deleteAlertProps), createElement(\"p\", null, \"Are you confirm to delete this topology diagram?\")));\n  };\n\n  return TopologyDiagramUtils;\n}(Component);\n\nvar templateObject_1$1, templateObject_2$1, templateObject_3$1;\nvar DiagramWrapper = styled.div(templateObject_1$2 || (templateObject_1$2 = __makeTemplateObject([\"\\n  position: relative;\\n  overflow: auto;\\n  padding: 0px 0px 0px 5px;\\n  background: #88888850;\\n  height: 100%;\\n\"], [\"\\n  position: relative;\\n  overflow: auto;\\n  padding: 0px 0px 0px 5px;\\n  background: #88888850;\\n  height: 100%;\\n\"])));\nvar Title = styled.span(templateObject_2$2 || (templateObject_2$2 = __makeTemplateObject([\"\\n  padding: 0px 20px;\\n\"], [\"\\n  padding: 0px 20px;\\n\"])));\n\nfunction TopologyDrawer(props) {\n  var controller = props.controller,\n      topicKey = props.topicKey,\n      getRef = props.getRef,\n      saveRef = props.saveRef;\n\n  var onDiagramClose = function onDiagramClose(e) {\n    e.stopPropagation(); // const key = `topic-topology-data-${topicKey}`;\n    // const topologyData = controller.run('deleteTempValue', { key });\n\n    var diagram = getRef(REF_KEY_TOPOLOGY_DIAGRAM);\n    var topologyData = diagram.topology.data;\n    controller.run('operation', _assign(_assign({}, props), {\n      opType: OpType.SET_TOPIC_BLOCK,\n      topicKey: topicKey,\n      blockType: BLOCK_TYPE_TOPOLOGY,\n      data: topologyData,\n      focusMode: FocusMode.NORMAL\n    }));\n  };\n\n  var diagramProps = _assign(_assign({}, props), {\n    ref: saveRef(REF_KEY_TOPOLOGY_DIAGRAM)\n  });\n\n  var utilProps = _assign(_assign({}, props), {\n    ref: saveRef(REF_KEY_TOPOLOGY_DIAGRAM_UTIL)\n  });\n\n  return createElement(Drawer, {\n    title: createElement(Title, null, \"Topology Diagram Editor\"),\n    icon: Icon('topology'),\n    isOpen: true,\n    hasBackdrop: true,\n    backdropClassName: \"backdrop\",\n    backdropProps: {\n      onMouseDown: cancelEvent\n    },\n    canOutsideClickClose: false,\n    isCloseButtonShown: true,\n    onClose: onDiagramClose,\n    size: \"100%\"\n  }, createElement(DiagramWrapper, {\n    onClick: cancelEvent,\n    onDoubleClick: cancelEvent\n  }, createElement(TopologyDiagram, _assign({}, diagramProps)), createElement(TopologyDiagramUtils, _assign({}, utilProps))));\n}\n\nvar templateObject_1$2, templateObject_2$2;\n\nfunction startEditingTopology(_a) {\n  var model = _a.model,\n      topicKey = _a.topicKey;\n  var topic = model.getTopic(topicKey);\n  var block = topic.getBlock(BLOCK_TYPE_TOPOLOGY).block;\n\n  if (block == null || block.data == null) {\n    model = ModelModifier.setBlockData({\n      model: model,\n      topicKey: topicKey,\n      blockType: BLOCK_TYPE_TOPOLOGY,\n      data: ''\n    });\n  }\n\n  model = ModelModifier.focusTopic({\n    model: model,\n    topicKey: topicKey,\n    focusMode: FOCUS_MODE_EDITING_TOPOLOGY\n  });\n  return model;\n}\n\nfunction TopologyDiagramPlugin() {\n  return {\n    renderTopicBlock: function renderTopicBlock(props, next) {\n      var controller = props.controller,\n          block = props.block;\n\n      if (block.type === BLOCK_TYPE_TOPOLOGY) {\n        return controller.run('renderTopicBlockTopology', props);\n      }\n\n      return next();\n    },\n    renderTopicBlockTopology: function renderTopicBlockTopology(props) {\n      return createElement(TopicBlockTopology, _assign({}, props));\n    },\n    renderDrawer: function renderDrawer(props, next) {\n      var model = props.model;\n\n      if (model.focusMode === FOCUS_MODE_EDITING_TOPOLOGY) {\n        var topoProps = _assign(_assign({}, props), {\n          topicKey: model.focusKey,\n          key: 'topology-drawer'\n        });\n\n        return createElement(TopologyDrawer, _assign({}, topoProps));\n      }\n\n      return next();\n    },\n    customizeTopicContextMenu: function customizeTopicContextMenu(props, next) {\n      var model = props.model,\n          topicKey = props.topicKey,\n          controller = props.controller;\n\n      function editTopology(e) {\n        controller.run('operation', _assign(_assign({}, props), {\n          opType: OP_TYPE_START_EDITING_TOPOLOGY\n        }));\n      }\n\n      return createElement(Fragment, null, next(), createElement(MenuDivider, null), createElement(MenuItem, {\n        icon: Icon('topology'),\n        text: \"Edit Topology Diagram\",\n        onClick: editTopology\n      }));\n    },\n    getOpMap: function getOpMap(props, next) {\n      var opMap = next();\n      opMap.set(OP_TYPE_START_EDITING_TOPOLOGY, startEditingTopology);\n      return opMap;\n    }\n  };\n}\n\nexport default TopologyDiagramPlugin;","import React from \"react\";\nimport { iconClassName } from \"@blink-mind/renderer-react\";\n\nexport function ToolbarItemOpen(props) {\n  const onClickOpenFile = e => {\n    const { diagram } = props;\n    const diagramProps = diagram.getDiagramProps();\n    const { controller } = diagramProps;\n    const input = document.createElement(\"input\");\n    input.type = \"file\";\n    input.accept = \".json,.bm,.blinkmind\";\n    input.addEventListener(\"change\", evt => {\n      const file = evt.target.files[0];\n      const fr = new FileReader();\n      fr.onload = evt => {\n        const txt = evt.target.result;\n        let obj = JSON.parse(txt);\n        let model = controller.run(\"deserializeModel\", { controller, obj });\n        controller.change(model);\n      };\n      fr.readAsText(file);\n    });\n    input.click();\n  };\n  return (\n    <div\n      className={`bm-toolbar-item ${iconClassName(\"openfile\")}`}\n      onClick={onClickOpenFile}\n    />\n  );\n}\n","import React from \"react\";\nimport { DiagramLayoutType } from \"@blink-mind/core\";\nimport cx from \"classnames\";\nimport { Icon, iconClassName } from \"@blink-mind/renderer-react\";\nimport { Menu, MenuItem, Popover } from \"@blueprintjs/core\";\n\nexport function ToolbarItemLayout(props) {\n  const layoutDirs = [\n    [\n      DiagramLayoutType.LEFT_AND_RIGHT,\n      \"Left And Right\",\n      \"layout-left-and-right\"\n    ],\n    [DiagramLayoutType.LEFT_TO_RIGHT, \"Only Right\", \"layout-right\"],\n    [DiagramLayoutType.RIGHT_TO_LEFT, \"Only Left\", \"layout-left\"]\n  ];\n\n  const onClickSetLayout = layoutDir => e => {\n    const { diagram } = props;\n    const diagramProps = diagram.getDiagramProps();\n    const { controller } = diagramProps;\n    controller.run(\"setLayoutDir\", { ...diagramProps, layoutDir });\n  };\n\n  return (\n    <div\n      className={cx(\"bm-toolbar-item\", iconClassName(\"layout-left-and-right\"))}\n    >\n      <Popover enforceFocus={false}>\n        <div className=\"bm-toolbar-popover-target\" />\n        <Menu>\n          {layoutDirs.map(dir => (\n            <MenuItem\n              key={dir[1]}\n              icon={Icon(dir[2])}\n              text={dir[1]}\n              onClick={onClickSetLayout(dir[0])}\n            />\n          ))}\n        </Menu>\n      </Popover>\n    </div>\n  );\n};\n","import defaultThemeImg from '../../images/default.jpg';\nimport theme1Img from '../../images/theme1.jpg';\nimport theme2Img from '../../images/theme2.jpg';\nimport theme3Img from '../../images/theme3.jpg';\nimport theme4Img from '../../images/theme4.jpg';\nimport cx from 'classnames';\nimport { iconClassName } from '@blink-mind/renderer-react';\nimport { Popover } from '@blueprintjs/core';\nimport React from 'react';\n\nexport function ToolbarItemTheme(props) {\n  const onClickSetTheme = themeKey => e => {\n    const { diagram } = props;\n    const diagramProps = diagram.getDiagramProps();\n    const { controller } = diagramProps;\n    controller.run('setTheme', { ...diagramProps, themeKey });\n  };\n  const themes = [\n    ['default', defaultThemeImg],\n    ['theme1', theme1Img],\n    ['theme2', theme2Img],\n    ['theme3', theme3Img],\n    ['theme4', theme4Img]\n  ];\n\n  return (\n    <div className={cx('bm-toolbar-item', iconClassName('theme'))}>\n      <Popover enforceFocus={false}>\n        <div className=\"bm-toolbar-popover-target\" />\n        <div className=\"bm-popover-theme\">\n          {themes.map(theme => (\n            <div className=\"bm-theme-item\" onClick={onClickSetTheme(theme[0])}>\n              <img className=\"bm-theme-img\" src={theme[1]} alt={theme[0]} />\n            </div>\n          ))}\n        </div>\n      </Popover>\n    </div>\n  );\n}\n","import { Model } from \"@blink-mind/core\";\n\nexport function createKey() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    const r = (Math.random() * 16) | 0,\n      v = c == 'x' ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n}\n\nexport const downloadFile = (url, filename) => {\n  const link = document.createElement(\"a\");\n  link.href = url;\n  link.download = filename;\n  link.click();\n};\n\nexport function generateSimpleModel() {\n\n  const rootKey = createKey();\n\n  return Model.create({\n    rootTopicKey: rootKey,\n    topics: [\n      {\n        key: rootKey,\n        blocks: [{ type: \"CONTENT\", data: \"MainTopic\" }],\n      }\n    ]\n  });\n}\n","import cx from \"classnames\";\nimport { iconClassName } from \"@blink-mind/renderer-react\";\nimport { Menu, MenuDivider, MenuItem, Popover } from \"@blueprintjs/core\";\nimport React from \"react\";\nimport { downloadFile } from \"../../utils\";\n\nexport function ToolbarItemExport(props) {\n  const onClickExportJson = e => {\n    const { diagram } = props;\n    const diagramProps = diagram.getDiagramProps();\n    const { controller, model } = diagramProps;\n\n    const json = controller.run(\"serializeModel\", diagramProps);\n    const jsonStr = JSON.stringify(json);\n    const url = `data:text/plain,${encodeURIComponent(jsonStr)}`;\n    const title = controller.run(\"getTopicTitle\", {\n      ...diagramProps,\n      topicKey: model.rootTopicKey\n    });\n    downloadFile(url, `${title}.blinkmind`);\n  };\n\n  return (\n    <div className={cx(\"bm-toolbar-item\", iconClassName(\"export\"))}>\n      <Popover enforceFocus={false}>\n        <div className=\"bm-toolbar-popover-target\" />\n        <Menu>\n          <MenuItem text=\"JSON(.json)\" onClick={onClickExportJson} />\n          <MenuDivider />\n        </Menu>\n      </Popover>\n    </div>\n  );\n}\n","import React from \"react\";\nimport cx from \"classnames\";\nimport \"./Toolbar.css\";\nimport { iconClassName, Icon } from \"@blink-mind/renderer-react\";\nimport { ToolbarItemOpen } from \"./toolbar-item-open\";\nimport { ToolbarItemLayout } from \"./toolbar-item-layout\";\nimport { ToolbarItemTheme } from \"./toolbar-item-theme\";\nimport { ToolbarItemExport } from \"./toolbar-item-export\";\n\n// import debug from \"debug\";\n// const log = debug(\"app\");\n\nexport class Toolbar extends React.PureComponent {\n  render() {\n    const props = this.props;\n\n    const { onClickUndo, onClickRedo, canUndo, canRedo } = props;\n\n    return (\n      <div className=\"bm-toolbar\">\n        <ToolbarItemOpen {...props} />\n        <ToolbarItemExport {...props} />\n        <ToolbarItemTheme {...props} />\n        <ToolbarItemLayout {...props} />\n\n        <div\n          className={cx(\"bm-toolbar-item\", iconClassName(\"undo\"), {\n            \"bm-toolbar-item-disabled\": !canUndo\n          })}\n          onClick={onClickUndo}\n        />\n\n        <div\n          className={cx(\"bm-toolbar-item\", iconClassName(\"redo\"), {\n            \"bm-toolbar-item-disabled\": !canRedo\n          })}\n          onClick={onClickRedo}\n        />\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport { Diagram } from \"@blink-mind/renderer-react\";\nimport RichTextEditorPlugin from \"@blink-mind/plugin-rich-text-editor\";\nimport { JsonSerializerPlugin } from \"@blink-mind/plugin-json-serializer\";\nimport { ThemeSelectorPlugin } from \"@blink-mind/plugin-theme-selector\";\nimport TopologyDiagramPlugin from \"@blink-mind/plugin-topology-diagram\";\nimport { Toolbar } from \"./toolbar/toolbar\";\nimport { generateSimpleModel } from \"../utils\";\nimport \"@blink-mind/renderer-react/lib/main.css\";\nimport debug from \"debug\";\n\nconst log = debug(\"app\");\n\nconst plugins = [\n  RichTextEditorPlugin(),\n  JsonSerializerPlugin(),\n  ThemeSelectorPlugin(),\n  TopologyDiagramPlugin()\n];\n\nexport class Mindmap extends React.Component {\n  constructor(props) {\n    super(props);\n    this.initModel();\n  }\n\n  diagram;\n  diagramRef = ref => {\n    this.diagram = ref;\n    this.setState({});\n  };\n\n  initModel() {\n    const model = generateSimpleModel();\n    this.state = { model };\n  }\n\n  onClickUndo = e => {\n    const props = this.diagram.getDiagramProps();\n    const { controller } = props;\n    controller.run(\"undo\", props);\n  };\n\n  onClickRedo = e => {\n    const props = this.diagram.getDiagramProps();\n    const { controller } = props;\n    controller.run(\"redo\", props);\n  };\n\n  renderDiagram() {\n    return (\n      <Diagram\n        ref={this.diagramRef}\n        model={this.state.model}\n        onChange={this.onChange}\n        plugins={plugins}\n      />\n    );\n  }\n\n  renderToolbar() {\n    const props = this.diagram.getDiagramProps();\n    const { controller } = props;\n    const canUndo = controller.run(\"canUndo\", props);\n    const canRedo = controller.run(\"canRedo\", props);\n    const toolbarProps = {\n      diagram: this.diagram,\n      onClickUndo: this.onClickUndo,\n      onClickRedo: this.onClickRedo,\n      canUndo,\n      canRedo,\n    };\n    return <Toolbar {...toolbarProps} />;\n  }\n\n  onChange = model => {\n    this.setState({\n      model\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"mindmap\">\n        {this.diagram && this.renderToolbar()}\n        {this.renderDiagram()}\n      </div>\n    );\n  }\n}\n\nexport default Mindmap;\n","import React from \"react\";\nimport Mindmap from \"./component/mindmap\";\nimport \"./App.css\";\n\nfunction App() {\n  return <Mindmap />;\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nlet debugNameSpaces = [\n  \"app\"\n  // \"node:*\",\n];\n\nlocalStorage.debug = debugNameSpaces.join(\",\");\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}